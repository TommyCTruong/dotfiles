/*! For license information please see bundle.js.LICENSE.txt */
var source;(()=>{var e={5365:e=>{for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var n=r||0,i=t;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},9377:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},2106:(e,t,r)=>{var n=r(9377),i=r(5365);e.exports=function(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},4354:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9772);var i=function(){function e(){this.errorCount=0}return e.prototype.getDelay=function(){return 0===this.errorCount?0:1e3*n.BACKOFF_BASE_WAIT_SECONDS_BY_ERROR_COUNT[Math.min(n.BACKOFF_BASE_WAIT_SECONDS_BY_ERROR_COUNT.length-1,this.errorCount)]+Math.round(1e3*Math.random())},e.prototype.countError=function(){this.errorCount<n.BACKOFF_BASE_WAIT_SECONDS_BY_ERROR_COUNT.length-1&&this.errorCount++},e.prototype.reset=function(){this.errorCount=0},e}();t.default=i},4621:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(3363),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.makeGetRequest=function(e,t){return s.makeGetRequest(e,t)},t.prototype.getConfigDefaults=function(){return{autoUpdate:!1}},t}(o(r(3718)).default);t.default=a},3363:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9772),i=r(3023).getLogger("DatafileManager");t.makeGetRequest=function(e,t){var r=new XMLHttpRequest,o=new Promise((function(o,s){r.open("GET",e,!0),function(e,t){Object.keys(e).forEach((function(r){var n=e[r];t.setRequestHeader(r,n)}))}(t,r),r.onreadystatechange=function(){if(4===r.readyState){if(0===r.status)return void s(new Error("Request error"));var e=function(e){var t=e.getAllResponseHeaders();if(null===t)return{};var r=t.split("\r\n"),n={};return r.forEach((function(e){var t=e.indexOf(": ");if(t>-1){var r=e.slice(0,t),i=e.slice(t+2);i.length>0&&(n[r]=i)}})),n}(r),t={statusCode:r.status,body:r.responseText,headers:e};o(t)}},r.timeout=n.REQUEST_TIMEOUT_MS,r.ontimeout=function(){i.error("Request timed out")},r.send()}));return{responsePromise:o,abort:function(){r.abort()}}}},9772:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_UPDATE_INTERVAL=3e5,t.MIN_UPDATE_INTERVAL=1e3,t.DEFAULT_URL_TEMPLATE="https://cdn.optimizely.com/datafiles/%s.json",t.DEFAULT_AUTHENTICATED_URL_TEMPLATE="https://config.optimizely.com/datafiles/auth/%s.json",t.BACKOFF_BASE_WAIT_SECONDS_BY_ERROR_COUNT=[0,8,16,32,64,128,256,512],t.REQUEST_TIMEOUT_MS=6e4},325:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.listeners={},this.listenerId=1}return e.prototype.on=function(e,t){var r=this;this.listeners[e]||(this.listeners[e]={});var n=String(this.listenerId);return this.listenerId++,this.listeners[e][n]=t,function(){r.listeners[e]&&delete r.listeners[e][n]}},e.prototype.emit=function(e,t){var r=this.listeners[e];r&&Object.keys(r).forEach((function(e){(0,r[e])(t)}))},e.prototype.removeAllListeners=function(){this.listeners={}},e}();t.default=r},3718:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3023),s=r(2306),a=i(r(325)),c=r(9772),u=i(r(4354)),l=o.getLogger("DatafileManager");function h(e){return e>=200&&e<400}var f={get:function(){return Promise.resolve("")},set:function(){return Promise.resolve()},contains:function(){return Promise.resolve(!1)},remove:function(){return Promise.resolve()}},d=function(){function e(e){var t=this,r=n(n({},this.getConfigDefaults()),e),i=r.datafile,o=r.autoUpdate,h=void 0!==o&&o,d=r.sdkKey,p=r.updateInterval,m=void 0===p?c.DEFAULT_UPDATE_INTERVAL:p,g=r.urlTemplate,v=void 0===g?c.DEFAULT_URL_TEMPLATE:g,y=r.cache,E=void 0===y?f:y;this.cache=E,this.cacheKey="opt-datafile-"+d,this.isReadyPromiseSettled=!1,this.readyPromiseResolver=function(){},this.readyPromiseRejecter=function(){},this.readyPromise=new Promise((function(e,r){t.readyPromiseResolver=e,t.readyPromiseRejecter=r})),i?(this.currentDatafile=i,d||this.resolveReadyPromise()):this.currentDatafile="",this.isStarted=!1,this.datafileUrl=s.sprintf(v,d),this.emitter=new a.default,this.autoUpdate=h,!function(e){return e>=c.MIN_UPDATE_INTERVAL}(m)?(l.warn("Invalid updateInterval %s, defaulting to %s",m,c.DEFAULT_UPDATE_INTERVAL),this.updateInterval=c.DEFAULT_UPDATE_INTERVAL):this.updateInterval=m,this.currentTimeout=null,this.currentRequest=null,this.backoffController=new u.default,this.syncOnCurrentRequestComplete=!1}return e.prototype.get=function(){return this.currentDatafile},e.prototype.start=function(){this.isStarted||(l.debug("Datafile manager started"),this.isStarted=!0,this.backoffController.reset(),this.setDatafileFromCacheIfAvailable(),this.syncDatafile())},e.prototype.stop=function(){return l.debug("Datafile manager stopped"),this.isStarted=!1,this.currentTimeout&&(clearTimeout(this.currentTimeout),this.currentTimeout=null),this.emitter.removeAllListeners(),this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null),Promise.resolve()},e.prototype.onReady=function(){return this.readyPromise},e.prototype.on=function(e,t){return this.emitter.on(e,t)},e.prototype.onRequestRejected=function(e){this.isStarted&&(this.backoffController.countError(),e instanceof Error?l.error("Error fetching datafile: %s",e.message,e):"string"==typeof e?l.error("Error fetching datafile: %s",e):l.error("Error fetching datafile"))},e.prototype.onRequestResolved=function(e){if(this.isStarted){void 0!==e.statusCode&&h(e.statusCode)?this.backoffController.reset():this.backoffController.countError(),this.trySavingLastModified(e.headers);var t=this.getNextDatafileFromResponse(e);if(""!==t)if(l.info("Updating datafile from response"),this.currentDatafile=t,this.cache.set(this.cacheKey,t),this.isReadyPromiseSettled){var r={datafile:t};this.emitter.emit("update",r)}else this.resolveReadyPromise()}},e.prototype.onRequestComplete=function(){this.isStarted&&(this.currentRequest=null,this.isReadyPromiseSettled||this.autoUpdate||this.rejectReadyPromise(new Error("Failed to become ready")),this.autoUpdate&&this.syncOnCurrentRequestComplete&&this.syncDatafile(),this.syncOnCurrentRequestComplete=!1)},e.prototype.syncDatafile=function(){var e=this,t={};this.lastResponseLastModified&&(t["if-modified-since"]=this.lastResponseLastModified),l.debug("Making datafile request to url %s with headers: %s",this.datafileUrl,(function(){return JSON.stringify(t)})),this.currentRequest=this.makeGetRequest(this.datafileUrl,t);var r=function(){e.onRequestComplete()};this.currentRequest.responsePromise.then((function(t){e.onRequestResolved(t)}),(function(t){e.onRequestRejected(t)})).then(r,r),this.autoUpdate&&this.scheduleNextUpdate()},e.prototype.resolveReadyPromise=function(){this.readyPromiseResolver(),this.isReadyPromiseSettled=!0},e.prototype.rejectReadyPromise=function(e){this.readyPromiseRejecter(e),this.isReadyPromiseSettled=!0},e.prototype.scheduleNextUpdate=function(){var e=this,t=this.backoffController.getDelay(),r=Math.max(t,this.updateInterval);l.debug("Scheduling sync in %s ms",r),this.currentTimeout=setTimeout((function(){e.currentRequest?e.syncOnCurrentRequestComplete=!0:e.syncDatafile()}),r)},e.prototype.getNextDatafileFromResponse=function(e){return l.debug("Response status code: %s",e.statusCode),void 0===e.statusCode||304===e.statusCode?"":h(e.statusCode)?e.body:""},e.prototype.trySavingLastModified=function(e){var t=e["last-modified"]||e["Last-Modified"];void 0!==t&&(this.lastResponseLastModified=t,l.debug("Saved last modified header value from response: %s",this.lastResponseLastModified))},e.prototype.setDatafileFromCacheIfAvailable=function(){var e=this;this.cache.get(this.cacheKey).then((function(t){e.isStarted&&!e.isReadyPromiseSettled&&""!==t&&(l.debug("Using datafile from cache"),e.currentDatafile=t,e.resolveReadyPromise())}))},e}();t.default=d},1816:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4621);t.HttpPollingDatafileManager=n.default},8164:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9651:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendEventNotification=t.getQueue=t.validateAndGetBatchSize=t.validateAndGetFlushInterval=t.DEFAULT_BATCH_SIZE=t.DEFAULT_FLUSH_INTERVAL=void 0;var n=r(4625),i=r(3023),o=r(2306);t.DEFAULT_FLUSH_INTERVAL=3e4,t.DEFAULT_BATCH_SIZE=10;var s=i.getLogger("EventProcessor");t.validateAndGetFlushInterval=function(e){return e<=0&&(s.warn("Invalid flushInterval "+e+", defaulting to "+t.DEFAULT_FLUSH_INTERVAL),e=t.DEFAULT_FLUSH_INTERVAL),e},t.validateAndGetBatchSize=function(e){return(e=Math.floor(e))<1&&(s.warn("Invalid batchSize "+e+", defaulting to "+t.DEFAULT_BATCH_SIZE),e=t.DEFAULT_BATCH_SIZE),e=Math.max(1,e)},t.getQueue=function(e,t,r,i){return e>1?new n.DefaultEventQueue({flushInterval:t,maxQueueSize:e,sink:r,batchComparator:i}):new n.SingleEventQueue({sink:r})},t.sendEventNotification=function(e,t){e&&e.sendNotifications(o.NOTIFICATION_TYPES.LOG_EVENT,t)}},4625:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultEventQueue=t.SingleEventQueue=void 0;var n=r(3023).getLogger("EventProcessor"),i=function(){function e(e){var t=e.timeout,r=e.callback;this.timeout=Math.max(t,0),this.callback=r}return e.prototype.start=function(){this.timeoutId=setTimeout(this.callback,this.timeout)},e.prototype.refresh=function(){this.stop(),this.start()},e.prototype.stop=function(){this.timeoutId&&clearTimeout(this.timeoutId)},e}(),o=function(){function e(e){var t=e.sink;this.sink=t}return e.prototype.start=function(){},e.prototype.stop=function(){return Promise.resolve()},e.prototype.enqueue=function(e){this.sink([e])},e}();t.SingleEventQueue=o;var s=function(){function e(e){var t=e.flushInterval,r=e.maxQueueSize,n=e.sink,o=e.batchComparator;this.buffer=[],this.maxQueueSize=Math.max(r,1),this.sink=n,this.batchComparator=o,this.timer=new i({callback:this.flush.bind(this),timeout:t}),this.started=!1}return e.prototype.start=function(){this.started=!0},e.prototype.stop=function(){this.started=!1;var e=this.sink(this.buffer);return this.buffer=[],this.timer.stop(),e},e.prototype.enqueue=function(e){if(this.started){var t=this.buffer[0];t&&!this.batchComparator(t,e)&&this.flush(),0===this.buffer.length&&this.timer.refresh(),this.buffer.push(e),this.buffer.length>=this.maxQueueSize&&this.flush()}else n.warn("Queue is stopped, not accepting event")},e.prototype.flush=function(){this.sink(this.buffer),this.buffer=[],this.timer.stop()},e}();t.DefaultEventQueue=s},1622:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areEventContextsEqual=void 0,t.areEventContextsEqual=function(e,t){var r=e.context,n=t.context;return r.accountId===n.accountId&&r.projectId===n.projectId&&r.clientName===n.clientName&&r.clientVersion===n.clientVersion&&r.revision===n.revision&&r.anonymizeIP===n.anonymizeIP&&r.botFiltering===n.botFiltering}},3931:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(1622),t),i(r(9651),t),i(r(8164),t),i(r(7530),t),i(r(5381),t),i(r(3440),t),i(r(1542),t)},7530:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5381:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStoragePendingEventsDispatcher=t.PendingEventsDispatcher=void 0;var o=r(3023),s=r(4668),a=r(2306),c=o.getLogger("EventProcessor"),u=function(){function e(e){var t=e.eventDispatcher,r=e.store;this.dispatcher=t,this.store=r}return e.prototype.dispatchEvent=function(e,t){this.send({uuid:a.generateUUID(),timestamp:a.getTimestamp(),request:e},t)},e.prototype.sendPendingEvents=function(){var e=this,t=this.store.values();c.debug("Sending %s pending events from previous page",t.length),t.forEach((function(t){try{e.send(t,(function(){}))}catch(e){}}))},e.prototype.send=function(e,t){var r=this;this.store.set(e.uuid,e),this.dispatcher.dispatchEvent(e.request,(function(n){r.store.remove(e.uuid),t(n)}))},e}();t.PendingEventsDispatcher=u;var l=function(e){function t(t){var r=t.eventDispatcher;return e.call(this,{eventDispatcher:r,store:new s.LocalStorageStore({maxValues:100,key:"fs_optly_pending_events"})})||this}return i(t,e),t}(u);t.LocalStoragePendingEventsDispatcher=l},4668:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageStore=void 0;var n=r(2306),i=r(3023).getLogger("EventProcessor"),o=function(){function e(e){var t=e.key,r=e.maxValues,n=void 0===r?1e3:r;this.LS_KEY=t,this.maxValues=n}return e.prototype.get=function(e){return this.getMap()[e]||null},e.prototype.set=function(e,t){var r=this.getMap();r[e]=t,this.replace(r)},e.prototype.remove=function(e){var t=this.getMap();delete t[e],this.replace(t)},e.prototype.values=function(){return n.objectValues(this.getMap())},e.prototype.clear=function(){this.replace({})},e.prototype.replace=function(e){try{window.localStorage&&localStorage.setItem(this.LS_KEY,JSON.stringify(e)),this.clean()}catch(e){i.error(e)}},e.prototype.clean=function(){var e=this.getMap(),t=Object.keys(e),r=t.length-this.maxValues;if(!(r<1)){var n=t.map((function(t){return{key:t,value:e[t]}}));n.sort((function(e,t){return e.value.timestamp-t.value.timestamp}));for(var i=0;i<r;i++)delete e[n[i].key];this.replace(e)}},e.prototype.getMap=function(){try{var e=window.localStorage&&localStorage.getItem(this.LS_KEY);if(e)return JSON.parse(e)||{}}catch(e){i.error(e)}return{}},e}();t.LocalStorageStore=o},3382:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.reqsInFlightCount=0,this.reqsCompleteResolvers=[]}return e.prototype.trackRequest=function(e){var t=this;this.reqsInFlightCount++;var r=function(){t.reqsInFlightCount--,0===t.reqsInFlightCount&&(t.reqsCompleteResolvers.forEach((function(e){return e()})),t.reqsCompleteResolvers=[])};e.then(r,r)},e.prototype.onRequestsComplete=function(){var e=this;return new Promise((function(t){0===e.reqsInFlightCount?t():e.reqsCompleteResolvers.push(t)}))},e}();t.default=r},3440:function(e,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.formatEvents=t.buildConversionEventV1=t.buildImpressionEventV1=t.makeBatchedEventV1=void 0;var n="$opt_bot_filtering";function i(e){var t=[],r=e[0];return e.forEach((function(e){if("conversion"===e.type||"impression"===e.type){var r=a(e);"impression"===e.type?r.snapshots.push(s(e)):"conversion"===e.type&&r.snapshots.push(o(e)),t.push(r)}})),{client_name:r.context.clientName,client_version:r.context.clientVersion,account_id:r.context.accountId,project_id:r.context.projectId,revision:r.context.revision,anonymize_ip:r.context.anonymizeIP,enrich_decisions:!0,visitors:t}}function o(e){var t=r({},e.tags);delete t.revenue,delete t.value;var n={entity_id:e.event.id,key:e.event.key,timestamp:e.timestamp,uuid:e.uuid};return e.tags&&(n.tags=e.tags),null!=e.value&&(n.value=e.value),null!=e.revenue&&(n.revenue=e.revenue),{events:[n]}}function s(e){var t,r,n=e.layer,i=e.experiment,o=e.variation,s=e.ruleKey,a=e.flagKey,c=e.ruleType,u=e.enabled,l=n?n.id:null;return{decisions:[{campaign_id:l,experiment_id:null!==(t=null==i?void 0:i.id)&&void 0!==t?t:"",variation_id:null!==(r=null==o?void 0:o.id)&&void 0!==r?r:"",metadata:{flag_key:a,rule_key:s,rule_type:c,variation_key:o?o.key:"",enabled:u}}],events:[{entity_id:l,timestamp:e.timestamp,key:"campaign_activated",uuid:e.uuid}]}}function a(e){var t={snapshots:[],visitor_id:e.user.id,attributes:[]};return e.user.attributes.forEach((function(e){t.attributes.push({entity_id:e.entityId,key:e.key,type:"custom",value:e.value})})),"boolean"==typeof e.context.botFiltering&&t.attributes.push({entity_id:n,key:n,type:"custom",value:e.context.botFiltering}),t}t.makeBatchedEventV1=i,t.buildImpressionEventV1=function(e){var t=a(e);return t.snapshots.push(s(e)),{client_name:e.context.clientName,client_version:e.context.clientVersion,account_id:e.context.accountId,project_id:e.context.projectId,revision:e.context.revision,anonymize_ip:e.context.anonymizeIP,enrich_decisions:!0,visitors:[t]}},t.buildConversionEventV1=function(e){var t=a(e);return t.snapshots.push(o(e)),{client_name:e.context.clientName,client_version:e.context.clientVersion,account_id:e.context.accountId,project_id:e.context.projectId,revision:e.context.revision,anonymize_ip:e.context.anonymizeIP,enrich_decisions:!0,visitors:[t]}},t.formatEvents=function(e){return{url:"https://logx.optimizely.com/v1/events",httpVerb:"POST",params:i(e)}}},1542:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LogTierV1EventProcessor=void 0;var s=r(3023),a=r(9651),c=o(r(3382)),u=r(1622),l=r(3440),h=s.getLogger("LogTierV1EventProcessor"),f=function(){function e(e){var t=e.dispatcher,r=e.flushInterval,n=void 0===r?a.DEFAULT_FLUSH_INTERVAL:r,i=e.batchSize,o=void 0===i?a.DEFAULT_BATCH_SIZE:i,s=e.notificationCenter;this.dispatcher=t,this.notificationCenter=s,this.requestTracker=new c.default,n=a.validateAndGetFlushInterval(n),o=a.validateAndGetBatchSize(o),this.queue=a.getQueue(o,n,this.drainQueue.bind(this),u.areEventContextsEqual)}return e.prototype.drainQueue=function(e){var t=this,r=new Promise((function(r){if(h.debug("draining queue with %s events",e.length),0!==e.length){var n=l.formatEvents(e);t.dispatcher.dispatchEvent(n,(function(){r()})),a.sendEventNotification(t.notificationCenter,n)}else r()}));return this.requestTracker.trackRequest(r),r},e.prototype.process=function(e){this.queue.enqueue(e)},e.prototype.stop=function(){try{return this.queue.stop(),this.requestTracker.onRequestsComplete()}catch(e){h.error('Error stopping EventProcessor: "%s"',e.message,e)}return Promise.resolve()},e.prototype.start=function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){return this.queue.start(),[2]}))}))},e}();t.LogTierV1EventProcessor=f},9399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.handleError=function(e){},e}();t.NoopErrorHandler=r;var n=new r;t.setErrorHandler=function(e){n=e},t.getErrorHandler=function(){return n},t.resetErrorHandler=function(){n=new r}},3023:(e,t,r)=>{"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(9399)),n(r(8536)),n(r(8400))},8400:function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=r(9399),o=r(2306),s=r(8536),a={NOTSET:0,DEBUG:1,INFO:2,WARNING:3,ERROR:4};function c(e){return"string"!=typeof e?e:("WARN"===(e=e.toUpperCase())&&(e="WARNING"),a[e]?a[e]:e)}var u=function(){function e(){this.defaultLoggerFacade=new d,this.loggers={}}return e.prototype.getLogger=function(e){return e?(this.loggers[e]||(this.loggers[e]=new d({messagePrefix:e})),this.loggers[e]):this.defaultLoggerFacade},e}(),l=function(){function e(e){void 0===e&&(e={}),this.logLevel=s.LogLevel.NOTSET,void 0!==e.logLevel&&o.isValidEnum(s.LogLevel,e.logLevel)&&this.setLogLevel(e.logLevel),this.logToConsole=void 0===e.logToConsole||!!e.logToConsole,this.prefix=void 0!==e.prefix?e.prefix:"[OPTIMIZELY]"}return e.prototype.log=function(e,t){if(this.shouldLog(e)&&this.logToConsole){var r=this.prefix+" - "+this.getLogLevelName(e)+" "+this.getTime()+" "+t;this.consoleLog(e,[r])}},e.prototype.setLogLevel=function(e){e=c(e),o.isValidEnum(s.LogLevel,e)&&void 0!==e?this.logLevel=e:this.logLevel=s.LogLevel.ERROR},e.prototype.getTime=function(){return(new Date).toISOString()},e.prototype.shouldLog=function(e){return e>=this.logLevel},e.prototype.getLogLevelName=function(e){switch(e){case s.LogLevel.DEBUG:return"DEBUG";case s.LogLevel.INFO:return"INFO ";case s.LogLevel.WARNING:return"WARN ";case s.LogLevel.ERROR:return"ERROR";default:return"NOTSET"}},e.prototype.consoleLog=function(e,t){switch(e){case s.LogLevel.DEBUG:case s.LogLevel.INFO:case s.LogLevel.WARNING:case s.LogLevel.ERROR:}},e}();t.ConsoleLogHandler=l;var h=s.LogLevel.NOTSET,f=null,d=function(){function e(e){void 0===e&&(e={}),this.messagePrefix="",e.messagePrefix&&(this.messagePrefix=e.messagePrefix)}return e.prototype.log=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];this.internalLog(c(e),{message:t,splat:r})},e.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.namedLog(s.LogLevel.INFO,e,t)},e.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.namedLog(s.LogLevel.DEBUG,e,t)},e.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.namedLog(s.LogLevel.WARNING,e,t)},e.prototype.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.namedLog(s.LogLevel.ERROR,e,t)},e.prototype.format=function(e){return(this.messagePrefix?this.messagePrefix+": ":"")+o.sprintf.apply(void 0,n([e.message],e.splat))},e.prototype.internalLog=function(e,t){f&&(e<h||(f.log(e,this.format(t)),t.error&&t.error instanceof Error&&i.getErrorHandler().handleError(t.error)))},e.prototype.namedLog=function(e,t,r){var n;if(t instanceof Error)return t=(n=t).message,void this.internalLog(e,{error:n,message:t,splat:r});if(0!==r.length){var i=r[r.length-1];i instanceof Error&&(n=i,r.splice(-1)),this.internalLog(e,{message:t,error:n,splat:r})}else this.internalLog(e,{message:t,splat:r})},e}(),p=new u;t.getLogger=function(e){return p.getLogger(e)},t.setLogHandler=function(e){f=e},t.setLogLevel=function(e){e=c(e),h=o.isValidEnum(s.LogLevel,e)&&void 0!==e?e:s.LogLevel.ERROR},t.getLogLevel=function(){return h},t.resetLogger=function(){p=new u,h=s.LogLevel.NOTSET}},8536:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.NOTSET=0]="NOTSET",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR"}(t.LogLevel||(t.LogLevel={}))},2306:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1176);function i(e){return Object.keys(e).map((function(t){return e[t]}))}t.generateUUID=function(){return n.v4()},t.getTimestamp=function(){return(new Date).getTime()},t.isValidEnum=function(e,t){for(var r=!1,n=Object.keys(e),i=0;i<n.length;i++)if(t===e[n[i]]){r=!0;break}return r},t.groupBy=function(e,t){var r={};return e.forEach((function(e){var n=t(e);r[n]=r[n]||[],r[n].push(e)})),i(r)},t.objectValues=i,t.objectEntries=function(e){return Object.keys(e).map((function(t){return[t,e[t]]}))},t.find=function(e,t){for(var r,n=0,i=e;n<i.length;n++){var o=i[n];if(t(o)){r=o;break}}return r},t.keyBy=function(e,t){var r={};return e.forEach((function(e){var n=t(e);r[n]=e})),r},t.sprintf=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=0;return e.replace(/%s/g,(function(){var e=t[n++],r=typeof e;return"function"===r?e():"string"===r?e:String(e)}))},function(e){e.ACTIVATE="ACTIVATE:experiment, user_id,attributes, variation, event",e.DECISION="DECISION:type, userId, attributes, decisionInfo",e.LOG_EVENT="LOG_EVENT:logEvent",e.OPTIMIZELY_CONFIG_UPDATE="OPTIMIZELY_CONFIG_UPDATE",e.TRACK="TRACK:event_key, user_id, attributes, event_tags, event"}(t.NOTIFICATION_TYPES||(t.NOTIFICATION_TYPES={}))},1176:(e,t,r)=>{var n=r(7097),i=r(8525),o=i;o.v1=n,o.v4=i,e.exports=o},7369:e=>{for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var n=r||0,i=t;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},8056:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},7097:(e,t,r)=>{var n,i,o=r(8056),s=r(7369),a=0,c=0;e.exports=function(e,t,r){var u=t&&r||0,l=t||[],h=(e=e||{}).node||n,f=void 0!==e.clockseq?e.clockseq:i;if(null==h||null==f){var d=o();null==h&&(h=n=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==f&&(f=i=16383&(d[6]<<8|d[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:c+1,g=p-a+(m-c)/1e4;if(g<0&&void 0===e.clockseq&&(f=f+1&16383),(g<0||p>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,c=m,i=f;var v=(1e4*(268435455&(p+=122192928e5))+m)%4294967296;l[u++]=v>>>24&255,l[u++]=v>>>16&255,l[u++]=v>>>8&255,l[u++]=255&v;var y=p/4294967296*1e4&268435455;l[u++]=y>>>8&255,l[u++]=255&y,l[u++]=y>>>24&15|16,l[u++]=y>>>16&255,l[u++]=f>>>8|128,l[u++]=255&f;for(var E=0;E<6;++E)l[u+E]=h[E];return t||s(l)}},8525:(e,t,r)=>{var n=r(8056),i=r(7369);e.exports=function(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},5302:(e,t,r)=>{"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=r(3023),o=r(3931),s=n(r(4952)),a=n(r(8491)),c=r(1816),u=function(){return(u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function l(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}var h=Math.pow(2,53);function f(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!e)return{};if("function"==typeof Object.assign)return Object.assign.apply(Object,l([e],t));for(var n=Object(e),i=0;i<t.length;i++){var o=t[i];if(null!=o)for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])}return n}function d(e,t){return e?v(e,(function(e){return e[t]})):{}}function p(e){return Object.keys(e).map((function(t){return e[t]}))}function m(e){return Object.keys(e).map((function(t){return[t,e[t]]}))}function g(e,t){for(var r,n=0,i=e;n<i.length;n++){var o=i[n];if(t(o)){r=o;break}}return r}function v(e,t){var r={};return e.forEach((function(e){var n=t(e);r[n]=e})),r}function y(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=0;return e.replace(/%s/g,(function(){var e=t[n++],r=typeof e;return"function"===r?e():"string"===r?e:String(e)}))}var E,b={assign:f,currentTimestamp:function(){return Math.round((new Date).getTime())},isSafeInteger:function(e){return"number"==typeof e&&Math.abs(e)<=h},keyBy:d,uuid:function(){return s()},isNumber:function(e){return"number"==typeof e},getTimestamp:function(){return(new Date).getTime()},isValidEnum:function(e,t){for(var r=!1,n=Object.keys(e),i=0;i<n.length;i++)if(t===e[n[i]]){r=!0;break}return r},groupBy:function(e,t){var r={};return e.forEach((function(e){var n=t(e);r[n]=r[n]||[],r[n].push(e)})),p(r)},objectValues:p,objectEntries:m,find:g,keyByUtil:v,sprintf:y},w={NOTSET:0,DEBUG:1,INFO:2,WARNING:3,ERROR:4},_={CONDITION_EVALUATOR_ERROR:"%s: Error evaluating audience condition of type %s: %s",DATAFILE_AND_SDK_KEY_MISSING:"%s: You must provide at least one of sdkKey or datafile. Cannot start Optimizely",EXPERIMENT_KEY_NOT_IN_DATAFILE:"%s: Experiment key %s is not in datafile.",FEATURE_NOT_IN_DATAFILE:"%s: Feature key %s is not in datafile.",IMPROPERLY_FORMATTED_EXPERIMENT:"%s: Experiment key %s is improperly formatted.",INVALID_ATTRIBUTES:"%s: Provided attributes are in an invalid format.",INVALID_BUCKETING_ID:"%s: Unable to generate hash for bucketing ID %s: %s",INVALID_DATAFILE:"%s: Datafile is invalid - property %s: %s",INVALID_DATAFILE_MALFORMED:"%s: Datafile is invalid because it is malformed.",INVALID_CONFIG:"%s: Provided Optimizely config is in an invalid format.",INVALID_JSON:"%s: JSON object is not valid.",INVALID_ERROR_HANDLER:'%s: Provided "errorHandler" is in an invalid format.',INVALID_EVENT_DISPATCHER:'%s: Provided "eventDispatcher" is in an invalid format.',INVALID_EVENT_TAGS:"%s: Provided event tags are in an invalid format.",INVALID_EXPERIMENT_KEY:"%s: Experiment key %s is not in datafile. It is either invalid, paused, or archived.",INVALID_EXPERIMENT_ID:"%s: Experiment ID %s is not in datafile.",INVALID_GROUP_ID:"%s: Group ID %s is not in datafile.",INVALID_LOGGER:'%s: Provided "logger" is in an invalid format.',INVALID_ROLLOUT_ID:"%s: Invalid rollout ID %s attached to feature %s",INVALID_USER_ID:"%s: Provided user ID is in an invalid format.",INVALID_USER_PROFILE_SERVICE:"%s: Provided user profile service instance is in an invalid format: %s.",NO_DATAFILE_SPECIFIED:"%s: No datafile specified. Cannot start optimizely.",NO_JSON_PROVIDED:"%s: No JSON object to validate against schema.",NO_VARIATION_FOR_EXPERIMENT_KEY:"%s: No variation key %s defined in datafile for experiment %s.",UNDEFINED_ATTRIBUTE:"%s: Provided attribute: %s has an undefined value.",UNRECOGNIZED_ATTRIBUTE:"%s: Unrecognized attribute %s provided. Pruning before sending event to Optimizely.",UNABLE_TO_CAST_VALUE:"%s: Unable to cast value %s to type %s, returning null.",USER_NOT_IN_FORCED_VARIATION:"%s: User %s is not in the forced variation map. Cannot remove their forced variation.",USER_PROFILE_LOOKUP_ERROR:'%s: Error while looking up user profile for user ID "%s": %s.',USER_PROFILE_SAVE_ERROR:'%s: Error while saving user profile for user ID "%s": %s.',VARIABLE_KEY_NOT_IN_DATAFILE:'%s: Variable with key "%s" associated with feature with key "%s" is not in datafile.',VARIATION_ID_NOT_IN_DATAFILE:"%s: No variation ID %s defined in datafile for experiment %s.",VARIATION_ID_NOT_IN_DATAFILE_NO_EXPERIMENT:"%s: Variation ID %s is not in the datafile.",INVALID_INPUT_FORMAT:"%s: Provided %s is in an invalid format.",INVALID_DATAFILE_VERSION:"%s: This version of the JavaScript SDK does not support the given datafile version: %s",INVALID_VARIATION_KEY:"%s: Provided variation key is in an invalid format."},A={ACTIVATE_USER:"%s: Activating user %s in experiment %s.",DISPATCH_CONVERSION_EVENT:"%s: Dispatching conversion event to URL %s with params %s.",DISPATCH_IMPRESSION_EVENT:"%s: Dispatching impression event to URL %s with params %s.",DEPRECATED_EVENT_VALUE:"%s: Event value is deprecated in %s call.",EVENT_KEY_NOT_FOUND:"%s: Event key %s is not in datafile.",EXPERIMENT_NOT_RUNNING:"%s: Experiment %s is not running.",FEATURE_ENABLED_FOR_USER:"%s: Feature %s is enabled for user %s.",FEATURE_NOT_ENABLED_FOR_USER:"%s: Feature %s is not enabled for user %s.",FEATURE_HAS_NO_EXPERIMENTS:"%s: Feature %s is not attached to any experiments.",FAILED_TO_PARSE_VALUE:'%s: Failed to parse event value "%s" from event tags.',FAILED_TO_PARSE_REVENUE:'%s: Failed to parse revenue value "%s" from event tags.',FORCED_BUCKETING_FAILED:"%s: Variation key %s is not in datafile. Not activating user %s.",INVALID_OBJECT:"%s: Optimizely object is not valid. Failing %s.",INVALID_CLIENT_ENGINE:"%s: Invalid client engine passed: %s. Defaulting to node-sdk.",INVALID_DEFAULT_DECIDE_OPTIONS:"%s: Provided default decide options is not an array.",INVALID_DECIDE_OPTIONS:"%s: Provided decide options is not an array. Using default decide options.",INVALID_VARIATION_ID:"%s: Bucketed into an invalid variation ID. Returning null.",NOTIFICATION_LISTENER_EXCEPTION:"%s: Notification listener for (%s) threw exception: %s",NO_ROLLOUT_EXISTS:"%s: There is no rollout of feature %s.",NOT_ACTIVATING_USER:"%s: Not activating user %s for experiment %s.",NOT_TRACKING_USER:"%s: Not tracking user %s.",PARSED_REVENUE_VALUE:'%s: Parsed revenue value "%s" from event tags.',PARSED_NUMERIC_VALUE:'%s: Parsed event value "%s" from event tags.',RETURNING_STORED_VARIATION:'%s: Returning previously activated variation "%s" of experiment "%s" for user "%s" from user profile.',ROLLOUT_HAS_NO_EXPERIMENTS:"%s: Rollout of feature %s has no experiments",SAVED_VARIATION:'%s: Saved variation "%s" of experiment "%s" for user "%s".',SAVED_VARIATION_NOT_FOUND:"%s: User %s was previously bucketed into variation with ID %s for experiment %s, but no matching variation was found.",SHOULD_NOT_DISPATCH_ACTIVATE:'%s: Experiment %s is not in "Running" state. Not activating user.',SKIPPING_JSON_VALIDATION:"%s: Skipping JSON schema validation.",TRACK_EVENT:"%s: Tracking event %s for user %s.",UNRECOGNIZED_DECIDE_OPTION:"%s: Unrecognized decide option %s provided.",USER_ASSIGNED_TO_EXPERIMENT_BUCKET:"%s: Assigned bucket %s to user with bucketing ID %s.",USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP:"%s: User %s is in experiment %s of group %s.",USER_BUCKETED_INTO_TARGETING_RULE:"%s: User %s bucketed into targeting rule %s.",USER_IN_FEATURE_EXPERIMENT:"%s: User %s is in variation %s of experiment %s on the feature %s.",USER_IN_ROLLOUT:"%s: User %s is in rollout of feature %s.",USER_NOT_BUCKETED_INTO_EVERYONE_TARGETING_RULE:"%s: User %s not bucketed into everyone targeting rule due to traffic allocation.",USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP:"%s: User %s is not in experiment %s of group %s.",USER_NOT_BUCKETED_INTO_ANY_EXPERIMENT_IN_GROUP:"%s: User %s is not in any experiment of group %s.",USER_NOT_BUCKETED_INTO_TARGETING_RULE:"%s User %s not bucketed into targeting rule %s due to traffic allocation. Trying everyone rule.",USER_NOT_IN_FEATURE_EXPERIMENT:"%s: User %s is not in any experiment on the feature %s.",USER_NOT_IN_ROLLOUT:"%s: User %s is not in rollout of feature %s.",USER_FORCED_IN_VARIATION:"%s: User %s is forced in variation %s.",USER_MAPPED_TO_FORCED_VARIATION:"%s: Set variation %s for experiment %s and user %s in the forced variation map.",USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE:"%s: User %s does not meet conditions for targeting rule %s.",USER_MEETS_CONDITIONS_FOR_TARGETING_RULE:"%s: User %s meets conditions for targeting rule %s.",USER_HAS_VARIATION:"%s: User %s is in variation %s of experiment %s.",USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED:"Variation (%s) is mapped to flag (%s), rule (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED:"Variation (%s) is mapped to flag (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED_BUT_INVALID:"Invalid variation is mapped to flag (%s), rule (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED_BUT_INVALID:"Invalid variation is mapped to flag (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_VARIATION:"%s: Variation %s is mapped to experiment %s and user %s in the forced variation map.",USER_HAS_NO_VARIATION:"%s: User %s is in no variation of experiment %s.",USER_HAS_NO_FORCED_VARIATION:"%s: User %s is not in the forced variation map.",USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT:"%s: No experiment %s mapped to user %s in the forced variation map.",USER_NOT_IN_ANY_EXPERIMENT:"%s: User %s is not in any experiment of group %s.",USER_NOT_IN_EXPERIMENT:"%s: User %s does not meet conditions to be in experiment %s.",USER_RECEIVED_DEFAULT_VARIABLE_VALUE:'%s: User "%s" is not in any variation or rollout rule. Returning default value for variable "%s" of feature flag "%s".',FEATURE_NOT_ENABLED_RETURN_DEFAULT_VARIABLE_VALUE:'%s: Feature "%s" is not enabled for user %s. Returning the default variable value "%s".',VARIABLE_NOT_USED_RETURN_DEFAULT_VARIABLE_VALUE:'%s: Variable "%s" is not used in variation "%s". Returning default value.',USER_RECEIVED_VARIABLE_VALUE:'%s: Got variable value "%s" for variable "%s" of feature flag "%s"',VALID_DATAFILE:"%s: Datafile is valid.",VALID_USER_PROFILE_SERVICE:"%s: Valid user profile service provided.",VARIATION_REMOVED_FOR_USER:"%s: Variation mapped to experiment %s has been removed for user %s.",VARIABLE_REQUESTED_WITH_WRONG_TYPE:'%s: Requested variable type "%s", but variable is of type "%s". Use correct API to retrieve value. Returning None.',VALID_BUCKETING_ID:'%s: BucketingId is valid: "%s"',BUCKETING_ID_NOT_STRING:"%s: BucketingID attribute is not a string. Defaulted to userId",EVALUATING_AUDIENCE:'%s: Starting to evaluate audience "%s" with conditions: %s.',EVALUATING_AUDIENCES_COMBINED:'%s: Evaluating audiences for %s "%s": %s.',AUDIENCE_EVALUATION_RESULT:'%s: Audience "%s" evaluated to %s.',AUDIENCE_EVALUATION_RESULT_COMBINED:"%s: Audiences for %s %s collectively evaluated to %s.",MISSING_ATTRIBUTE_VALUE:'%s: Audience condition %s evaluated to UNKNOWN because no value was passed for user attribute "%s".',UNEXPECTED_CONDITION_VALUE:"%s: Audience condition %s evaluated to UNKNOWN because the condition value is not supported.",UNEXPECTED_TYPE:'%s: Audience condition %s evaluated to UNKNOWN because a value of type "%s" was passed for user attribute "%s".',UNEXPECTED_TYPE_NULL:'%s: Audience condition %s evaluated to UNKNOWN because a null value was passed for user attribute "%s".',UNKNOWN_CONDITION_TYPE:"%s: Audience condition %s has an unknown condition type. You may need to upgrade to a newer release of the Optimizely SDK.",UNKNOWN_MATCH_TYPE:"%s: Audience condition %s uses an unknown match type. You may need to upgrade to a newer release of the Optimizely SDK.",UPDATED_OPTIMIZELY_CONFIG:"%s: Updated Optimizely config to revision %s (project id %s)",OUT_OF_BOUNDS:'%s: Audience condition %s evaluated to UNKNOWN because the number value for user attribute "%s" is not in the range [-2^53, +2^53].',UNABLE_TO_ATTACH_UNLOAD:'%s: unable to bind optimizely.close() to page unload event: "%s"'},T={BOT_FILTERING:"$opt_bot_filtering",BUCKETING_ID:"$opt_bucketing_id",STICKY_BUCKETING_KEY:"$opt_experiment_bucket_map",USER_AGENT:"$opt_user_agent",FORCED_DECISION_NULL_RULE_KEY:"$opt_null_rule_key"},I={AB_TEST:"ab-test",FEATURE:"feature",FEATURE_TEST:"feature-test",FEATURE_VARIABLE:"feature-variable",ALL_FEATURE_VARIABLES:"all-feature-variables",FLAG:"flag"},S={FEATURE_TEST:"feature-test",ROLLOUT:"rollout",EXPERIMENT:"experiment"},x={RULE:"rule",EXPERIMENT:"experiment"},O={BOOLEAN:"boolean",DOUBLE:"double",INTEGER:"integer",STRING:"string",JSON:"json"},R={V2:"2",V3:"3",V4:"4"},k={SDK_NOT_READY:"Optimizely SDK not configured properly yet.",FLAG_KEY_INVALID:'No flag was found for key "%s".',VARIABLE_VALUE_INVALID:'Variable value for key "%s" is invalid or wrong type.'};!function(e){e.ACTIVATE="ACTIVATE:experiment, user_id,attributes, variation, event",e.DECISION="DECISION:type, userId, attributes, decisionInfo",e.LOG_EVENT="LOG_EVENT:logEvent",e.OPTIMIZELY_CONFIG_UPDATE="OPTIMIZELY_CONFIG_UPDATE",e.TRACK="TRACK:event_key, user_id, attributes, event_tags, event"}(E||(E={}));var N=Object.freeze({__proto__:null,LOG_LEVEL:w,ERROR_MESSAGES:_,LOG_MESSAGES:A,CONTROL_ATTRIBUTES:T,JAVASCRIPT_CLIENT_ENGINE:"javascript-sdk",NODE_CLIENT_ENGINE:"node-sdk",REACT_CLIENT_ENGINE:"react-sdk",REACT_NATIVE_CLIENT_ENGINE:"react-native-sdk",REACT_NATIVE_JS_CLIENT_ENGINE:"react-native-js-sdk",NODE_CLIENT_VERSION:"4.9.2",DECISION_NOTIFICATION_TYPES:I,DECISION_SOURCES:S,AUDIENCE_EVALUATION_TYPES:x,FEATURE_VARIABLE_TYPES:O,DATAFILE_VERSIONS:R,DECISION_MESSAGES:k,get NOTIFICATION_TYPES(){return E}}),C="CONFIG_VALIDATOR",D=[R.V2,R.V3,R.V4],L={handleError:function(){}},B={dispatchEvent:function(e,t){var r,n=e.params,i=e.url;"POST"===e.httpVerb?((r=new XMLHttpRequest).open("POST",i,!0),r.setRequestHeader("Content-Type","application/json"),r.onreadystatechange=function(){if(4===r.readyState&&t&&"function"==typeof t)try{t({statusCode:r.status})}catch(e){}},r.send(JSON.stringify(n))):(i+="?wxhr=true",n&&(i+="&"+function(e){return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}(n)),(r=new XMLHttpRequest).open("GET",i,!0),r.onreadystatechange=function(){if(4===r.readyState&&t&&"function"==typeof t)try{t({statusCode:r.status})}catch(e){}},r.send())}},P=function(){function e(){}return e.prototype.log=function(){},e}();function U(e){return new i.ConsoleLogHandler(e)}var M,j,F=Object.freeze({__proto__:null,NoOpLogger:P,createLogger:U,createNoOpLogger:function(){return new P}});function V(e,t,r){return{variationKey:null,enabled:!1,variables:{},ruleKey:null,flagKey:e,userContext:t,reasons:r}}!function(e){e.BOOLEAN="boolean",e.DOUBLE="double",e.INTEGER="integer",e.STRING="string",e.JSON="json"}(M||(M={})),(j=t.N1||(t.N1={})).DISABLE_DECISION_EVENT="DISABLE_DECISION_EVENT",j.ENABLED_FLAGS_ONLY="ENABLED_FLAGS_ONLY",j.IGNORE_USER_PROFILE_SERVICE="IGNORE_USER_PROFILE_SERVICE",j.INCLUDE_REASONS="INCLUDE_REASONS",j.EXCLUDE_VARIABLES="EXCLUDE_VARIABLES";var $=function(){function e(e){var t,r=e.optimizely,n=e.userId,i=e.attributes;this.optimizely=r,this.userId=n,this.attributes=null!==(t=u({},i))&&void 0!==t?t:{},this.forcedDecisionsMap={}}return e.prototype.setAttribute=function(e,t){this.attributes[e]=t},e.prototype.getUserId=function(){return this.userId},e.prototype.getAttributes=function(){return u({},this.attributes)},e.prototype.getOptimizely=function(){return this.optimizely},e.prototype.decide=function(e,t){return void 0===t&&(t=[]),this.optimizely.decide(this.cloneUserContext(),e,t)},e.prototype.decideForKeys=function(e,t){return void 0===t&&(t=[]),this.optimizely.decideForKeys(this.cloneUserContext(),e,t)},e.prototype.decideAll=function(e){return void 0===e&&(e=[]),this.optimizely.decideAll(this.cloneUserContext(),e)},e.prototype.trackEvent=function(e,t){this.optimizely.track(e,this.userId,this.attributes,t)},e.prototype.setForcedDecision=function(e,t){var r,n=e.flagKey,i=null!==(r=e.ruleKey)&&void 0!==r?r:T.FORCED_DECISION_NULL_RULE_KEY,o={variationKey:t.variationKey};return this.forcedDecisionsMap[n]||(this.forcedDecisionsMap[n]={}),this.forcedDecisionsMap[n][i]=o,!0},e.prototype.getForcedDecision=function(e){return this.findForcedDecision(e)},e.prototype.removeForcedDecision=function(e){var t,r=null!==(t=e.ruleKey)&&void 0!==t?t:T.FORCED_DECISION_NULL_RULE_KEY,n=e.flagKey,i=!1;return this.forcedDecisionsMap.hasOwnProperty(n)&&(this.forcedDecisionsMap[n].hasOwnProperty(r)&&(delete this.forcedDecisionsMap[n][r],i=!0),0===Object.keys(this.forcedDecisionsMap[n]).length&&delete this.forcedDecisionsMap[n]),i},e.prototype.removeAllForcedDecisions=function(){return this.forcedDecisionsMap={},!0},e.prototype.findForcedDecision=function(e){var t,r=null!==(t=e.ruleKey)&&void 0!==t?t:T.FORCED_DECISION_NULL_RULE_KEY,n=e.flagKey;if(this.forcedDecisionsMap.hasOwnProperty(e.flagKey)){var i=this.forcedDecisionsMap[n];if(i.hasOwnProperty(r))return{variationKey:i[r].variationKey}}return null},e.prototype.cloneUserContext=function(){var t=new e({optimizely:this.getOptimizely(),userId:this.getUserId(),attributes:this.getAttributes()});return Object.keys(this.forcedDecisionsMap).length>0&&(t.forcedDecisionsMap=u({},this.forcedDecisionsMap)),t},e}(),z=["and","or","not"];function G(e,t){if(Array.isArray(e)){var r=e[0],n=e.slice(1);switch("string"==typeof r&&-1===z.indexOf(r)&&(r="or",n=e),r){case"and":return function(e,t){var r=!1;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var i=G(e[n],t);if(!1===i)return!1;null===i&&(r=!0)}return!r||null}return null}(n,t);case"not":return function(e,t){if(Array.isArray(e)&&e.length>0){var r=G(e[0],t);return null===r?null:!r}return null}(n,t);default:return function(e,t){var r=!1;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var i=G(e[n],t);if(!0===i)return!0;null===i&&(r=!0)}return!!r&&null}return null}(n,t)}}return t(e)}var q=function(){function e(t,r){var n,i;this.sdkKey=null!==(n=t.sdkKey)&&void 0!==n?n:"",this.environmentKey=null!==(i=t.environmentKey)&&void 0!==i?i:"",this.attributes=t.attributes,this.audiences=e.getAudiences(t),this.events=t.events,this.revision=t.revision;var o=(t.featureFlags||[]).reduce((function(e,t){return e[t.id]=t.variables,e}),{}),s=e.getExperimentsMapById(t,o);this.experimentsMap=e.getExperimentsKeyMap(s),this.featuresMap=e.getFeaturesMap(t,o,s),this.datafile=r}return e.prototype.getDatafile=function(){return this.datafile},e.getAudiences=function(e){var t=[],r=[];return(e.typedAudiences||[]).forEach((function(e){t.push({id:e.id,conditions:JSON.stringify(e.conditions),name:e.name}),r.push(e.id)})),(e.audiences||[]).forEach((function(e){-1===r.indexOf(e.id)&&"$opt_dummy_audience"!=e.id&&t.push({id:e.id,conditions:JSON.stringify(e.conditions),name:e.name})})),t},e.getSerializedAudiences=function(t,r){var n="";if(t){var i="";t.forEach((function(t){var o="";if(t instanceof Array)o="("+(o=e.getSerializedAudiences(t,r))+")";else if(z.indexOf(t)>-1)i=t.toUpperCase();else{var s=r[t]?r[t].name:t;n||"NOT"===i?(i=""===i?"OR":i,n=""===n?i+' "'+r[t].name+'"':n.concat(" "+i+' "'+s+'"')):n='"'+s+'"'}""!==o&&(""!==n||"NOT"===i?(i=""===i?"OR":i,n=""===n?i+" "+o:n.concat(" "+i+" "+o)):n=n.concat(o))}))}return n},e.getExperimentAudiences=function(t,r){return t.audienceConditions?e.getSerializedAudiences(t.audienceConditions,r.audiencesById):""},e.mergeFeatureVariables=function(e,t,r,n,i){var o=(e[r]||[]).reduce((function(e,t){return e[t.key]={id:t.id,key:t.key,type:t.type,value:t.defaultValue},e}),{});return(n||[]).forEach((function(e){var r=t[e.id],n={id:e.id,key:r.key,type:r.type,value:i?e.value:r.defaultValue};o[r.key]=n})),o},e.getVariationsMap=function(t,r,n,i){return t.reduce((function(t,o){var s=e.mergeFeatureVariables(r,n,i,o.variables,o.featureEnabled);return t[o.key]={id:o.id,key:o.key,featureEnabled:o.featureEnabled,variablesMap:s},t}),{})},e.getVariableIdMap=function(e){return(e.featureFlags||[]).reduce((function(e,t){return t.variables.forEach((function(t){e[t.id]=t})),e}),{})},e.getDeliveryRules=function(t,r,n,i){var o=e.getVariableIdMap(t);return i.map((function(i){return{id:i.id,key:i.key,audiences:e.getExperimentAudiences(i,t),variationsMap:e.getVariationsMap(i.variations,r,o,n)}}))},e.getRolloutExperimentIds=function(e){var t=[];return(e||[]).forEach((function(e){e.experiments.forEach((function(e){t.push(e.id)}))})),t},e.getExperimentsMapById=function(t,r){var n=e.getVariableIdMap(t),i=this.getRolloutExperimentIds(t.rollouts);return(t.experiments||[]).reduce((function(o,s){if(-1===i.indexOf(s.id)){var a=t.experimentFeatureMap[s.id],c="";a&&a.length>0&&(c=a[0]);var u=e.getVariationsMap(s.variations,r,n,c.toString());o[s.id]={id:s.id,key:s.key,audiences:e.getExperimentAudiences(s,t),variationsMap:u}}return o}),{})},e.getExperimentsKeyMap=function(e){var t={};for(var r in e){var n=e[r];t[n.key]=n}return t},e.getFeaturesMap=function(t,r,n){var i={};return t.featureFlags.forEach((function(o){var s={},a=[];o.experimentIds.forEach((function(e){var t=n[e];t&&(s[t.key]=t),a.push(n[e])}));var c=(o.variables||[]).reduce((function(e,t){return e[t.key]={id:t.id,key:t.key,type:t.type,value:t.defaultValue},e}),{}),u=[],l=t.rolloutIdMap[o.rolloutId];l&&(u=e.getDeliveryRules(t,r,o.id,l.experiments)),i[o.key]={id:o.id,key:o.key,experimentRules:a,deliveryRules:u,experimentsMap:s,variablesMap:c}})),i},e}(),H="PROJECT_CONFIG",W=function(e,t){void 0===t&&(t=null);var r,n,i,o,s=((o=f({},r=e)).audiences=(r.audiences||[]).map((function(e){return f({},e)})),o.experiments=(r.experiments||[]).map((function(e){return f({},e)})),o.featureFlags=(r.featureFlags||[]).map((function(e){return f({},e)})),o.groups=(r.groups||[]).map((function(e){var t=f({},e);return t.experiments=(e.experiments||[]).map((function(e){return f({},e)})),t})),o.rollouts=(r.rollouts||[]).map((function(e){var t=f({},e);return t.experiments=(e.experiments||[]).map((function(e){return f({},e)})),t})),o.environmentKey=null!==(n=r.environmentKey)&&void 0!==n?n:"",o.sdkKey=null!==(i=r.sdkKey)&&void 0!==i?i:"",o);return s.__datafileStr=null===t?JSON.stringify(e):t,(s.audiences||[]).forEach((function(e){e.conditions=JSON.parse(e.conditions)})),s.audiencesById=d(s.audiences,"id"),f(s.audiencesById,d(s.typedAudiences,"id")),s.attributeKeyMap=d(s.attributes,"key"),s.eventKeyMap=d(s.events,"key"),s.groupIdMap=d(s.groups,"id"),Object.keys(s.groupIdMap||{}).forEach((function(e){(s.groupIdMap[e].experiments||[]).forEach((function(t){s.experiments.push(f(t,{groupId:e}))}))})),s.rolloutIdMap=d(s.rollouts||[],"id"),p(s.rolloutIdMap||{}).forEach((function(e){(e.experiments||[]).forEach((function(e){s.experiments.push(e),e.variationKeyMap=d(e.variations,"key")}))})),s.experimentKeyMap=d(s.experiments,"key"),s.experimentIdMap=d(s.experiments,"id"),s.variationIdMap={},s.variationVariableUsageMap={},(s.experiments||[]).forEach((function(e){e.variationKeyMap=d(e.variations,"key"),f(s.variationIdMap,d(e.variations,"id")),p(e.variationKeyMap||{}).forEach((function(e){e.variables&&(s.variationVariableUsageMap[e.id]=d(e.variables,"id"))}))})),s.experimentFeatureMap={},s.featureKeyMap=d(s.featureFlags||[],"key"),p(s.featureKeyMap||{}).forEach((function(e){e.variables.forEach((function(e){e.type===O.STRING&&e.subType===O.JSON&&(e.type=O.JSON,delete e.subType)})),e.variableKeyMap=d(e.variables,"key"),(e.experimentIds||[]).forEach((function(t){s.experimentFeatureMap[t]?s.experimentFeatureMap[t].push(e.id):s.experimentFeatureMap[t]=[e.id]}))})),s.flagRulesMap={},(s.featureFlags||[]).forEach((function(e){var t=[];e.experimentIds.forEach((function(e){var r=s.experimentIdMap[e];r&&t.push(r)}));var r=s.rolloutIdMap[e.rolloutId];r&&t.push.apply(t,r.experiments),s.flagRulesMap[e.key]=t})),s.flagVariationsMap={},m(s.flagRulesMap||{}).forEach((function(e){var t=e[0],r=e[1],n=[];r.forEach((function(e){e.variations.forEach((function(e){g(n,(function(t){return t.id===e.id}))||n.push(e)}))})),s.flagVariationsMap[t]=n})),s},K=function(e,t){var r=e.experimentIdMap[t];if(!r)throw new Error(y(_.INVALID_EXPERIMENT_ID,H,t));return r.layerId},J=function(e,t,r){var n=e.attributeKeyMap[t],i=0===t.indexOf("$opt_");return n?(i&&r.log(w.WARNING,"Attribute %s unexpectedly has reserved prefix %s; using attribute ID instead of reserved attribute name.",t,"$opt_"),n.id):i?t:(r.log(w.DEBUG,_.UNRECOGNIZED_ATTRIBUTE,H,t),null)},Y=function(e,t){var r=e.eventKeyMap[t];return r?r.id:null},X=function(e,t){var r=e.experimentKeyMap[t];if(!r)throw new Error(y(_.INVALID_EXPERIMENT_KEY,H,t));return r.status},Z=function(e,t){return e.variationIdMap.hasOwnProperty(t)?e.variationIdMap[t].key:null},Q=function(e,t){if(e.experimentKeyMap.hasOwnProperty(t)){var r=e.experimentKeyMap[t];if(r)return r}throw new Error(y(_.EXPERIMENT_KEY_NOT_IN_DATAFILE,H,t))},ee=function(e,t){var r=e.experimentIdMap[t];if(!r)throw new Error(y(_.INVALID_EXPERIMENT_ID,H,t));return r.trafficAllocation},te=function(e,t,r){if(e.experimentIdMap.hasOwnProperty(t)){var n=e.experimentIdMap[t];if(n)return n}return r.log(w.ERROR,_.INVALID_EXPERIMENT_ID,H,t),null},re=function(e,t,r){if(!e)return null;var n=g(e.flagVariationsMap[t],(function(e){return e.key===r}));return n||null},ne=function(e,t,r){if(e.featureKeyMap.hasOwnProperty(t)){var n=e.featureKeyMap[t];if(n)return n}return r.log(w.ERROR,_.FEATURE_NOT_IN_DATAFILE,H,t),null},ie=function(e){return e.__datafileStr},oe=function(e){var t;try{t=function(e){if(!e)throw new Error(y(_.NO_DATAFILE_SPECIFIED,C));if("string"==typeof e)try{e=JSON.parse(e)}catch(e){throw new Error(y(_.INVALID_DATAFILE_MALFORMED,C))}if("object"==typeof e&&!Array.isArray(e)&&null!==e&&-1===D.indexOf(e.version))throw new Error(y(_.INVALID_DATAFILE_VERSION,C,e.version));return e}(e.datafile)}catch(e){return{configObj:null,error:e}}if(e.jsonSchemaValidator)try{e.jsonSchemaValidator.validate(t),e.logger.log(w.INFO,A.VALID_DATAFILE,H)}catch(e){return{configObj:null,error:e}}else e.logger.log(w.INFO,A.SKIPPING_JSON_VALIDATION,H);var r=[t];return"string"==typeof e.datafile&&r.push(e.datafile),{configObj:W.apply(void 0,r),error:null}},se=function(e){return!!e.sendFlagDecisions},ae=i.getLogger();function ce(e,t){return e instanceof Error?e.message:t||"Unknown error"}var ue=function(){function e(e){this.updateListeners=[],this.configObj=null,this.optimizelyConfigObj=null,this.datafileManager=null;try{if(this.jsonSchemaValidator=e.jsonSchemaValidator,!e.datafile&&!e.sdkKey){var t=new Error(y(_.DATAFILE_AND_SDK_KEY_MISSING,"PROJECT_CONFIG_MANAGER"));return this.readyPromise=Promise.resolve({success:!1,reason:ce(t)}),void ae.error(t)}var r=null;e.datafile&&(r=this.handleNewDatafile(e.datafile)),e.sdkKey&&e.datafileManager?(this.datafileManager=e.datafileManager,this.datafileManager.start(),this.readyPromise=this.datafileManager.onReady().then(this.onDatafileManagerReadyFulfill.bind(this),this.onDatafileManagerReadyReject.bind(this)),this.datafileManager.on("update",this.onDatafileManagerUpdate.bind(this))):this.configObj?this.readyPromise=Promise.resolve({success:!0}):this.readyPromise=Promise.resolve({success:!1,reason:ce(r,"Invalid datafile")})}catch(e){ae.error(e),this.readyPromise=Promise.resolve({success:!1,reason:ce(e,"Error in initialize")})}}return e.prototype.onDatafileManagerReadyFulfill=function(){if(this.datafileManager){var e=this.handleNewDatafile(this.datafileManager.get());return e?{success:!1,reason:ce(e)}:{success:!0}}return{success:!1,reason:ce(null,"Datafile manager is not provided")}},e.prototype.onDatafileManagerReadyReject=function(e){return{success:!1,reason:ce(e,"Failed to become ready")}},e.prototype.onDatafileManagerUpdate=function(){this.datafileManager&&this.handleNewDatafile(this.datafileManager.get())},e.prototype.handleNewDatafile=function(e){var t=oe({datafile:e,jsonSchemaValidator:this.jsonSchemaValidator,logger:ae}),r=t.configObj,n=t.error;if(n)ae.error(n);else{var i=this.configObj?this.configObj.revision:"null";r&&i!==r.revision&&(this.configObj=r,this.optimizelyConfigObj=null,this.updateListeners.forEach((function(e){return e(r)})))}return n},e.prototype.getConfig=function(){return this.configObj},e.prototype.getOptimizelyConfig=function(){var e,t;return!this.optimizelyConfigObj&&this.configObj&&(this.optimizelyConfigObj=(e=this.configObj,t=ie(this.configObj),new q(e,t))),this.optimizelyConfigObj},e.prototype.onReady=function(){return this.readyPromise},e.prototype.onUpdate=function(e){var t=this;return this.updateListeners.push(e),function(){var r=t.updateListeners.indexOf(e);r>-1&&t.updateListeners.splice(r,1)}},e.prototype.stop=function(){this.datafileManager&&this.datafileManager.stop(),this.updateListeners=[]},e}(),le=Math.pow(2,32),he=function(e){var t=[],r=e.experimentIdMap[e.experimentId].groupId;if(r){var n=e.groupIdMap[r];if(!n)throw new Error(y(_.INVALID_GROUP_ID,"BUCKETER",r));if("random"===n.policy){var i=fe(n,e.bucketingId,e.userId,e.logger);if(null===i)return e.logger.log(w.INFO,A.USER_NOT_IN_ANY_EXPERIMENT,"BUCKETER",e.userId,r),t.push([A.USER_NOT_IN_ANY_EXPERIMENT,"BUCKETER",e.userId,r]),{result:null,reasons:t};if(i!==e.experimentId)return e.logger.log(w.INFO,A.USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP,"BUCKETER",e.userId,e.experimentKey,r),t.push([A.USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP,"BUCKETER",e.userId,e.experimentKey,r]),{result:null,reasons:t};e.logger.log(w.INFO,A.USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP,"BUCKETER",e.userId,e.experimentKey,r),t.push([A.USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP,"BUCKETER",e.userId,e.experimentKey,r])}}var o=""+e.bucketingId+e.experimentId,s=pe(o);e.logger.log(w.DEBUG,A.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,"BUCKETER",s,e.userId),t.push([A.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,"BUCKETER",s,e.userId]);var a=de(s,e.trafficAllocationConfig);return null===a||e.variationIdMap[a]?{result:a,reasons:t}:(a&&(e.logger.log(w.WARNING,A.INVALID_VARIATION_ID,"BUCKETER"),t.push([A.INVALID_VARIATION_ID,"BUCKETER"])),{result:null,reasons:t})},fe=function(e,t,r,n){var i=""+t+e.id,o=pe(i);n.log(w.DEBUG,A.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,"BUCKETER",o,r);var s=e.trafficAllocation;return de(o,s)},de=function(e,t){for(var r=0;r<t.length;r++)if(e<t[r].endOfRange)return t[r].entityId;return null},pe=function(e){try{var t=a.v3(e,1)/le;return Math.floor(1e4*t)}catch(t){throw new Error(y(_.INVALID_BUCKETING_ID,"BUCKETER",e,t.message))}},me=i.getLogger();function ge(e){return/^\d+$/.test(e)}function ve(e){var t=e.indexOf("-"),r=e.indexOf("+");return!(t<0)&&(r<0||t<r)}function ye(e){var t=e.indexOf("-"),r=e.indexOf("+");return!(r<0)&&(t<0||r<t)}function Ee(e){var t=e,r="";if(function(e){return/\s/.test(e)}(e))return me.warn(A.UNKNOWN_MATCH_TYPE,"SEMANTIC VERSION",e),null;if(ve(e)?(t=e.substring(0,e.indexOf("-")),r=e.substring(e.indexOf("-")+1)):ye(e)&&(t=e.substring(0,e.indexOf("+")),r=e.substring(e.indexOf("+")+1)),"string"!=typeof t||"string"!=typeof r)return null;var n=t.split(".").length-1;if(n>2)return me.warn(A.UNKNOWN_MATCH_TYPE,"SEMANTIC VERSION",e),null;var i=t.split(".");if(i.length!=n+1)return me.warn(A.UNKNOWN_MATCH_TYPE,"SEMANTIC VERSION",e),null;for(var o=0,s=i;o<s.length;o++)if(!ge(s[o]))return me.warn(A.UNKNOWN_MATCH_TYPE,"SEMANTIC VERSION",e),null;return r&&i.push(r),i}var be="CUSTOM_ATTRIBUTE_CONDITION_EVALUATOR",we=i.getLogger(),_e=["exact","exists","gt","ge","lt","le","substring","semver_eq","semver_lt","semver_le","semver_gt","semver_ge"],Ae={};function Te(e){return"string"==typeof e||"boolean"==typeof e||b.isNumber(e)}function Ie(e,t){var r=e.value,n=typeof r,i=e.name,o=t[i],s=typeof o;return!Te(r)||b.isNumber(r)&&!b.isSafeInteger(r)?(we.warn(A.UNEXPECTED_CONDITION_VALUE,be,JSON.stringify(e)),null):null===o?(we.debug(A.UNEXPECTED_TYPE_NULL,be,JSON.stringify(e),i),null):Te(o)&&n===s?b.isNumber(o)&&!b.isSafeInteger(o)?(we.warn(A.OUT_OF_BOUNDS,be,JSON.stringify(e),i),null):r===o:(we.warn(A.UNEXPECTED_TYPE,be,JSON.stringify(e),s,i),null)}function Se(e,t){var r=e.name,n=t[r],i=typeof n,o=e.value;return null!==o&&b.isSafeInteger(o)?null===n?(we.debug(A.UNEXPECTED_TYPE_NULL,be,JSON.stringify(e),r),!1):b.isNumber(n)?!!b.isSafeInteger(n)||(we.warn(A.OUT_OF_BOUNDS,be,JSON.stringify(e),r),!1):(we.warn(A.UNEXPECTED_TYPE,be,JSON.stringify(e),i,r),!1):(we.warn(A.UNEXPECTED_CONDITION_VALUE,be,JSON.stringify(e)),!1)}function xe(e,t){var r=e.name,n=t[r],i=typeof n,o=e.value;return"string"!=typeof o?(we.warn(A.UNEXPECTED_CONDITION_VALUE,be,JSON.stringify(e)),null):null===n?(we.debug(A.UNEXPECTED_TYPE_NULL,be,JSON.stringify(e),r),null):"string"!=typeof n?(we.warn(A.UNEXPECTED_TYPE,be,JSON.stringify(e),i,r),null):function(e,t){var r=Ee(t),n=Ee(e);if(!r||!n)return null;for(var i=r.length,o=0;o<n.length;o++){if(i<=o)return ve(e)||ye(e)?1:-1;if(ge(r[o])){var s=parseInt(r[o]),a=parseInt(n[o]);if(s>a)return 1;if(s<a)return-1}else{if(r[o]<n[o])return ve(e)&&!ve(t)?1:-1;if(r[o]>n[o])return!ve(e)&&ve(t)?-1:1}}return ve(t)&&!ve(e)?-1:0}(o,n)}Ae.exact=Ie,Ae.exists=function(e,t){return null!=t[e.name]},Ae.gt=function(e,t){var r=t[e.name],n=e.value;return Se(e,t)&&null!==n?r>n:null},Ae.ge=function(e,t){var r=t[e.name],n=e.value;return Se(e,t)&&null!==n?r>=n:null},Ae.lt=function(e,t){var r=t[e.name],n=e.value;return Se(e,t)&&null!==n?r<n:null},Ae.le=function(e,t){var r=t[e.name],n=e.value;return Se(e,t)&&null!==n?r<=n:null},Ae.substring=function(e,t){var r=e.name,n=t[e.name],i=typeof n,o=e.value;return"string"!=typeof o?(we.warn(A.UNEXPECTED_CONDITION_VALUE,be,JSON.stringify(e)),null):null===n?(we.debug(A.UNEXPECTED_TYPE_NULL,be,JSON.stringify(e),r),null):"string"!=typeof n?(we.warn(A.UNEXPECTED_TYPE,be,JSON.stringify(e),i,r),null):-1!==n.indexOf(o)},Ae.semver_eq=function(e,t){var r=xe(e,t);return null===r?null:0===r},Ae.semver_gt=function(e,t){var r=xe(e,t);return null===r?null:r>0},Ae.semver_ge=function(e,t){var r=xe(e,t);return null===r?null:r>=0},Ae.semver_lt=function(e,t){var r=xe(e,t);return null===r?null:r<0},Ae.semver_le=function(e,t){var r=xe(e,t);return null===r?null:r<=0};var Oe=Object.freeze({__proto__:null,evaluate:function(e,t){var r=e.match;if(void 0!==r&&-1===_e.indexOf(r))return we.warn(A.UNKNOWN_MATCH_TYPE,be,JSON.stringify(e)),null;var n=e.name;return t.hasOwnProperty(n)||"exists"==r?(r&&Ae[r]||Ie)(e,t):(we.debug(A.MISSING_ATTRIBUTE_VALUE,be,JSON.stringify(e),n),null)}}),Re=i.getLogger(),ke=function(){function e(e){this.typeToEvaluatorMap=b.assign({},e,{custom_attribute:Oe})}return e.prototype.evaluate=function(e,t,r){var n=this;return void 0===r&&(r={}),!e||0===e.length||!!G(e,(function(e){var i=t[e];if(i){Re.log(w.DEBUG,A.EVALUATING_AUDIENCE,"AUDIENCE_EVALUATOR",e,JSON.stringify(i.conditions));var o=G(i.conditions,n.evaluateConditionWithUserAttributes.bind(n,r)),s=null===o?"UNKNOWN":o.toString().toUpperCase();return Re.log(w.DEBUG,A.AUDIENCE_EVALUATION_RESULT,"AUDIENCE_EVALUATOR",e,s),o}return null}))},e.prototype.evaluateConditionWithUserAttributes=function(e,t){var r=this.typeToEvaluatorMap[t.type];if(!r)return Re.log(w.WARNING,A.UNKNOWN_CONDITION_TYPE,"AUDIENCE_EVALUATOR",JSON.stringify(t)),null;try{return r.evaluate(t,e)}catch(e){Re.log(w.ERROR,_.CONDITION_EVALUATOR_ERROR,"AUDIENCE_EVALUATOR",t.type,e.message)}return null},e}();function Ne(e){return"string"==typeof e&&""!==e}var Ce="DECISION_SERVICE",De=function(){function e(e){var t;this.audienceEvaluator=(t=e.UNSTABLE_conditionEvaluators,new ke(t)),this.forcedVariationMap={},this.logger=e.logger,this.userProfileService=e.userProfileService||null}return e.prototype.getVariation=function(e,r,n,i){void 0===i&&(i={});var o=n.getUserId(),s=n.getAttributes(),a=this.getBucketingId(o,s),c=[],u=r.key;if(!this.checkIfExperimentIsActive(e,u))return this.logger.log(w.INFO,A.EXPERIMENT_NOT_RUNNING,Ce,u),c.push([A.EXPERIMENT_NOT_RUNNING,Ce,u]),{result:null,reasons:c};var l=this.getForcedVariation(e,u,o);c.push.apply(c,l.reasons);var h=l.result;if(h)return{result:h,reasons:c};var f=this.getWhitelistedVariation(r,o);c.push.apply(c,f.reasons);var d=f.result;if(d)return{result:d.key,reasons:c};var p=i[t.N1.IGNORE_USER_PROFILE_SERVICE],m=this.resolveExperimentBucketMap(o,s);if(!p&&(d=this.getStoredVariation(e,r,o,m)))return this.logger.log(w.INFO,A.RETURNING_STORED_VARIATION,Ce,d.key,u,o),c.push([A.RETURNING_STORED_VARIATION,Ce,d.key,u,o]),{result:d.key,reasons:c};var g=this.checkIfUserIsInAudience(e,r,x.EXPERIMENT,s,"");if(c.push.apply(c,g.reasons),!g.result)return this.logger.log(w.INFO,A.USER_NOT_IN_EXPERIMENT,Ce,o,u),c.push([A.USER_NOT_IN_EXPERIMENT,Ce,o,u]),{result:null,reasons:c};var v=this.buildBucketerParams(e,r,a,o),y=he(v);c.push.apply(c,y.reasons);var E=y.result;return E&&(d=e.variationIdMap[E]),d?(this.logger.log(w.INFO,A.USER_HAS_VARIATION,Ce,o,d.key,u),c.push([A.USER_HAS_VARIATION,Ce,o,d.key,u]),p||this.saveUserProfile(r,d,o,m),{result:d.key,reasons:c}):(this.logger.log(w.DEBUG,A.USER_HAS_NO_VARIATION,Ce,o,u),c.push([A.USER_HAS_NO_VARIATION,Ce,o,u]),{result:null,reasons:c})},e.prototype.resolveExperimentBucketMap=function(e,t){t=t||{};var r=this.getUserProfile(e)||{},n=t[T.STICKY_BUCKETING_KEY];return b.assign({},r.experiment_bucket_map,n)},e.prototype.checkIfExperimentIsActive=function(e,t){return function(e,t){return"Running"===X(e,t)}(e,t)},e.prototype.getWhitelistedVariation=function(e,t){var r=[];if(e.forcedVariations&&e.forcedVariations.hasOwnProperty(t)){var n=e.forcedVariations[t];return e.variationKeyMap.hasOwnProperty(n)?(this.logger.log(w.INFO,A.USER_FORCED_IN_VARIATION,Ce,t,n),r.push([A.USER_FORCED_IN_VARIATION,Ce,t,n]),{result:e.variationKeyMap[n],reasons:r}):(this.logger.log(w.ERROR,A.FORCED_BUCKETING_FAILED,Ce,n,t),r.push([A.FORCED_BUCKETING_FAILED,Ce,n,t]),{result:null,reasons:r})}return{result:null,reasons:r}},e.prototype.checkIfUserIsInAudience=function(e,t,r,n,i){var o=[],s=function(e,t){var r=e.experimentIdMap[t];if(!r)throw new Error(y(_.INVALID_EXPERIMENT_ID,H,t));return r.audienceConditions||r.audienceIds}(e,t.id),a=e.audiencesById;this.logger.log(w.DEBUG,A.EVALUATING_AUDIENCES_COMBINED,Ce,r,i||t.key,JSON.stringify(s)),o.push([A.EVALUATING_AUDIENCES_COMBINED,Ce,r,i||t.key,JSON.stringify(s)]);var c=this.audienceEvaluator.evaluate(s,a,n);return this.logger.log(w.INFO,A.AUDIENCE_EVALUATION_RESULT_COMBINED,Ce,r,i||t.key,c.toString().toUpperCase()),o.push([A.AUDIENCE_EVALUATION_RESULT_COMBINED,Ce,r,i||t.key,c.toString().toUpperCase()]),{result:c,reasons:o}},e.prototype.buildBucketerParams=function(e,t,r,n){return{bucketingId:r,experimentId:t.id,experimentKey:t.key,experimentIdMap:e.experimentIdMap,experimentKeyMap:e.experimentKeyMap,groupIdMap:e.groupIdMap,logger:this.logger,trafficAllocationConfig:ee(e,t.id),userId:n,variationIdMap:e.variationIdMap}},e.prototype.getStoredVariation=function(e,t,r,n){if(n.hasOwnProperty(t.id)){var i=n[t.id],o=i.variation_id;if(e.variationIdMap.hasOwnProperty(o))return e.variationIdMap[i.variation_id];this.logger.log(w.INFO,A.SAVED_VARIATION_NOT_FOUND,Ce,r,o,t.key)}return null},e.prototype.getUserProfile=function(e){var t={user_id:e,experiment_bucket_map:{}};if(!this.userProfileService)return t;try{return this.userProfileService.lookup(e)}catch(t){this.logger.log(w.ERROR,_.USER_PROFILE_LOOKUP_ERROR,Ce,e,t.message)}return null},e.prototype.saveUserProfile=function(e,t,r,n){if(this.userProfileService)try{n[e.id]={variation_id:t.id},this.userProfileService.save({user_id:r,experiment_bucket_map:n}),this.logger.log(w.INFO,A.SAVED_VARIATION,Ce,t.key,e.key,r)}catch(e){this.logger.log(w.ERROR,_.USER_PROFILE_SAVE_ERROR,Ce,r,e.message)}},e.prototype.getVariationForFeature=function(e,t,r,n){void 0===n&&(n={});var i=[],o=this.getVariationForFeatureExperiment(e,t,r,n);i.push.apply(i,o.reasons);var s=o.result;if(null!==s.variation)return{result:s,reasons:i};var a=this.getVariationForRollout(e,t,r);i.push.apply(i,a.reasons);var c=a.result,u=r.getUserId();return c.variation?(this.logger.log(w.DEBUG,A.USER_IN_ROLLOUT,Ce,u,t.key),i.push([A.USER_IN_ROLLOUT,Ce,u,t.key]),{result:c,reasons:i}):(this.logger.log(w.DEBUG,A.USER_NOT_IN_ROLLOUT,Ce,u,t.key),i.push([A.USER_NOT_IN_ROLLOUT,Ce,u,t.key]),{result:c,reasons:i})},e.prototype.getVariationForFeatureExperiment=function(e,t,r,n){void 0===n&&(n={});var i,o,s=[],a=null;if(t.experimentIds.length>0)for(o=0;o<t.experimentIds.length;o++){var c=te(e,t.experimentIds[o],this.logger);if(c&&(i=this.getVariationFromExperimentRule(e,t.key,c,r,n),s.push.apply(s,i.reasons),a=i.result)){var u=null;return(u=c.variationKeyMap[a])||(u=re(e,t.key,a)),{result:{experiment:c,variation:u,decisionSource:S.FEATURE_TEST},reasons:s}}}else this.logger.log(w.DEBUG,A.FEATURE_HAS_NO_EXPERIMENTS,Ce,t.key),s.push([A.FEATURE_HAS_NO_EXPERIMENTS,Ce,t.key]);return{result:{experiment:null,variation:null,decisionSource:S.FEATURE_TEST},reasons:s}},e.prototype.getVariationForRollout=function(e,t,r){var n=[];if(!t.rolloutId)return this.logger.log(w.DEBUG,A.NO_ROLLOUT_EXISTS,Ce,t.key),n.push([A.NO_ROLLOUT_EXISTS,Ce,t.key]),{result:{experiment:null,variation:null,decisionSource:S.ROLLOUT},reasons:n};var i=e.rolloutIdMap[t.rolloutId];if(!i)return this.logger.log(w.ERROR,_.INVALID_ROLLOUT_ID,Ce,t.rolloutId,t.key),n.push([_.INVALID_ROLLOUT_ID,Ce,t.rolloutId,t.key]),{result:{experiment:null,variation:null,decisionSource:S.ROLLOUT},reasons:n};var o,s,a,c=i.experiments;if(0===c.length)return this.logger.log(w.ERROR,A.ROLLOUT_HAS_NO_EXPERIMENTS,Ce,t.rolloutId),n.push([A.ROLLOUT_HAS_NO_EXPERIMENTS,Ce,t.rolloutId]),{result:{experiment:null,variation:null,decisionSource:S.ROLLOUT},reasons:n};for(var u=0;u<c.length;){if(o=this.getVariationFromDeliveryRule(e,t.key,c,u,r),n.push.apply(n,o.reasons),a=o.result,s=o.skipToEveryoneElse,a)return{result:{experiment:e.experimentIdMap[c[u].id],variation:a,decisionSource:S.ROLLOUT},reasons:n};u=s?c.length-1:u+1}return{result:{experiment:null,variation:null,decisionSource:S.ROLLOUT},reasons:n}},e.prototype.getBucketingId=function(e,t){var r=e;return null!=t&&"object"==typeof t&&t.hasOwnProperty(T.BUCKETING_ID)&&("string"==typeof t[T.BUCKETING_ID]?(r=t[T.BUCKETING_ID],this.logger.log(w.DEBUG,A.VALID_BUCKETING_ID,Ce,r)):this.logger.log(w.WARNING,A.BUCKETING_ID_NOT_STRING,Ce)),r},e.prototype.findValidatedForcedDecision=function(e,t,r,n){var i,o=[],s=t.getForcedDecision({flagKey:r,ruleKey:n}),a=null,c=t.getUserId();return e&&s&&(i=s.variationKey,(a=re(e,r,i))?n?(this.logger.log(w.INFO,A.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED,i,r,n,c),o.push([A.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED,i,r,n,c])):(this.logger.log(w.INFO,A.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED,i,r,c),o.push([A.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED,i,r,c])):n?(this.logger.log(w.INFO,A.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED_BUT_INVALID,r,n,c),o.push([A.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED_BUT_INVALID,r,n,c])):(this.logger.log(w.INFO,A.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED_BUT_INVALID,r,c),o.push([A.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED_BUT_INVALID,r,c]))),{result:a,reasons:o}},e.prototype.removeForcedVariation=function(e,t,r){if(!e)throw new Error(y(_.INVALID_USER_ID,Ce));if(!this.forcedVariationMap.hasOwnProperty(e))throw new Error(y(_.USER_NOT_IN_FORCED_VARIATION,Ce,e));delete this.forcedVariationMap[e][t],this.logger.log(w.DEBUG,A.VARIATION_REMOVED_FOR_USER,Ce,r,e)},e.prototype.setInForcedVariationMap=function(e,t,r){this.forcedVariationMap.hasOwnProperty(e)||(this.forcedVariationMap[e]={}),this.forcedVariationMap[e][t]=r,this.logger.log(w.DEBUG,A.USER_MAPPED_TO_FORCED_VARIATION,Ce,r,t,e)},e.prototype.getForcedVariation=function(e,t,r){var n,i=[],o=this.forcedVariationMap[r];if(!o)return this.logger.log(w.DEBUG,A.USER_HAS_NO_FORCED_VARIATION,Ce,r),{result:null,reasons:i};try{var s=Q(e,t);if(!s.hasOwnProperty("id"))return this.logger.log(w.ERROR,_.IMPROPERLY_FORMATTED_EXPERIMENT,Ce,t),i.push([_.IMPROPERLY_FORMATTED_EXPERIMENT,Ce,t]),{result:null,reasons:i};n=s.id}catch(e){return this.logger.log(w.ERROR,e.message),i.push(e.message),{result:null,reasons:i}}var a=o[n];if(!a)return this.logger.log(w.DEBUG,A.USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT,Ce,t,r),{result:null,reasons:i};var c=Z(e,a);return c?(this.logger.log(w.DEBUG,A.USER_HAS_FORCED_VARIATION,Ce,c,t,r),i.push([A.USER_HAS_FORCED_VARIATION,Ce,c,t,r])):this.logger.log(w.DEBUG,A.USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT,Ce,t,r),{result:c,reasons:i}},e.prototype.setForcedVariation=function(e,t,r,n){if(null!=n&&!Ne(n))return this.logger.log(w.ERROR,_.INVALID_VARIATION_KEY,Ce),!1;var i;try{var o=Q(e,t);if(!o.hasOwnProperty("id"))return this.logger.log(w.ERROR,_.IMPROPERLY_FORMATTED_EXPERIMENT,Ce,t),!1;i=o.id}catch(e){return this.logger.log(w.ERROR,e.message),!1}if(null==n)try{return this.removeForcedVariation(r,i,t),!0}catch(e){return this.logger.log(w.ERROR,e.message),!1}var s=function(e,t,r){var n=e.experimentKeyMap[t];return n.variationKeyMap.hasOwnProperty(r)?n.variationKeyMap[r].id:null}(e,t,n);if(!s)return this.logger.log(w.ERROR,_.NO_VARIATION_FOR_EXPERIMENT_KEY,Ce,n,t),!1;try{return this.setInForcedVariationMap(r,i,s),!0}catch(e){return this.logger.log(w.ERROR,e.message),!1}},e.prototype.getVariationFromExperimentRule=function(e,t,r,n,i){void 0===i&&(i={});var o=[],s=this.findValidatedForcedDecision(e,n,t,r.key);o.push.apply(o,s.reasons);var a=s.result;if(a)return{result:a.key,reasons:o};var c=this.getVariation(e,r,n,i);return o.push.apply(o,c.reasons),{result:c.result,reasons:o}},e.prototype.getVariationFromDeliveryRule=function(e,t,r,n,i){var o=[],s=!1,a=r[n],c=this.findValidatedForcedDecision(e,i,t,a.key);o.push.apply(o,c.reasons);var u=c.result;if(u)return{result:u,reasons:o,skipToEveryoneElse:s};var l,h,f,d,p,m=i.getUserId(),g=i.getAttributes(),v=this.getBucketingId(m,g),y=n===r.length-1,E=y?"Everyone Else":n+1,b=null,_=this.checkIfUserIsInAudience(e,a,x.RULE,g,E);return o.push.apply(o,_.reasons),_.result?(this.logger.log(w.DEBUG,A.USER_MEETS_CONDITIONS_FOR_TARGETING_RULE,Ce,m,E),o.push([A.USER_MEETS_CONDITIONS_FOR_TARGETING_RULE,Ce,m,E]),h=this.buildBucketerParams(e,a,v,m),f=he(h),o.push.apply(o,f.reasons),(l=f.result)&&(p=l,b=(d=e).variationIdMap.hasOwnProperty(p)?d.variationIdMap[p]:null),b?(this.logger.log(w.DEBUG,A.USER_BUCKETED_INTO_TARGETING_RULE,Ce,m,E),o.push([A.USER_BUCKETED_INTO_TARGETING_RULE,Ce,m,E])):y||(this.logger.log(w.DEBUG,A.USER_NOT_BUCKETED_INTO_TARGETING_RULE,Ce,m,E),o.push([A.USER_NOT_BUCKETED_INTO_TARGETING_RULE,Ce,m,E]),s=!0)):(this.logger.log(w.DEBUG,A.USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE,Ce,m,E),o.push([A.USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE,Ce,m,E])),{result:b,reasons:o,skipToEveryoneElse:s}},e}();function Le(e,t){if(e.hasOwnProperty("revenue")){var r=e.revenue,n=void 0;return"string"==typeof r?(n=parseInt(r),isNaN(n)?(t.log(w.INFO,A.FAILED_TO_PARSE_REVENUE,"EVENT_TAG_UTILS",r),null):(t.log(w.INFO,A.PARSED_REVENUE_VALUE,"EVENT_TAG_UTILS",n),n)):"number"==typeof r?(n=r,t.log(w.INFO,A.PARSED_REVENUE_VALUE,"EVENT_TAG_UTILS",n),n):null}return null}function Be(e,t){if(e.hasOwnProperty("value")){var r=e.value,n=void 0;return"string"==typeof r?(n=parseFloat(r),isNaN(n)?(t.log(w.INFO,A.FAILED_TO_PARSE_VALUE,"EVENT_TAG_UTILS",r),null):(t.log(w.INFO,A.PARSED_NUMERIC_VALUE,"EVENT_TAG_UTILS",n),n)):"number"==typeof r?(n=r,t.log(w.INFO,A.PARSED_NUMERIC_VALUE,"EVENT_TAG_UTILS",n),n):null}return null}function Pe(e,t){return"string"==typeof e&&("string"==typeof t||"boolean"==typeof t||b.isNumber(t)&&b.isSafeInteger(t))}var Ue="https://logx.optimizely.com/v1/events";function Me(e){var t=e.attributes,r=e.userId,n=e.clientEngine,i=e.clientVersion,o=e.configObj,s=e.logger,a=!!o.anonymizeIP&&o.anonymizeIP,c=o.botFiltering,u={snapshots:[],visitor_id:r,attributes:[]},l={account_id:o.accountId,project_id:o.projectId,visitors:[u],revision:o.revision,client_name:n,client_version:i,anonymize_ip:a,enrich_decisions:!0};return t&&Object.keys(t||{}).forEach((function(e){if(Pe(e,t[e])){var r=J(o,e,s);r&&l.visitors[0].attributes.push({entity_id:r,key:e,type:"custom",value:t[e]})}})),"boolean"==typeof c&&l.visitors[0].attributes.push({entity_id:T.BOT_FILTERING,key:T.BOT_FILTERING,type:"custom",value:c}),l}function je(e){var t,r;return null!==(r=null===(t=e.experiment)||void 0===t?void 0:t.key)&&void 0!==r?r:""}function Fe(e){var t,r;return null!==(r=null===(t=e.variation)||void 0===t?void 0:t.key)&&void 0!==r?r:""}function Ve(e){var t,r;return null!==(r=null===(t=e.variation)||void 0===t?void 0:t.featureEnabled)&&void 0!==r&&r}function $e(e){var t,r;return null!==(r=null===(t=e.experiment)||void 0===t?void 0:t.id)&&void 0!==r?r:null}function ze(e){var t,r;return null!==(r=null===(t=e.variation)||void 0===t?void 0:t.id)&&void 0!==r?r:null}var Ge=i.getLogger("EVENT_BUILDER");function qe(e,t){var r=[];return t&&Object.keys(t||{}).forEach((function(n){if(Pe(n,t[n])){var i=J(e,n,Ge);i&&r.push({entityId:i,key:n,value:t[n]})}})),r}var He="USER_PROFILE_SERVICE_VALIDATOR",We=function(){function e(e){var r,n=this,i=e.clientEngine;i||(e.logger.log(w.INFO,A.INVALID_CLIENT_ENGINE,"OPTIMIZELY",i),i="node-sdk"),this.clientEngine=i,this.clientVersion=e.clientVersion||"4.9.2",this.errorHandler=e.errorHandler,this.isOptimizelyConfigValid=e.isValidInstance,this.logger=e.logger;var o=null!==(r=e.defaultDecideOptions)&&void 0!==r?r:[];Array.isArray(o)||(this.logger.log(w.DEBUG,A.INVALID_DEFAULT_DECIDE_OPTIONS,"OPTIMIZELY"),o=[]);var s={};o.forEach((function(e){t.N1[e]?s[e]=!0:n.logger.log(w.WARNING,A.UNRECOGNIZED_DECIDE_OPTION,"OPTIMIZELY",e)})),this.defaultDecideOptions=s,this.projectConfigManager=function(e){return new ue(e)}({datafile:e.datafile,jsonSchemaValidator:e.jsonSchemaValidator,sdkKey:e.sdkKey,datafileManager:e.datafileManager}),this.disposeOnUpdate=this.projectConfigManager.onUpdate((function(e){n.logger.log(w.INFO,A.UPDATED_OPTIMIZELY_CONFIG,"OPTIMIZELY",e.revision,e.projectId),n.notificationCenter.sendNotifications(E.OPTIMIZELY_CONFIG_UPDATE)}));var a,c=this.projectConfigManager.onReady(),u=null;if(e.userProfileService)try{(function(e){if("object"==typeof e&&null!==e){if("function"!=typeof e.lookup)throw new Error(y(_.INVALID_USER_PROFILE_SERVICE,He,"Missing function 'lookup'"));if("function"!=typeof e.save)throw new Error(y(_.INVALID_USER_PROFILE_SERVICE,He,"Missing function 'save'"));return!0}throw new Error(y(_.INVALID_USER_PROFILE_SERVICE,He))})(e.userProfileService)&&(u=e.userProfileService,this.logger.log(w.INFO,A.VALID_USER_PROFILE_SERVICE,"OPTIMIZELY"))}catch(e){this.logger.log(w.WARNING,e.message)}this.decisionService=(a={userProfileService:u,logger:this.logger,UNSTABLE_conditionEvaluators:e.UNSTABLE_conditionEvaluators},new De(a)),this.notificationCenter=e.notificationCenter,this.eventProcessor=e.eventProcessor;var l=this.eventProcessor.start();this.readyPromise=Promise.all([c,l]).then((function(e){return e[0]})),this.readyTimeouts={},this.nextReadyTimeoutId=0}return e.prototype.isValidInstance=function(){return this.isOptimizelyConfigValid&&!!this.projectConfigManager.getConfig()},e.prototype.activate=function(e,t,r){try{if(!this.isValidInstance())return this.logger.log(w.ERROR,A.INVALID_OBJECT,"OPTIMIZELY","activate"),null;if(!this.validateInputs({experiment_key:e,user_id:t},r))return this.notActivatingExperiment(e,t);var n=this.projectConfigManager.getConfig();if(!n)return null;try{var i=this.getVariation(e,t,r);if(null===i)return this.notActivatingExperiment(e,t);if(!function(e,t){return"Running"===X(e,t)}(n,e))return this.logger.log(w.DEBUG,A.SHOULD_NOT_DISPATCH_ACTIVATE,"OPTIMIZELY",e),i;var o=Q(n,e),s={experiment:o,variation:o.variationKeyMap[i],decisionSource:S.EXPERIMENT};return this.sendImpressionEvent(s,"",t,!0,r),i}catch(r){return this.logger.log(w.ERROR,r.message),this.logger.log(w.INFO,A.NOT_ACTIVATING_USER,"OPTIMIZELY",t,e),this.errorHandler.handleError(r),null}}catch(e){return this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e),null}},e.prototype.sendImpressionEvent=function(e,t,r,n,i){var o=this.projectConfigManager.getConfig();if(o){var s=function(e){var t=e.configObj,r=e.decisionObj,n=e.userId,i=e.flagKey,o=e.enabled,s=e.userAttributes,a=e.clientEngine,c=e.clientVersion,u=r.decisionSource,l=je(r),h=$e(r),f=Fe(r),d=ze(r),p=null!==h?K(t,h):null;return{type:"impression",timestamp:b.currentTimestamp(),uuid:b.uuid(),user:{id:n,attributes:qe(t,s)},context:{accountId:t.accountId,projectId:t.projectId,revision:t.revision,clientName:a,clientVersion:c,anonymizeIP:t.anonymizeIP||!1,botFiltering:t.botFiltering},layer:{id:p},experiment:{id:h,key:l},variation:{id:d,key:f},ruleKey:l,flagKey:i,ruleType:u,enabled:o}}({decisionObj:e,flagKey:t,enabled:n,userId:r,userAttributes:i,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:o});this.eventProcessor.process(s),this.emitNotificationCenterActivate(e,t,r,n,i)}},e.prototype.emitNotificationCenterActivate=function(e,t,r,n,i){var o=this.projectConfigManager.getConfig();if(o){var s,a=e.decisionSource,c=je(e),u=$e(e),l=Fe(e),h=ze(e);null!==u&&""!==l&&(s=o.experimentIdMap[u]);var f,d=function(e){var t,r,n,i,o,s,a,c,u=Me(e),l=(t=e.configObj,r=e.experimentId,n=e.variationId,i=e.ruleKey,o=e.ruleType,s=e.flagKey,a=e.enabled,{decisions:[{campaign_id:c=r?K(t,r):null,experiment_id:r,variation_id:n,metadata:{flag_key:s,rule_key:i,rule_type:o,variation_key:(n?Z(t,n):null)||"",enabled:a}}],events:[{entity_id:c,timestamp:b.currentTimestamp(),key:"campaign_activated",uuid:b.uuid()}]});return u.visitors[0].snapshots.push(l),{httpVerb:"POST",url:Ue,params:u}}({attributes:i,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:o,experimentId:u,ruleKey:c,flagKey:t,ruleType:a,userId:r,enabled:n,variationId:h,logger:this.logger});s&&s.variationKeyMap&&""!==l&&(f=s.variationKeyMap[l]),this.notificationCenter.sendNotifications(E.ACTIVATE,{experiment:s,userId:r,attributes:i,variation:f,logEvent:d})}},e.prototype.track=function(e,t,r,n){try{if(!this.isValidInstance())return void this.logger.log(w.ERROR,A.INVALID_OBJECT,"OPTIMIZELY","track");if(!this.validateInputs({user_id:t,event_key:e},r,n))return;var i=this.projectConfigManager.getConfig();if(!i)return;if(!function(e,t){return e.eventKeyMap.hasOwnProperty(t)}(i,e))return this.logger.log(w.WARNING,A.EVENT_KEY_NOT_FOUND,"OPTIMIZELY",e),void this.logger.log(w.WARNING,A.NOT_TRACKING_USER,"OPTIMIZELY",t);var o=function(e){var t=e.configObj,r=e.userId,n=e.userAttributes,i=e.clientEngine,o=e.clientVersion,s=e.eventKey,a=e.eventTags,c=Y(t,s),u=a?Le(a,Ge):null,l=a?Be(a,Ge):null;return{type:"conversion",timestamp:b.currentTimestamp(),uuid:b.uuid(),user:{id:r,attributes:qe(t,n)},context:{accountId:t.accountId,projectId:t.projectId,revision:t.revision,clientName:i,clientVersion:o,anonymizeIP:t.anonymizeIP||!1,botFiltering:t.botFiltering},event:{id:c,key:s},revenue:u,value:l,tags:a}}({eventKey:e,eventTags:n=this.filterEmptyValues(n),userId:t,userAttributes:r,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:i});this.logger.log(w.INFO,A.TRACK_EVENT,"OPTIMIZELY",e,t),this.eventProcessor.process(o),this.emitNotificationCenterTrack(e,t,r,n)}catch(e){this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e),this.logger.log(w.ERROR,A.NOT_TRACKING_USER,"OPTIMIZELY",t)}},e.prototype.emitNotificationCenterTrack=function(e,t,r,n){try{var i=this.projectConfigManager.getConfig();if(!i)return;var o=function(e){var t=Me(e),r=function(e,t,r,n){var i={events:[]},o={entity_id:Y(e,t),timestamp:b.currentTimestamp(),uuid:b.uuid(),key:t};if(n){var s=Le(n,r);null!==s&&(o.revenue=s);var a=Be(n,r);null!==a&&(o.value=a),o.tags=n}return i.events.push(o),i}(e.configObj,e.eventKey,e.logger,e.eventTags);return t.visitors[0].snapshots=[r],{httpVerb:"POST",url:Ue,params:t}}({attributes:r,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:i,eventKey:e,eventTags:n,logger:this.logger,userId:t});this.notificationCenter.sendNotifications(E.TRACK,{eventKey:e,userId:t,attributes:r,eventTags:n,logEvent:o})}catch(e){this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e)}},e.prototype.getVariation=function(e,t,r){try{if(!this.isValidInstance())return this.logger.log(w.ERROR,A.INVALID_OBJECT,"OPTIMIZELY","getVariation"),null;try{if(!this.validateInputs({experiment_key:e,user_id:t},r))return null;var n=this.projectConfigManager.getConfig();if(!n)return null;var i=n.experimentKeyMap[e];if(!i)return this.logger.log(w.DEBUG,_.INVALID_EXPERIMENT_KEY,"OPTIMIZELY",e),null;var o=this.decisionService.getVariation(n,i,this.createUserContext(t,r)).result,s=(a=n,c=i.id,a.experimentFeatureMap.hasOwnProperty(c)?I.FEATURE_TEST:I.AB_TEST);return this.notificationCenter.sendNotifications(E.DECISION,{type:s,userId:t,attributes:r||{},decisionInfo:{experimentKey:e,variationKey:o}}),o}catch(e){return this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e),null}}catch(e){return this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e),null}var a,c},e.prototype.setForcedVariation=function(e,t,r){if(!this.validateInputs({experiment_key:e,user_id:t}))return!1;var n=this.projectConfigManager.getConfig();if(!n)return!1;try{return this.decisionService.setForcedVariation(n,e,t,r)}catch(e){return this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e),!1}},e.prototype.getForcedVariation=function(e,t){if(!this.validateInputs({experiment_key:e,user_id:t}))return null;var r=this.projectConfigManager.getConfig();if(!r)return null;try{return this.decisionService.getForcedVariation(r,e,t).result}catch(e){return this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e),null}},e.prototype.validateInputs=function(e,t,r){try{if(e.hasOwnProperty("user_id")){var n=e.user_id;if("string"!=typeof n||null===n||"undefined"===n)throw new Error(y(_.INVALID_INPUT_FORMAT,"OPTIMIZELY","user_id"));delete e.user_id}return Object.keys(e).forEach((function(t){if(!Ne(e[t]))throw new Error(y(_.INVALID_INPUT_FORMAT,"OPTIMIZELY",t))})),t&&function(e){if("object"!=typeof e||Array.isArray(e)||null===e)throw new Error(y(_.INVALID_ATTRIBUTES,"ATTRIBUTES_VALIDATOR"));Object.keys(e).forEach((function(t){if(void 0===e[t])throw new Error(y(_.UNDEFINED_ATTRIBUTE,"ATTRIBUTES_VALIDATOR",t))}))}(t),r&&function(e){if("object"!=typeof e||Array.isArray(e)||null===e)throw new Error(y(_.INVALID_EVENT_TAGS,"EVENT_TAGS_VALIDATOR"))}(r),!0}catch(e){return this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e),!1}},e.prototype.notActivatingExperiment=function(e,t){return this.logger.log(w.INFO,A.NOT_ACTIVATING_USER,"OPTIMIZELY",t,e),null},e.prototype.filterEmptyValues=function(e){for(var t in e)!e.hasOwnProperty(t)||null!==e[t]&&void 0!==e[t]||delete e[t];return e},e.prototype.isFeatureEnabled=function(e,t,r){try{if(!this.isValidInstance())return this.logger.log(w.ERROR,A.INVALID_OBJECT,"OPTIMIZELY","isFeatureEnabled"),!1;if(!this.validateInputs({feature_key:e,user_id:t},r))return!1;var n=this.projectConfigManager.getConfig();if(!n)return!1;var i=ne(n,e,this.logger);if(!i)return!1;var o={},s=this.createUserContext(t,r),a=this.decisionService.getVariationForFeature(n,i,s).result,c=a.decisionSource,u=je(a),l=Fe(a),h=Ve(a);c===S.FEATURE_TEST&&(o={experimentKey:u,variationKey:l}),(c===S.FEATURE_TEST||c===S.ROLLOUT&&se(n))&&this.sendImpressionEvent(a,i.key,t,h,r),!0===h?this.logger.log(w.INFO,A.FEATURE_ENABLED_FOR_USER,"OPTIMIZELY",e,t):(this.logger.log(w.INFO,A.FEATURE_NOT_ENABLED_FOR_USER,"OPTIMIZELY",e,t),h=!1);var f={featureKey:e,featureEnabled:h,source:a.decisionSource,sourceInfo:o};return this.notificationCenter.sendNotifications(E.DECISION,{type:I.FEATURE,userId:t,attributes:r||{},decisionInfo:f}),h}catch(e){return this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e),!1}},e.prototype.getEnabledFeatures=function(e,t){var r=this;try{var n=[];if(!this.isValidInstance())return this.logger.log(w.ERROR,A.INVALID_OBJECT,"OPTIMIZELY","getEnabledFeatures"),n;if(!this.validateInputs({user_id:e}))return n;var i=this.projectConfigManager.getConfig();return i?(p(i.featureKeyMap).forEach((function(i){r.isFeatureEnabled(i.key,e,t)&&n.push(i.key)})),n):n}catch(e){return this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e),[]}},e.prototype.getFeatureVariable=function(e,t,r,n){try{return this.isValidInstance()?this.getFeatureVariableForType(e,t,null,r,n):(this.logger.log(w.ERROR,A.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariable"),null)}catch(e){return this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e),null}},e.prototype.getFeatureVariableForType=function(e,t,r,n,i){if(!this.validateInputs({feature_key:e,variable_key:t,user_id:n},i))return null;var o=this.projectConfigManager.getConfig();if(!o)return null;var s=ne(o,e,this.logger);if(!s)return null;var a=function(e,t,r,n){var i=e.featureKeyMap[t];return i?i.variableKeyMap[r]||(n.log(w.ERROR,_.VARIABLE_KEY_NOT_IN_DATAFILE,H,r,t),null):(n.log(w.ERROR,_.FEATURE_NOT_IN_DATAFILE,H,t),null)}(o,e,t,this.logger);if(!a)return null;if(r&&a.type!==r)return this.logger.log(w.WARNING,A.VARIABLE_REQUESTED_WITH_WRONG_TYPE,"OPTIMIZELY",r,a.type),null;var c=this.createUserContext(n,i),u=this.decisionService.getVariationForFeature(o,s,c).result,l=Ve(u),h=this.getFeatureVariableValueFromVariation(e,l,u.variation,a,n),f={};return u.decisionSource===S.FEATURE_TEST&&null!==u.experiment&&null!==u.variation&&(f={experimentKey:u.experiment.key,variationKey:u.variation.key}),this.notificationCenter.sendNotifications(E.DECISION,{type:I.FEATURE_VARIABLE,userId:n,attributes:i||{},decisionInfo:{featureKey:e,featureEnabled:l,source:u.decisionSource,variableKey:t,variableValue:h,variableType:a.type,sourceInfo:f}}),h},e.prototype.getFeatureVariableValueFromVariation=function(e,t,r,n,i){var o=this.projectConfigManager.getConfig();if(!o)return null;var s=n.defaultValue;if(null!==r){var a=function(e,t,r,n){if(!t||!r)return null;if(!e.variationVariableUsageMap.hasOwnProperty(r.id))return n.log(w.ERROR,_.VARIATION_ID_NOT_IN_DATAFILE_NO_EXPERIMENT,H,r.id),null;var i=e.variationVariableUsageMap[r.id][t.id];return i?i.value:null}(o,n,r,this.logger);null!==a?t?(s=a,this.logger.log(w.INFO,A.USER_RECEIVED_VARIABLE_VALUE,"OPTIMIZELY",s,n.key,e)):this.logger.log(w.INFO,A.FEATURE_NOT_ENABLED_RETURN_DEFAULT_VARIABLE_VALUE,"OPTIMIZELY",e,i,s):this.logger.log(w.INFO,A.VARIABLE_NOT_USED_RETURN_DEFAULT_VARIABLE_VALUE,"OPTIMIZELY",n.key,r.key)}else this.logger.log(w.INFO,A.USER_RECEIVED_DEFAULT_VARIABLE_VALUE,"OPTIMIZELY",i,n.key,e);return function(e,t,r){var n;switch(t){case O.BOOLEAN:"true"!==e&&"false"!==e?(r.log(w.ERROR,_.UNABLE_TO_CAST_VALUE,H,e,t),n=null):n="true"===e;break;case O.INTEGER:n=parseInt(e,10),isNaN(n)&&(r.log(w.ERROR,_.UNABLE_TO_CAST_VALUE,H,e,t),n=null);break;case O.DOUBLE:n=parseFloat(e),isNaN(n)&&(r.log(w.ERROR,_.UNABLE_TO_CAST_VALUE,H,e,t),n=null);break;case O.JSON:try{n=JSON.parse(e)}catch(i){r.log(w.ERROR,_.UNABLE_TO_CAST_VALUE,H,e,t),n=null}break;default:n=e}return n}(s,n.type,this.logger)},e.prototype.getFeatureVariableBoolean=function(e,t,r,n){try{return this.isValidInstance()?this.getFeatureVariableForType(e,t,O.BOOLEAN,r,n):(this.logger.log(w.ERROR,A.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariableBoolean"),null)}catch(e){return this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e),null}},e.prototype.getFeatureVariableDouble=function(e,t,r,n){try{return this.isValidInstance()?this.getFeatureVariableForType(e,t,O.DOUBLE,r,n):(this.logger.log(w.ERROR,A.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariableDouble"),null)}catch(e){return this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e),null}},e.prototype.getFeatureVariableInteger=function(e,t,r,n){try{return this.isValidInstance()?this.getFeatureVariableForType(e,t,O.INTEGER,r,n):(this.logger.log(w.ERROR,A.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariableInteger"),null)}catch(e){return this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e),null}},e.prototype.getFeatureVariableString=function(e,t,r,n){try{return this.isValidInstance()?this.getFeatureVariableForType(e,t,O.STRING,r,n):(this.logger.log(w.ERROR,A.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariableString"),null)}catch(e){return this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e),null}},e.prototype.getFeatureVariableJSON=function(e,t,r,n){try{return this.isValidInstance()?this.getFeatureVariableForType(e,t,O.JSON,r,n):(this.logger.log(w.ERROR,A.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariableJSON"),null)}catch(e){return this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e),null}},e.prototype.getAllFeatureVariables=function(e,t,r){var n=this;try{if(!this.isValidInstance())return this.logger.log(w.ERROR,A.INVALID_OBJECT,"OPTIMIZELY","getAllFeatureVariables"),null;if(!this.validateInputs({feature_key:e,user_id:t},r))return null;var i=this.projectConfigManager.getConfig();if(!i)return null;var o=ne(i,e,this.logger);if(!o)return null;var s=this.createUserContext(t,r),a=this.decisionService.getVariationForFeature(i,o,s).result,c=Ve(a),u={};o.variables.forEach((function(r){u[r.key]=n.getFeatureVariableValueFromVariation(e,c,a.variation,r,t)}));var l={};return a.decisionSource===S.FEATURE_TEST&&null!==a.experiment&&null!==a.variation&&(l={experimentKey:a.experiment.key,variationKey:a.variation.key}),this.notificationCenter.sendNotifications(E.DECISION,{type:I.ALL_FEATURE_VARIABLES,userId:t,attributes:r||{},decisionInfo:{featureKey:e,featureEnabled:c,source:a.decisionSource,variableValues:u,sourceInfo:l}}),u}catch(e){return this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e),null}},e.prototype.getOptimizelyConfig=function(){try{return this.projectConfigManager.getConfig()?this.projectConfigManager.getOptimizelyConfig():null}catch(e){return this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e),null}},e.prototype.close=function(){var e=this;try{var t=this.eventProcessor.stop();return this.disposeOnUpdate&&(this.disposeOnUpdate(),this.disposeOnUpdate=null),this.projectConfigManager&&this.projectConfigManager.stop(),Object.keys(this.readyTimeouts).forEach((function(t){var r=e.readyTimeouts[t];clearTimeout(r.readyTimeout),r.onClose()})),this.readyTimeouts={},t.then((function(){return{success:!0}}),(function(e){return{success:!1,reason:String(e)}}))}catch(e){return this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e),Promise.resolve({success:!1,reason:String(e)})}},e.prototype.onReady=function(e){var t,r,n=this;"object"==typeof e&&null!==e&&void 0!==e.timeout&&(t=e.timeout),b.isSafeInteger(t)||(t=3e4);var i=new Promise((function(e){r=e})),o=this.nextReadyTimeoutId;this.nextReadyTimeoutId++;var s=setTimeout((function(){delete n.readyTimeouts[o],r({success:!1,reason:y("onReady timeout expired after %s ms",t)})}),t);return this.readyTimeouts[o]={readyTimeout:s,onClose:function(){r({success:!1,reason:"Instance closed"})}},this.readyPromise.then((function(){clearTimeout(s),delete n.readyTimeouts[o],r({success:!0})})),Promise.race([this.readyPromise,i])},e.prototype.createUserContext=function(e,t){return this.validateInputs({user_id:e},t)?new $({optimizely:this,userId:e,attributes:t}):null},e.prototype.decide=function(e,r,n){var i,o,s,a,c=this;void 0===n&&(n=[]);var u,h=e.getUserId(),f=e.getAttributes(),d=this.projectConfigManager.getConfig(),p=[];if(!this.isValidInstance()||!d)return this.logger.log(w.INFO,A.INVALID_OBJECT,"OPTIMIZELY","decide"),V(r,e,[k.SDK_NOT_READY]);var m=d.featureKeyMap[r];if(!m)return this.logger.log(w.ERROR,_.FEATURE_NOT_IN_DATAFILE,"OPTIMIZELY",r),V(r,e,[y(k.FLAG_KEY_INVALID,r)]);var g=this.getAllDecideOptions(n),v=this.decisionService.findValidatedForcedDecision(d,e,r);p.push.apply(p,v.reasons);var b=v.result;if(b)u={experiment:null,variation:b,decisionSource:S.FEATURE_TEST};else{var T=this.decisionService.getVariationForFeature(d,m,e,g);p.push.apply(p,T.reasons),u=T.result}var x=u.decisionSource,O=null!==(o=null===(i=u.experiment)||void 0===i?void 0:i.key)&&void 0!==o?o:null,R=null!==(a=null===(s=u.variation)||void 0===s?void 0:s.key)&&void 0!==a?a:null,N=Ve(u);!0===N?this.logger.log(w.INFO,A.FEATURE_ENABLED_FOR_USER,"OPTIMIZELY",r,h):this.logger.log(w.INFO,A.FEATURE_NOT_ENABLED_FOR_USER,"OPTIMIZELY",r,h);var C={},D=!1;g[t.N1.EXCLUDE_VARIABLES]||m.variables.forEach((function(e){C[e.key]=c.getFeatureVariableValueFromVariation(r,N,u.variation,e,h)})),!g[t.N1.DISABLE_DECISION_EVENT]&&(x===S.FEATURE_TEST||x===S.ROLLOUT&&se(d))&&(this.sendImpressionEvent(u,r,h,N,f),D=!0);var L=[];g[t.N1.INCLUDE_REASONS]&&(L=p.map((function(e){return y.apply(void 0,l([e[0]],e.slice(1)))})));var B={flagKey:r,enabled:N,variationKey:R,ruleKey:O,variables:C,reasons:L,decisionEventDispatched:D};return this.notificationCenter.sendNotifications(E.DECISION,{type:I.FLAG,userId:h,attributes:f,decisionInfo:B}),{variationKey:R,enabled:N,variables:C,ruleKey:O,flagKey:r,userContext:e,reasons:L}},e.prototype.getAllDecideOptions=function(e){var r=this,n=u({},this.defaultDecideOptions);return Array.isArray(e)?e.forEach((function(e){t.N1[e]?n[e]=!0:r.logger.log(w.WARNING,A.UNRECOGNIZED_DECIDE_OPTION,"OPTIMIZELY",e)})):this.logger.log(w.DEBUG,A.INVALID_DECIDE_OPTIONS,"OPTIMIZELY"),n},e.prototype.decideForKeys=function(e,r,n){var i=this;void 0===n&&(n=[]);var o={};if(!this.isValidInstance())return this.logger.log(w.ERROR,A.INVALID_OBJECT,"OPTIMIZELY","decideForKeys"),o;if(0===r.length)return o;var s=this.getAllDecideOptions(n);return r.forEach((function(r){var a=i.decide(e,r,n);s[t.N1.ENABLED_FLAGS_ONLY]&&!a.enabled||(o[r]=a)})),o},e.prototype.decideAll=function(e,t){void 0===t&&(t=[]);var r=this.projectConfigManager.getConfig();if(!this.isValidInstance()||!r)return this.logger.log(w.ERROR,A.INVALID_OBJECT,"OPTIMIZELY","decideAll"),{};var n=Object.keys(r.featureKeyMap);return this.decideForKeys(e,n,t)},e}(),Ke=function(){function e(e){var t=this;this.logger=e.logger,this.errorHandler=e.errorHandler,this.notificationListeners={},p(E).forEach((function(e){t.notificationListeners[e]=[]})),this.listenerId=1}return e.prototype.addNotificationListener=function(e,t){try{if(!(p(E).indexOf(e)>-1))return-1;this.notificationListeners[e]||(this.notificationListeners[e]=[]);var r=!1;if((this.notificationListeners[e]||[]).forEach((function(e){e.callback!==t||(r=!0)})),r)return-1;this.notificationListeners[e].push({id:this.listenerId,callback:t});var n=this.listenerId;return this.listenerId+=1,n}catch(e){return this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e),-1}},e.prototype.removeNotificationListener=function(e){var t=this;try{var r,n;if(Object.keys(this.notificationListeners).some((function(i){return(t.notificationListeners[i]||[]).every((function(t,o){return t.id!==e||(r=o,n=i,!1)})),void 0!==r&&void 0!==n})),void 0!==r&&void 0!==n)return this.notificationListeners[n].splice(r,1),!0}catch(e){this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e)}return!1},e.prototype.clearAllNotificationListeners=function(){var e=this;try{p(E).forEach((function(t){e.notificationListeners[t]=[]}))}catch(e){this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e)}},e.prototype.clearNotificationListeners=function(e){try{this.notificationListeners[e]=[]}catch(e){this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e)}},e.prototype.sendNotifications=function(e,t){var r=this;try{(this.notificationListeners[e]||[]).forEach((function(n){var i=n.callback;try{i(t)}catch(t){r.logger.log(w.ERROR,A.NOTIFICATION_LISTENER_EXCEPTION,"NOTIFICATION_CENTER",e,t.message)}}))}catch(e){this.logger.log(w.ERROR,e.message),this.errorHandler.handleError(e)}},e}(),Je=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(o.LogTierV1EventProcessor.bind.apply(o.LogTierV1EventProcessor,l([void 0],e)))};o.LocalStoragePendingEventsDispatcher;function Ye(e,t,r,n){var i={sdkKey:e};if((void 0===n||"object"==typeof n&&null!==n)&&b.assign(i,n),r){var o=oe({datafile:r,jsonSchemaValidator:void 0,logger:t}),s=o.configObj,a=o.error;a&&t.error(a),s&&(i.datafile=ie(s))}return new c.HttpPollingDatafileManager(i)}var Xe=i.getLogger();i.setLogHandler(U()),i.setLogLevel(i.LogLevel.INFO);var Ze=!1,Qe=function(e){try{var t=!1;e.errorHandler&&i.setErrorHandler(e.errorHandler),e.logger&&(i.setLogHandler(e.logger),i.setLogLevel(i.LogLevel.NOTSET)),void 0!==e.logLevel&&i.setLogLevel(e.logLevel);try{(function(e){if("object"==typeof e&&null!==e){var t=e,r=t.errorHandler,n=t.eventDispatcher,i=t.logger;if(r&&"function"!=typeof r.handleError)throw new Error(y(_.INVALID_ERROR_HANDLER,C));if(n&&"function"!=typeof n.dispatchEvent)throw new Error(y(_.INVALID_EVENT_DISPATCHER,C));if(i&&"function"!=typeof i.log)throw new Error(y(_.INVALID_LOGGER,C));return!0}throw new Error(y(_.INVALID_CONFIG,C))})(e),t=!0}catch(e){Xe.error(e)}var r=void 0;null==e.eventDispatcher?(r=new o.LocalStoragePendingEventsDispatcher({eventDispatcher:B}),Ze||(r.sendPendingEvents(),Ze=!0)):r=e.eventDispatcher;var n=e.eventBatchSize,s=e.eventFlushInterval;(function(e){return!("number"!=typeof e||!b.isSafeInteger(e))&&e>=1})(e.eventBatchSize)||(Xe.warn("Invalid eventBatchSize %s, defaulting to %s",e.eventBatchSize,10),n=10),function(e){return!("number"!=typeof e||!b.isSafeInteger(e))&&e>0}(e.eventFlushInterval)||(Xe.warn("Invalid eventFlushInterval %s, defaulting to %s",e.eventFlushInterval,1e3),s=1e3);var a=i.getErrorHandler(),c=new Ke({logger:Xe,errorHandler:a}),l={dispatcher:r,flushInterval:s,batchSize:n,maxQueueSize:e.eventMaxQueueSize||1e4,notificationCenter:c},h=u(u({clientEngine:"javascript-sdk"},e),{eventProcessor:Je(l),logger:Xe,errorHandler:a,datafileManager:e.sdkKey?Ye(e.sdkKey,Xe,e.datafile,e.datafileOptions):void 0,notificationCenter:c,isValidInstance:t}),f=new We(h);try{if("function"==typeof window.addEventListener){var d="onpagehide"in window?"pagehide":"unload";window.addEventListener(d,(function(){f.close()}),!1)}}catch(e){Xe.error(A.UNABLE_TO_ATTACH_UNLOAD,"INDEX_BROWSER",e.message)}return f}catch(e){return Xe.error(e),null}},et=function(){Ze=!1},tt={logging:F,errorHandler:L,eventDispatcher:B,enums:N,setLogger:i.setLogHandler,setLogLevel:i.setLogLevel,createInstance:Qe,__internalResetRetryState:et,OptimizelyDecideOption:t.N1};t.ZP=tt},4952:(e,t,r)=>{var n=r(3979),i=r(9767),o=i;o.v1=n,o.v4=i,e.exports=o},5450:e=>{for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var n=r||0,i=t;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},9490:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},3979:(e,t,r)=>{var n,i,o=r(9490),s=r(5450),a=0,c=0;e.exports=function(e,t,r){var u=t&&r||0,l=t||[],h=(e=e||{}).node||n,f=void 0!==e.clockseq?e.clockseq:i;if(null==h||null==f){var d=o();null==h&&(h=n=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==f&&(f=i=16383&(d[6]<<8|d[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:c+1,g=p-a+(m-c)/1e4;if(g<0&&void 0===e.clockseq&&(f=f+1&16383),(g<0||p>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,c=m,i=f;var v=(1e4*(268435455&(p+=122192928e5))+m)%4294967296;l[u++]=v>>>24&255,l[u++]=v>>>16&255,l[u++]=v>>>8&255,l[u++]=255&v;var y=p/4294967296*1e4&268435455;l[u++]=y>>>8&255,l[u++]=255&y,l[u++]=y>>>24&15|16,l[u++]=y>>>16&255,l[u++]=f>>>8|128,l[u++]=255&f;for(var E=0;E<6;++E)l[u+E]=h[E];return t||s(l)}},9767:(e,t,r)=>{var n=r(9490),i=r(5450);e.exports=function(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},8237:(e,t,r)=>{var n=r(2486).lW,i=r(368),o=r(4029),s=r(6118);e.exports=function(e,t){switch(c(e),t=t||e.type,s(t,"You must pass an event type."),t){case"track":return function(e){s(e.anonymousId||e.userId,'You must pass either an "anonymousId" or a "userId".'),s(e.event,'You must pass an "event".')}(e);case"group":return function(e){s(e.anonymousId||e.userId,'You must pass either an "anonymousId" or a "userId".'),s(e.groupId,'You must pass a "groupId".')}(e);case"identify":case"page":case"screen":return function(e){s(e.anonymousId||e.userId,'You must pass either an "anonymousId" or a "userId".')}(e);case"alias":return function(e){s(e.userId,'You must pass a "userId".'),s(e.previousId,'You must pass a "previousId".')}(e);default:s(0,'Invalid event type: "'+t+'"')}};var a={anonymousId:["string","number"],category:"string",context:"object",event:"string",groupId:["string","number"],integrations:"object",name:"string",previousId:["string","number"],timestamp:"date",userId:["string","number"],type:"string"};function c(e){s("object"===i(e),"You must pass a message object.");var t=JSON.stringify(e);for(var r in s(n.byteLength(t,"utf8")<32768,"Your message must be < 32kb."),a){var c=e[r];if(c){var u=a[r];"array"!==i(u)&&(u=[u]);var l="object"===u[0]?"an":"a";s(u.some((function(e){return i(c)===e})),'"'+r+'" must be '+l+" "+o(u,"or")+".")}}}},3564:function(e,t){!function(r,n){var i={version:"0.4.1",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},o=Array.prototype.map,s=Array.isArray,a=Object.prototype.toString;function c(e){return!!(""===e||e&&e.charCodeAt&&e.substr)}function u(e){return s?s(e):"[object Array]"===a.call(e)}function l(e){return e&&"[object Object]"===a.call(e)}function h(e,t){var r;for(r in e=e||{},t=t||{})t.hasOwnProperty(r)&&null==e[r]&&(e[r]=t[r]);return e}function f(e,t,r){var n,i,s=[];if(!e)return s;if(o&&e.map===o)return e.map(t,r);for(n=0,i=e.length;n<i;n++)s[n]=t.call(r,e[n],n,e);return s}function d(e,t){return e=Math.round(Math.abs(e)),isNaN(e)?t:e}function p(e){var t=i.settings.currency.format;return"function"==typeof e&&(e=e()),c(e)&&e.match("%v")?{pos:e,neg:e.replace("-","").replace("%v","-%v"),zero:e}:e&&e.pos&&e.pos.match("%v")?e:c(t)?i.settings.currency.format={pos:t,neg:t.replace("%v","-%v"),zero:t}:t}var m=i.unformat=i.parse=function(e,t){if(u(e))return f(e,(function(e){return m(e,t)}));if("number"==typeof(e=e||0))return e;t=t||i.settings.number.decimal;var r=new RegExp("[^0-9-"+t+"]",["g"]),n=parseFloat((""+e).replace(/\((.*)\)/,"-$1").replace(r,"").replace(t,"."));return isNaN(n)?0:n},g=i.toFixed=function(e,t){t=d(t,i.settings.number.precision);var r=Math.pow(10,t);return(Math.round(i.unformat(e)*r)/r).toFixed(t)},v=i.formatNumber=i.format=function(e,t,r,n){if(u(e))return f(e,(function(e){return v(e,t,r,n)}));e=m(e);var o=h(l(t)?t:{precision:t,thousand:r,decimal:n},i.settings.number),s=d(o.precision),a=e<0?"-":"",c=parseInt(g(Math.abs(e||0),s),10)+"",p=c.length>3?c.length%3:0;return a+(p?c.substr(0,p)+o.thousand:"")+c.substr(p).replace(/(\d{3})(?=\d)/g,"$1"+o.thousand)+(s?o.decimal+g(Math.abs(e),s).split(".")[1]:"")},y=i.formatMoney=function(e,t,r,n,o,s){if(u(e))return f(e,(function(e){return y(e,t,r,n,o,s)}));e=m(e);var a=h(l(t)?t:{symbol:t,precision:r,thousand:n,decimal:o,format:s},i.settings.currency),c=p(a.format);return(e>0?c.pos:e<0?c.neg:c.zero).replace("%s",a.symbol).replace("%v",v(Math.abs(e),d(a.precision),a.thousand,a.decimal))};i.formatColumn=function(e,t,r,n,o,s){if(!e)return[];var a=h(l(t)?t:{symbol:t,precision:r,thousand:n,decimal:o,format:s},i.settings.currency),g=p(a.format),y=g.pos.indexOf("%s")<g.pos.indexOf("%v"),E=0,b=f(e,(function(e,t){if(u(e))return i.formatColumn(e,a);var r=((e=m(e))>0?g.pos:e<0?g.neg:g.zero).replace("%s",a.symbol).replace("%v",v(Math.abs(e),d(a.precision),a.thousand,a.decimal));return r.length>E&&(E=r.length),r}));return f(b,(function(e,t){return c(e)&&e.length<E?y?e.replace(a.symbol,a.symbol+new Array(E-e.length+1).join(" ")):new Array(E-e.length+1).join(" ")+e:e}))},e.exports&&(t=e.exports=i),t.accounting=i}()},6118:(e,t,r)=>{"use strict";var n=r(8283);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var o,s,a=r(8619).codes,c=a.ERR_AMBIGUOUS_ARGUMENT,u=a.ERR_INVALID_ARG_TYPE,l=a.ERR_INVALID_ARG_VALUE,h=a.ERR_INVALID_RETURN_VALUE,f=a.ERR_MISSING_ARGS,d=r(6979),p=r(5663).inspect,m=r(5663).types,g=m.isPromise,v=m.isRegExp,y=Object.assign?Object.assign:r(1662).assign,E=Object.is?Object.is:r(7402);new Map;function b(){var e=r(1667);o=e.isDeepEqual,s=e.isDeepStrictEqual}var w=!1,_=e.exports=S,A={};function T(e){if(e.message instanceof Error)throw e.message;throw new d(e)}function I(e,t,r,n){if(!r){var i=!1;if(0===t)i=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var o=new d({actual:r,expected:!0,message:n,operator:"==",stackStartFn:e});throw o.generatedMessage=i,o}}function S(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];I.apply(void 0,[S,t.length].concat(t))}_.fail=function e(t,r,i,o,s){var a,c=arguments.length;if(0===c)a="Failed";else if(1===c)i=t,t=void 0;else{if(!1===w){w=!0;var u=n.emitWarning?n.emitWarning:void 0;u("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}2===c&&(o="!=")}if(i instanceof Error)throw i;var l={actual:t,expected:r,operator:void 0===o?"fail":o,stackStartFn:s||e};void 0!==i&&(l.message=i);var h=new d(l);throw a&&(h.message=a,h.generatedMessage=!0),h},_.AssertionError=d,_.ok=S,_.equal=function e(t,r,n){if(arguments.length<2)throw new f("actual","expected");t!=r&&T({actual:t,expected:r,message:n,operator:"==",stackStartFn:e})},_.notEqual=function e(t,r,n){if(arguments.length<2)throw new f("actual","expected");t==r&&T({actual:t,expected:r,message:n,operator:"!=",stackStartFn:e})},_.deepEqual=function e(t,r,n){if(arguments.length<2)throw new f("actual","expected");void 0===o&&b(),o(t,r)||T({actual:t,expected:r,message:n,operator:"deepEqual",stackStartFn:e})},_.notDeepEqual=function e(t,r,n){if(arguments.length<2)throw new f("actual","expected");void 0===o&&b(),o(t,r)&&T({actual:t,expected:r,message:n,operator:"notDeepEqual",stackStartFn:e})},_.deepStrictEqual=function e(t,r,n){if(arguments.length<2)throw new f("actual","expected");void 0===o&&b(),s(t,r)||T({actual:t,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:e})},_.notDeepStrictEqual=function e(t,r,n){if(arguments.length<2)throw new f("actual","expected");void 0===o&&b();s(t,r)&&T({actual:t,expected:r,message:n,operator:"notDeepStrictEqual",stackStartFn:e})},_.strictEqual=function e(t,r,n){if(arguments.length<2)throw new f("actual","expected");E(t,r)||T({actual:t,expected:r,message:n,operator:"strictEqual",stackStartFn:e})},_.notStrictEqual=function e(t,r,n){if(arguments.length<2)throw new f("actual","expected");E(t,r)&&T({actual:t,expected:r,message:n,operator:"notStrictEqual",stackStartFn:e})};var x=function e(t,r,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.forEach((function(e){e in t&&(void 0!==n&&"string"==typeof n[e]&&v(t[e])&&t[e].test(n[e])?i[e]=n[e]:i[e]=t[e])}))};function O(e,t,r,n,i,o){if(!(r in e)||!s(e[r],t[r])){if(!n){var a=new x(e,i),c=new x(t,i,e),u=new d({actual:a,expected:c,operator:"deepStrictEqual",stackStartFn:o});throw u.actual=e,u.expected=t,u.operator=o.name,u}T({actual:e,expected:t,message:n,operator:o.name,stackStartFn:o})}}function R(e,t,r,n){if("function"!=typeof t){if(v(t))return t.test(e);if(2===arguments.length)throw new u("expected",["Function","RegExp"],t);if("object"!==i(e)||null===e){var s=new d({actual:e,expected:t,message:r,operator:"deepStrictEqual",stackStartFn:n});throw s.operator=n.name,s}var a=Object.keys(t);if(t instanceof Error)a.push("name","message");else if(0===a.length)throw new l("error",t,"may not be an empty object");return void 0===o&&b(),a.forEach((function(i){"string"==typeof e[i]&&v(t[i])&&t[i].test(e[i])||O(e,t,i,r,a,n)})),!0}return void 0!==t.prototype&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function k(e){if("function"!=typeof e)throw new u("fn","Function",e);try{e()}catch(e){return e}return A}function N(e){return g(e)||null!==e&&"object"===i(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function C(e){return Promise.resolve().then((function(){var t;if("function"==typeof e){if(!N(t=e()))throw new h("instance of Promise","promiseFn",t)}else{if(!N(e))throw new u("promiseFn",["Function","Promise"],e);t=e}return Promise.resolve().then((function(){return t})).then((function(){return A})).catch((function(e){return e}))}))}function D(e,t,r,n){if("string"==typeof r){if(4===arguments.length)throw new u("error",["Object","Error","Function","RegExp"],r);if("object"===i(t)&&null!==t){if(t.message===r)throw new c("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===r)throw new c("error/message",'The error "'.concat(t,'" is identical to the message.'));n=r,r=void 0}else if(null!=r&&"object"!==i(r)&&"function"!=typeof r)throw new u("error",["Object","Error","Function","RegExp"],r);if(t===A){var o="";r&&r.name&&(o+=" (".concat(r.name,")")),o+=n?": ".concat(n):".";var s="rejects"===e.name?"rejection":"exception";T({actual:void 0,expected:r,operator:e.name,message:"Missing expected ".concat(s).concat(o),stackStartFn:e})}if(r&&!R(t,r,n,e))throw t}function L(e,t,r,n){if(t!==A){if("string"==typeof r&&(n=r,r=void 0),!r||R(t,r)){var i=n?": ".concat(n):".",o="doesNotReject"===e.name?"rejection":"exception";T({actual:t,expected:r,operator:e.name,message:"Got unwanted ".concat(o).concat(i,"\n")+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}function B(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];I.apply(void 0,[B,t.length].concat(t))}_.throws=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];D.apply(void 0,[e,k(t)].concat(n))},_.rejects=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return C(t).then((function(t){return D.apply(void 0,[e,t].concat(n))}))},_.doesNotThrow=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];L.apply(void 0,[e,k(t)].concat(n))},_.doesNotReject=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return C(t).then((function(t){return L.apply(void 0,[e,t].concat(n))}))},_.ifError=function e(t){if(null!=t){var r="ifError got unwanted exception: ";"object"===i(t)&&"string"==typeof t.message?0===t.message.length&&t.constructor?r+=t.constructor.name:r+=t.message:r+=p(t);var n=new d({actual:t,expected:null,operator:"ifError",message:r,stackStartFn:e}),o=t.stack;if("string"==typeof o){var s=o.split("\n");s.shift();for(var a=n.stack.split("\n"),c=0;c<s.length;c++){var u=a.indexOf(s[c]);if(-1!==u){a=a.slice(0,u);break}}n.stack="".concat(a.join("\n"),"\n").concat(s.join("\n"))}throw n}},_.strict=y(B,_,{equal:_.strictEqual,deepEqual:_.deepStrictEqual,notEqual:_.notStrictEqual,notDeepEqual:_.notDeepStrictEqual}),_.strict.strict=_.strict},6979:(e,t,r)=>{"use strict";var n=r(8283);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){var t="function"==typeof Map?new Map:void 0;return c=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return l(e,arguments,f(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h(n,e)},c(e)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e,t,r){return l=u()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&h(i,r.prototype),i},l.apply(null,arguments)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}var p=r(5663).inspect,m=r(8619).codes.ERR_INVALID_ARG_TYPE;function g(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}var v="",y="",E="",b="",w={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function _(e){var t=Object.keys(e),r=Object.create(Object.getPrototypeOf(e));return t.forEach((function(t){r[t]=e[t]})),Object.defineProperty(r,"message",{value:e.message}),r}function A(e){return p(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function T(e,t,r){var i="",o="",s=0,a="",c=!1,u=A(e),l=u.split("\n"),h=A(t).split("\n"),f=0,p="";if("strictEqual"===r&&"object"===d(e)&&"object"===d(t)&&null!==e&&null!==t&&(r="strictEqualObject"),1===l.length&&1===h.length&&l[0]!==h[0]){var m=l[0].length+h[0].length;if(m<=10){if(!("object"===d(e)&&null!==e||"object"===d(t)&&null!==t||0===e&&0===t))return"".concat(w[r],"\n\n")+"".concat(l[0]," !== ").concat(h[0],"\n")}else if("strictEqualObject"!==r){if(m<(n.stderr&&n.stderr.isTTY?n.stderr.columns:80)){for(;l[0][f]===h[0][f];)f++;f>2&&(p="\n  ".concat(function(e,t){if(t=Math.floor(t),0==e.length||0==t)return"";var r=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+e.substring(0,r-e.length)}(" ",f),"^"),f=0)}}}for(var _=l[l.length-1],T=h[h.length-1];_===T&&(f++<2?a="\n  ".concat(_).concat(a):i=_,l.pop(),h.pop(),0!==l.length&&0!==h.length);)_=l[l.length-1],T=h[h.length-1];var I=Math.max(l.length,h.length);if(0===I){var S=u.split("\n");if(S.length>30)for(S[26]="".concat(v,"...").concat(b);S.length>27;)S.pop();return"".concat(w.notIdentical,"\n\n").concat(S.join("\n"),"\n")}f>3&&(a="\n".concat(v,"...").concat(b).concat(a),c=!0),""!==i&&(a="\n  ".concat(i).concat(a),i="");var x=0,O=w[r]+"\n".concat(y,"+ actual").concat(b," ").concat(E,"- expected").concat(b),R=" ".concat(v,"...").concat(b," Lines skipped");for(f=0;f<I;f++){var k=f-s;if(l.length<f+1)k>1&&f>2&&(k>4?(o+="\n".concat(v,"...").concat(b),c=!0):k>3&&(o+="\n  ".concat(h[f-2]),x++),o+="\n  ".concat(h[f-1]),x++),s=f,i+="\n".concat(E,"-").concat(b," ").concat(h[f]),x++;else if(h.length<f+1)k>1&&f>2&&(k>4?(o+="\n".concat(v,"...").concat(b),c=!0):k>3&&(o+="\n  ".concat(l[f-2]),x++),o+="\n  ".concat(l[f-1]),x++),s=f,o+="\n".concat(y,"+").concat(b," ").concat(l[f]),x++;else{var N=h[f],C=l[f],D=C!==N&&(!g(C,",")||C.slice(0,-1)!==N);D&&g(N,",")&&N.slice(0,-1)===C&&(D=!1,C+=","),D?(k>1&&f>2&&(k>4?(o+="\n".concat(v,"...").concat(b),c=!0):k>3&&(o+="\n  ".concat(l[f-2]),x++),o+="\n  ".concat(l[f-1]),x++),s=f,o+="\n".concat(y,"+").concat(b," ").concat(C),i+="\n".concat(E,"-").concat(b," ").concat(N),x+=2):(o+=i,i="",1!==k&&0!==f||(o+="\n  ".concat(C),x++))}if(x>20&&f<I-2)return"".concat(O).concat(R,"\n").concat(o,"\n").concat(v,"...").concat(b).concat(i,"\n")+"".concat(v,"...").concat(b)}return"".concat(O).concat(c?R:"","\n").concat(o).concat(i).concat(a).concat(p)}var I=function(e){function t(e){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"object"!==d(e)||null===e)throw new m("options","Object",e);var i=e.message,o=e.operator,c=e.stackStartFn,u=e.actual,l=e.expected,h=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=i)r=s(this,f(t).call(this,String(i)));else if(n.stderr&&n.stderr.isTTY&&(n.stderr&&n.stderr.getColorDepth&&1!==n.stderr.getColorDepth()?(v="\x1b[34m",y="\x1b[32m",b="\x1b[39m",E="\x1b[31m"):(v="",y="",b="",E="")),"object"===d(u)&&null!==u&&"object"===d(l)&&null!==l&&"stack"in u&&u instanceof Error&&"stack"in l&&l instanceof Error&&(u=_(u),l=_(l)),"deepStrictEqual"===o||"strictEqual"===o)r=s(this,f(t).call(this,T(u,l,o)));else if("notDeepStrictEqual"===o||"notStrictEqual"===o){var p=w[o],g=A(u).split("\n");if("notStrictEqual"===o&&"object"===d(u)&&null!==u&&(p=w.notStrictEqualObject),g.length>30)for(g[26]="".concat(v,"...").concat(b);g.length>27;)g.pop();r=1===g.length?s(this,f(t).call(this,"".concat(p," ").concat(g[0]))):s(this,f(t).call(this,"".concat(p,"\n\n").concat(g.join("\n"),"\n")))}else{var I=A(u),S="",x=w[o];"notDeepEqual"===o||"notEqual"===o?(I="".concat(w[o],"\n\n").concat(I)).length>1024&&(I="".concat(I.slice(0,1021),"...")):(S="".concat(A(l)),I.length>512&&(I="".concat(I.slice(0,509),"...")),S.length>512&&(S="".concat(S.slice(0,509),"...")),"deepEqual"===o||"equal"===o?I="".concat(x,"\n\n").concat(I,"\n\nshould equal\n\n"):S=" ".concat(o," ").concat(S)),r=s(this,f(t).call(this,"".concat(I).concat(S)))}return Error.stackTraceLimit=h,r.generatedMessage=!i,Object.defineProperty(a(r),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),r.code="ERR_ASSERTION",r.actual=u,r.expected=l,r.operator=o,Error.captureStackTrace&&Error.captureStackTrace(a(r),c),r.stack,r.name="AssertionError",s(r)}var r,c,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),r=t,c=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:p.custom,value:function(e,t){return p(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}({},t,{customInspect:!1,depth:0}))}}],c&&o(r.prototype,c),u&&o(r,u),t}(c(Error));e.exports=I},8619:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}var a,c,u={};function l(e,t,r){r||(r=Error);var n=function(r){function n(r,s,a){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),c=i(this,o(n).call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,s,a))),c.code=e,c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,r),n}(r);u[e]=n}function h(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}l("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),l("ERR_INVALID_ARG_TYPE",(function(e,t,i){var o,s,c,u;if(void 0===a&&(a=r(6118)),a("string"==typeof e,"'name' must be a string"),"string"==typeof t&&(s="not ",t.substr(!c||c<0?0:+c,s.length)===s)?(o="must not be",t=t.replace(/^not /,"")):o="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))u="The ".concat(e," ").concat(o," ").concat(h(t,"type"));else{var l=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";u='The "'.concat(e,'" ').concat(l," ").concat(o," ").concat(h(t,"type"))}return u+=". Received type ".concat(n(i))}),TypeError),l("ERR_INVALID_ARG_VALUE",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===c&&(c=r(5663));var i=c.inspect(t);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(n,". Received ").concat(i)}),TypeError,RangeError),l("ERR_INVALID_RETURN_VALUE",(function(e,t,r){var i;return i=r&&r.constructor&&r.constructor.name?"instance of ".concat(r.constructor.name):"type ".concat(n(r)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(i,".")}),TypeError),l("ERR_MISSING_ARGS",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];void 0===a&&(a=r(6118)),a(t.length>0,"At least one arg needs to be specified");var i="The ",o=t.length;switch(t=t.map((function(e){return'"'.concat(e,'"')})),o){case 1:i+="".concat(t[0]," argument");break;case 2:i+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:i+=t.slice(0,o-1).join(", "),i+=", and ".concat(t[o-1]," arguments")}return"".concat(i," must be specified")}),TypeError),e.exports.codes=u},1667:(e,t,r)=>{"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var o=void 0!==/a/g.flags,s=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t},a=function(e){var t=[];return e.forEach((function(e,r){return t.push([r,e])})),t},c=Object.is?Object.is:r(7402),u=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},l=Number.isNaN?Number.isNaN:r(8622);function h(e){return e.call.bind(e)}var f=h(Object.prototype.hasOwnProperty),d=h(Object.prototype.propertyIsEnumerable),p=h(Object.prototype.toString),m=r(5663).types,g=m.isAnyArrayBuffer,v=m.isArrayBufferView,y=m.isDate,E=m.isMap,b=m.isRegExp,w=m.isSet,_=m.isNativeError,A=m.isBoxedPrimitive,T=m.isNumberObject,I=m.isStringObject,S=m.isBooleanObject,x=m.isBigIntObject,O=m.isSymbolObject,R=m.isFloat32Array,k=m.isFloat64Array;function N(e){if(0===e.length||e.length>10)return!0;for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<48||r>57)return!0}return 10===e.length&&e>=Math.pow(2,32)}function C(e){return Object.keys(e).filter(N).concat(u(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function D(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}function L(e,t,r,n){if(e===t)return 0!==e||(!r||c(e,t));if(r){if("object"!==i(e))return"number"==typeof e&&l(e)&&l(t);if("object"!==i(t)||null===e||null===t)return!1;if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(null===e||"object"!==i(e))return(null===t||"object"!==i(t))&&e==t;if(null===t||"object"!==i(t))return!1}var s,a,u,h,f=p(e);if(f!==p(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var d=C(e),m=C(t);return d.length===m.length&&P(e,t,r,n,1,d)}if("[object Object]"===f&&(!E(e)&&E(t)||!w(e)&&w(t)))return!1;if(y(e)){if(!y(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(b(e)){if(!b(t)||(u=e,h=t,!(o?u.source===h.source&&u.flags===h.flags:RegExp.prototype.toString.call(u)===RegExp.prototype.toString.call(h))))return!1}else if(_(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else{if(v(e)){if(r||!R(e)&&!k(e)){if(!function(e,t){return e.byteLength===t.byteLength&&0===D(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}(e,t))return!1}else if(!function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e,t))return!1;var N=C(e),L=C(t);return N.length===L.length&&P(e,t,r,n,0,N)}if(w(e))return!(!w(t)||e.size!==t.size)&&P(e,t,r,n,2);if(E(e))return!(!E(t)||e.size!==t.size)&&P(e,t,r,n,3);if(g(e)){if(a=t,(s=e).byteLength!==a.byteLength||0!==D(new Uint8Array(s),new Uint8Array(a)))return!1}else if(A(e)&&!function(e,t){return T(e)?T(t)&&c(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):I(e)?I(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):S(e)?S(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):x(e)?x(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):O(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}(e,t))return!1}return P(e,t,r,n,0)}function B(e,t){return t.filter((function(t){return d(e,t)}))}function P(e,t,r,n,i,o){if(5===arguments.length){o=Object.keys(e);var s=Object.keys(t);if(o.length!==s.length)return!1}for(var a=0;a<o.length;a++)if(!f(t,o[a]))return!1;if(r&&5===arguments.length){var c=u(e);if(0!==c.length){var l=0;for(a=0;a<c.length;a++){var h=c[a];if(d(e,h)){if(!d(t,h))return!1;o.push(h),l++}else if(d(t,h))return!1}var p=u(t);if(c.length!==p.length&&B(t,p).length!==l)return!1}else{var m=u(t);if(0!==m.length&&0!==B(t,m).length)return!1}}if(0===o.length&&(0===i||1===i&&0===e.length||0===e.size))return!0;if(void 0===n)n={val1:new Map,val2:new Map,position:0};else{var g=n.val1.get(e);if(void 0!==g){var v=n.val2.get(t);if(void 0!==v)return g===v}n.position++}n.val1.set(e,n.position),n.val2.set(t,n.position);var y=$(e,t,r,o,n,i);return n.val1.delete(e),n.val2.delete(t),y}function U(e,t,r,n){for(var i=s(e),o=0;o<i.length;o++){var a=i[o];if(L(t,a,r,n))return e.delete(a),!0}return!1}function M(e){switch(i(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(l(e))return!1}return!0}function j(e,t,r){var n=M(r);return null!=n?n:t.has(n)&&!e.has(n)}function F(e,t,r,n,i){var o=M(r);if(null!=o)return o;var s=t.get(o);return!(void 0===s&&!t.has(o)||!L(n,s,!1,i))&&(!e.has(o)&&L(n,s,!1,i))}function V(e,t,r,n,i,o){for(var a=s(e),c=0;c<a.length;c++){var u=a[c];if(L(r,u,i,o)&&L(n,t.get(u),i,o))return e.delete(u),!0}return!1}function $(e,t,r,o,c,u){var l=0;if(2===u){if(!function(e,t,r,n){for(var o=null,a=s(e),c=0;c<a.length;c++){var u=a[c];if("object"===i(u)&&null!==u)null===o&&(o=new Set),o.add(u);else if(!t.has(u)){if(r)return!1;if(!j(e,t,u))return!1;null===o&&(o=new Set),o.add(u)}}if(null!==o){for(var l=s(t),h=0;h<l.length;h++){var f=l[h];if("object"===i(f)&&null!==f){if(!U(o,f,r,n))return!1}else if(!r&&!e.has(f)&&!U(o,f,r,n))return!1}return 0===o.size}return!0}(e,t,r,c))return!1}else if(3===u){if(!function(e,t,r,o){for(var s=null,c=a(e),u=0;u<c.length;u++){var l=n(c[u],2),h=l[0],f=l[1];if("object"===i(h)&&null!==h)null===s&&(s=new Set),s.add(h);else{var d=t.get(h);if(void 0===d&&!t.has(h)||!L(f,d,r,o)){if(r)return!1;if(!F(e,t,h,f,o))return!1;null===s&&(s=new Set),s.add(h)}}}if(null!==s){for(var p=a(t),m=0;m<p.length;m++){var g=n(p[m],2),v=(h=g[0],g[1]);if("object"===i(h)&&null!==h){if(!V(s,e,h,v,r,o))return!1}else if(!(r||e.has(h)&&L(e.get(h),v,!1,o)||V(s,e,h,v,!1,o)))return!1}return 0===s.size}return!0}(e,t,r,c))return!1}else if(1===u)for(;l<e.length;l++){if(!f(e,l)){if(f(t,l))return!1;for(var h=Object.keys(e);l<h.length;l++){var d=h[l];if(!f(t,d)||!L(e[d],t[d],r,c))return!1}return h.length===Object.keys(t).length}if(!f(t,l)||!L(e[l],t[l],r,c))return!1}for(l=0;l<o.length;l++){var p=o[l];if(!L(e[p],t[p],r,c))return!1}return!0}e.exports={isDeepEqual:function(e,t){return L(e,t,false)},isDeepStrictEqual:function(e,t){return L(e,t,true)}}},281:(e,t,r)=>{var n,i,o;o="object"==typeof self&&self.self===self&&self||"object"==typeof r.g&&r.g.global===r.g&&r.g,n=[r(741),r(1271),t],i=function(e,t,r){o.Backbone=function(e,t,r,n){var i=e.Backbone,o=Array.prototype.slice;t.VERSION="1.4.1",t.$=n,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s,a=t.Events={},c=/\s+/,u=function(e,t,n,i,o){var s,a=0;if(n&&"object"==typeof n){void 0!==i&&"context"in o&&void 0===o.context&&(o.context=i);for(s=r.keys(n);a<s.length;a++)t=u(e,t,s[a],n[s[a]],o)}else if(n&&c.test(n))for(s=n.split(c);a<s.length;a++)t=e(t,s[a],i,o);else t=e(t,n,i,o);return t};a.on=function(e,t,r){return this._events=u(l,this._events||{},e,t,{context:r,ctx:this,listening:s}),s&&((this._listeners||(this._listeners={}))[s.id]=s,s.interop=!1),this},a.listenTo=function(e,t,n){if(!e)return this;var i=e._listenId||(e._listenId=r.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),a=s=o[i];a||(this._listenId||(this._listenId=r.uniqueId("l")),a=s=o[i]=new g(this,e));var c=h(e,t,n,this);if(s=void 0,c)throw c;return a.interop&&a.on(t,n),this};var l=function(e,t,r,n){if(r){var i=e[t]||(e[t]=[]),o=n.context,s=n.ctx,a=n.listening;a&&a.count++,i.push({callback:r,context:o,ctx:o||s,listening:a})}return e},h=function(e,t,r,n){try{e.on(t,r,n)}catch(e){return e}};a.off=function(e,t,r){return this._events?(this._events=u(f,this._events,e,t,{context:r,listeners:this._listeners}),this):this},a.stopListening=function(e,t,n){var i=this._listeningTo;if(!i)return this;for(var o=e?[e._listenId]:r.keys(i),s=0;s<o.length;s++){var a=i[o[s]];if(!a)break;a.obj.off(t,n,this),a.interop&&a.off(t,n)}return r.isEmpty(i)&&(this._listeningTo=void 0),this};var f=function(e,t,n,i){if(e){var o,s=i.context,a=i.listeners,c=0;if(t||s||n){for(o=t?[t]:r.keys(e);c<o.length;c++){var u=e[t=o[c]];if(!u)break;for(var l=[],h=0;h<u.length;h++){var f=u[h];if(n&&n!==f.callback&&n!==f.callback._callback||s&&s!==f.context)l.push(f);else{var d=f.listening;d&&d.off(t,n)}}l.length?e[t]=l:delete e[t]}return e}for(o=r.keys(a);c<o.length;c++)a[o[c]].cleanup()}};a.once=function(e,t,r){var n=u(d,{},e,t,this.off.bind(this));return"string"==typeof e&&null==r&&(t=void 0),this.on(n,t,r)},a.listenToOnce=function(e,t,r){var n=u(d,{},t,r,this.stopListening.bind(this,e));return this.listenTo(e,n)};var d=function(e,t,n,i){if(n){var o=e[t]=r.once((function(){i(t,o),n.apply(this,arguments)}));o._callback=n}return e};a.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),r=Array(t),n=0;n<t;n++)r[n]=arguments[n+1];return u(p,this._events,e,void 0,r),this};var p=function(e,t,r,n){if(e){var i=e[t],o=e.all;i&&o&&(o=o.slice()),i&&m(i,n),o&&m(o,[t].concat(n))}return e},m=function(e,t){var r,n=-1,i=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++n<i;)(r=e[n]).callback.call(r.ctx);return;case 1:for(;++n<i;)(r=e[n]).callback.call(r.ctx,o);return;case 2:for(;++n<i;)(r=e[n]).callback.call(r.ctx,o,s);return;case 3:for(;++n<i;)(r=e[n]).callback.call(r.ctx,o,s,a);return;default:for(;++n<i;)(r=e[n]).callback.apply(r.ctx,t);return}},g=function(e,t){this.id=e._listenId,this.listener=e,this.obj=t,this.interop=!0,this.count=0,this._events=void 0};g.prototype.on=a.on,g.prototype.off=function(e,t){var r;this.interop?(this._events=u(f,this._events,e,t,{context:void 0,listeners:void 0}),r=!this._events):(this.count--,r=0===this.count),r&&this.cleanup()},g.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},a.bind=a.on,a.unbind=a.off,r.extend(t,a);var v=t.Model=function(e,t){var n=e||{};t||(t={}),this.preinitialize.apply(this,arguments),this.cid=r.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{});var i=r.result(this,"defaults");n=r.defaults(r.extend({},i,n),i),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};r.extend(v.prototype,a,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(e){return r.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return r.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!r.iteratee(e,this)(this.attributes)},set:function(e,t,n){if(null==e)return this;var i;if("object"==typeof e?(i=e,n=t):(i={})[e]=t,n||(n={}),!this._validate(i,n))return!1;var o=n.unset,s=n.silent,a=[],c=this._changing;this._changing=!0,c||(this._previousAttributes=r.clone(this.attributes),this.changed={});var u=this.attributes,l=this.changed,h=this._previousAttributes;for(var f in i)t=i[f],r.isEqual(u[f],t)||a.push(f),r.isEqual(h[f],t)?delete l[f]:l[f]=t,o?delete u[f]:u[f]=t;if(this.idAttribute in i){var d=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,d,n)}if(!s){a.length&&(this._pending=n);for(var p=0;p<a.length;p++)this.trigger("change:"+a[p],this,u[a[p]],n)}if(c)return this;if(!s)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,r.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,r.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!r.isEmpty(this.changed):r.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&r.clone(this.changed);var t,n=this._changing?this._previousAttributes:this.attributes,i={};for(var o in e){var s=e[o];r.isEqual(n[o],s)||(i[o]=s,t=!0)}return!!t&&i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return r.clone(this._previousAttributes)},fetch:function(e){e=r.extend({parse:!0},e);var t=this,n=e.success;return e.success=function(r){var i=e.parse?t.parse(r,e):r;if(!t.set(i,e))return!1;n&&n.call(e.context,t,r,e),t.trigger("sync",t,r,e)},K(this,e),this.sync("read",this,e)},save:function(e,t,n){var i;null==e||"object"==typeof e?(i=e,n=t):(i={})[e]=t;var o=(n=r.extend({validate:!0,parse:!0},n)).wait;if(i&&!o){if(!this.set(i,n))return!1}else if(!this._validate(i,n))return!1;var s=this,a=n.success,c=this.attributes;n.success=function(e){s.attributes=c;var t=n.parse?s.parse(e,n):e;if(o&&(t=r.extend({},i,t)),t&&!s.set(t,n))return!1;a&&a.call(n.context,s,e,n),s.trigger("sync",s,e,n)},K(this,n),i&&o&&(this.attributes=r.extend({},c,i));var u=this.isNew()?"create":n.patch?"patch":"update";"patch"!==u||n.attrs||(n.attrs=i);var l=this.sync(u,this,n);return this.attributes=c,l},destroy:function(e){e=e?r.clone(e):{};var t=this,n=e.success,i=e.wait,o=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(r){i&&o(),n&&n.call(e.context,t,r,e),t.isNew()||t.trigger("sync",t,r,e)};var s=!1;return this.isNew()?r.defer(e.success):(K(this,e),s=this.sync("delete",this,e)),i||o(),s},url:function(){var e=r.result(this,"urlRoot")||r.result(this.collection,"url")||W();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},r.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=r.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return!n||(this.trigger("invalid",this,n,r.extend(t,{validationError:n})),!1)}});var y=t.Collection=function(e,t){t||(t={}),this.preinitialize.apply(this,arguments),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,r.extend({silent:!0},t))},E={add:!0,remove:!0,merge:!0},b={add:!0,remove:!1},w=function(e,t,r){r=Math.min(Math.max(r,0),e.length);var n,i=Array(e.length-r),o=t.length;for(n=0;n<i.length;n++)i[n]=e[n+r];for(n=0;n<o;n++)e[n+r]=t[n];for(n=0;n<i.length;n++)e[n+o+r]=i[n]};r.extend(y.prototype,a,{model:v,preinitialize:function(){},initialize:function(){},toJSON:function(e){return this.map((function(t){return t.toJSON(e)}))},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,r.extend({merge:!1},t,b))},remove:function(e,t){t=r.extend({},t);var n=!r.isArray(e);e=n?[e]:e.slice();var i=this._removeModels(e,t);return!t.silent&&i.length&&(t.changes={added:[],merged:[],removed:i},this.trigger("update",this,t)),n?i[0]:i},set:function(e,t){if(null!=e){(t=r.extend({},E,t)).parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var n=!r.isArray(e);e=n?[e]:e.slice();var i=t.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var o,s,a=[],c=[],u=[],l=[],h={},f=t.add,d=t.merge,p=t.remove,m=!1,g=this.comparator&&null==i&&!1!==t.sort,v=r.isString(this.comparator)?this.comparator:null;for(s=0;s<e.length;s++){o=e[s];var y=this.get(o);if(y){if(d&&o!==y){var b=this._isModel(o)?o.attributes:o;t.parse&&(b=y.parse(b,t)),y.set(b,t),u.push(y),g&&!m&&(m=y.hasChanged(v))}h[y.cid]||(h[y.cid]=!0,a.push(y)),e[s]=y}else f&&(o=e[s]=this._prepareModel(o,t))&&(c.push(o),this._addReference(o,t),h[o.cid]=!0,a.push(o))}if(p){for(s=0;s<this.length;s++)h[(o=this.models[s]).cid]||l.push(o);l.length&&this._removeModels(l,t)}var _=!1,A=!g&&f&&p;if(a.length&&A?(_=this.length!==a.length||r.some(this.models,(function(e,t){return e!==a[t]})),this.models.length=0,w(this.models,a,0),this.length=this.models.length):c.length&&(g&&(m=!0),w(this.models,c,null==i?this.length:i),this.length=this.models.length),m&&this.sort({silent:!0}),!t.silent){for(s=0;s<c.length;s++)null!=i&&(t.index=i+s),(o=c[s]).trigger("add",o,this,t);(m||_)&&this.trigger("sort",this,t),(c.length||l.length||u.length)&&(t.changes={added:c,removed:l,merged:u},this.trigger("update",this,t))}return n?e[0]:e}},reset:function(e,t){t=t?r.clone(t):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,r.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,r.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,r.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return o.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(this._isModel(e)?e.attributes:e,e.idAttribute)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var n=t.length;return r.isFunction(t)&&(t=t.bind(this)),1===n||r.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){var t=(e=r.extend({parse:!0},e)).success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t.call(e.context,n,r,e),n.trigger("sync",n,r,e)},K(this,e),this.sync("read",this,e)},create:function(e,t){var n=(t=t?r.clone(t):{}).wait;if(!(e=this._prepareModel(e,t)))return!1;n||this.add(e,t);var i=this,o=t.success;return t.success=function(e,t,r){n&&i.add(e,r),o&&o.call(r.context,e,t,r)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e,t){return e[t||this.model.prototype.idAttribute||"id"]},values:function(){return new A(this,T)},keys:function(){return new A(this,I)},entries:function(){return new A(this,S)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){return this._isModel(e)?(e.collection||(e.collection=this),e):((t=t?r.clone(t):{}).collection=this,(n=this.model.prototype?new this.model(e,t):this.model(e,t)).validationError?(this.trigger("invalid",this,n.validationError,t),!1):n);var n},_removeModels:function(e,t){for(var r=[],n=0;n<e.length;n++){var i=this.get(e[n]);if(i){var o=this.indexOf(i);this.models.splice(o,1),this.length--,delete this._byId[i.cid];var s=this.modelId(i.attributes,i.idAttribute);null!=s&&delete this._byId[s],t.silent||(t.index=o,i.trigger("remove",i,this,t)),r.push(i),this._removeReference(i,t)}}return r},_isModel:function(e){return e instanceof v},_addReference:function(e,t){this._byId[e.cid]=e;var r=this.modelId(e.attributes,e.idAttribute);null!=r&&(this._byId[r]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var r=this.modelId(e.attributes,e.idAttribute);null!=r&&delete this._byId[r],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,r,n){if(t){if(("add"===e||"remove"===e)&&r!==this)return;if("destroy"===e&&this.remove(t,n),"changeId"===e){var i=this.modelId(t.previousAttributes(),t.idAttribute),o=this.modelId(t.attributes,t.idAttribute);null!=i&&delete this._byId[i],null!=o&&(this._byId[o]=t)}}this.trigger.apply(this,arguments)}});var _="function"==typeof Symbol&&Symbol.iterator;_&&(y.prototype[_]=y.prototype.values);var A=function(e,t){this._collection=e,this._kind=t,this._index=0},T=1,I=2,S=3;_&&(A.prototype[_]=function(){return this}),A.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var e,t=this._collection.at(this._index);if(this._index++,this._kind===T)e=t;else{var r=this._collection.modelId(t.attributes,t.idAttribute);e=this._kind===I?r:[r,t]}return{value:e,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var x=t.View=function(e){this.cid=r.uniqueId("view"),this.preinitialize.apply(this,arguments),r.extend(this,r.pick(e,R)),this._ensureElement(),this.initialize.apply(this,arguments)},O=/^(\S+)\s*(.*)$/,R=["model","collection","el","id","attributes","className","tagName","events"];r.extend(x.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=r.result(this,"events")),!e)return this;for(var t in this.undelegateEvents(),e){var n=e[t];if(r.isFunction(n)||(n=this[n]),n){var i=t.match(O);this.delegate(i[1],i[2],n.bind(this))}}return this},delegate:function(e,t,r){return this.$el.on(e+".delegateEvents"+this.cid,t,r),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,r){return this.$el.off(e+".delegateEvents"+this.cid,t,r),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(r.result(this,"el"));else{var e=r.extend({},r.result(this,"attributes"));this.id&&(e.id=r.result(this,"id")),this.className&&(e.class=r.result(this,"className")),this.setElement(this._createElement(r.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}});var k=function(e,t,r,n){switch(t){case 1:return function(){return e[r](this[n])};case 2:return function(t){return e[r](this[n],t)};case 3:return function(t,i){return e[r](this[n],C(t,this),i)};case 4:return function(t,i,o){return e[r](this[n],C(t,this),i,o)};default:return function(){var t=o.call(arguments);return t.unshift(this[n]),e[r].apply(e,t)}}},N=function(e,t,n,i){r.each(n,(function(r,n){t[n]&&(e.prototype[n]=k(t,r,n,i))}))},C=function(e,t){return r.isFunction(e)?e:r.isObject(e)&&!t._isModel(e)?D(e):r.isString(e)?function(t){return t.get(e)}:e},D=function(e){var t=r.matches(e);return function(e){return t(e.attributes)}},L={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},B={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};r.each([[y,L,"models"],[v,B,"attributes"]],(function(e){var t=e[0],n=e[1],i=e[2];t.mixin=function(e){var n=r.reduce(r.functions(e),(function(e,t){return e[t]=0,e}),{});N(t,e,n,i)},N(t,r,n,i)})),t.sync=function(e,n,i){var o=P[e];r.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:o,dataType:"json"};if(i.url||(s.url=r.result(n,"url")||W()),null!=i.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",i.emulateJSON&&(s.data._method=o);var a=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),a)return a.apply(this,arguments)}}"GET"===s.type||i.emulateJSON||(s.processData=!1);var c=i.error;i.error=function(e,t,r){i.textStatus=t,i.errorThrown=r,c&&c.call(i.context,e,t,r)};var u=i.xhr=t.ajax(r.extend(s,i));return n.trigger("request",n,u,i),u};var P={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var U=t.Router=function(e){e||(e={}),this.preinitialize.apply(this,arguments),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,j=/(\(\?)?:\w+/g,F=/\*\w+/g,V=/[\-{}\[\]+?.,\\\^$|#\s]/g;r.extend(U.prototype,a,{preinitialize:function(){},initialize:function(){},route:function(e,n,i){r.isRegExp(e)||(e=this._routeToRegExp(e)),r.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var o=this;return t.history.route(e,(function(r){var s=o._extractParameters(e,r);!1!==o.execute(i,s,n)&&(o.trigger.apply(o,["route:"+n].concat(s)),o.trigger("route",n,s),t.history.trigger("route",o,n,s))})),this},execute:function(e,t,r){e&&e.apply(this,t)},navigate:function(e,r){return t.history.navigate(e,r),this},_bindRoutes:function(){if(this.routes){this.routes=r.result(this,"routes");for(var e,t=r.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(V,"\\$&").replace(M,"(?:$1)?").replace(j,(function(e,t){return t?e:"([^/?]+)"})).replace(F,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return r.map(n,(function(e,t){return t===n.length-1?e||null:e?decodeURIComponent(e):null}))}});var $=t.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},z=/^[#\/]|\s+$/g,G=/^\/+|\/+$/g,q=/#.*$/;$.started=!1,r.extend($.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(z,"")},start:function(e){if($.started)throw new Error("Backbone.history has already been started");if($.started=!0,this.options=r.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(G,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,i=n.insertBefore(this.iframe,n.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var o=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),$.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),r.some(this.handlers,(function(t){if(t.route.test(e))return t.callback(e),!0})))},navigate:function(e,t){if(!$.started)return!1;t&&!0!==t||(t={trigger:!!t}),e=this.getFragment(e||"");var r=this.root;""!==e&&"?"!==e.charAt(0)||(r=r.slice(0,-1)||"/");var n=r+e;e=e.replace(q,"");var i=this.decodeFragment(e);if(this.fragment!==i){if(this.fragment=i,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var o=this.iframe.contentWindow;t.replace||(o.document.open(),o.document.close()),this._updateHash(o.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,r){if(r){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),t.history=new $;var H=function(e,t){var n,i=this;return n=e&&r.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},r.extend(n,i,t),n.prototype=r.create(i.prototype,e),n.prototype.constructor=n,n.__super__=i.prototype,n};v.extend=y.extend=U.extend=x.extend=$.extend=H;var W=function(){throw new Error('A "url" property or function must be specified')},K=function(e,t){var r=t.error;t.error=function(n){r&&r.call(t.context,e,n,t),e.trigger("error",e,n,t)}};return t}(o,r,e,t)}.apply(t,n),void 0===i||(e.exports=i)},5155:(e,t)=>{"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=c(e),s=o[0],a=o[1],u=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),l=0,h=a>0?s-4:s;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[l++]=255&t);1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=16383,a=0,c=n-i;a<c;a+=s)o.push(u(e,a,a+s>c?c:a+s));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},2486:(e,t,r)=>{"use strict";var n=r(5155),i=r(4525),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.lW=c,t.h2=50;var s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return u(e,t,r)}function u(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|m(e,t),n=a(r),i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(V(e,Uint8Array)){var t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(V(e,ArrayBuffer)||e&&V(e.buffer,ArrayBuffer))return d(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(V(e,SharedArrayBuffer)||e&&V(e.buffer,SharedArrayBuffer)))return d(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return c.from(n,t,r);var i=function(e){if(c.isBuffer(e)){var t=0|p(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||$(e.length)?a(0):f(e);if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return l(e),a(e<0?0:0|p(e))}function f(e){for(var t=e.length<0?0:0|p(e.length),r=a(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function d(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,c.prototype),n}function p(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function m(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||V(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(e).length;default:if(i)return n?-1:M(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return O(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return I(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function v(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),$(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:E(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):E(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function E(e,t,r,n,i){var o,s=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=r;o<a;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(r+c>a&&(r=a-c),o=r;o>=0;o--){for(var h=!0,f=0;f<c;f++)if(u(e,o+f)!==u(t,f)){h=!1;break}if(h)return o}return-1}function b(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if($(a))return s;e[r+s]=a}return s}function w(e,t,r,n){return F(M(t,e.length-r),e,r,n)}function _(e,t,r,n){return F(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function A(e,t,r,n){return F(j(t),e,r,n)}function T(e,t,r,n){return F(function(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function I(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,a,c,u=e[i],l=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=r)switch(h){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(c=(15&u)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(l=c)}null===l?(l=65533,h=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=h}return function(e){var t=e.length;if(t<=x)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=x));return r}(n)}c.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),!c.TYPED_ARRAY_SUPPORT&&"undefined"!=typeof console&&console.error,Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,r){return u(e,t,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},c.allocUnsafe=function(e){return h(e)},c.allocUnsafeSlow=function(e){return h(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(V(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),V(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=c.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(V(o,Uint8Array))i+o.length>n.length?c.from(o).copy(n,i):Uint8Array.prototype.set.call(n,o,i);else{if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i)}i+=o.length}return n},c.byteLength=m,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},c.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):g.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.h2;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(e,t,r,n,i){if(V(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(n,i),l=e.slice(t,r),h=0;h<a;++h)if(u[h]!==l[h]){o=u[h],s=l[h];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":case"latin1":case"binary":return _(this,e,t,r);case"base64":return A(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function O(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function k(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=z[e[o]];return i}function N(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function C(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,r,n,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function L(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function B(e,t,r,n,o){return t=+t,r>>>=0,o||L(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function P(e,t,r,n,o){return t=+t,r>>>=0,o||L(e,0,r,8),i.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||C(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){e>>>=0,t||C(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return e>>>=0,t||C(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||C(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||C(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||C(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||D(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||D(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);D(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);D(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return P(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return P(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var i=e.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=c.isBuffer(e)?e:c.from(e,n),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=s[o%a]}return this};var U=/[^+/0-9A-Za-z-_]/g;function M(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function j(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function V(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function $(e){return e!=e}var z=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()},7615:(e,t,r)=>{"use strict";var n=r(1801),i=r(2550),o=i(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&o(e,".prototype.")>-1?i(r):r}},2550:(e,t,r)=>{"use strict";var n=r(1930),i=r(1801),o=i("%Function.prototype.apply%"),s=i("%Function.prototype.call%"),a=i("%Reflect.apply%",!0)||n.call(s,o),c=i("%Object.getOwnPropertyDescriptor%",!0),u=i("%Object.defineProperty%",!0),l=i("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}e.exports=function(e){var t=a(n,s,arguments);if(c&&u){var r=c(t,"length");r.configurable&&u(t,"length",{value:1+l(0,e.length-(arguments.length-1))})}return t};var h=function(){return a(n,o,arguments)};u?u(e.exports,"apply",{value:h}):e.exports.apply=h},1615:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=t},368:e=>{var t=Object.prototype.toString;e.exports=function(e){switch(t.call(e)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===e?"null":void 0===e?"undefined":e!=e?"nan":e&&1===e.nodeType?"element":null!=(r=e)&&(r._isBuffer||r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r))?"buffer":typeof(e=e.valueOf?e.valueOf():Object.prototype.valueOf.apply(e));var r}},1041:e=>{var t,r;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],n=0;n<e.length;n+=3)for(var i=e[n]<<16|e[n+1]<<8|e[n+2],o=0;o<4;o++)8*n+6*o<=8*e.length?r.push(t.charAt(i>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,i=0;n<e.length;i=++n%4)0!=i&&r.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(n))>>>6-2*i);return r}},e.exports=r},7322:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,r=36e5,n="millisecond",i="second",o="minute",s="hour",a="day",c="week",u="month",l="quarter",h="year",f="date",d="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},v=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},y={s:v,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+v(n,2,"0")+":"+v(i,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,u),o=r-i<0,s=t.clone().add(n+(o?-1:1),u);return+(-(n+(r-i)/(o?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:h,w:c,d:a,D:f,h:s,m:o,s:i,ms:n,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},E="en",b={};b[E]=g;var w=function(e){return e instanceof I},_=function e(t,r,n){var i;if(!t)return E;if("string"==typeof t){var o=t.toLowerCase();b[o]&&(i=o),r&&(b[o]=r,i=o);var s=t.split("-");if(!i&&s.length>1)return e(s[0])}else{var a=t.name;b[a]=t,i=a}return!n&&i&&(E=i),i||!n&&E},A=function(e,t){if(w(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new I(r)},T=y;T.l=_,T.i=w,T.w=function(e,t){return A(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var I=function(){function g(e){this.$L=_(e.locale,null,!0),this.parse(e)}var v=g.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(T.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(p);if(n){var i=n[2]-1||0,o=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return T},v.isValid=function(){return!(this.$d.toString()===d)},v.isSame=function(e,t){var r=A(e);return this.startOf(t)<=r&&r<=this.endOf(t)},v.isAfter=function(e,t){return A(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<A(e)},v.$g=function(e,t,r){return T.u(e)?this[t]:this.set(r,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var r=this,n=!!T.u(t)||t,l=T.p(e),d=function(e,t){var i=T.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?i:i.endOf(a)},p=function(e,t){return T.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},m=this.$W,g=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(l){case h:return n?d(1,0):d(31,11);case u:return n?d(1,g):d(0,g+1);case c:var E=this.$locale().weekStart||0,b=(m<E?m+7:m)-E;return d(n?v-b:v+(6-b),g);case a:case f:return p(y+"Hours",0);case s:return p(y+"Minutes",1);case o:return p(y+"Seconds",2);case i:return p(y+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var r,c=T.p(e),l="set"+(this.$u?"UTC":""),d=(r={},r[a]=l+"Date",r[f]=l+"Date",r[u]=l+"Month",r[h]=l+"FullYear",r[s]=l+"Hours",r[o]=l+"Minutes",r[i]=l+"Seconds",r[n]=l+"Milliseconds",r)[c],p=c===a?this.$D+(t-this.$W):t;if(c===u||c===h){var m=this.clone().set(f,1);m.$d[d](p),m.init(),this.$d=m.set(f,Math.min(this.$D,m.daysInMonth())).$d}else d&&this.$d[d](p);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[T.p(e)]()},v.add=function(n,l){var f,d=this;n=Number(n);var p=T.p(l),m=function(e){var t=A(d);return T.w(t.date(t.date()+Math.round(e*n)),d)};if(p===u)return this.set(u,this.$M+n);if(p===h)return this.set(h,this.$y+n);if(p===a)return m(1);if(p===c)return m(7);var g=(f={},f[o]=t,f[s]=r,f[i]=e,f)[p]||1,v=this.$d.getTime()+n*g;return T.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||d;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=T.z(this),o=this.$H,s=this.$m,a=this.$M,c=r.weekdays,u=r.months,l=function(e,r,i,o){return e&&(e[r]||e(t,n))||i[r].slice(0,o)},h=function(e){return T.s(o%12||12,e,"0")},f=r.meridiem||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:T.s(a+1,2,"0"),MMM:l(r.monthsShort,a,u,3),MMMM:l(u,a),D:this.$D,DD:T.s(this.$D,2,"0"),d:String(this.$W),dd:l(r.weekdaysMin,this.$W,c,2),ddd:l(r.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(o),HH:T.s(o,2,"0"),h:h(1),hh:h(2),a:f(o,s,!0),A:f(o,s,!1),m:String(s),mm:T.s(s,2,"0"),s:String(this.$s),ss:T.s(this.$s,2,"0"),SSS:T.s(this.$ms,3,"0"),Z:i};return n.replace(m,(function(e,t){return t||p[e]||i.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(n,f,d){var p,m=T.p(f),g=A(n),v=(g.utcOffset()-this.utcOffset())*t,y=this-g,E=T.m(this,g);return E=(p={},p[h]=E/12,p[u]=E,p[l]=E/3,p[c]=(y-v)/6048e5,p[a]=(y-v)/864e5,p[s]=y/r,p[o]=y/t,p[i]=y/e,p)[m]||y,d?E:T.a(E)},v.daysInMonth=function(){return this.endOf(u).$D},v.$locale=function(){return b[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=_(e,t,!0);return n&&(r.$L=n),r},v.clone=function(){return T.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},g}(),S=I.prototype;return A.prototype=S,[["$ms",n],["$s",i],["$m",o],["$H",s],["$W",a],["$M",u],["$y",h],["$D",f]].forEach((function(e){S[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),A.extend=function(e,t){return e.$i||(e(t,I,A),e.$i=!0),A},A.locale=_,A.isDayjs=w,A.unix=function(e){return A(1e3*e)},A.en=b[E],A.Ls=b,A.p={},A}()},9170:(e,t,r)=>{"use strict";var n=r(806),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,s=Array.prototype.concat,a=Object.defineProperty,c=r(8198)(),u=a&&c,l=function(e,t,r,n){var i;(!(t in e)||"function"==typeof(i=n)&&"[object Function]"===o.call(i)&&n())&&(u?a(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},h=function(e,t){var r=arguments.length>2?arguments[2]:{},o=n(t);i&&(o=s.call(o,Object.getOwnPropertySymbols(t)));for(var a=0;a<o.length;a+=1)l(e,o[a],t[o[a]],r[o[a]])};h.supportsDescriptors=!!u,e.exports=h},1662:e=>{"use strict";function t(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var o=Object.keys(Object(i)),s=0,a=o.length;s<a;s++){var c=o[s],u=Object.getOwnPropertyDescriptor(i,c);void 0!==u&&u.enumerable&&(r[c]=i[c])}}return r}e.exports={assign:t,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:t})}}},5939:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}m(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&m(e,"error",t,r)}(e,i,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){var i,o,s;if(a(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=c(e))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,console&&console.warn}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=l.bind(n);return i.listener=r,n.wrapFn=i,i}function f(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):p(i,i.length)}function d(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){n.once&&e.removeEventListener(t,i),r(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var u=c.length,l=p(c,u);for(r=0;r<u;++r)n(l[r],this,t)}return!0},o.prototype.addListener=function(e,t){return u(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return u(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,i,o,s;if(a(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},o.prototype.listenerCount=d,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},4843:(e,t,r)=>{"use strict";var n=r(5443),i=Object.prototype.toString,o=Object.prototype.hasOwnProperty,s=function(e,t,r){for(var n=0,i=e.length;n<i;n++)o.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))},a=function(e,t,r){for(var n=0,i=e.length;n<i;n++)null==r?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)},c=function(e,t,r){for(var n in e)o.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))};e.exports=function(e,t,r){if(!n(t))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=r),"[object Array]"===i.call(e)?s(e,t,o):"string"==typeof e?a(e,t,o):c(e,t,o)}},9930:e=>{"use strict";var t="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,n=Object.prototype.toString,i="[object Function]";e.exports=function(e){var o=this;if("function"!=typeof o||n.call(o)!==i)throw new TypeError(t+o);for(var s,a=r.call(arguments,1),c=function(){if(this instanceof s){var t=o.apply(this,a.concat(r.call(arguments)));return Object(t)===t?t:this}return o.apply(e,a.concat(r.call(arguments)))},u=Math.max(0,o.length-a.length),l=[],h=0;h<u;h++)l.push("$"+h);if(s=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(c),o.prototype){var f=function(){};f.prototype=o.prototype,s.prototype=new f,f.prototype=null}return s}},1930:(e,t,r)=>{"use strict";var n=r(9930);e.exports=Function.prototype.bind||n},1801:(e,t,r)=>{"use strict";var n,i=SyntaxError,o=Function,s=TypeError,a=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(e){c=null}var u=function(){throw new s},l=c?function(){try{return u}catch(e){try{return c(arguments,"callee").get}catch(e){return u}}}():u,h=r(9905)(),f=Object.getPrototypeOf||function(e){return e.__proto__},d={},p="undefined"==typeof Uint8Array?n:f(Uint8Array),m={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":h?f([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":d,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?f(f([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&h?f((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&h?f((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?f(""[Symbol.iterator]()):n,"%Symbol%":h?Symbol:n,"%SyntaxError%":i,"%ThrowTypeError%":l,"%TypedArray%":p,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet},g=function e(t){var r;if("%AsyncFunction%"===t)r=a("async function () {}");else if("%GeneratorFunction%"===t)r=a("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=a("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(r=f(i.prototype))}return m[t]=r,r},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=r(1930),E=r(9284),b=y.call(Function.call,Array.prototype.concat),w=y.call(Function.apply,Array.prototype.splice),_=y.call(Function.call,String.prototype.replace),A=y.call(Function.call,String.prototype.slice),T=y.call(Function.call,RegExp.prototype.exec),I=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,S=/\\(\\)?/g,x=function(e){var t=A(e,0,1),r=A(e,-1);if("%"===t&&"%"!==r)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var n=[];return _(e,I,(function(e,t,r,i){n[n.length]=r?_(i,S,"$1"):t||e})),n},O=function(e,t){var r,n=e;if(E(v,n)&&(n="%"+(r=v[n])[0]+"%"),E(m,n)){var o=m[n];if(o===d&&(o=g(n)),void 0===o&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new s('"allowMissing" argument must be a boolean');if(null===T(/^%?[^%]*%?$/g,e))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=x(e),n=r.length>0?r[0]:"",o=O("%"+n+"%",t),a=o.name,u=o.value,l=!1,h=o.alias;h&&(n=h[0],w(r,b([0,1],h)));for(var f=1,d=!0;f<r.length;f+=1){var p=r[f],g=A(p,0,1),v=A(p,-1);if(('"'===g||"'"===g||"`"===g||'"'===v||"'"===v||"`"===v)&&g!==v)throw new i("property names with quotes must have matching quotes");if("constructor"!==p&&d||(l=!0),E(m,a="%"+(n+="."+p)+"%"))u=m[a];else if(null!=u){if(!(p in u)){if(!t)throw new s("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&f+1>=r.length){var y=c(u,p);u=(d=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:u[p]}else d=E(u,p),u=u[p];d&&!l&&(m[a]=u)}}return u}},8198:(e,t,r)=>{"use strict";var n=r(1801)("%Object.defineProperty%",!0),i=function(){if(n)try{return n({},"a",{value:1}),!0}catch(e){return!1}return!1};i.hasArrayLengthDefineBug=function(){if(!i())return null;try{return 1!==n([],"length",{value:1}).length}catch(e){return!0}},e.exports=i},9905:(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,i=r(5682);e.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&i())))}},5682:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},4111:(e,t,r)=>{"use strict";var n=r(5682);e.exports=function(){return n()&&!!Symbol.toStringTag}},9284:(e,t,r)=>{"use strict";var n=r(1930);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},4525:(e,t)=>{t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,u=c>>1,l=-7,h=r?i-1:0,f=r?-1:1,d=e[t+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+h],h+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=u}return(d?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,c,u=8*o-i-1,l=(1<<u)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+h>=1?f/c:f*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(t*c-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[r+d]=255&s,d+=p,s/=256,u-=8);e[r+d-p]|=128*m}},8575:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},7092:(e,t,r)=>{"use strict";var n=r(4111)(),i=r(7615)("Object.prototype.toString"),o=function(e){return!(n&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},s=function(e){return!!o(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},a=function(){return o(arguments)}();o.isLegacyArguments=s,e.exports=a?o:s},1246:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},5443:e=>{"use strict";var t,r,n=Function.prototype.toString,i="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof i&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},i((function(){throw 42}),null,t)}catch(e){e!==r&&(i=null)}else i=null;var o=/^\s*class\b/,s=function(e){try{var t=n.call(e);return o.test(t)}catch(e){return!1}},a=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,u="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};e.exports=i?function(e){if(e===u)return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;try{i(e,null,t)}catch(e){if(e!==r)return!1}return!s(e)}:function(e){if(e===u)return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(c)return function(e){try{return!s(e)&&(n.call(e),!0)}catch(e){return!1}}(e);if(s(e))return!1;var t=a.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},7427:(e,t,r)=>{"use strict";var n,i=Object.prototype.toString,o=Function.prototype.toString,s=/^\s*(?:function)?\*/,a=r(4111)(),c=Object.getPrototypeOf;e.exports=function(e){if("function"!=typeof e)return!1;if(s.test(o.call(e)))return!0;if(!a)return"[object GeneratorFunction]"===i.call(e);if(!c)return!1;if(void 0===n){var t=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch(e){}}();n=!!t&&c(t)}return c(e)===n}},2100:e=>{"use strict";e.exports=function(e){return e!=e}},8622:(e,t,r)=>{"use strict";var n=r(2550),i=r(9170),o=r(2100),s=r(4358),a=r(6232),c=n(s(),Number);i(c,{getPolyfill:s,implementation:o,shim:a}),e.exports=c},4358:(e,t,r)=>{"use strict";var n=r(2100);e.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:n}},6232:(e,t,r)=>{"use strict";var n=r(9170),i=r(4358);e.exports=function(){var e=i();return n(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}},2527:(e,t,r)=>{"use strict";var n=r(4843),i=r(4343),o=r(7615),s=o("Object.prototype.toString"),a=r(4111)(),c="undefined"==typeof globalThis?r.g:globalThis,u=i(),l=o("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},h=o("String.prototype.slice"),f={},d=r(7065),p=Object.getPrototypeOf;a&&d&&p&&n(u,(function(e){var t=new c[e];if(Symbol.toStringTag in t){var r=p(t),n=d(r,Symbol.toStringTag);if(!n){var i=p(r);n=d(i,Symbol.toStringTag)}f[e]=n.get}}));e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!a||!(Symbol.toStringTag in e)){var t=h(s(e),8,-1);return l(u,t)>-1}return!!d&&function(e){var t=!1;return n(f,(function(r,n){if(!t)try{t=r.call(e)===n}catch(e){}})),t}(e)}},4029:e=>{e.exports=function(e,t,r){return t=t||"and",r=r||", ",e.length<2?e[0]||"":(t.slice(0,2)===r?2==e.length&&(t=t.slice(1)):t=" "+t,e.slice(0,-1).join(r)+t+" "+e[e.length-1])}},1271:function(e,t){var r;!function(t,r){"use strict";"object"==typeof e.exports?e.exports=t.document?r(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}:r(t)}("undefined"!=typeof window?window:this,(function(n,i){"use strict";var o=[],s=Object.getPrototypeOf,a=o.slice,c=o.flat?function(e){return o.flat.call(e)}:function(e){return o.concat.apply([],e)},u=o.push,l=o.indexOf,h={},f=h.toString,d=h.hasOwnProperty,p=d.toString,m=p.call(Object),g={},v=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},y=function(e){return null!=e&&e===e.window},E=n.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,t,r){var n,i,o=(r=r||E).createElement("script");if(o.text=e,t)for(n in b)(i=t[n]||t.getAttribute&&t.getAttribute(n))&&o.setAttribute(n,i);r.head.appendChild(o).parentNode.removeChild(o)}function _(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[f.call(e)]||"object":typeof e}var A="3.6.0",T=function(e,t){return new T.fn.init(e,t)};function I(e){var t=!!e&&"length"in e&&e.length,r=_(e);return!v(e)&&!y(e)&&("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}T.fn=T.prototype={jquery:A,constructor:T,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=T.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return T.each(this,e)},map:function(e){return this.pushStack(T.map(this,(function(t,r){return e.call(t,r,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(T.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(T.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:o.sort,splice:o.splice},T.extend=T.fn.extend=function(){var e,t,r,n,i,o,s=arguments[0]||{},a=1,c=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||v(s)||(s={}),a===c&&(s=this,a--);a<c;a++)if(null!=(e=arguments[a]))for(t in e)n=e[t],"__proto__"!==t&&s!==n&&(u&&n&&(T.isPlainObject(n)||(i=Array.isArray(n)))?(r=s[t],o=i&&!Array.isArray(r)?[]:i||T.isPlainObject(r)?r:{},i=!1,s[t]=T.extend(u,o,n)):void 0!==n&&(s[t]=n));return s},T.extend({expando:"jQuery"+(A+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,r;return!(!e||"[object Object]"!==f.call(e))&&(!(t=s(e))||"function"==typeof(r=d.call(t,"constructor")&&t.constructor)&&p.call(r)===m)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,r){w(e,{nonce:t&&t.nonce},r)},each:function(e,t){var r,n=0;if(I(e))for(r=e.length;n<r&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},makeArray:function(e,t){var r=t||[];return null!=e&&(I(Object(e))?T.merge(r,"string"==typeof e?[e]:e):u.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:l.call(t,e,r)},merge:function(e,t){for(var r=+t.length,n=0,i=e.length;n<r;n++)e[i++]=t[n];return e.length=i,e},grep:function(e,t,r){for(var n=[],i=0,o=e.length,s=!r;i<o;i++)!t(e[i],i)!==s&&n.push(e[i]);return n},map:function(e,t,r){var n,i,o=0,s=[];if(I(e))for(n=e.length;o<n;o++)null!=(i=t(e[o],o,r))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,r))&&s.push(i);return c(s)},guid:1,support:g}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=o[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){h["[object "+t+"]"]=t.toLowerCase()}));var S=function(e){var t,r,n,i,o,s,a,c,u,l,h,f,d,p,m,g,v,y,E,b="sizzle"+1*new Date,w=e.document,_=0,A=0,T=ce(),I=ce(),S=ce(),x=ce(),O=function(e,t){return e===t&&(h=!0),0},R={}.hasOwnProperty,k=[],N=k.pop,C=k.push,D=k.push,L=k.slice,B=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",U="[\\x20\\t\\r\\n\\f]",M="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",j="\\[[\\x20\\t\\r\\n\\f]*("+M+")(?:"+U+"*([*^$|!~]?=)"+U+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+U+"*\\]",F=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",V=new RegExp(U+"+","g"),$=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),z=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),G=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),q=new RegExp(U+"|>"),H=new RegExp(F),W=new RegExp("^"+M+"$"),K={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},J=/HTML$/i,Y=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),re=function(e,t){var r="0x"+e.slice(1)-65536;return t||(r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320))},ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){f()},se=be((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{D.apply(k=L.call(w.childNodes),w.childNodes),k[w.childNodes.length].nodeType}catch(e){D={apply:k.length?function(e,t){C.apply(e,L.call(t))}:function(e,t){for(var r=e.length,n=0;e[r++]=t[n++];);e.length=r-1}}}function ae(e,t,n,i){var o,a,u,l,h,p,v,y=t&&t.ownerDocument,w=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==w&&9!==w&&11!==w)return n;if(!i&&(f(t),t=t||d,m)){if(11!==w&&(h=Q.exec(e)))if(o=h[1]){if(9===w){if(!(u=t.getElementById(o)))return n;if(u.id===o)return n.push(u),n}else if(y&&(u=y.getElementById(o))&&E(t,u)&&u.id===o)return n.push(u),n}else{if(h[2])return D.apply(n,t.getElementsByTagName(e)),n;if((o=h[3])&&r.getElementsByClassName&&t.getElementsByClassName)return D.apply(n,t.getElementsByClassName(o)),n}if(r.qsa&&!x[e+" "]&&(!g||!g.test(e))&&(1!==w||"object"!==t.nodeName.toLowerCase())){if(v=e,y=t,1===w&&(q.test(e)||G.test(e))){for((y=ee.test(e)&&ve(t.parentNode)||t)===t&&r.scope||((l=t.getAttribute("id"))?l=l.replace(ne,ie):t.setAttribute("id",l=b)),a=(p=s(e)).length;a--;)p[a]=(l?"#"+l:":scope")+" "+Ee(p[a]);v=p.join(",")}try{return D.apply(n,y.querySelectorAll(v)),n}catch(t){x(e,!0)}finally{l===b&&t.removeAttribute("id")}}}return c(e.replace($,"$1"),t,n,i)}function ce(){var e=[];return function t(r,i){return e.push(r+" ")>n.cacheLength&&delete t[e.shift()],t[r+" "]=i}}function ue(e){return e[b]=!0,e}function le(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function he(e,t){for(var r=e.split("|"),i=r.length;i--;)n.attrHandle[r[i]]=t}function fe(e,t){var r=t&&e,n=r&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function me(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&se(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ge(e){return ue((function(t){return t=+t,ue((function(r,n){for(var i,o=e([],r.length,t),s=o.length;s--;)r[i=o[s]]&&(r[i]=!(n[i]=r[i]))}))}))}function ve(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in r=ae.support={},o=ae.isXML=function(e){var t=e&&e.namespaceURI,r=e&&(e.ownerDocument||e).documentElement;return!J.test(t||r&&r.nodeName||"HTML")},f=ae.setDocument=function(e){var t,i,s=e?e.ownerDocument||e:w;return s!=d&&9===s.nodeType&&s.documentElement?(p=(d=s).documentElement,m=!o(d),w!=d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",oe,!1):i.attachEvent&&i.attachEvent("onunload",oe)),r.scope=le((function(e){return p.appendChild(e).appendChild(d.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),r.attributes=le((function(e){return e.className="i",!e.getAttribute("className")})),r.getElementsByTagName=le((function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length})),r.getElementsByClassName=Z.test(d.getElementsByClassName),r.getById=le((function(e){return p.appendChild(e).id=b,!d.getElementsByName||!d.getElementsByName(b).length})),r.getById?(n.filter.ID=function(e){var t=e.replace(te,re);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var r=t.getElementById(e);return r?[r]:[]}}):(n.filter.ID=function(e){var t=e.replace(te,re);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var r,n,i,o=t.getElementById(e);if(o){if((r=o.getAttributeNode("id"))&&r.value===e)return[o];for(i=t.getElementsByName(e),n=0;o=i[n++];)if((r=o.getAttributeNode("id"))&&r.value===e)return[o]}return[]}}),n.find.TAG=r.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):r.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,n=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;r=o[i++];)1===r.nodeType&&n.push(r);return n}return o},n.find.CLASS=r.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},v=[],g=[],(r.qsa=Z.test(d.querySelectorAll))&&(le((function(e){var t;p.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+P+")"),e.querySelectorAll("[id~="+b+"-]").length||g.push("~="),(t=d.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||g.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||g.push(".#.+[+~]"),e.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")})),le((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")}))),(r.matchesSelector=Z.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&le((function(e){r.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",F)})),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=Z.test(p.compareDocumentPosition),E=t||Z.test(p.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(r.contains?r.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},O=t?function(e,t){if(e===t)return h=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!r.sortDetached&&t.compareDocumentPosition(e)===n?e==d||e.ownerDocument==w&&E(w,e)?-1:t==d||t.ownerDocument==w&&E(w,t)?1:l?B(l,e)-B(l,t):0:4&n?-1:1)}:function(e,t){if(e===t)return h=!0,0;var r,n=0,i=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!i||!o)return e==d?-1:t==d?1:i?-1:o?1:l?B(l,e)-B(l,t):0;if(i===o)return fe(e,t);for(r=e;r=r.parentNode;)s.unshift(r);for(r=t;r=r.parentNode;)a.unshift(r);for(;s[n]===a[n];)n++;return n?fe(s[n],a[n]):s[n]==w?-1:a[n]==w?1:0},d):d},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if(f(e),r.matchesSelector&&m&&!x[t+" "]&&(!v||!v.test(t))&&(!g||!g.test(t)))try{var n=y.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){x(t,!0)}return ae(t,d,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!=d&&f(e),E(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!=d&&f(e);var i=n.attrHandle[t.toLowerCase()],o=i&&R.call(n.attrHandle,t.toLowerCase())?i(e,t,!m):void 0;return void 0!==o?o:r.attributes||!m?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},ae.escape=function(e){return(e+"").replace(ne,ie)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,n=[],i=0,o=0;if(h=!r.detectDuplicates,l=!r.sortStable&&e.slice(0),e.sort(O),h){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return l=null,e},i=ae.getText=function(e){var t,r="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n++];)r+=i(t);return r},n=ae.selectors={cacheLength:50,createPseudo:ue,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,re),e[3]=(e[3]||e[4]||e[5]||"").replace(te,re),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&H.test(r)&&(t=s(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,re).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+U+"|$)"))&&T(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,r){return function(n){var i=ae.attr(n,e);return null==i?"!="===t:!t||(i+="","="===t?i===r:"!="===t?i!==r:"^="===t?r&&0===i.indexOf(r):"*="===t?r&&i.indexOf(r)>-1:"$="===t?r&&i.slice(-r.length)===r:"~="===t?(" "+i.replace(V," ")+" ").indexOf(r)>-1:"|="===t&&(i===r||i.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,r,n,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===i?function(e){return!!e.parentNode}:function(t,r,c){var u,l,h,f,d,p,m=o!==s?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!c&&!a,E=!1;if(g){if(o){for(;m;){for(f=t;f=f[m];)if(a?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?g.firstChild:g.lastChild],s&&y){for(E=(d=(u=(l=(h=(f=g)[b]||(f[b]={}))[f.uniqueID]||(h[f.uniqueID]={}))[e]||[])[0]===_&&u[1])&&u[2],f=d&&g.childNodes[d];f=++d&&f&&f[m]||(E=d=0)||p.pop();)if(1===f.nodeType&&++E&&f===t){l[e]=[_,d,E];break}}else if(y&&(E=d=(u=(l=(h=(f=t)[b]||(f[b]={}))[f.uniqueID]||(h[f.uniqueID]={}))[e]||[])[0]===_&&u[1]),!1===E)for(;(f=++d&&f&&f[m]||(E=d=0)||p.pop())&&((a?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++E||(y&&((l=(h=f[b]||(f[b]={}))[f.uniqueID]||(h[f.uniqueID]={}))[e]=[_,E]),f!==t)););return(E-=i)===n||E%n==0&&E/n>=0}}},PSEUDO:function(e,t){var r,i=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(r=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?ue((function(e,r){for(var n,o=i(e,t),s=o.length;s--;)e[n=B(e,o[s])]=!(r[n]=o[s])})):function(e){return i(e,0,r)}):i}},pseudos:{not:ue((function(e){var t=[],r=[],n=a(e.replace($,"$1"));return n[b]?ue((function(e,t,r,i){for(var o,s=n(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))})):function(e,i,o){return t[0]=e,n(t,null,o,r),t[0]=null,!r.pop()}})),has:ue((function(e){return function(t){return ae(e,t).length>0}})),contains:ue((function(e){return e=e.replace(te,re),function(t){return(t.textContent||i(t)).indexOf(e)>-1}})),lang:ue((function(e){return W.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(te,re).toLowerCase(),function(t){var r;do{if(r=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge((function(){return[0]})),last:ge((function(e,t){return[t-1]})),eq:ge((function(e,t,r){return[r<0?r+t:r]})),even:ge((function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e})),odd:ge((function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e})),lt:ge((function(e,t,r){for(var n=r<0?r+t:r>t?t:r;--n>=0;)e.push(n);return e})),gt:ge((function(e,t,r){for(var n=r<0?r+t:r;++n<t;)e.push(n);return e}))}},n.pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=pe(t);function ye(){}function Ee(e){for(var t=0,r=e.length,n="";t<r;t++)n+=e[t].value;return n}function be(e,t,r){var n=t.dir,i=t.next,o=i||n,s=r&&"parentNode"===o,a=A++;return t.first?function(t,r,i){for(;t=t[n];)if(1===t.nodeType||s)return e(t,r,i);return!1}:function(t,r,c){var u,l,h,f=[_,a];if(c){for(;t=t[n];)if((1===t.nodeType||s)&&e(t,r,c))return!0}else for(;t=t[n];)if(1===t.nodeType||s)if(l=(h=t[b]||(t[b]={}))[t.uniqueID]||(h[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[n]||t;else{if((u=l[o])&&u[0]===_&&u[1]===a)return f[2]=u[2];if(l[o]=f,f[2]=e(t,r,c))return!0}return!1}}function we(e){return e.length>1?function(t,r,n){for(var i=e.length;i--;)if(!e[i](t,r,n))return!1;return!0}:e[0]}function _e(e,t,r,n,i){for(var o,s=[],a=0,c=e.length,u=null!=t;a<c;a++)(o=e[a])&&(r&&!r(o,n,i)||(s.push(o),u&&t.push(a)));return s}function Ae(e,t,r,n,i,o){return n&&!n[b]&&(n=Ae(n)),i&&!i[b]&&(i=Ae(i,o)),ue((function(o,s,a,c){var u,l,h,f=[],d=[],p=s.length,m=o||function(e,t,r){for(var n=0,i=t.length;n<i;n++)ae(e,t[n],r);return r}(t||"*",a.nodeType?[a]:a,[]),g=!e||!o&&t?m:_e(m,f,e,a,c),v=r?i||(o?e:p||n)?[]:s:g;if(r&&r(g,v,a,c),n)for(u=_e(v,d),n(u,[],a,c),l=u.length;l--;)(h=u[l])&&(v[d[l]]=!(g[d[l]]=h));if(o){if(i||e){if(i){for(u=[],l=v.length;l--;)(h=v[l])&&u.push(g[l]=h);i(null,v=[],u,c)}for(l=v.length;l--;)(h=v[l])&&(u=i?B(o,h):f[l])>-1&&(o[u]=!(s[u]=h))}}else v=_e(v===s?v.splice(p,v.length):v),i?i(null,s,v,c):D.apply(s,v)}))}function Te(e){for(var t,r,i,o=e.length,s=n.relative[e[0].type],a=s||n.relative[" "],c=s?1:0,l=be((function(e){return e===t}),a,!0),h=be((function(e){return B(t,e)>-1}),a,!0),f=[function(e,r,n){var i=!s&&(n||r!==u)||((t=r).nodeType?l(e,r,n):h(e,r,n));return t=null,i}];c<o;c++)if(r=n.relative[e[c].type])f=[be(we(f),r)];else{if((r=n.filter[e[c].type].apply(null,e[c].matches))[b]){for(i=++c;i<o&&!n.relative[e[i].type];i++);return Ae(c>1&&we(f),c>1&&Ee(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace($,"$1"),r,c<i&&Te(e.slice(c,i)),i<o&&Te(e=e.slice(i)),i<o&&Ee(e))}f.push(r)}return we(f)}return ye.prototype=n.filters=n.pseudos,n.setFilters=new ye,s=ae.tokenize=function(e,t){var r,i,o,s,a,c,u,l=I[e+" "];if(l)return t?0:l.slice(0);for(a=e,c=[],u=n.preFilter;a;){for(s in r&&!(i=z.exec(a))||(i&&(a=a.slice(i[0].length)||a),c.push(o=[])),r=!1,(i=G.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace($," ")}),a=a.slice(r.length)),n.filter)!(i=K[s].exec(a))||u[s]&&!(i=u[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return t?a.length:a?ae.error(e):I(e,c).slice(0)},a=ae.compile=function(e,t){var r,i=[],o=[],a=S[e+" "];if(!a){for(t||(t=s(e)),r=t.length;r--;)(a=Te(t[r]))[b]?i.push(a):o.push(a);a=S(e,function(e,t){var r=t.length>0,i=e.length>0,o=function(o,s,a,c,l){var h,p,g,v=0,y="0",E=o&&[],b=[],w=u,A=o||i&&n.find.TAG("*",l),T=_+=null==w?1:Math.random()||.1,I=A.length;for(l&&(u=s==d||s||l);y!==I&&null!=(h=A[y]);y++){if(i&&h){for(p=0,s||h.ownerDocument==d||(f(h),a=!m);g=e[p++];)if(g(h,s||d,a)){c.push(h);break}l&&(_=T)}r&&((h=!g&&h)&&v--,o&&E.push(h))}if(v+=y,r&&y!==v){for(p=0;g=t[p++];)g(E,b,s,a);if(o){if(v>0)for(;y--;)E[y]||b[y]||(b[y]=N.call(c));b=_e(b)}D.apply(c,b),l&&!o&&b.length>0&&v+t.length>1&&ae.uniqueSort(c)}return l&&(_=T,u=w),E};return r?ue(o):o}(o,i)),a.selector=e}return a},c=ae.select=function(e,t,r,i){var o,c,u,l,h,f="function"==typeof e&&e,d=!i&&s(e=f.selector||e);if(r=r||[],1===d.length){if((c=d[0]=d[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&9===t.nodeType&&m&&n.relative[c[1].type]){if(!(t=(n.find.ID(u.matches[0].replace(te,re),t)||[])[0]))return r;f&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(o=K.needsContext.test(e)?0:c.length;o--&&(u=c[o],!n.relative[l=u.type]);)if((h=n.find[l])&&(i=h(u.matches[0].replace(te,re),ee.test(c[0].type)&&ve(t.parentNode)||t))){if(c.splice(o,1),!(e=i.length&&Ee(c)))return D.apply(r,i),r;break}}return(f||a(e,d))(i,t,!m,r,!t||ee.test(e)&&ve(t.parentNode)||t),r},r.sortStable=b.split("").sort(O).join("")===b,r.detectDuplicates=!!h,f(),r.sortDetached=le((function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))})),le((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||he("type|href|height|width",(function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),r.attributes&&le((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||he("value",(function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),le((function(e){return null==e.getAttribute("disabled")}))||he(P,(function(e,t,r){var n;if(!r)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null})),ae}(n);T.find=S,T.expr=S.selectors,T.expr[":"]=T.expr.pseudos,T.uniqueSort=T.unique=S.uniqueSort,T.text=S.getText,T.isXMLDoc=S.isXML,T.contains=S.contains,T.escapeSelector=S.escape;var x=function(e,t,r){for(var n=[],i=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&T(e).is(r))break;n.push(e)}return n},O=function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r},R=T.expr.match.needsContext;function k(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function C(e,t,r){return v(t)?T.grep(e,(function(e,n){return!!t.call(e,n,e)!==r})):t.nodeType?T.grep(e,(function(e){return e===t!==r})):"string"!=typeof t?T.grep(e,(function(e){return l.call(t,e)>-1!==r})):T.filter(t,e,r)}T.filter=function(e,t,r){var n=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?T.find.matchesSelector(n,e)?[n]:[]:T.find.matches(e,T.grep(t,(function(e){return 1===e.nodeType})))},T.fn.extend({find:function(e){var t,r,n=this.length,i=this;if("string"!=typeof e)return this.pushStack(T(e).filter((function(){for(t=0;t<n;t++)if(T.contains(i[t],this))return!0})));for(r=this.pushStack([]),t=0;t<n;t++)T.find(e,i[t],r);return n>1?T.uniqueSort(r):r},filter:function(e){return this.pushStack(C(this,e||[],!1))},not:function(e){return this.pushStack(C(this,e||[],!0))},is:function(e){return!!C(this,"string"==typeof e&&R.test(e)?T(e):e||[],!1).length}});var D,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(e,t,r){var n,i;if(!e)return this;if(r=r||D,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:L.exec(e))||!n[1]&&t)return!t||t.jquery?(t||r).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof T?t[0]:t,T.merge(this,T.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(n[1])&&T.isPlainObject(t))for(n in t)v(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(i=E.getElementById(n[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==r.ready?r.ready(e):e(T):T.makeArray(e,this)}).prototype=T.fn,D=T(E);var B=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function U(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}T.fn.extend({has:function(e){var t=T(e,this),r=t.length;return this.filter((function(){for(var e=0;e<r;e++)if(T.contains(this,t[e]))return!0}))},closest:function(e,t){var r,n=0,i=this.length,o=[],s="string"!=typeof e&&T(e);if(!R.test(e))for(;n<i;n++)for(r=this[n];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(s?s.index(r)>-1:1===r.nodeType&&T.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?T.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?l.call(T(e),this[0]):l.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),T.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x(e,"parentNode")},parentsUntil:function(e,t,r){return x(e,"parentNode",r)},next:function(e){return U(e,"nextSibling")},prev:function(e){return U(e,"previousSibling")},nextAll:function(e){return x(e,"nextSibling")},prevAll:function(e){return x(e,"previousSibling")},nextUntil:function(e,t,r){return x(e,"nextSibling",r)},prevUntil:function(e,t,r){return x(e,"previousSibling",r)},siblings:function(e){return O((e.parentNode||{}).firstChild,e)},children:function(e){return O(e.firstChild)},contents:function(e){return null!=e.contentDocument&&s(e.contentDocument)?e.contentDocument:(k(e,"template")&&(e=e.content||e),T.merge([],e.childNodes))}},(function(e,t){T.fn[e]=function(r,n){var i=T.map(this,t,r);return"Until"!==e.slice(-5)&&(n=r),n&&"string"==typeof n&&(i=T.filter(n,i)),this.length>1&&(P[e]||T.uniqueSort(i),B.test(e)&&i.reverse()),this.pushStack(i)}}));var M=/[^\x20\t\r\n\f]+/g;function j(e){return e}function F(e){throw e}function V(e,t,r,n){var i;try{e&&v(i=e.promise)?i.call(e).done(t).fail(r):e&&v(i=e.then)?i.call(e,t,r):t.apply(void 0,[e].slice(n))}catch(e){r.apply(void 0,[e])}}T.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return T.each(e.match(M)||[],(function(e,r){t[r]=!0})),t}(e):T.extend({},e);var t,r,n,i,o=[],s=[],a=-1,c=function(){for(i=i||e.once,n=t=!0;s.length;a=-1)for(r=s.shift();++a<o.length;)!1===o[a].apply(r[0],r[1])&&e.stopOnFalse&&(a=o.length,r=!1);e.memory||(r=!1),t=!1,i&&(o=r?[]:"")},u={add:function(){return o&&(r&&!t&&(a=o.length-1,s.push(r)),function t(r){T.each(r,(function(r,n){v(n)?e.unique&&u.has(n)||o.push(n):n&&n.length&&"string"!==_(n)&&t(n)}))}(arguments),r&&!t&&c()),this},remove:function(){return T.each(arguments,(function(e,t){for(var r;(r=T.inArray(t,o,r))>-1;)o.splice(r,1),r<=a&&a--})),this},has:function(e){return e?T.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=r="",this},disabled:function(){return!o},lock:function(){return i=s=[],r||t||(o=r=""),this},locked:function(){return!!i},fireWith:function(e,r){return i||(r=[e,(r=r||[]).slice?r.slice():r],s.push(r),t||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},T.extend({Deferred:function(e){var t=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return T.Deferred((function(r){T.each(t,(function(t,n){var i=v(e[n[4]])&&e[n[4]];o[n[1]]((function(){var e=i&&i.apply(this,arguments);e&&v(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[n[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(e,r,i){var o=0;function s(e,t,r,i){return function(){var a=this,c=arguments,u=function(){var n,u;if(!(e<o)){if((n=r.apply(a,c))===t.promise())throw new TypeError("Thenable self-resolution");u=n&&("object"==typeof n||"function"==typeof n)&&n.then,v(u)?i?u.call(n,s(o,t,j,i),s(o,t,F,i)):(o++,u.call(n,s(o,t,j,i),s(o,t,F,i),s(o,t,j,t.notifyWith))):(r!==j&&(a=void 0,c=[n]),(i||t.resolveWith)(a,c))}},l=i?u:function(){try{u()}catch(n){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(n,l.stackTrace),e+1>=o&&(r!==F&&(a=void 0,c=[n]),t.rejectWith(a,c))}};e?l():(T.Deferred.getStackHook&&(l.stackTrace=T.Deferred.getStackHook()),n.setTimeout(l))}}return T.Deferred((function(n){t[0][3].add(s(0,n,v(i)?i:j,n.notifyWith)),t[1][3].add(s(0,n,v(e)?e:j)),t[2][3].add(s(0,n,v(r)?r:F))})).promise()},promise:function(e){return null!=e?T.extend(e,i):i}},o={};return T.each(t,(function(e,n){var s=n[2],a=n[5];i[n[1]]=s.add,a&&s.add((function(){r=a}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),s.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=s.fireWith})),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,r=t,n=Array(r),i=a.call(arguments),o=T.Deferred(),s=function(e){return function(r){n[e]=this,i[e]=arguments.length>1?a.call(arguments):r,--t||o.resolveWith(n,i)}};if(t<=1&&(V(e,o.done(s(r)).resolve,o.reject,!t),"pending"===o.state()||v(i[r]&&i[r].then)))return o.then();for(;r--;)V(i[r],s(r),o.reject);return o.promise()}});var $=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&$.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},T.readyException=function(e){n.setTimeout((function(){throw e}))};var z=T.Deferred();function G(){E.removeEventListener("DOMContentLoaded",G),n.removeEventListener("load",G),T.ready()}T.fn.ready=function(e){return z.then(e).catch((function(e){T.readyException(e)})),this},T.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--T.readyWait:T.isReady)||(T.isReady=!0,!0!==e&&--T.readyWait>0||z.resolveWith(E,[T]))}}),T.ready.then=z.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?n.setTimeout(T.ready):(E.addEventListener("DOMContentLoaded",G),n.addEventListener("load",G));var q=function(e,t,r,n,i,o,s){var a=0,c=e.length,u=null==r;if("object"===_(r))for(a in i=!0,r)q(e,t,a,r[a],!0,o,s);else if(void 0!==n&&(i=!0,v(n)||(s=!0),u&&(s?(t.call(e,n),t=null):(u=t,t=function(e,t,r){return u.call(T(e),r)})),t))for(;a<c;a++)t(e[a],r,s?n:n.call(e[a],a,t(e[a],r)));return i?e:u?t.call(e):c?t(e[0],r):o},H=/^-ms-/,W=/-([a-z])/g;function K(e,t){return t.toUpperCase()}function J(e){return e.replace(H,"ms-").replace(W,K)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function X(){this.expando=T.expando+X.uid++}X.uid=1,X.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var n,i=this.cache(e);if("string"==typeof t)i[J(t)]=r;else for(n in t)i[J(n)]=t[n];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][J(t)]},access:function(e,t,r){return void 0===t||t&&"string"==typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,n=e[this.expando];if(void 0!==n){if(void 0!==t){r=(t=Array.isArray(t)?t.map(J):(t=J(t))in n?[t]:t.match(M)||[]).length;for(;r--;)delete n[t[r]]}(void 0===t||T.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!T.isEmptyObject(t)}};var Z=new X,Q=new X,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function re(e,t,r){var n;if(void 0===r&&1===e.nodeType)if(n="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(n))){try{r=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(r)}catch(e){}Q.set(e,t,r)}else r=void 0;return r}T.extend({hasData:function(e){return Q.hasData(e)||Z.hasData(e)},data:function(e,t,r){return Q.access(e,t,r)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,r){return Z.access(e,t,r)},_removeData:function(e,t){Z.remove(e,t)}}),T.fn.extend({data:function(e,t){var r,n,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Z.get(o,"hasDataAttrs"))){for(r=s.length;r--;)s[r]&&0===(n=s[r].name).indexOf("data-")&&(n=J(n.slice(5)),re(o,n,i[n]));Z.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each((function(){Q.set(this,e)})):q(this,(function(t){var r;if(o&&void 0===t)return void 0!==(r=Q.get(o,e))||void 0!==(r=re(o,e))?r:void 0;this.each((function(){Q.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){Q.remove(this,e)}))}}),T.extend({queue:function(e,t,r){var n;if(e)return t=(t||"fx")+"queue",n=Z.get(e,t),r&&(!n||Array.isArray(r)?n=Z.access(e,t,T.makeArray(r)):n.push(r)),n||[]},dequeue:function(e,t){t=t||"fx";var r=T.queue(e,t),n=r.length,i=r.shift(),o=T._queueHooks(e,t);"inprogress"===i&&(i=r.shift(),n--),i&&("fx"===t&&r.unshift("inprogress"),delete o.stop,i.call(e,(function(){T.dequeue(e,t)}),o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return Z.get(e,r)||Z.access(e,r,{empty:T.Callbacks("once memory").add((function(){Z.remove(e,[t+"queue",r])}))})}}),T.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?T.queue(this[0],e):void 0===t?this:this.each((function(){var r=T.queue(this,e,t);T._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&T.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){T.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,n=1,i=T.Deferred(),o=this,s=this.length,a=function(){--n||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(r=Z.get(o[s],e+"queueHooks"))&&r.empty&&(n++,r.empty.add(a));return a(),i.promise(t)}});var ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+ne+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],se=E.documentElement,ae=function(e){return T.contains(e.ownerDocument,e)},ce={composed:!0};se.getRootNode&&(ae=function(e){return T.contains(e.ownerDocument,e)||e.getRootNode(ce)===e.ownerDocument});var ue=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ae(e)&&"none"===T.css(e,"display")};function le(e,t,r,n){var i,o,s=20,a=n?function(){return n.cur()}:function(){return T.css(e,t,"")},c=a(),u=r&&r[3]||(T.cssNumber[t]?"":"px"),l=e.nodeType&&(T.cssNumber[t]||"px"!==u&&+c)&&ie.exec(T.css(e,t));if(l&&l[3]!==u){for(c/=2,u=u||l[3],l=+c||1;s--;)T.style(e,t,l+u),(1-o)*(1-(o=a()/c||.5))<=0&&(s=0),l/=o;l*=2,T.style(e,t,l+u),r=r||[]}return r&&(l=+l||+c||0,i=r[1]?l+(r[1]+1)*r[2]:+r[2],n&&(n.unit=u,n.start=l,n.end=i)),i}var he={};function fe(e){var t,r=e.ownerDocument,n=e.nodeName,i=he[n];return i||(t=r.body.appendChild(r.createElement(n)),i=T.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),he[n]=i,i)}function de(e,t){for(var r,n,i=[],o=0,s=e.length;o<s;o++)(n=e[o]).style&&(r=n.style.display,t?("none"===r&&(i[o]=Z.get(n,"display")||null,i[o]||(n.style.display="")),""===n.style.display&&ue(n)&&(i[o]=fe(n))):"none"!==r&&(i[o]="none",Z.set(n,"display",r)));for(o=0;o<s;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}T.fn.extend({show:function(){return de(this,!0)},hide:function(){return de(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ue(this)?T(this).show():T(this).hide()}))}});var pe,me,ge=/^(?:checkbox|radio)$/i,ve=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ye=/^$|^module$|\/(?:java|ecma)script/i;pe=E.createDocumentFragment().appendChild(E.createElement("div")),(me=E.createElement("input")).setAttribute("type","radio"),me.setAttribute("checked","checked"),me.setAttribute("name","t"),pe.appendChild(me),g.checkClone=pe.cloneNode(!0).cloneNode(!0).lastChild.checked,pe.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!pe.cloneNode(!0).lastChild.defaultValue,pe.innerHTML="<option></option>",g.option=!!pe.lastChild;var Ee={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function be(e,t){var r;return r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&k(e,t)?T.merge([e],r):r}function we(e,t){for(var r=0,n=e.length;r<n;r++)Z.set(e[r],"globalEval",!t||Z.get(t[r],"globalEval"))}Ee.tbody=Ee.tfoot=Ee.colgroup=Ee.caption=Ee.thead,Ee.th=Ee.td,g.option||(Ee.optgroup=Ee.option=[1,"<select multiple='multiple'>","</select>"]);var _e=/<|&#?\w+;/;function Ae(e,t,r,n,i){for(var o,s,a,c,u,l,h=t.createDocumentFragment(),f=[],d=0,p=e.length;d<p;d++)if((o=e[d])||0===o)if("object"===_(o))T.merge(f,o.nodeType?[o]:o);else if(_e.test(o)){for(s=s||h.appendChild(t.createElement("div")),a=(ve.exec(o)||["",""])[1].toLowerCase(),c=Ee[a]||Ee._default,s.innerHTML=c[1]+T.htmlPrefilter(o)+c[2],l=c[0];l--;)s=s.lastChild;T.merge(f,s.childNodes),(s=h.firstChild).textContent=""}else f.push(t.createTextNode(o));for(h.textContent="",d=0;o=f[d++];)if(n&&T.inArray(o,n)>-1)i&&i.push(o);else if(u=ae(o),s=be(h.appendChild(o),"script"),u&&we(s),r)for(l=0;o=s[l++];)ye.test(o.type||"")&&r.push(o);return h}var Te=/^([^.]*)(?:\.(.+)|)/;function Ie(){return!0}function Se(){return!1}function xe(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Oe(e,t,r,n,i,o){var s,a;if("object"==typeof t){for(a in"string"!=typeof r&&(n=n||r,r=void 0),t)Oe(e,a,r,n,t[a],o);return e}if(null==n&&null==i?(i=r,n=r=void 0):null==i&&("string"==typeof r?(i=n,n=void 0):(i=n,n=r,r=void 0)),!1===i)i=Se;else if(!i)return e;return 1===o&&(s=i,i=function(e){return T().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=T.guid++)),e.each((function(){T.event.add(this,t,i,n,r)}))}function Re(e,t,r){r?(Z.set(e,t,!1),T.event.add(e,t,{namespace:!1,handler:function(e){var n,i,o=Z.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(T.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=a.call(arguments),Z.set(this,t,o),n=r(this,t),this[t](),o!==(i=Z.get(this,t))||n?Z.set(this,t,!1):i={},o!==i)return e.stopImmediatePropagation(),e.preventDefault(),i&&i.value}else o.length&&(Z.set(this,t,{value:T.event.trigger(T.extend(o[0],T.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Z.get(e,t)&&T.event.add(e,t,Ie)}T.event={global:{},add:function(e,t,r,n,i){var o,s,a,c,u,l,h,f,d,p,m,g=Z.get(e);if(Y(e))for(r.handler&&(r=(o=r).handler,i=o.selector),i&&T.find.matchesSelector(se,i),r.guid||(r.guid=T.guid++),(c=g.events)||(c=g.events=Object.create(null)),(s=g.handle)||(s=g.handle=function(t){return void 0!==T&&T.event.triggered!==t.type?T.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(M)||[""]).length;u--;)d=m=(a=Te.exec(t[u])||[])[1],p=(a[2]||"").split(".").sort(),d&&(h=T.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,h=T.event.special[d]||{},l=T.extend({type:d,origType:m,data:n,handler:r,guid:r.guid,selector:i,needsContext:i&&T.expr.match.needsContext.test(i),namespace:p.join(".")},o),(f=c[d])||((f=c[d]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,n,p,s)||e.addEventListener&&e.addEventListener(d,s)),h.add&&(h.add.call(e,l),l.handler.guid||(l.handler.guid=r.guid)),i?f.splice(f.delegateCount++,0,l):f.push(l),T.event.global[d]=!0)},remove:function(e,t,r,n,i){var o,s,a,c,u,l,h,f,d,p,m,g=Z.hasData(e)&&Z.get(e);if(g&&(c=g.events)){for(u=(t=(t||"").match(M)||[""]).length;u--;)if(d=m=(a=Te.exec(t[u])||[])[1],p=(a[2]||"").split(".").sort(),d){for(h=T.event.special[d]||{},f=c[d=(n?h.delegateType:h.bindType)||d]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)l=f[o],!i&&m!==l.origType||r&&r.guid!==l.guid||a&&!a.test(l.namespace)||n&&n!==l.selector&&("**"!==n||!l.selector)||(f.splice(o,1),l.selector&&f.delegateCount--,h.remove&&h.remove.call(e,l));s&&!f.length&&(h.teardown&&!1!==h.teardown.call(e,p,g.handle)||T.removeEvent(e,d,g.handle),delete c[d])}else for(d in c)T.event.remove(e,d+t[u],r,n,!0);T.isEmptyObject(c)&&Z.remove(e,"handle events")}},dispatch:function(e){var t,r,n,i,o,s,a=new Array(arguments.length),c=T.event.fix(e),u=(Z.get(this,"events")||Object.create(null))[c.type]||[],l=T.event.special[c.type]||{};for(a[0]=c,t=1;t<arguments.length;t++)a[t]=arguments[t];if(c.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,c)){for(s=T.event.handlers.call(this,c,u),t=0;(i=s[t++])&&!c.isPropagationStopped();)for(c.currentTarget=i.elem,r=0;(o=i.handlers[r++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==o.namespace&&!c.rnamespace.test(o.namespace)||(c.handleObj=o,c.data=o.data,void 0!==(n=((T.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a))&&!1===(c.result=n)&&(c.preventDefault(),c.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,c),c.result}},handlers:function(e,t){var r,n,i,o,s,a=[],c=t.delegateCount,u=e.target;if(c&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(o=[],s={},r=0;r<c;r++)void 0===s[i=(n=t[r]).selector+" "]&&(s[i]=n.needsContext?T(i,this).index(u)>-1:T.find(i,this,null,[u]).length),s[i]&&o.push(n);o.length&&a.push({elem:u,handlers:o})}return u=this,c<t.length&&a.push({elem:u,handlers:t.slice(c)}),a},addProp:function(e,t){Object.defineProperty(T.Event.prototype,e,{enumerable:!0,configurable:!0,get:v(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[T.expando]?e:new T.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ge.test(t.type)&&t.click&&k(t,"input")&&Re(t,"click",Ie),!1},trigger:function(e){var t=this||e;return ge.test(t.type)&&t.click&&k(t,"input")&&Re(t,"click"),!0},_default:function(e){var t=e.target;return ge.test(t.type)&&t.click&&k(t,"input")&&Z.get(t,"click")||k(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},T.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},T.Event=function(e,t){if(!(this instanceof T.Event))return new T.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ie:Se,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&T.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:Se,isPropagationStopped:Se,isImmediatePropagationStopped:Se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ie,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ie,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ie,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},T.event.addProp),T.each({focus:"focusin",blur:"focusout"},(function(e,t){T.event.special[e]={setup:function(){return Re(this,e,xe),!1},trigger:function(){return Re(this,e),!0},_default:function(){return!0},delegateType:t}})),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){T.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,n=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===n||T.contains(n,i))||(e.type=o.origType,r=o.handler.apply(this,arguments),e.type=t),r}}})),T.fn.extend({on:function(e,t,r,n){return Oe(this,e,t,r,n)},one:function(e,t,r,n){return Oe(this,e,t,r,n,1)},off:function(e,t,r){var n,i;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,T(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=Se),this.each((function(){T.event.remove(this,e,r,t)}))}});var ke=/<script|<style|<link/i,Ne=/checked\s*(?:[^=]|=\s*.checked.)/i,Ce=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function De(e,t){return k(e,"table")&&k(11!==t.nodeType?t:t.firstChild,"tr")&&T(e).children("tbody")[0]||e}function Le(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Be(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Pe(e,t){var r,n,i,o,s,a;if(1===t.nodeType){if(Z.hasData(e)&&(a=Z.get(e).events))for(i in Z.remove(t,"handle events"),a)for(r=0,n=a[i].length;r<n;r++)T.event.add(t,i,a[i][r]);Q.hasData(e)&&(o=Q.access(e),s=T.extend({},o),Q.set(t,s))}}function Ue(e,t){var r=t.nodeName.toLowerCase();"input"===r&&ge.test(e.type)?t.checked=e.checked:"input"!==r&&"textarea"!==r||(t.defaultValue=e.defaultValue)}function Me(e,t,r,n){t=c(t);var i,o,s,a,u,l,h=0,f=e.length,d=f-1,p=t[0],m=v(p);if(m||f>1&&"string"==typeof p&&!g.checkClone&&Ne.test(p))return e.each((function(i){var o=e.eq(i);m&&(t[0]=p.call(this,i,o.html())),Me(o,t,r,n)}));if(f&&(o=(i=Ae(t,e[0].ownerDocument,!1,e,n)).firstChild,1===i.childNodes.length&&(i=o),o||n)){for(a=(s=T.map(be(i,"script"),Le)).length;h<f;h++)u=i,h!==d&&(u=T.clone(u,!0,!0),a&&T.merge(s,be(u,"script"))),r.call(e[h],u,h);if(a)for(l=s[s.length-1].ownerDocument,T.map(s,Be),h=0;h<a;h++)u=s[h],ye.test(u.type||"")&&!Z.access(u,"globalEval")&&T.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?T._evalUrl&&!u.noModule&&T._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):w(u.textContent.replace(Ce,""),u,l))}return e}function je(e,t,r){for(var n,i=t?T.filter(t,e):e,o=0;null!=(n=i[o]);o++)r||1!==n.nodeType||T.cleanData(be(n)),n.parentNode&&(r&&ae(n)&&we(be(n,"script")),n.parentNode.removeChild(n));return e}T.extend({htmlPrefilter:function(e){return e},clone:function(e,t,r){var n,i,o,s,a=e.cloneNode(!0),c=ae(e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||T.isXMLDoc(e)))for(s=be(a),n=0,i=(o=be(e)).length;n<i;n++)Ue(o[n],s[n]);if(t)if(r)for(o=o||be(e),s=s||be(a),n=0,i=o.length;n<i;n++)Pe(o[n],s[n]);else Pe(e,a);return(s=be(a,"script")).length>0&&we(s,!c&&be(e,"script")),a},cleanData:function(e){for(var t,r,n,i=T.event.special,o=0;void 0!==(r=e[o]);o++)if(Y(r)){if(t=r[Z.expando]){if(t.events)for(n in t.events)i[n]?T.event.remove(r,n):T.removeEvent(r,n,t.handle);r[Z.expando]=void 0}r[Q.expando]&&(r[Q.expando]=void 0)}}}),T.fn.extend({detach:function(e){return je(this,e,!0)},remove:function(e){return je(this,e)},text:function(e){return q(this,(function(e){return void 0===e?T.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Me(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||De(this,e).appendChild(e)}))},prepend:function(){return Me(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=De(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Me(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Me(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(T.cleanData(be(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return T.clone(this,e,t)}))},html:function(e){return q(this,(function(e){var t=this[0]||{},r=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ke.test(e)&&!Ee[(ve.exec(e)||["",""])[1].toLowerCase()]){e=T.htmlPrefilter(e);try{for(;r<n;r++)1===(t=this[r]||{}).nodeType&&(T.cleanData(be(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Me(this,arguments,(function(t){var r=this.parentNode;T.inArray(this,e)<0&&(T.cleanData(be(this)),r&&r.replaceChild(t,this))}),e)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){T.fn[e]=function(e){for(var r,n=[],i=T(e),o=i.length-1,s=0;s<=o;s++)r=s===o?this:this.clone(!0),T(i[s])[t](r),u.apply(n,r.get());return this.pushStack(n)}}));var Fe=new RegExp("^("+ne+")(?!px)[a-z%]+$","i"),Ve=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},$e=function(e,t,r){var n,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in n=r.call(e),t)e.style[i]=o[i];return n},ze=new RegExp(oe.join("|"),"i");function Ge(e,t,r){var n,i,o,s,a=e.style;return(r=r||Ve(e))&&(""!==(s=r.getPropertyValue(t)||r[t])||ae(e)||(s=T.style(e,t)),!g.pixelBoxStyles()&&Fe.test(s)&&ze.test(t)&&(n=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=r.width,a.width=n,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function qe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",se.appendChild(u).appendChild(l);var e=n.getComputedStyle(l);r="1%"!==e.top,c=12===t(e.marginLeft),l.style.right="60%",s=36===t(e.right),i=36===t(e.width),l.style.position="absolute",o=12===t(l.offsetWidth/3),se.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var r,i,o,s,a,c,u=E.createElement("div"),l=E.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===l.style.backgroundClip,T.extend(g,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),c},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,t,r,i;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),r=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",r.style.height="9px",r.style.display="block",se.appendChild(e).appendChild(t).appendChild(r),i=n.getComputedStyle(t),a=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===t.offsetHeight,se.removeChild(e)),a}}))}();var He=["Webkit","Moz","ms"],We=E.createElement("div").style,Ke={};function Je(e){var t=T.cssProps[e]||Ke[e];return t||(e in We?e:Ke[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),r=He.length;r--;)if((e=He[r]+t)in We)return e}(e)||e)}var Ye=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ze={position:"absolute",visibility:"hidden",display:"block"},Qe={letterSpacing:"0",fontWeight:"400"};function et(e,t,r){var n=ie.exec(t);return n?Math.max(0,n[2]-(r||0))+(n[3]||"px"):t}function tt(e,t,r,n,i,o){var s="width"===t?1:0,a=0,c=0;if(r===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===r&&(c+=T.css(e,r+oe[s],!0,i)),n?("content"===r&&(c-=T.css(e,"padding"+oe[s],!0,i)),"margin"!==r&&(c-=T.css(e,"border"+oe[s]+"Width",!0,i))):(c+=T.css(e,"padding"+oe[s],!0,i),"padding"!==r?c+=T.css(e,"border"+oe[s]+"Width",!0,i):a+=T.css(e,"border"+oe[s]+"Width",!0,i));return!n&&o>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-c-a-.5))||0),c}function rt(e,t,r){var n=Ve(e),i=(!g.boxSizingReliable()||r)&&"border-box"===T.css(e,"boxSizing",!1,n),o=i,s=Ge(e,t,n),a="offset"+t[0].toUpperCase()+t.slice(1);if(Fe.test(s)){if(!r)return s;s="auto"}return(!g.boxSizingReliable()&&i||!g.reliableTrDimensions()&&k(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===T.css(e,"display",!1,n))&&e.getClientRects().length&&(i="border-box"===T.css(e,"boxSizing",!1,n),(o=a in e)&&(s=e[a])),(s=parseFloat(s)||0)+tt(e,t,r||(i?"border":"content"),o,n,s)+"px"}function nt(e,t,r,n,i){return new nt.prototype.init(e,t,r,n,i)}T.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=Ge(e,"opacity");return""===r?"1":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,r,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=J(t),c=Xe.test(t),u=e.style;if(c||(t=Je(a)),s=T.cssHooks[t]||T.cssHooks[a],void 0===r)return s&&"get"in s&&void 0!==(i=s.get(e,!1,n))?i:u[t];"string"===(o=typeof r)&&(i=ie.exec(r))&&i[1]&&(r=le(e,t,i),o="number"),null!=r&&r==r&&("number"!==o||c||(r+=i&&i[3]||(T.cssNumber[a]?"":"px")),g.clearCloneStyle||""!==r||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(r=s.set(e,r,n))||(c?u.setProperty(t,r):u[t]=r))}},css:function(e,t,r,n){var i,o,s,a=J(t);return Xe.test(t)||(t=Je(a)),(s=T.cssHooks[t]||T.cssHooks[a])&&"get"in s&&(i=s.get(e,!0,r)),void 0===i&&(i=Ge(e,t,n)),"normal"===i&&t in Qe&&(i=Qe[t]),""===r||r?(o=parseFloat(i),!0===r||isFinite(o)?o||0:i):i}}),T.each(["height","width"],(function(e,t){T.cssHooks[t]={get:function(e,r,n){if(r)return!Ye.test(T.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?rt(e,t,n):$e(e,Ze,(function(){return rt(e,t,n)}))},set:function(e,r,n){var i,o=Ve(e),s=!g.scrollboxSize()&&"absolute"===o.position,a=(s||n)&&"border-box"===T.css(e,"boxSizing",!1,o),c=n?tt(e,t,n,a,o):0;return a&&s&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-tt(e,t,"border",!1,o)-.5)),c&&(i=ie.exec(r))&&"px"!==(i[3]||"px")&&(e.style[t]=r,r=T.css(e,t)),et(0,r,c)}}})),T.cssHooks.marginLeft=qe(g.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ge(e,"marginLeft"))||e.getBoundingClientRect().left-$e(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),T.each({margin:"",padding:"",border:"Width"},(function(e,t){T.cssHooks[e+t]={expand:function(r){for(var n=0,i={},o="string"==typeof r?r.split(" "):[r];n<4;n++)i[e+oe[n]+t]=o[n]||o[n-2]||o[0];return i}},"margin"!==e&&(T.cssHooks[e+t].set=et)})),T.fn.extend({css:function(e,t){return q(this,(function(e,t,r){var n,i,o={},s=0;if(Array.isArray(t)){for(n=Ve(e),i=t.length;s<i;s++)o[t[s]]=T.css(e,t[s],!1,n);return o}return void 0!==r?T.style(e,t,r):T.css(e,t)}),e,t,arguments.length>1)}}),T.Tween=nt,nt.prototype={constructor:nt,init:function(e,t,r,n,i,o){this.elem=e,this.prop=r,this.easing=i||T.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(T.cssNumber[r]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,r=nt.propHooks[this.prop];return this.options.duration?this.pos=t=T.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):nt.propHooks._default.set(this),this}},nt.prototype.init.prototype=nt.prototype,nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=T.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){T.fx.step[e.prop]?T.fx.step[e.prop](e):1!==e.elem.nodeType||!T.cssHooks[e.prop]&&null==e.elem.style[Je(e.prop)]?e.elem[e.prop]=e.now:T.style(e.elem,e.prop,e.now+e.unit)}}},nt.propHooks.scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},T.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},T.fx=nt.prototype.init,T.fx.step={};var it,ot,st=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function ct(){ot&&(!1===E.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(ct):n.setTimeout(ct,T.fx.interval),T.fx.tick())}function ut(){return n.setTimeout((function(){it=void 0})),it=Date.now()}function lt(e,t){var r,n=0,i={height:e};for(t=t?1:0;n<4;n+=2-t)i["margin"+(r=oe[n])]=i["padding"+r]=e;return t&&(i.opacity=i.width=e),i}function ht(e,t,r){for(var n,i=(ft.tweeners[t]||[]).concat(ft.tweeners["*"]),o=0,s=i.length;o<s;o++)if(n=i[o].call(r,t,e))return n}function ft(e,t,r){var n,i,o=0,s=ft.prefilters.length,a=T.Deferred().always((function(){delete c.elem})),c=function(){if(i)return!1;for(var t=it||ut(),r=Math.max(0,u.startTime+u.duration-t),n=1-(r/u.duration||0),o=0,s=u.tweens.length;o<s;o++)u.tweens[o].run(n);return a.notifyWith(e,[u,n,r]),n<1&&s?r:(s||a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:T.extend({},t),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},r),originalProperties:t,originalOptions:r,startTime:it||ut(),duration:r.duration,tweens:[],createTween:function(t,r){var n=T.Tween(e,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var r=0,n=t?u.tweens.length:0;if(i)return this;for(i=!0;r<n;r++)u.tweens[r].run(1);return t?(a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u,t])):a.rejectWith(e,[u,t]),this}}),l=u.props;for(!function(e,t){var r,n,i,o,s;for(r in e)if(i=t[n=J(r)],o=e[r],Array.isArray(o)&&(i=o[1],o=e[r]=o[0]),r!==n&&(e[n]=o,delete e[r]),(s=T.cssHooks[n])&&"expand"in s)for(r in o=s.expand(o),delete e[n],o)r in e||(e[r]=o[r],t[r]=i);else t[n]=i}(l,u.opts.specialEasing);o<s;o++)if(n=ft.prefilters[o].call(u,e,l,u.opts))return v(n.stop)&&(T._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)),n;return T.map(l,ht,u),v(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),T.fx.timer(T.extend(c,{elem:e,anim:u,queue:u.opts.queue})),u}T.Animation=T.extend(ft,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return le(r.elem,e,ie.exec(t),r),r}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(M);for(var r,n=0,i=e.length;n<i;n++)r=e[n],ft.tweeners[r]=ft.tweeners[r]||[],ft.tweeners[r].unshift(t)},prefilters:[function(e,t,r){var n,i,o,s,a,c,u,l,h="width"in t||"height"in t,f=this,d={},p=e.style,m=e.nodeType&&ue(e),g=Z.get(e,"fxshow");for(n in r.queue||(null==(s=T._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,f.always((function(){f.always((function(){s.unqueued--,T.queue(e,"fx").length||s.empty.fire()}))}))),t)if(i=t[n],st.test(i)){if(delete t[n],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[n])continue;m=!0}d[n]=g&&g[n]||T.style(e,n)}if((c=!T.isEmptyObject(t))||!T.isEmptyObject(d))for(n in h&&1===e.nodeType&&(r.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=g&&g.display)&&(u=Z.get(e,"display")),"none"===(l=T.css(e,"display"))&&(u?l=u:(de([e],!0),u=e.style.display||u,l=T.css(e,"display"),de([e]))),("inline"===l||"inline-block"===l&&null!=u)&&"none"===T.css(e,"float")&&(c||(f.done((function(){p.display=u})),null==u&&(l=p.display,u="none"===l?"":l)),p.display="inline-block")),r.overflow&&(p.overflow="hidden",f.always((function(){p.overflow=r.overflow[0],p.overflowX=r.overflow[1],p.overflowY=r.overflow[2]}))),c=!1,d)c||(g?"hidden"in g&&(m=g.hidden):g=Z.access(e,"fxshow",{display:u}),o&&(g.hidden=!m),m&&de([e],!0),f.done((function(){for(n in m||de([e]),Z.remove(e,"fxshow"),d)T.style(e,n,d[n])}))),c=ht(m?g[n]:0,n,f),n in g||(g[n]=c.start,m&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),T.speed=function(e,t,r){var n=e&&"object"==typeof e?T.extend({},e):{complete:r||!r&&t||v(e)&&e,duration:e,easing:r&&t||t&&!v(t)&&t};return T.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in T.fx.speeds?n.duration=T.fx.speeds[n.duration]:n.duration=T.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){v(n.old)&&n.old.call(this),n.queue&&T.dequeue(this,n.queue)},n},T.fn.extend({fadeTo:function(e,t,r,n){return this.filter(ue).css("opacity",0).show().end().animate({opacity:t},e,r,n)},animate:function(e,t,r,n){var i=T.isEmptyObject(e),o=T.speed(t,r,n),s=function(){var t=ft(this,T.extend({},e),o);(i||Z.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(e,t,r){var n=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",o=T.timers,s=Z.get(this);if(i)s[i]&&s[i].stop&&n(s[i]);else for(i in s)s[i]&&s[i].stop&&at.test(i)&&n(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(r),t=!1,o.splice(i,1));!t&&r||T.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,r=Z.get(this),n=r[e+"queue"],i=r[e+"queueHooks"],o=T.timers,s=n?n.length:0;for(r.finish=!0,T.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete r.finish}))}}),T.each(["toggle","show","hide"],(function(e,t){var r=T.fn[t];T.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(lt(t,!0),e,n,i)}})),T.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){T.fn[e]=function(e,r,n){return this.animate(t,e,r,n)}})),T.timers=[],T.fx.tick=function(){var e,t=0,r=T.timers;for(it=Date.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||T.fx.stop(),it=void 0},T.fx.timer=function(e){T.timers.push(e),T.fx.start()},T.fx.interval=13,T.fx.start=function(){ot||(ot=!0,ct())},T.fx.stop=function(){ot=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(e,t){return e=T.fx&&T.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,r){var i=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(i)}}))},function(){var e=E.createElement("input"),t=E.createElement("select").appendChild(E.createElement("option"));e.type="checkbox",g.checkOn=""!==e.value,g.optSelected=t.selected,(e=E.createElement("input")).value="t",e.type="radio",g.radioValue="t"===e.value}();var dt,pt=T.expr.attrHandle;T.fn.extend({attr:function(e,t){return q(this,T.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){T.removeAttr(this,e)}))}}),T.extend({attr:function(e,t,r){var n,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?T.prop(e,t,r):(1===o&&T.isXMLDoc(e)||(i=T.attrHooks[t.toLowerCase()]||(T.expr.match.bool.test(t)?dt:void 0)),void 0!==r?null===r?void T.removeAttr(e,t):i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:(e.setAttribute(t,r+""),r):i&&"get"in i&&null!==(n=i.get(e,t))?n:null==(n=T.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&k(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,n=0,i=t&&t.match(M);if(i&&1===e.nodeType)for(;r=i[n++];)e.removeAttribute(r)}}),dt={set:function(e,t,r){return!1===t?T.removeAttr(e,r):e.setAttribute(r,r),r}},T.each(T.expr.match.bool.source.match(/\w+/g),(function(e,t){var r=pt[t]||T.find.attr;pt[t]=function(e,t,n){var i,o,s=t.toLowerCase();return n||(o=pt[s],pt[s]=i,i=null!=r(e,t,n)?s:null,pt[s]=o),i}}));var mt=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function vt(e){return(e.match(M)||[]).join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function Et(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(M)||[]}T.fn.extend({prop:function(e,t){return q(this,T.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[T.propFix[e]||e]}))}}),T.extend({prop:function(e,t,r){var n,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&T.isXMLDoc(e)||(t=T.propFix[t]||t,i=T.propHooks[t]),void 0!==r?i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:e[t]=r:i&&"get"in i&&null!==(n=i.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=T.find.attr(e,"tabindex");return t?parseInt(t,10):mt.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(T.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){T.propFix[this.toLowerCase()]=this})),T.fn.extend({addClass:function(e){var t,r,n,i,o,s,a,c=0;if(v(e))return this.each((function(t){T(this).addClass(e.call(this,t,yt(this)))}));if((t=Et(e)).length)for(;r=this[c++];)if(i=yt(r),n=1===r.nodeType&&" "+vt(i)+" "){for(s=0;o=t[s++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");i!==(a=vt(n))&&r.setAttribute("class",a)}return this},removeClass:function(e){var t,r,n,i,o,s,a,c=0;if(v(e))return this.each((function(t){T(this).removeClass(e.call(this,t,yt(this)))}));if(!arguments.length)return this.attr("class","");if((t=Et(e)).length)for(;r=this[c++];)if(i=yt(r),n=1===r.nodeType&&" "+vt(i)+" "){for(s=0;o=t[s++];)for(;n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");i!==(a=vt(n))&&r.setAttribute("class",a)}return this},toggleClass:function(e,t){var r=typeof e,n="string"===r||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):v(e)?this.each((function(r){T(this).toggleClass(e.call(this,r,yt(this),t),t)})):this.each((function(){var t,i,o,s;if(n)for(i=0,o=T(this),s=Et(e);t=s[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==r||((t=yt(this))&&Z.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Z.get(this,"__className__")||""))}))},hasClass:function(e){var t,r,n=0;for(t=" "+e+" ";r=this[n++];)if(1===r.nodeType&&(" "+vt(yt(r))+" ").indexOf(t)>-1)return!0;return!1}});var bt=/\r/g;T.fn.extend({val:function(e){var t,r,n,i=this[0];return arguments.length?(n=v(e),this.each((function(r){var i;1===this.nodeType&&(null==(i=n?e.call(this,r,T(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=T.map(i,(function(e){return null==e?"":e+""}))),(t=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=T.valHooks[i.type]||T.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(i,"value"))?r:"string"==typeof(r=i.value)?r.replace(bt,""):null==r?"":r:void 0}}),T.extend({valHooks:{option:{get:function(e){var t=T.find.attr(e,"value");return null!=t?t:vt(T.text(e))}},select:{get:function(e){var t,r,n,i=e.options,o=e.selectedIndex,s="select-one"===e.type,a=s?null:[],c=s?o+1:i.length;for(n=o<0?c:s?o:0;n<c;n++)if(((r=i[n]).selected||n===o)&&!r.disabled&&(!r.parentNode.disabled||!k(r.parentNode,"optgroup"))){if(t=T(r).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var r,n,i=e.options,o=T.makeArray(t),s=i.length;s--;)((n=i[s]).selected=T.inArray(T.valHooks.option.get(n),o)>-1)&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),T.each(["radio","checkbox"],(function(){T.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=T.inArray(T(e).val(),t)>-1}},g.checkOn||(T.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),g.focusin="onfocusin"in n;var wt=/^(?:focusinfocus|focusoutblur)$/,_t=function(e){e.stopPropagation()};T.extend(T.event,{trigger:function(e,t,r,i){var o,s,a,c,u,l,h,f,p=[r||E],m=d.call(e,"type")?e.type:e,g=d.call(e,"namespace")?e.namespace.split("."):[];if(s=f=a=r=r||E,3!==r.nodeType&&8!==r.nodeType&&!wt.test(m+T.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),u=m.indexOf(":")<0&&"on"+m,(e=e[T.expando]?e:new T.Event(m,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:T.makeArray(t,[e]),h=T.event.special[m]||{},i||!h.trigger||!1!==h.trigger.apply(r,t))){if(!i&&!h.noBubble&&!y(r)){for(c=h.delegateType||m,wt.test(c+m)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(r.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||n)}for(o=0;(s=p[o++])&&!e.isPropagationStopped();)f=s,e.type=o>1?c:h.bindType||m,(l=(Z.get(s,"events")||Object.create(null))[e.type]&&Z.get(s,"handle"))&&l.apply(s,t),(l=u&&s[u])&&l.apply&&Y(s)&&(e.result=l.apply(s,t),!1===e.result&&e.preventDefault());return e.type=m,i||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),t)||!Y(r)||u&&v(r[m])&&!y(r)&&((a=r[u])&&(r[u]=null),T.event.triggered=m,e.isPropagationStopped()&&f.addEventListener(m,_t),r[m](),e.isPropagationStopped()&&f.removeEventListener(m,_t),T.event.triggered=void 0,a&&(r[u]=a)),e.result}},simulate:function(e,t,r){var n=T.extend(new T.Event,r,{type:e,isSimulated:!0});T.event.trigger(n,null,t)}}),T.fn.extend({trigger:function(e,t){return this.each((function(){T.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var r=this[0];if(r)return T.event.trigger(e,t,r,!0)}}),g.focusin||T.each({focus:"focusin",blur:"focusout"},(function(e,t){var r=function(e){T.event.simulate(t,e.target,T.event.fix(e))};T.event.special[t]={setup:function(){var n=this.ownerDocument||this.document||this,i=Z.access(n,t);i||n.addEventListener(e,r,!0),Z.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,i=Z.access(n,t)-1;i?Z.access(n,t,i):(n.removeEventListener(e,r,!0),Z.remove(n,t))}}}));var At=n.location,Tt={guid:Date.now()},It=/\?/;T.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){}return r=t&&t.getElementsByTagName("parsererror")[0],t&&!r||T.error("Invalid XML: "+(r?T.map(r.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var St=/\[\]$/,xt=/\r?\n/g,Ot=/^(?:submit|button|image|reset|file)$/i,Rt=/^(?:input|select|textarea|keygen)/i;function kt(e,t,r,n){var i;if(Array.isArray(t))T.each(t,(function(t,i){r||St.test(e)?n(e,i):kt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,r,n)}));else if(r||"object"!==_(t))n(e,t);else for(i in t)kt(e+"["+i+"]",t[i],r,n)}T.param=function(e,t){var r,n=[],i=function(e,t){var r=v(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==r?"":r)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!T.isPlainObject(e))T.each(e,(function(){i(this.name,this.value)}));else for(r in e)kt(r,e[r],t,i);return n.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=T.prop(this,"elements");return e?T.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!T(this).is(":disabled")&&Rt.test(this.nodeName)&&!Ot.test(e)&&(this.checked||!ge.test(e))})).map((function(e,t){var r=T(this).val();return null==r?null:Array.isArray(r)?T.map(r,(function(e){return{name:t.name,value:e.replace(xt,"\r\n")}})):{name:t.name,value:r.replace(xt,"\r\n")}})).get()}});var Nt=/%20/g,Ct=/#.*$/,Dt=/([?&])_=[^&]*/,Lt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Bt=/^(?:GET|HEAD)$/,Pt=/^\/\//,Ut={},Mt={},jt="*/".concat("*"),Ft=E.createElement("a");function Vt(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var n,i=0,o=t.toLowerCase().match(M)||[];if(v(r))for(;n=o[i++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(r)):(e[n]=e[n]||[]).push(r)}}function $t(e,t,r,n){var i={},o=e===Mt;function s(a){var c;return i[a]=!0,T.each(e[a]||[],(function(e,a){var u=a(t,r,n);return"string"!=typeof u||o||i[u]?o?!(c=u):void 0:(t.dataTypes.unshift(u),s(u),!1)})),c}return s(t.dataTypes[0])||!i["*"]&&s("*")}function zt(e,t){var r,n,i=T.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&T.extend(!0,e,n),e}Ft.href=At.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:At.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(At.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":jt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,T.ajaxSettings),t):zt(T.ajaxSettings,e)},ajaxPrefilter:Vt(Ut),ajaxTransport:Vt(Mt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,s,a,c,u,l,h,f,d=T.ajaxSetup({},t),p=d.context||d,m=d.context&&(p.nodeType||p.jquery)?T(p):T.event,g=T.Deferred(),v=T.Callbacks("once memory"),y=d.statusCode||{},b={},w={},_="canceled",A={readyState:0,getResponseHeader:function(e){var t;if(u){if(!s)for(s={};t=Lt.exec(o);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(e,t){return null==u&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==u&&(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)A.always(e[A.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||_;return r&&r.abort(t),I(0,t),this}};if(g.promise(A),d.url=((e||d.url||At.href)+"").replace(Pt,At.protocol+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(M)||[""],null==d.crossDomain){c=E.createElement("a");try{c.href=d.url,c.href=c.href,d.crossDomain=Ft.protocol+"//"+Ft.host!=c.protocol+"//"+c.host}catch(e){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=T.param(d.data,d.traditional)),$t(Ut,d,t,A),u)return A;for(h in(l=T.event&&d.global)&&0==T.active++&&T.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Bt.test(d.type),i=d.url.replace(Ct,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Nt,"+")):(f=d.url.slice(i.length),d.data&&(d.processData||"string"==typeof d.data)&&(i+=(It.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(i=i.replace(Dt,"$1"),f=(It.test(i)?"&":"?")+"_="+Tt.guid+++f),d.url=i+f),d.ifModified&&(T.lastModified[i]&&A.setRequestHeader("If-Modified-Since",T.lastModified[i]),T.etag[i]&&A.setRequestHeader("If-None-Match",T.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||t.contentType)&&A.setRequestHeader("Content-Type",d.contentType),A.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+jt+"; q=0.01":""):d.accepts["*"]),d.headers)A.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(!1===d.beforeSend.call(p,A,d)||u))return A.abort();if(_="abort",v.add(d.complete),A.done(d.success),A.fail(d.error),r=$t(Mt,d,t,A)){if(A.readyState=1,l&&m.trigger("ajaxSend",[A,d]),u)return A;d.async&&d.timeout>0&&(a=n.setTimeout((function(){A.abort("timeout")}),d.timeout));try{u=!1,r.send(b,I)}catch(e){if(u)throw e;I(-1,e)}}else I(-1,"No Transport");function I(e,t,s,c){var h,f,E,b,w,_=t;u||(u=!0,a&&n.clearTimeout(a),r=void 0,o=c||"",A.readyState=e>0?4:0,h=e>=200&&e<300||304===e,s&&(b=function(e,t,r){for(var n,i,o,s,a=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(i in a)if(a[i]&&a[i].test(n)){c.unshift(i);break}if(c[0]in r)o=c[0];else{for(i in r){if(!c[0]||e.converters[i+" "+c[0]]){o=i;break}s||(s=i)}o=o||s}if(o)return o!==c[0]&&c.unshift(o),r[o]}(d,A,s)),!h&&T.inArray("script",d.dataTypes)>-1&&T.inArray("json",d.dataTypes)<0&&(d.converters["text script"]=function(){}),b=function(e,t,r,n){var i,o,s,a,c,u={},l=e.dataTypes.slice();if(l[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(o=l.shift();o;)if(e.responseFields[o]&&(r[e.responseFields[o]]=t),!c&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=l.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(s=u[c+" "+o]||u["* "+o]))for(i in u)if((a=i.split(" "))[1]===o&&(s=u[c+" "+a[0]]||u["* "+a[0]])){!0===s?s=u[i]:!0!==u[i]&&(o=a[0],l.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}(d,b,A,h),h?(d.ifModified&&((w=A.getResponseHeader("Last-Modified"))&&(T.lastModified[i]=w),(w=A.getResponseHeader("etag"))&&(T.etag[i]=w)),204===e||"HEAD"===d.type?_="nocontent":304===e?_="notmodified":(_=b.state,f=b.data,h=!(E=b.error))):(E=_,!e&&_||(_="error",e<0&&(e=0))),A.status=e,A.statusText=(t||_)+"",h?g.resolveWith(p,[f,_,A]):g.rejectWith(p,[A,_,E]),A.statusCode(y),y=void 0,l&&m.trigger(h?"ajaxSuccess":"ajaxError",[A,d,h?f:E]),v.fireWith(p,[A,_]),l&&(m.trigger("ajaxComplete",[A,d]),--T.active||T.event.trigger("ajaxStop")))}return A},getJSON:function(e,t,r){return T.get(e,t,r,"json")},getScript:function(e,t){return T.get(e,void 0,t,"script")}}),T.each(["get","post"],(function(e,t){T[t]=function(e,r,n,i){return v(r)&&(i=i||n,n=r,r=void 0),T.ajax(T.extend({url:e,type:t,dataType:i,data:r,success:n},T.isPlainObject(e)&&e))}})),T.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),T._evalUrl=function(e,t,r){return T.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){T.globalEval(e,t,r)}})},T.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=T(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return v(e)?this.each((function(t){T(this).wrapInner(e.call(this,t))})):this.each((function(){var t=T(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)}))},wrap:function(e){var t=v(e);return this.each((function(r){T(this).wrapAll(t?e.call(this,r):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){T(this).replaceWith(this.childNodes)})),this}}),T.expr.pseudos.hidden=function(e){return!T.expr.pseudos.visible(e)},T.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Gt={0:200,1223:204},qt=T.ajaxSettings.xhr();g.cors=!!qt&&"withCredentials"in qt,g.ajax=qt=!!qt,T.ajaxTransport((function(e){var t,r;if(g.cors||qt&&!e.crossDomain)return{send:function(i,o){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];for(s in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(s,i[s]);t=function(e){return function(){t&&(t=r=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Gt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),r=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=r:a.onreadystatechange=function(){4===a.readyState&&n.setTimeout((function(){t&&r()}))},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),T.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return T.globalEval(e),e}}}),T.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),T.ajaxTransport("script",(function(e){var t,r;if(e.crossDomain||e.scriptAttrs)return{send:function(n,i){t=T("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&i("error"===e.type?404:200,e.type)}),E.head.appendChild(t[0])},abort:function(){r&&r()}}}));var Ht,Wt=[],Kt=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Wt.pop()||T.expando+"_"+Tt.guid++;return this[e]=!0,e}}),T.ajaxPrefilter("json jsonp",(function(e,t,r){var i,o,s,a=!1!==e.jsonp&&(Kt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Kt,"$1"+i):!1!==e.jsonp&&(e.url+=(It.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return s||T.error(i+" was not called"),s[0]},e.dataTypes[0]="json",o=n[i],n[i]=function(){s=arguments},r.always((function(){void 0===o?T(n).removeProp(i):n[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,Wt.push(i)),s&&v(o)&&o(s[0]),s=o=void 0})),"script"})),g.createHTMLDocument=((Ht=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ht.childNodes.length),T.parseHTML=function(e,t,r){return"string"!=typeof e?[]:("boolean"==typeof t&&(r=t,t=!1),t||(g.createHTMLDocument?((n=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(n)):t=E),o=!r&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=Ae([e],t,o),o&&o.length&&T(o).remove(),T.merge([],i.childNodes)));var n,i,o},T.fn.load=function(e,t,r){var n,i,o,s=this,a=e.indexOf(" ");return a>-1&&(n=vt(e.slice(a)),e=e.slice(0,a)),v(t)?(r=t,t=void 0):t&&"object"==typeof t&&(i="POST"),s.length>0&&T.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){o=arguments,s.html(n?T("<div>").append(T.parseHTML(e)).find(n):e)})).always(r&&function(e,t){s.each((function(){r.apply(this,o||[e.responseText,t,e])}))}),this},T.expr.pseudos.animated=function(e){return T.grep(T.timers,(function(t){return e===t.elem})).length},T.offset={setOffset:function(e,t,r){var n,i,o,s,a,c,u=T.css(e,"position"),l=T(e),h={};"static"===u&&(e.style.position="relative"),a=l.offset(),o=T.css(e,"top"),c=T.css(e,"left"),("absolute"===u||"fixed"===u)&&(o+c).indexOf("auto")>-1?(s=(n=l.position()).top,i=n.left):(s=parseFloat(o)||0,i=parseFloat(c)||0),v(t)&&(t=t.call(e,r,T.extend({},a))),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+i),"using"in t?t.using.call(e,h):l.css(h)}},T.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){T.offset.setOffset(this,e,t)}));var t,r,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),r=n.ownerDocument.defaultView,{top:t.top+r.pageYOffset,left:t.left+r.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,r,n=this[0],i={top:0,left:0};if("fixed"===T.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),r=n.ownerDocument,e=n.offsetParent||r.documentElement;e&&(e===r.body||e===r.documentElement)&&"static"===T.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((i=T(e).offset()).top+=T.css(e,"borderTopWidth",!0),i.left+=T.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-T.css(n,"marginTop",!0),left:t.left-i.left-T.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===T.css(e,"position");)e=e.offsetParent;return e||se}))}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var r="pageYOffset"===t;T.fn[e]=function(n){return q(this,(function(e,n,i){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[n];o?o.scrollTo(r?o.pageXOffset:i,r?i:o.pageYOffset):e[n]=i}),e,n,arguments.length)}})),T.each(["top","left"],(function(e,t){T.cssHooks[t]=qe(g.pixelPosition,(function(e,r){if(r)return r=Ge(e,t),Fe.test(r)?T(e).position()[t]+"px":r}))})),T.each({Height:"height",Width:"width"},(function(e,t){T.each({padding:"inner"+e,content:t,"":"outer"+e},(function(r,n){T.fn[n]=function(i,o){var s=arguments.length&&(r||"boolean"!=typeof i),a=r||(!0===i||!0===o?"margin":"border");return q(this,(function(t,r,i){var o;return y(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?T.css(t,r,a):T.style(t,r,i,a)}),t,s?i:void 0,s)}}))})),T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){T.fn[t]=function(e){return this.on(t,e)}})),T.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){T.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}}));var Jt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;T.proxy=function(e,t){var r,n,i;if("string"==typeof t&&(r=e[t],t=e,e=r),v(e))return n=a.call(arguments,2),i=function(){return e.apply(t||this,n.concat(a.call(arguments)))},i.guid=e.guid=e.guid||T.guid++,i},T.holdReady=function(e){e?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=k,T.isFunction=v,T.isWindow=y,T.camelCase=J,T.type=_,T.now=Date.now,T.isNumeric=function(e){var t=T.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},T.trim=function(e){return null==e?"":(e+"").replace(Jt,"")},void 0===(r=function(){return T}.apply(t,[]))||(e.exports=r);var Yt=n.jQuery,Xt=n.$;return T.noConflict=function(e){return n.$===T&&(n.$=Xt),e&&n.jQuery===T&&(n.jQuery=Yt),T},void 0===i&&(n.jQuery=n.$=T),T}))},6922:(e,t,r)=>{var n;!function(){var i;function o(e){var t,r,n,i="",o=-1;if(e&&e.length)for(n=e.length;(o+=1)<n;)t=e.charCodeAt(o),r=o+1<n?e.charCodeAt(o+1):0,55296<=t&&t<=56319&&56320<=r&&r<=57343&&(t=65536+((1023&t)<<10)+(1023&r),o+=1),t<=127?i+=String.fromCharCode(t):t<=2047?i+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?i+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(i+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return i}function s(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function a(e,t){return e<<t|e>>>32-t}function c(e,t){for(var r,n=t?"0123456789ABCDEF":"0123456789abcdef",i="",o=0,s=e.length;o<s;o+=1)r=e.charCodeAt(o),i+=n.charAt(r>>>4&15)+n.charAt(15&r);return i}function u(e){var t,r=32*e.length,n="";for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>24-t%32&255);return n}function l(e){var t,r=32*e.length,n="";for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function h(e){var t,r=8*e.length,n=Array(e.length>>2),i=n.length;for(t=0;t<i;t+=1)n[t]=0;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function f(e){var t,r=8*e.length,n=Array(e.length>>2),i=n.length;for(t=0;t<i;t+=1)n[t]=0;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<24-t%32;return n}function d(e,t){var r,n,i,o,s,a,c,u,l=t.length,h=Array();for(o=(a=Array(Math.ceil(e.length/2))).length,r=0;r<o;r+=1)a[r]=e.charCodeAt(2*r)<<8|e.charCodeAt(2*r+1);for(;a.length>0;){for(s=Array(),i=0,r=0;r<a.length;r+=1)i=(i<<16)+a[r],i-=(n=Math.floor(i/l))*l,(s.length>0||n>0)&&(s[s.length]=n);h[h.length]=i,a=s}for(c="",r=h.length-1;r>=0;r--)c+=t.charAt(h[r]);for(u=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),r=c.length;r<u;r+=1)c=t[0]+c;return c}function p(e,t){var r,n,i,o="",s=e.length;for(t=t||"=",r=0;r<s;r+=3)for(i=e.charCodeAt(r)<<16|(r+1<s?e.charCodeAt(r+1)<<8:0)|(r+2<s?e.charCodeAt(r+2):0),n=0;n<4;n+=1)8*r+6*n>8*e.length?o+=t:o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>>6*(3-n)&63);return o}i={VERSION:"1.0.6",Base64:function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="=",r=!0;this.encode=function(n){var i,s,a,c="",u=n.length;for(t=t||"=",n=r?o(n):n,i=0;i<u;i+=3)for(a=n.charCodeAt(i)<<16|(i+1<u?n.charCodeAt(i+1)<<8:0)|(i+2<u?n.charCodeAt(i+2):0),s=0;s<4;s+=1)c+=8*i+6*s>8*u?t:e.charAt(a>>>6*(3-s)&63);return c},this.decode=function(n){var i,o,s,a,c,u,l,h,f="",d=[];if(!n)return n;i=h=0,n=n.replace(new RegExp("\\"+t,"gi"),"");do{o=(l=e.indexOf(n.charAt(i+=1))<<18|e.indexOf(n.charAt(i+=1))<<12|(c=e.indexOf(n.charAt(i+=1)))<<6|(u=e.indexOf(n.charAt(i+=1))))>>16&255,s=l>>8&255,a=255&l,d[h+=1]=64===c?String.fromCharCode(o):64===u?String.fromCharCode(o,s):String.fromCharCode(o,s,a)}while(i<n.length);return f=d.join(""),f=r?function(e){var t,r,n,i,o,s,a=[];if(t=r=n=i=o=0,e&&e.length)for(s=e.length,e+="";t<s;)r+=1,(n=e.charCodeAt(t))<128?(a[r]=String.fromCharCode(n),t+=1):n>191&&n<224?(i=e.charCodeAt(t+1),a[r]=String.fromCharCode((31&n)<<6|63&i),t+=2):(i=e.charCodeAt(t+1),o=e.charCodeAt(t+2),a[r]=String.fromCharCode((15&n)<<12|(63&i)<<6|63&o),t+=3);return a.join("")}(f):f,f},this.setPad=function(e){return t=e||t,this},this.setTab=function(t){return e=t||e,this},this.setUTF8=function(e){return"boolean"==typeof e&&(r=e),this}},CRC32:function(e){var t,r,n,i=0,s=0;for(e=o(e),t=["00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 ","79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 ","84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F ","63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD ","A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC ","51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 ","B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 ","06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 ","E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 ","12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 ","D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 ","33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 ","CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 ","9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E ","7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D ","806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 ","60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA ","AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 ","5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 ","B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 ","05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 ","F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA ","11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 ","D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F ","30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E ","C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D"].join(""),i^=-1,r=0,n=e.length;r<n;r+=1)s=255&(i^e.charCodeAt(r)),i=i>>>8^"0x"+t.substr(9*s,8);return(-1^i)>>>0},MD5:function(e){var t=!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase,r=e&&"string"==typeof e.pad?e.pad:"=",n=!e||"boolean"!=typeof e.utf8||e.utf8;function i(e){return l(f(h(e=n?o(e):e),8*e.length))}function u(e,t){var r,i,s,a,c;for(e=n?o(e):e,t=n?o(t):t,(r=h(e)).length>16&&(r=f(r,8*e.length)),i=Array(16),s=Array(16),c=0;c<16;c+=1)i[c]=909522486^r[c],s[c]=1549556828^r[c];return a=f(i.concat(h(t)),512+8*t.length),l(f(s.concat(a),640))}function f(e,t){var r,n,i,o,a,c=1732584193,u=-271733879,l=-1732584194,h=271733878;for(e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t,r=0;r<e.length;r+=16)n=c,i=u,o=l,a=h,c=g(c,u,l,h,e[r+0],7,-680876936),h=g(h,c,u,l,e[r+1],12,-389564586),l=g(l,h,c,u,e[r+2],17,606105819),u=g(u,l,h,c,e[r+3],22,-1044525330),c=g(c,u,l,h,e[r+4],7,-176418897),h=g(h,c,u,l,e[r+5],12,1200080426),l=g(l,h,c,u,e[r+6],17,-1473231341),u=g(u,l,h,c,e[r+7],22,-45705983),c=g(c,u,l,h,e[r+8],7,1770035416),h=g(h,c,u,l,e[r+9],12,-1958414417),l=g(l,h,c,u,e[r+10],17,-42063),u=g(u,l,h,c,e[r+11],22,-1990404162),c=g(c,u,l,h,e[r+12],7,1804603682),h=g(h,c,u,l,e[r+13],12,-40341101),l=g(l,h,c,u,e[r+14],17,-1502002290),c=v(c,u=g(u,l,h,c,e[r+15],22,1236535329),l,h,e[r+1],5,-165796510),h=v(h,c,u,l,e[r+6],9,-1069501632),l=v(l,h,c,u,e[r+11],14,643717713),u=v(u,l,h,c,e[r+0],20,-373897302),c=v(c,u,l,h,e[r+5],5,-701558691),h=v(h,c,u,l,e[r+10],9,38016083),l=v(l,h,c,u,e[r+15],14,-660478335),u=v(u,l,h,c,e[r+4],20,-405537848),c=v(c,u,l,h,e[r+9],5,568446438),h=v(h,c,u,l,e[r+14],9,-1019803690),l=v(l,h,c,u,e[r+3],14,-187363961),u=v(u,l,h,c,e[r+8],20,1163531501),c=v(c,u,l,h,e[r+13],5,-1444681467),h=v(h,c,u,l,e[r+2],9,-51403784),l=v(l,h,c,u,e[r+7],14,1735328473),c=y(c,u=v(u,l,h,c,e[r+12],20,-1926607734),l,h,e[r+5],4,-378558),h=y(h,c,u,l,e[r+8],11,-2022574463),l=y(l,h,c,u,e[r+11],16,1839030562),u=y(u,l,h,c,e[r+14],23,-35309556),c=y(c,u,l,h,e[r+1],4,-1530992060),h=y(h,c,u,l,e[r+4],11,1272893353),l=y(l,h,c,u,e[r+7],16,-155497632),u=y(u,l,h,c,e[r+10],23,-1094730640),c=y(c,u,l,h,e[r+13],4,681279174),h=y(h,c,u,l,e[r+0],11,-358537222),l=y(l,h,c,u,e[r+3],16,-722521979),u=y(u,l,h,c,e[r+6],23,76029189),c=y(c,u,l,h,e[r+9],4,-640364487),h=y(h,c,u,l,e[r+12],11,-421815835),l=y(l,h,c,u,e[r+15],16,530742520),c=E(c,u=y(u,l,h,c,e[r+2],23,-995338651),l,h,e[r+0],6,-198630844),h=E(h,c,u,l,e[r+7],10,1126891415),l=E(l,h,c,u,e[r+14],15,-1416354905),u=E(u,l,h,c,e[r+5],21,-57434055),c=E(c,u,l,h,e[r+12],6,1700485571),h=E(h,c,u,l,e[r+3],10,-1894986606),l=E(l,h,c,u,e[r+10],15,-1051523),u=E(u,l,h,c,e[r+1],21,-2054922799),c=E(c,u,l,h,e[r+8],6,1873313359),h=E(h,c,u,l,e[r+15],10,-30611744),l=E(l,h,c,u,e[r+6],15,-1560198380),u=E(u,l,h,c,e[r+13],21,1309151649),c=E(c,u,l,h,e[r+4],6,-145523070),h=E(h,c,u,l,e[r+11],10,-1120210379),l=E(l,h,c,u,e[r+2],15,718787259),u=E(u,l,h,c,e[r+9],21,-343485551),c=s(c,n),u=s(u,i),l=s(l,o),h=s(h,a);return Array(c,u,l,h)}function m(e,t,r,n,i,o){return s(a(s(s(t,e),s(n,o)),i),r)}function g(e,t,r,n,i,o,s){return m(t&r|~t&n,e,t,i,o,s)}function v(e,t,r,n,i,o,s){return m(t&n|r&~n,e,t,i,o,s)}function y(e,t,r,n,i,o,s){return m(t^r^n,e,t,i,o,s)}function E(e,t,r,n,i,o,s){return m(r^(t|~n),e,t,i,o,s)}this.hex=function(e){return c(i(e),t)},this.b64=function(e){return p(i(e),r)},this.any=function(e,t){return d(i(e),t)},this.raw=function(e){return i(e)},this.hex_hmac=function(e,r){return c(u(e,r),t)},this.b64_hmac=function(e,t){return p(u(e,t),r)},this.any_hmac=function(e,t,r){return d(u(e,t),r)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(t=e),this},this.setPad=function(e){return r=e||r,this},this.setUTF8=function(e){return"boolean"==typeof e&&(n=e),this}},SHA1:function(e){var t=!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase,r=e&&"string"==typeof e.pad?e.pad:"=",n=!e||"boolean"!=typeof e.utf8||e.utf8;function i(e){return u(h(f(e=n?o(e):e),8*e.length))}function l(e,t){var r,i,s,a,c;for(e=n?o(e):e,t=n?o(t):t,(r=f(e)).length>16&&(r=h(r,8*e.length)),i=Array(16),s=Array(16),a=0;a<16;a+=1)i[a]=909522486^r[a],s[a]=1549556828^r[a];return c=h(i.concat(f(t)),512+8*t.length),u(h(s.concat(c),672))}function h(e,t){var r,n,i,o,c,u,l,h,f=Array(80),d=1732584193,p=-271733879,v=-1732584194,y=271733878,E=-1009589776;for(e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t,r=0;r<e.length;r+=16){for(o=d,c=p,u=v,l=y,h=E,n=0;n<80;n+=1)f[n]=n<16?e[r+n]:a(f[n-3]^f[n-8]^f[n-14]^f[n-16],1),i=s(s(a(d,5),m(n,p,v,y)),s(s(E,f[n]),g(n))),E=y,y=v,v=a(p,30),p=d,d=i;d=s(d,o),p=s(p,c),v=s(v,u),y=s(y,l),E=s(E,h)}return Array(d,p,v,y,E)}function m(e,t,r,n){return e<20?t&r|~t&n:e<40?t^r^n:e<60?t&r|t&n|r&n:t^r^n}function g(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}this.hex=function(e){return c(i(e),t)},this.b64=function(e){return p(i(e),r)},this.any=function(e,t){return d(i(e),t)},this.raw=function(e){return i(e)},this.hex_hmac=function(e,t){return c(l(e,t))},this.b64_hmac=function(e,t){return p(l(e,t),r)},this.any_hmac=function(e,t,r){return d(l(e,t),r)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(t=e),this},this.setPad=function(e){return r=e||r,this},this.setUTF8=function(e){return"boolean"==typeof e&&(n=e),this}},SHA256:function(e){!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase;var t,r=e&&"string"==typeof e.pad?e.pad:"=",n=!e||"boolean"!=typeof e.utf8||e.utf8;function i(e,t){return u(b(f(e=t?o(e):e),8*e.length))}function a(e,t){e=n?o(e):e,t=n?o(t):t;var r,i=0,s=f(e),a=Array(16),c=Array(16);for(s.length>16&&(s=b(s,8*e.length));i<16;i+=1)a[i]=909522486^s[i],c[i]=1549556828^s[i];return r=b(a.concat(f(t)),512+8*t.length),u(b(c.concat(r),768))}function l(e,t){return e>>>t|e<<32-t}function h(e,t){return e>>>t}function m(e,t,r){return e&t^~e&r}function g(e,t,r){return e&t^e&r^t&r}function v(e){return l(e,2)^l(e,13)^l(e,22)}function y(e){return l(e,6)^l(e,11)^l(e,25)}function E(e){return l(e,7)^l(e,18)^h(e,3)}function b(e,r){var n,i,o,a,c,u,f,d,p,b,w,_,A,T=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],I=new Array(64);for(e[r>>5]|=128<<24-r%32,e[15+(r+64>>9<<4)]=r,p=0;p<e.length;p+=16){for(n=T[0],i=T[1],o=T[2],a=T[3],c=T[4],u=T[5],f=T[6],d=T[7],b=0;b<64;b+=1)I[b]=b<16?e[b+p]:s(s(s(l(A=I[b-2],17)^l(A,19)^h(A,10),I[b-7]),E(I[b-15])),I[b-16]),w=s(s(s(s(d,y(c)),m(c,u,f)),t[b]),I[b]),_=s(v(n),g(n,i,o)),d=f,f=u,u=c,c=s(a,w),a=o,o=i,i=n,n=s(w,_);T[0]=s(n,T[0]),T[1]=s(i,T[1]),T[2]=s(o,T[2]),T[3]=s(a,T[3]),T[4]=s(c,T[4]),T[5]=s(u,T[5]),T[6]=s(f,T[6]),T[7]=s(d,T[7])}return T}this.hex=function(e){return c(i(e,n))},this.b64=function(e){return p(i(e,n),r)},this.any=function(e,t){return d(i(e,n),t)},this.raw=function(e){return i(e,n)},this.hex_hmac=function(e,t){return c(a(e,t))},this.b64_hmac=function(e,t){return p(a(e,t),r)},this.any_hmac=function(e,t,r){return d(a(e,t),r)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&e,this},this.setPad=function(e){return r=e||r,this},this.setUTF8=function(e){return"boolean"==typeof e&&(n=e),this},t=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998]},SHA512:function(e){!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase;var t,r=e&&"string"==typeof e.pad?e.pad:"=",n=!e||"boolean"!=typeof e.utf8||e.utf8;function i(e){return u(a(f(e=n?o(e):e),8*e.length))}function s(e,t){e=n?o(e):e,t=n?o(t):t;var r,i=0,s=f(e),c=Array(32),l=Array(32);for(s.length>32&&(s=a(s,8*e.length));i<32;i+=1)c[i]=909522486^s[i],l[i]=1549556828^s[i];return r=a(c.concat(f(t)),1024+8*t.length),u(a(l.concat(r),1536))}function a(e,r){var n,i,o,s=new Array(80),a=new Array(16),c=[new l(1779033703,-205731576),new l(-1150833019,-2067093701),new l(1013904242,-23791573),new l(-1521486534,1595750129),new l(1359893119,-1377402159),new l(-1694144372,725511199),new l(528734635,-79577749),new l(1541459225,327033209)],u=new l(0,0),f=new l(0,0),d=new l(0,0),p=new l(0,0),w=new l(0,0),_=new l(0,0),A=new l(0,0),T=new l(0,0),I=new l(0,0),S=new l(0,0),x=new l(0,0),O=new l(0,0),R=new l(0,0),k=new l(0,0),N=new l(0,0),C=new l(0,0),D=new l(0,0);for(void 0===t&&(t=[new l(1116352408,-685199838),new l(1899447441,602891725),new l(-1245643825,-330482897),new l(-373957723,-2121671748),new l(961987163,-213338824),new l(1508970993,-1241133031),new l(-1841331548,-1357295717),new l(-1424204075,-630357736),new l(-670586216,-1560083902),new l(310598401,1164996542),new l(607225278,1323610764),new l(1426881987,-704662302),new l(1925078388,-226784913),new l(-2132889090,991336113),new l(-1680079193,633803317),new l(-1046744716,-815192428),new l(-459576895,-1628353838),new l(-272742522,944711139),new l(264347078,-1953704523),new l(604807628,2007800933),new l(770255983,1495990901),new l(1249150122,1856431235),new l(1555081692,-1119749164),new l(1996064986,-2096016459),new l(-1740746414,-295247957),new l(-1473132947,766784016),new l(-1341970488,-1728372417),new l(-1084653625,-1091629340),new l(-958395405,1034457026),new l(-710438585,-1828018395),new l(113926993,-536640913),new l(338241895,168717936),new l(666307205,1188179964),new l(773529912,1546045734),new l(1294757372,1522805485),new l(1396182291,-1651133473),new l(1695183700,-1951439906),new l(1986661051,1014477480),new l(-2117940946,1206759142),new l(-1838011259,344077627),new l(-1564481375,1290863460),new l(-1474664885,-1136513023),new l(-1035236496,-789014639),new l(-949202525,106217008),new l(-778901479,-688958952),new l(-694614492,1432725776),new l(-200395387,1467031594),new l(275423344,851169720),new l(430227734,-1194143544),new l(506948616,1363258195),new l(659060556,-544281703),new l(883997877,-509917016),new l(958139571,-976659869),new l(1322822218,-482243893),new l(1537002063,2003034995),new l(1747873779,-692930397),new l(1955562222,1575990012),new l(2024104815,1125592928),new l(-2067236844,-1578062990),new l(-1933114872,442776044),new l(-1866530822,593698344),new l(-1538233109,-561857047),new l(-1090935817,-1295615723),new l(-965641998,-479046869),new l(-903397682,-366583396),new l(-779700025,566280711),new l(-354779690,-840897762),new l(-176337025,-294727304),new l(116418474,1914138554),new l(174292421,-1563912026),new l(289380356,-1090974290),new l(460393269,320620315),new l(685471733,587496836),new l(852142971,1086792851),new l(1017036298,365543100),new l(1126000580,-1676669620),new l(1288033470,-885112138),new l(1501505948,-60457430),new l(1607167915,987167468),new l(1816402316,1246189591)]),i=0;i<80;i+=1)s[i]=new l(0,0);for(e[r>>5]|=128<<24-(31&r),e[31+(r+128>>10<<5)]=r,o=e.length,i=0;i<o;i+=32){for(h(d,c[0]),h(p,c[1]),h(w,c[2]),h(_,c[3]),h(A,c[4]),h(T,c[5]),h(I,c[6]),h(S,c[7]),n=0;n<16;n+=1)s[n].h=e[i+2*n],s[n].l=e[i+2*n+1];for(n=16;n<80;n+=1)m(N,s[n-2],19),g(C,s[n-2],29),v(D,s[n-2],6),O.l=N.l^C.l^D.l,O.h=N.h^C.h^D.h,m(N,s[n-15],1),m(C,s[n-15],8),v(D,s[n-15],7),x.l=N.l^C.l^D.l,x.h=N.h^C.h^D.h,E(s[n],O,s[n-7],x,s[n-16]);for(n=0;n<80;n+=1)R.l=A.l&T.l^~A.l&I.l,R.h=A.h&T.h^~A.h&I.h,m(N,A,14),m(C,A,18),g(D,A,9),O.l=N.l^C.l^D.l,O.h=N.h^C.h^D.h,m(N,d,28),g(C,d,2),g(D,d,7),x.l=N.l^C.l^D.l,x.h=N.h^C.h^D.h,k.l=d.l&p.l^d.l&w.l^p.l&w.l,k.h=d.h&p.h^d.h&w.h^p.h&w.h,b(u,S,O,R,t[n],s[n]),y(f,x,k),h(S,I),h(I,T),h(T,A),y(A,_,u),h(_,w),h(w,p),h(p,d),y(d,u,f);y(c[0],c[0],d),y(c[1],c[1],p),y(c[2],c[2],w),y(c[3],c[3],_),y(c[4],c[4],A),y(c[5],c[5],T),y(c[6],c[6],I),y(c[7],c[7],S)}for(i=0;i<8;i+=1)a[2*i]=c[i].h,a[2*i+1]=c[i].l;return a}function l(e,t){this.h=e,this.l=t}function h(e,t){e.h=t.h,e.l=t.l}function m(e,t,r){e.l=t.l>>>r|t.h<<32-r,e.h=t.h>>>r|t.l<<32-r}function g(e,t,r){e.l=t.h>>>r|t.l<<32-r,e.h=t.l>>>r|t.h<<32-r}function v(e,t,r){e.l=t.l>>>r|t.h<<32-r,e.h=t.h>>>r}function y(e,t,r){var n=(65535&t.l)+(65535&r.l),i=(t.l>>>16)+(r.l>>>16)+(n>>>16),o=(65535&t.h)+(65535&r.h)+(i>>>16),s=(t.h>>>16)+(r.h>>>16)+(o>>>16);e.l=65535&n|i<<16,e.h=65535&o|s<<16}function E(e,t,r,n,i){var o=(65535&t.l)+(65535&r.l)+(65535&n.l)+(65535&i.l),s=(t.l>>>16)+(r.l>>>16)+(n.l>>>16)+(i.l>>>16)+(o>>>16),a=(65535&t.h)+(65535&r.h)+(65535&n.h)+(65535&i.h)+(s>>>16),c=(t.h>>>16)+(r.h>>>16)+(n.h>>>16)+(i.h>>>16)+(a>>>16);e.l=65535&o|s<<16,e.h=65535&a|c<<16}function b(e,t,r,n,i,o){var s=(65535&t.l)+(65535&r.l)+(65535&n.l)+(65535&i.l)+(65535&o.l),a=(t.l>>>16)+(r.l>>>16)+(n.l>>>16)+(i.l>>>16)+(o.l>>>16)+(s>>>16),c=(65535&t.h)+(65535&r.h)+(65535&n.h)+(65535&i.h)+(65535&o.h)+(a>>>16),u=(t.h>>>16)+(r.h>>>16)+(n.h>>>16)+(i.h>>>16)+(o.h>>>16)+(c>>>16);e.l=65535&s|a<<16,e.h=65535&c|u<<16}this.hex=function(e){return c(i(e))},this.b64=function(e){return p(i(e),r)},this.any=function(e,t){return d(i(e),t)},this.raw=function(e){return i(e)},this.hex_hmac=function(e,t){return c(s(e,t))},this.b64_hmac=function(e,t){return p(s(e,t),r)},this.any_hmac=function(e,t,r){return d(s(e,t),r)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&e,this},this.setPad=function(e){return r=e||r,this},this.setUTF8=function(e){return"boolean"==typeof e&&(n=e),this}},RMD160:function(e){!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase;var t=e&&"string"==typeof e.pad?e.pa:"=",r=!e||"boolean"!=typeof e.utf8||e.utf8,n=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],i=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],u=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],l=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];function f(e){return g(v(h(e=r?o(e):e),8*e.length))}function m(e,t){e=r?o(e):e,t=r?o(t):t;var n,i,s=h(e),a=Array(16),c=Array(16);for(s.length>16&&(s=v(s,8*e.length)),n=0;n<16;n+=1)a[n]=909522486^s[n],c[n]=1549556828^s[n];return i=v(a.concat(h(t)),512+8*t.length),g(v(c.concat(i),672))}function g(e){var t,r="",n=32*e.length;for(t=0;t<n;t+=8)r+=String.fromCharCode(e[t>>5]>>>t%32&255);return r}function v(e,t){var r,o,c,h,f,d,p,m,g,v,w,_,A,T,I=1732584193,S=4023233417,x=2562383102,O=271733878,R=3285377520;for(e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t,h=e.length,c=0;c<h;c+=16){for(f=v=I,d=w=S,p=_=x,m=A=O,g=T=R,o=0;o<=79;o+=1)r=s(f,y(o,d,p,m)),r=s(r,e[c+n[o]]),r=s(r,E(o)),r=s(a(r,u[o]),g),f=g,g=m,m=a(p,10),p=d,d=r,r=s(v,y(79-o,w,_,A)),r=s(r,e[c+i[o]]),r=s(r,b(o)),r=s(a(r,l[o]),T),v=T,T=A,A=a(_,10),_=w,w=r;r=s(S,s(p,A)),S=s(x,s(m,T)),x=s(O,s(g,v)),O=s(R,s(f,w)),R=s(I,s(d,_)),I=r}return[I,S,x,O,R]}function y(e,t,r,n){return 0<=e&&e<=15?t^r^n:16<=e&&e<=31?t&r|~t&n:32<=e&&e<=47?(t|~r)^n:48<=e&&e<=63?t&n|r&~n:64<=e&&e<=79?t^(r|~n):"rmd160_f: j out of range"}function E(e){return 0<=e&&e<=15?0:16<=e&&e<=31?1518500249:32<=e&&e<=47?1859775393:48<=e&&e<=63?2400959708:64<=e&&e<=79?2840853838:"rmd160_K1: j out of range"}function b(e){return 0<=e&&e<=15?1352829926:16<=e&&e<=31?1548603684:32<=e&&e<=47?1836072691:48<=e&&e<=63?2053994217:64<=e&&e<=79?0:"rmd160_K2: j out of range"}this.hex=function(e){return c(f(e))},this.b64=function(e){return p(f(e),t)},this.any=function(e,t){return d(f(e),t)},this.raw=function(e){return f(e)},this.hex_hmac=function(e,t){return c(m(e,t))},this.b64_hmac=function(e,r){return p(m(e,r),t)},this.any_hmac=function(e,t,r){return d(m(e,t),r)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&e,this},this.setPad=function(e){return void 0!==e&&(t=e),this},this.setUTF8=function(e){return"boolean"==typeof e&&(r=e),this}}},t&&"object"==typeof r.g&&r.g&&r.g===r.g.global&&r.g,void 0===(n=function(){return i}.call(t,r,t,e))||(e.exports=n)}()},6022:e=>{var t=Object.prototype.toString,r=Array.isArray;e.exports=function(e){return"string"==typeof e||!r(e)&&function(e){return!!e&&"object"==typeof e}(e)&&"[object String]"==t.call(e)}},9614:(e,t,r)=>{var n,i,o,s,a;n=r(1041),i=r(1615).utf8,o=r(1246),s=r(1615).bin,(a=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):i.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var r=n.bytesToWords(e),c=8*e.length,u=1732584193,l=-271733879,h=-1732584194,f=271733878,d=0;d<r.length;d++)r[d]=16711935&(r[d]<<8|r[d]>>>24)|4278255360&(r[d]<<24|r[d]>>>8);r[c>>>5]|=128<<c%32,r[14+(c+64>>>9<<4)]=c;var p=a._ff,m=a._gg,g=a._hh,v=a._ii;for(d=0;d<r.length;d+=16){var y=u,E=l,b=h,w=f;u=p(u,l,h,f,r[d+0],7,-680876936),f=p(f,u,l,h,r[d+1],12,-389564586),h=p(h,f,u,l,r[d+2],17,606105819),l=p(l,h,f,u,r[d+3],22,-1044525330),u=p(u,l,h,f,r[d+4],7,-176418897),f=p(f,u,l,h,r[d+5],12,1200080426),h=p(h,f,u,l,r[d+6],17,-1473231341),l=p(l,h,f,u,r[d+7],22,-45705983),u=p(u,l,h,f,r[d+8],7,1770035416),f=p(f,u,l,h,r[d+9],12,-1958414417),h=p(h,f,u,l,r[d+10],17,-42063),l=p(l,h,f,u,r[d+11],22,-1990404162),u=p(u,l,h,f,r[d+12],7,1804603682),f=p(f,u,l,h,r[d+13],12,-40341101),h=p(h,f,u,l,r[d+14],17,-1502002290),u=m(u,l=p(l,h,f,u,r[d+15],22,1236535329),h,f,r[d+1],5,-165796510),f=m(f,u,l,h,r[d+6],9,-1069501632),h=m(h,f,u,l,r[d+11],14,643717713),l=m(l,h,f,u,r[d+0],20,-373897302),u=m(u,l,h,f,r[d+5],5,-701558691),f=m(f,u,l,h,r[d+10],9,38016083),h=m(h,f,u,l,r[d+15],14,-660478335),l=m(l,h,f,u,r[d+4],20,-405537848),u=m(u,l,h,f,r[d+9],5,568446438),f=m(f,u,l,h,r[d+14],9,-1019803690),h=m(h,f,u,l,r[d+3],14,-187363961),l=m(l,h,f,u,r[d+8],20,1163531501),u=m(u,l,h,f,r[d+13],5,-1444681467),f=m(f,u,l,h,r[d+2],9,-51403784),h=m(h,f,u,l,r[d+7],14,1735328473),u=g(u,l=m(l,h,f,u,r[d+12],20,-1926607734),h,f,r[d+5],4,-378558),f=g(f,u,l,h,r[d+8],11,-2022574463),h=g(h,f,u,l,r[d+11],16,1839030562),l=g(l,h,f,u,r[d+14],23,-35309556),u=g(u,l,h,f,r[d+1],4,-1530992060),f=g(f,u,l,h,r[d+4],11,1272893353),h=g(h,f,u,l,r[d+7],16,-155497632),l=g(l,h,f,u,r[d+10],23,-1094730640),u=g(u,l,h,f,r[d+13],4,681279174),f=g(f,u,l,h,r[d+0],11,-358537222),h=g(h,f,u,l,r[d+3],16,-722521979),l=g(l,h,f,u,r[d+6],23,76029189),u=g(u,l,h,f,r[d+9],4,-640364487),f=g(f,u,l,h,r[d+12],11,-421815835),h=g(h,f,u,l,r[d+15],16,530742520),u=v(u,l=g(l,h,f,u,r[d+2],23,-995338651),h,f,r[d+0],6,-198630844),f=v(f,u,l,h,r[d+7],10,1126891415),h=v(h,f,u,l,r[d+14],15,-1416354905),l=v(l,h,f,u,r[d+5],21,-57434055),u=v(u,l,h,f,r[d+12],6,1700485571),f=v(f,u,l,h,r[d+3],10,-1894986606),h=v(h,f,u,l,r[d+10],15,-1051523),l=v(l,h,f,u,r[d+1],21,-2054922799),u=v(u,l,h,f,r[d+8],6,1873313359),f=v(f,u,l,h,r[d+15],10,-30611744),h=v(h,f,u,l,r[d+6],15,-1560198380),l=v(l,h,f,u,r[d+13],21,1309151649),u=v(u,l,h,f,r[d+4],6,-145523070),f=v(f,u,l,h,r[d+11],10,-1120210379),h=v(h,f,u,l,r[d+2],15,718787259),l=v(l,h,f,u,r[d+9],21,-343485551),u=u+y>>>0,l=l+E>>>0,h=h+b>>>0,f=f+w>>>0}return n.endian([u,l,h,f])})._ff=function(e,t,r,n,i,o,s){var a=e+(t&r|~t&n)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._gg=function(e,t,r,n,i,o,s){var a=e+(t&n|r&~n)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._hh=function(e,t,r,n,i,o,s){var a=e+(t^r^n)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._ii=function(e,t,r,n,i,o,s){var a=e+(r^(t|~n))+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=n.wordsToBytes(a(e,t));return t&&t.asBytes?r:t&&t.asString?s.bytesToString(r):n.bytesToHex(r)}},9174:function(e,t){var r,n,i;n=[],r=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,r="boolean"==typeof(new RegExp).sticky;function n(e){return e&&"[object RegExp]"===t.call(e)}function i(e){return e&&"object"==typeof e&&!n(e)&&!Array.isArray(e)}function o(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function s(e){return new RegExp("|"+e).exec("").length-1}function a(e){return"("+e+")"}function c(e){return e.length?"(?:"+e.map((function(e){return"(?:"+e+")"})).join("|")+")":"(?!)"}function u(e){if("string"==typeof e)return"(?:"+o(e)+")";if(n(e)){if(e.ignoreCase)throw new Error("RegExp /i flag not allowed");if(e.global)throw new Error("RegExp /g flag is implied");if(e.sticky)throw new Error("RegExp /y flag is implied");if(e.multiline)throw new Error("RegExp /m flag is implied");return e.source}throw new Error("Not a pattern: "+e)}function l(e){for(var t=Object.getOwnPropertyNames(e),r=[],n=0;n<t.length;n++){var o=t[n],s=e[o],a=[].concat(s);if("include"!==o){var c=[];a.forEach((function(e){i(e)?(c.length&&r.push(f(o,c)),r.push(f(o,e)),c=[]):c.push(e)})),c.length&&r.push(f(o,c))}else for(var u=0;u<a.length;u++)r.push({include:a[u]})}return r}function h(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n.include)for(var i=[].concat(n.include),o=0;o<i.length;o++)t.push({include:i[o]});else{if(!n.type)throw new Error("Rule has no type: "+JSON.stringify(n));t.push(f(n.type,n))}}return t}function f(t,r){if(i(r)||(r={match:r}),r.include)throw new Error("Matching rules cannot also include states");var o={defaultType:t,lineBreaks:!!r.error||!!r.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var s in r)e.call(r,s)&&(o[s]=r[s]);if("string"==typeof o.type&&t!==o.type)throw new Error("Type transform cannot be a string (type '"+o.type+"' for token '"+t+"')");var a=o.match;return o.match=Array.isArray(a)?a:a?[a]:[],o.match.sort((function(e,t){return n(e)&&n(t)?0:n(t)?-1:n(e)?1:t.length-e.length})),o}function d(e){return Array.isArray(e)?h(e):l(e)}var p=f("error",{lineBreaks:!0,shouldThrow:!0});function m(e,t){for(var i=null,o=Object.create(null),l=!0,h=null,f=[],d=[],m=0;m<e.length;m++)e[m].fallback&&(l=!1);for(m=0;m<e.length;m++){var g=e[m];if(g.include)throw new Error("Inheritance is not allowed in stateless lexers");if(g.error||g.fallback){if(i)throw!g.fallback==!i.fallback?new Error("Multiple "+(g.fallback?"fallback":"error")+" rules not allowed (for token '"+g.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+g.defaultType+"')");i=g}var v=g.match.slice();if(l)for(;v.length&&"string"==typeof v[0]&&1===v[0].length;)o[v.shift().charCodeAt(0)]=g;if(g.pop||g.push||g.next){if(!t)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+g.defaultType+"')");if(g.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+g.defaultType+"')")}if(0!==v.length){l=!1,f.push(g);for(var y=0;y<v.length;y++){var E=v[y];if(n(E))if(null===h)h=E.unicode;else if(h!==E.unicode&&!1===g.fallback)throw new Error("If one rule is /u then all must be")}var b=c(v.map(u)),w=new RegExp(b);if(w.test(""))throw new Error("RegExp matches empty string: "+w);if(s(b)>0)throw new Error("RegExp has capture groups: "+w+"\nUse (?: \u2026 ) instead");if(!g.lineBreaks&&w.test("\n"))throw new Error("Rule should declare lineBreaks: "+w);d.push(a(b))}}var _=i&&i.fallback,A=r&&!_?"ym":"gm",T=r||_?"":"|";return!0===h&&(A+="u"),{regexp:new RegExp(c(d)+T,A),groups:f,fast:o,error:i||p}}function g(e){var t=m(d(e));return new b({start:t},"start")}function v(e,t,r){var n=e&&(e.push||e.next);if(n&&!r[n])throw new Error("Missing state '"+n+"' (in token '"+e.defaultType+"' of state '"+t+"')");if(e&&e.pop&&1!=+e.pop)throw new Error("pop must be 1 (in token '"+e.defaultType+"' of state '"+t+"')")}function y(e,t){var r=e.$all?d(e.$all):[];delete e.$all;var n=Object.getOwnPropertyNames(e);t||(t=n[0]);for(var i=Object.create(null),o=0;o<n.length;o++)i[y=n[o]]=d(e[y]).concat(r);for(o=0;o<n.length;o++)for(var s=i[y=n[o]],a=Object.create(null),c=0;c<s.length;c++){var u=s[c];if(u.include){var l=[c,1];if(u.include!==y&&!a[u.include]){a[u.include]=!0;var h=i[u.include];if(!h)throw new Error("Cannot include nonexistent state '"+u.include+"' (in state '"+y+"')");for(var f=0;f<h.length;f++){var p=h[f];-1===s.indexOf(p)&&l.push(p)}}s.splice.apply(s,l),c--}}var g=Object.create(null);for(o=0;o<n.length;o++){var y;g[y=n[o]]=m(i[y],!0)}for(o=0;o<n.length;o++){var E=n[o],w=g[E],_=w.groups;for(c=0;c<_.length;c++)v(_[c],E,g);var A=Object.getOwnPropertyNames(w.fast);for(c=0;c<A.length;c++)v(w.fast[A[c]],E,g)}return new b(g,t)}function E(e){for(var t=Object.create(null),r=Object.create(null),n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var o=n[i],s=e[o];(Array.isArray(s)?s:[s]).forEach((function(e){if((r[e.length]=r[e.length]||[]).push(e),"string"!=typeof e)throw new Error("keyword must be string (in keyword '"+o+"')");t[e]=o}))}function a(e){return JSON.stringify(e)}var c="";for(var u in c+="switch (value.length) {\n",r){var l=r[u];c+="case "+u+":\n",c+="switch (value) {\n",l.forEach((function(e){var r=t[e];c+="case "+a(e)+": return "+a(r)+"\n"})),c+="}\n"}return c+="}\n",Function("value",c)}var b=function(e,t){this.startState=t,this.states=e,this.buffer="",this.stack=[],this.reset()};b.prototype.reset=function(e,t){return this.buffer=e||"",this.index=0,this.line=t?t.line:1,this.col=t?t.col:1,this.queuedToken=t?t.queuedToken:null,this.queuedThrow=t?t.queuedThrow:null,this.setState(t?t.state:this.startState),this.stack=t&&t.stack?t.stack.slice():[],this},b.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedThrow:this.queuedThrow}},b.prototype.setState=function(e){if(e&&this.state!==e){this.state=e;var t=this.states[e];this.groups=t.groups,this.error=t.error,this.re=t.regexp,this.fast=t.fast}},b.prototype.popState=function(){this.setState(this.stack.pop())},b.prototype.pushState=function(e){this.stack.push(this.state),this.setState(e)};var w=r?function(e,t){return e.exec(t)}:function(e,t){var r=e.exec(t);return 0===r[0].length?null:r};function _(){return this.value}if(b.prototype._getGroup=function(e){for(var t=this.groups.length,r=0;r<t;r++)if(void 0!==e[r+1])return this.groups[r];throw new Error("Cannot find token type for matched text")},b.prototype.next=function(){var e=this.index;if(this.queuedGroup){var t=this._token(this.queuedGroup,this.queuedText,e);return this.queuedGroup=null,this.queuedText="",t}var r=this.buffer;if(e!==r.length){if(s=this.fast[r.charCodeAt(e)])return this._token(s,r.charAt(e),e);var n=this.re;n.lastIndex=e;var i=w(n,r),o=this.error;if(null==i)return this._token(o,r.slice(e,r.length),e);var s=this._getGroup(i),a=i[0];return o.fallback&&i.index!==e?(this.queuedGroup=s,this.queuedText=a,this._token(o,r.slice(e,i.index),e)):this._token(s,a,e)}},b.prototype._token=function(e,t,r){var n=0;if(e.lineBreaks){var i=/\n/g,o=1;if("\n"===t)n=1;else for(;i.exec(t);)n++,o=i.lastIndex}var s={type:"function"==typeof e.type&&e.type(t)||e.defaultType,value:"function"==typeof e.value?e.value(t):t,text:t,toString:_,offset:r,lineBreaks:n,line:this.line,col:this.col},a=t.length;if(this.index+=a,this.line+=n,0!==n?this.col=a-o+1:this.col+=a,e.shouldThrow)throw new Error(this.formatError(s,"invalid syntax"));return e.pop?this.popState():e.push?this.pushState(e.push):e.next&&this.setState(e.next),s},"undefined"!=typeof Symbol&&Symbol.iterator){var A=function(e){this.lexer=e};A.prototype.next=function(){var e=this.lexer.next();return{value:e,done:!e}},A.prototype[Symbol.iterator]=function(){return this},b.prototype[Symbol.iterator]=function(){return new A(this)}}return b.prototype.formatError=function(e,t){if(null==e){var r=this.buffer.slice(this.index);e={text:r,offset:this.index,lineBreaks:-1===r.indexOf("\n")?0:1,line:this.line,col:this.col}}var n=Math.max(0,e.offset-e.col+1),i=e.lineBreaks?e.text.indexOf("\n"):e.text.length,o=this.buffer.substring(n,e.offset+i);return t+=" at line "+e.line+" col "+e.col+":\n\n",t+="  "+o+"\n",t+="  "+Array(e.col).join(" ")+"^"},b.prototype.clone=function(){return new b(this.states,this.state)},b.prototype.has=function(e){return!0},{compile:g,states:y,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:E}},void 0===(i="function"==typeof r?r.apply(t,n):r)||(e.exports=i)},4264:e=>{var t=1e3,r=60*t,n=60*r,i=24*n,o=7*i,s=365.25*i;function a(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,c){c=c||{};var u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a)return;var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*s;case"weeks":case"week":case"w":return c*o;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===u&&isFinite(e))return c.long?function(e){var o=Math.abs(e);if(o>=i)return a(e,o,i,"day");if(o>=n)return a(e,o,n,"hour");if(o>=r)return a(e,o,r,"minute");if(o>=t)return a(e,o,t,"second");return e+" ms"}(e):function(e){var o=Math.abs(e);if(o>=i)return Math.round(e/i)+"d";if(o>=n)return Math.round(e/n)+"h";if(o>=r)return Math.round(e/r)+"m";if(o>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},8491:e=>{!function(){function t(e,t){var r,n,i,o,s,a,c,u;for(r=3&e.length,n=e.length-r,i=t,s=3432918353,a=461845907,u=0;u<n;)c=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,i=27492+(65535&(o=5*(65535&(i=(i^=c=(65535&(c=(c=(65535&c)*s+(((c>>>16)*s&65535)<<16)&4294967295)<<15|c>>>17))*a+(((c>>>16)*a&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(c=0,r){case 3:c^=(255&e.charCodeAt(u+2))<<16;case 2:c^=(255&e.charCodeAt(u+1))<<8;case 1:i^=c=(65535&(c=(c=(65535&(c^=255&e.charCodeAt(u)))*s+(((c>>>16)*s&65535)<<16)&4294967295)<<15|c>>>17))*a+(((c>>>16)*a&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}var r=t;r.v2=function(e,t){for(var r,n=e.length,i=t^n,o=0;n>=4;)r=1540483477*(65535&(r=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(r>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0},r.v3=t,e.exports=r}()},8720:e=>{"use strict";var t=function(e){return e!=e};e.exports=function(e,r){return 0===e&&0===r?1/e==1/r:e===r||!(!t(e)||!t(r))}},7402:(e,t,r)=>{"use strict";var n=r(9170),i=r(2550),o=r(8720),s=r(5280),a=r(9129),c=i(s(),Object);n(c,{getPolyfill:s,implementation:o,shim:a}),e.exports=c},5280:(e,t,r)=>{"use strict";var n=r(8720);e.exports=function(){return"function"==typeof Object.is?Object.is:n}},9129:(e,t,r)=>{"use strict";var n=r(5280),i=r(9170);e.exports=function(){var e=n();return i(Object,{is:e},{is:function(){return Object.is!==e}}),e}},8383:(e,t,r)=>{"use strict";var n;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=r(4418),a=Object.prototype.propertyIsEnumerable,c=!a.call({toString:null},"toString"),u=a.call((function(){}),"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(e){var t=e.constructor;return t&&t.prototype===e},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!f["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{h(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();n=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===o.call(e),n=s(e),a=t&&"[object String]"===o.call(e),f=[];if(!t&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var p=u&&r;if(a&&e.length>0&&!i.call(e,0))for(var m=0;m<e.length;++m)f.push(String(m));if(n&&e.length>0)for(var g=0;g<e.length;++g)f.push(String(g));else for(var v in e)p&&"prototype"===v||!i.call(e,v)||f.push(String(v));if(c)for(var y=function(e){if("undefined"==typeof window||!d)return h(e);try{return h(e)}catch(e){return!1}}(e),E=0;E<l.length;++E)y&&"constructor"===l[E]||!i.call(e,l[E])||f.push(l[E]);return f}}e.exports=n},806:(e,t,r)=>{"use strict";var n=Array.prototype.slice,i=r(4418),o=Object.keys,s=o?function(e){return o(e)}:r(8383),a=Object.keys;s.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return i(e)?a(n.call(e)):a(e)})}else Object.keys=s;return Object.keys||s},e.exports=s},4418:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var r=t.call(e),n="[object Arguments]"===r;return n||(n="[object Array]"!==r&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),n}},8283:e=>{var t,r,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var a,c=[],u=!1,l=-1;function h(){u&&a&&(u=!1,a.length?c=a.concat(c):l=-1,c.length&&f())}function f(){if(!u){var e=s(h);u=!0;for(var t=c.length;t;){for(a=c,c=[];++l<t;)a&&a[l].run();l=-1,t=c.length}a=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new d(e,t)),1!==c.length||u||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},3710:(e,t)=>{(t=e.exports=function(e){return String(e).replace(t.expr,"")}).expr=/\/+$/},4765:(e,t,r)=>{const n=Symbol("SemVer ANY");class i{static get ANY(){return n}constructor(e,t){if(t=o(t),e instanceof i){if(e.loose===!!t.loose)return e;e=e.value}u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new l(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new l(e,this.options)}catch(e){return!1}return c(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new h(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new h(this.value,t).test(e.semver);const r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),n=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=c(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=c(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||n||o&&s||a||u}}e.exports=i;const o=r(4681),{re:s,t:a}=r(9720),c=r(6579),u=r(6638),l=r(3292),h=r(3514)},3514:(e,t,r)=>{class n{constructor(e,t){if(t=o(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!p(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&m(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=`parseRange:${Object.keys(this.options).join(",")}:${e}`,r=i.get(t);if(r)return r;const n=this.options.loose,o=n?u[l.HYPHENRANGELOOSE]:u[l.HYPHENRANGE];e=e.replace(o,x(this.options.includePrerelease)),a("hyphen replace",e),e=e.replace(u[l.COMPARATORTRIM],h),a("comparator trim",e);let c=(e=(e=(e=e.replace(u[l.TILDETRIM],f)).replace(u[l.CARETTRIM],d)).split(/\s+/).join(" ")).split(" ").map((e=>v(e,this.options))).join(" ").split(/\s+/).map((e=>S(e,this.options)));n&&(c=c.filter((e=>(a("loose invalid filter",e,this.options),!!e.match(u[l.COMPARATORLOOSE]))))),a("range list",c);const m=new Map,g=c.map((e=>new s(e,this.options)));for(const e of g){if(p(e))return[e];m.set(e.value,e)}m.size>1&&m.has("")&&m.delete("");const y=[...m.values()];return i.set(t,y),y}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some((r=>g(r,t)&&e.set.some((e=>g(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(O(this.set[t],e,this.options))return!0;return!1}}e.exports=n;const i=new(r(5271))({max:1e3}),o=r(4681),s=r(4765),a=r(6638),c=r(3292),{re:u,t:l,comparatorTrimReplace:h,tildeTrimReplace:f,caretTrimReplace:d}=r(9720),p=e=>"<0.0.0-0"===e.value,m=e=>""===e.value,g=(e,t)=>{let r=!0;const n=e.slice();let i=n.pop();for(;r&&n.length;)r=n.every((e=>i.intersects(e,t))),i=n.pop();return r},v=(e,t)=>(a("comp",e,t),e=w(e,t),a("caret",e),e=E(e,t),a("tildes",e),e=A(e,t),a("xrange",e),e=I(e,t),a("stars",e),e),y=e=>!e||"x"===e.toLowerCase()||"*"===e,E=(e,t)=>e.trim().split(/\s+/).map((e=>b(e,t))).join(" "),b=(e,t)=>{const r=t.loose?u[l.TILDELOOSE]:u[l.TILDE];return e.replace(r,((t,r,n,i,o)=>{let s;return a("tilde",e,t,r,n,i,o),y(r)?s="":y(n)?s=`>=${r}.0.0 <${+r+1}.0.0-0`:y(i)?s=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:o?(a("replaceTilde pr",o),s=`>=${r}.${n}.${i}-${o} <${r}.${+n+1}.0-0`):s=`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`,a("tilde return",s),s}))},w=(e,t)=>e.trim().split(/\s+/).map((e=>_(e,t))).join(" "),_=(e,t)=>{a("caret",e,t);const r=t.loose?u[l.CARETLOOSE]:u[l.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,i,o,s)=>{let c;return a("caret",e,t,r,i,o,s),y(r)?c="":y(i)?c=`>=${r}.0.0${n} <${+r+1}.0.0-0`:y(o)?c="0"===r?`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.0${n} <${+r+1}.0.0-0`:s?(a("replaceCaret pr",s),c="0"===r?"0"===i?`>=${r}.${i}.${o}-${s} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}-${s} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o}-${s} <${+r+1}.0.0-0`):(a("no pr"),c="0"===r?"0"===i?`>=${r}.${i}.${o}${n} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o} <${+r+1}.0.0-0`),a("caret return",c),c}))},A=(e,t)=>(a("replaceXRanges",e,t),e.split(/\s+/).map((e=>T(e,t))).join(" ")),T=(e,t)=>{e=e.trim();const r=t.loose?u[l.XRANGELOOSE]:u[l.XRANGE];return e.replace(r,((r,n,i,o,s,c)=>{a("xRange",e,r,n,i,o,s,c);const u=y(i),l=u||y(o),h=l||y(s),f=h;return"="===n&&f&&(n=""),c=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&f?(l&&(o=0),s=0,">"===n?(n=">=",l?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===n&&(n="<",l?i=+i+1:o=+o+1),"<"===n&&(c="-0"),r=`${n+i}.${o}.${s}${c}`):l?r=`>=${i}.0.0${c} <${+i+1}.0.0-0`:h&&(r=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),a("xRange return",r),r}))},I=(e,t)=>(a("replaceStars",e,t),e.trim().replace(u[l.STAR],"")),S=(e,t)=>(a("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?l.GTE0PRE:l.GTE0],"")),x=e=>(t,r,n,i,o,s,a,c,u,l,h,f,d)=>`${r=y(n)?"":y(i)?`>=${n}.0.0${e?"-0":""}`:y(o)?`>=${n}.${i}.0${e?"-0":""}`:s?`>=${r}`:`>=${r}${e?"-0":""}`} ${c=y(u)?"":y(l)?`<${+u+1}.0.0-0`:y(h)?`<${u}.${+l+1}.0-0`:f?`<=${u}.${l}.${h}-${f}`:e?`<${u}.${l}.${+h+1}-0`:`<=${c}`}`.trim(),O=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(a(e[r].semver),e[r].semver!==s.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},3292:(e,t,r)=>{const n=r(6638),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=r(1087),{re:s,t:a}=r(9720),c=r(4681),{compareIdentifiers:u}=r(2283);class l{constructor(e,t){if(t=c(t),e instanceof l){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?s[a.LOOSE]:s[a.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof l)){if("string"==typeof e&&e===this.version)return 0;e=new l(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof l||(e=new l(e,this.options)),u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(e instanceof l||(e=new l(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return u(r,i)}while(++t)}compareBuild(e){e instanceof l||(e=new l(e,this.options));let t=0;do{const r=this.build[t],i=e.build[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return u(r,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}e.exports=l},7660:(e,t,r)=>{const n=r(8145);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},6579:(e,t,r)=>{const n=r(6355),i=r(2556),o=r(873),s=r(4148),a=r(1258),c=r(5256);e.exports=(e,t,r,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,u);case"!=":return i(e,r,u);case">":return o(e,r,u);case">=":return s(e,r,u);case"<":return a(e,r,u);case"<=":return c(e,r,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},1629:(e,t,r)=>{const n=r(3292),i=r(8145),{re:o,t:s}=r(9720);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let t;for(;(t=o[s.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&t.index+t[0].length===r.index+r[0].length||(r=t),o[s.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;o[s.COERCERTL].lastIndex=-1}else r=e.match(o[s.COERCE]);return null===r?null:i(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)}},7123:(e,t,r)=>{const n=r(3292);e.exports=(e,t,r)=>{const i=new n(e,r),o=new n(t,r);return i.compare(o)||i.compareBuild(o)}},6100:(e,t,r)=>{const n=r(7569);e.exports=(e,t)=>n(e,t,!0)},7569:(e,t,r)=>{const n=r(3292);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},3683:(e,t,r)=>{const n=r(8145),i=r(6355);e.exports=(e,t)=>{if(i(e,t))return null;{const r=n(e),i=n(t),o=r.prerelease.length||i.prerelease.length,s=o?"pre":"",a=o?"prerelease":"";for(const e in r)if(("major"===e||"minor"===e||"patch"===e)&&r[e]!==i[e])return s+e;return a}}},6355:(e,t,r)=>{const n=r(7569);e.exports=(e,t,r)=>0===n(e,t,r)},873:(e,t,r)=>{const n=r(7569);e.exports=(e,t,r)=>n(e,t,r)>0},4148:(e,t,r)=>{const n=r(7569);e.exports=(e,t,r)=>n(e,t,r)>=0},5979:(e,t,r)=>{const n=r(3292);e.exports=(e,t,r,i)=>{"string"==typeof r&&(i=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,i).version}catch(e){return null}}},1258:(e,t,r)=>{const n=r(7569);e.exports=(e,t,r)=>n(e,t,r)<0},5256:(e,t,r)=>{const n=r(7569);e.exports=(e,t,r)=>n(e,t,r)<=0},1586:(e,t,r)=>{const n=r(3292);e.exports=(e,t)=>new n(e,t).major},8664:(e,t,r)=>{const n=r(3292);e.exports=(e,t)=>new n(e,t).minor},2556:(e,t,r)=>{const n=r(7569);e.exports=(e,t,r)=>0!==n(e,t,r)},8145:(e,t,r)=>{const{MAX_LENGTH:n}=r(1087),{re:i,t:o}=r(9720),s=r(3292),a=r(4681);e.exports=(e,t)=>{if(t=a(t),e instanceof s)return e;if("string"!=typeof e)return null;if(e.length>n)return null;if(!(t.loose?i[o.LOOSE]:i[o.FULL]).test(e))return null;try{return new s(e,t)}catch(e){return null}}},9810:(e,t,r)=>{const n=r(3292);e.exports=(e,t)=>new n(e,t).patch},262:(e,t,r)=>{const n=r(8145);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},7215:(e,t,r)=>{const n=r(7569);e.exports=(e,t,r)=>n(t,e,r)},1387:(e,t,r)=>{const n=r(7123);e.exports=(e,t)=>e.sort(((e,r)=>n(r,e,t)))},3286:(e,t,r)=>{const n=r(3514);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},3731:(e,t,r)=>{const n=r(7123);e.exports=(e,t)=>e.sort(((e,r)=>n(e,r,t)))},7522:(e,t,r)=>{const n=r(8145);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},3261:(e,t,r)=>{const n=r(9720);e.exports={re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:r(1087).SEMVER_SPEC_VERSION,SemVer:r(3292),compareIdentifiers:r(2283).compareIdentifiers,rcompareIdentifiers:r(2283).rcompareIdentifiers,parse:r(8145),valid:r(7522),clean:r(7660),inc:r(5979),diff:r(3683),major:r(1586),minor:r(8664),patch:r(9810),prerelease:r(262),compare:r(7569),rcompare:r(7215),compareLoose:r(6100),compareBuild:r(7123),sort:r(3731),rsort:r(1387),gt:r(873),lt:r(1258),eq:r(6355),neq:r(2556),gte:r(4148),lte:r(5256),cmp:r(6579),coerce:r(1629),Comparator:r(4765),Range:r(3514),satisfies:r(3286),toComparators:r(4275),maxSatisfying:r(3206),minSatisfying:r(7879),minVersion:r(8541),validRange:r(9240),outside:r(922),gtr:r(6291),ltr:r(5262),intersects:r(3780),simplifyRange:r(5002),subset:r(2761)}},1087:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:t,MAX_SAFE_COMPONENT_LENGTH:16}},6638:(e,t,r)=>{var n=r(8283);const i="object"==typeof n&&n.env&&n.env.NODE_DEBUG&&/\bsemver\b/i.test(n.env.NODE_DEBUG)?(...e)=>{}:()=>{};e.exports=i},2283:e=>{const t=/^[0-9]+$/,r=(e,r)=>{const n=t.test(e),i=t.test(r);return n&&i&&(e=+e,r=+r),e===r?0:n&&!i?-1:i&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},4681:e=>{const t=["includePrerelease","loose","rtl"];e.exports=e=>e?"object"!=typeof e?{loose:!0}:t.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{}},9720:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:n}=r(1087),i=r(6638),o=(t=e.exports={}).re=[],s=t.src=[],a=t.t={};let c=0;const u=(e,t,r)=>{const n=c++;i(e,n,t),a[e]=n,s[n]=t,o[n]=new RegExp(t,r?"g":void 0)};u("NUMERICIDENTIFIER","0|[1-9]\\d*"),u("NUMERICIDENTIFIERLOOSE","[0-9]+"),u("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),u("MAINVERSION",`(${s[a.NUMERICIDENTIFIER]})\\.(${s[a.NUMERICIDENTIFIER]})\\.(${s[a.NUMERICIDENTIFIER]})`),u("MAINVERSIONLOOSE",`(${s[a.NUMERICIDENTIFIERLOOSE]})\\.(${s[a.NUMERICIDENTIFIERLOOSE]})\\.(${s[a.NUMERICIDENTIFIERLOOSE]})`),u("PRERELEASEIDENTIFIER",`(?:${s[a.NUMERICIDENTIFIER]}|${s[a.NONNUMERICIDENTIFIER]})`),u("PRERELEASEIDENTIFIERLOOSE",`(?:${s[a.NUMERICIDENTIFIERLOOSE]}|${s[a.NONNUMERICIDENTIFIER]})`),u("PRERELEASE",`(?:-(${s[a.PRERELEASEIDENTIFIER]}(?:\\.${s[a.PRERELEASEIDENTIFIER]})*))`),u("PRERELEASELOOSE",`(?:-?(${s[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[a.PRERELEASEIDENTIFIERLOOSE]})*))`),u("BUILDIDENTIFIER","[0-9A-Za-z-]+"),u("BUILD",`(?:\\+(${s[a.BUILDIDENTIFIER]}(?:\\.${s[a.BUILDIDENTIFIER]})*))`),u("FULLPLAIN",`v?${s[a.MAINVERSION]}${s[a.PRERELEASE]}?${s[a.BUILD]}?`),u("FULL",`^${s[a.FULLPLAIN]}$`),u("LOOSEPLAIN",`[v=\\s]*${s[a.MAINVERSIONLOOSE]}${s[a.PRERELEASELOOSE]}?${s[a.BUILD]}?`),u("LOOSE",`^${s[a.LOOSEPLAIN]}$`),u("GTLT","((?:<|>)?=?)"),u("XRANGEIDENTIFIERLOOSE",`${s[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),u("XRANGEIDENTIFIER",`${s[a.NUMERICIDENTIFIER]}|x|X|\\*`),u("XRANGEPLAIN",`[v=\\s]*(${s[a.XRANGEIDENTIFIER]})(?:\\.(${s[a.XRANGEIDENTIFIER]})(?:\\.(${s[a.XRANGEIDENTIFIER]})(?:${s[a.PRERELEASE]})?${s[a.BUILD]}?)?)?`),u("XRANGEPLAINLOOSE",`[v=\\s]*(${s[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[a.XRANGEIDENTIFIERLOOSE]})(?:${s[a.PRERELEASELOOSE]})?${s[a.BUILD]}?)?)?`),u("XRANGE",`^${s[a.GTLT]}\\s*${s[a.XRANGEPLAIN]}$`),u("XRANGELOOSE",`^${s[a.GTLT]}\\s*${s[a.XRANGEPLAINLOOSE]}$`),u("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),u("COERCERTL",s[a.COERCE],!0),u("LONETILDE","(?:~>?)"),u("TILDETRIM",`(\\s*)${s[a.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",u("TILDE",`^${s[a.LONETILDE]}${s[a.XRANGEPLAIN]}$`),u("TILDELOOSE",`^${s[a.LONETILDE]}${s[a.XRANGEPLAINLOOSE]}$`),u("LONECARET","(?:\\^)"),u("CARETTRIM",`(\\s*)${s[a.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",u("CARET",`^${s[a.LONECARET]}${s[a.XRANGEPLAIN]}$`),u("CARETLOOSE",`^${s[a.LONECARET]}${s[a.XRANGEPLAINLOOSE]}$`),u("COMPARATORLOOSE",`^${s[a.GTLT]}\\s*(${s[a.LOOSEPLAIN]})$|^$`),u("COMPARATOR",`^${s[a.GTLT]}\\s*(${s[a.FULLPLAIN]})$|^$`),u("COMPARATORTRIM",`(\\s*)${s[a.GTLT]}\\s*(${s[a.LOOSEPLAIN]}|${s[a.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",u("HYPHENRANGE",`^\\s*(${s[a.XRANGEPLAIN]})\\s+-\\s+(${s[a.XRANGEPLAIN]})\\s*$`),u("HYPHENRANGELOOSE",`^\\s*(${s[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[a.XRANGEPLAINLOOSE]})\\s*$`),u("STAR","(<|>)?=?\\s*\\*"),u("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),u("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},5271:(e,t,r)=>{"use strict";const n=r(1123),i=Symbol("max"),o=Symbol("length"),s=Symbol("lengthCalculator"),a=Symbol("allowStale"),c=Symbol("maxAge"),u=Symbol("dispose"),l=Symbol("noDisposeOnSet"),h=Symbol("lruList"),f=Symbol("cache"),d=Symbol("updateAgeOnGet"),p=()=>1;const m=(e,t,r)=>{const n=e[f].get(t);if(n){const t=n.value;if(g(e,t)){if(y(e,n),!e[a])return}else r&&(e[d]&&(n.value.now=Date.now()),e[h].unshiftNode(n));return t.value}},g=(e,t)=>{if(!t||!t.maxAge&&!e[c])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[c]&&r>e[c]},v=e=>{if(e[o]>e[i])for(let t=e[h].tail;e[o]>e[i]&&null!==t;){const r=t.prev;y(e,t),t=r}},y=(e,t)=>{if(t){const r=t.value;e[u]&&e[u](r.key,r.value),e[o]-=r.length,e[f].delete(r.key),e[h].removeNode(t)}};class E{constructor(e,t,r,n,i){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=i||0}}const b=(e,t,r,n)=>{let i=r.value;g(e,i)&&(y(e,r),e[a]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[i]=e.max||1/0;const t=e.length||p;if(this[s]="function"!=typeof t?p:t,this[a]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[c]=e.maxAge||0,this[u]=e.dispose,this[l]=e.noDisposeOnSet||!1,this[d]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[i]=e||1/0,v(this)}get max(){return this[i]}set allowStale(e){this[a]=!!e}get allowStale(){return this[a]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[c]=e,v(this)}get maxAge(){return this[c]}set lengthCalculator(e){"function"!=typeof e&&(e=p),e!==this[s]&&(this[s]=e,this[o]=0,this[h].forEach((e=>{e.length=this[s](e.value,e.key),this[o]+=e.length}))),v(this)}get lengthCalculator(){return this[s]}get length(){return this[o]}get itemCount(){return this[h].length}rforEach(e,t){t=t||this;for(let r=this[h].tail;null!==r;){const n=r.prev;b(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[h].head;null!==r;){const n=r.next;b(this,e,r,t),r=n}}keys(){return this[h].toArray().map((e=>e.key))}values(){return this[h].toArray().map((e=>e.value))}reset(){this[u]&&this[h]&&this[h].length&&this[h].forEach((e=>this[u](e.key,e.value))),this[f]=new Map,this[h]=new n,this[o]=0}dump(){return this[h].map((e=>!g(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[h]}set(e,t,r){if((r=r||this[c])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,a=this[s](t,e);if(this[f].has(e)){if(a>this[i])return y(this,this[f].get(e)),!1;const s=this[f].get(e).value;return this[u]&&(this[l]||this[u](e,s.value)),s.now=n,s.maxAge=r,s.value=t,this[o]+=a-s.length,s.length=a,this.get(e),v(this),!0}const d=new E(e,t,a,n,r);return d.length>this[i]?(this[u]&&this[u](e,t),!1):(this[o]+=d.length,this[h].unshift(d),this[f].set(e,this[h].head),v(this),!0)}has(e){if(!this[f].has(e))return!1;const t=this[f].get(e).value;return!g(this,t)}get(e){return m(this,e,!0)}peek(e){return m(this,e,!1)}pop(){const e=this[h].tail;return e?(y(this,e),e.value):null}del(e){y(this,this[f].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const n=e[r],i=n.e||0;if(0===i)this.set(n.k,n.v);else{const e=i-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[f].forEach(((e,t)=>m(this,t,!1)))}}},6291:(e,t,r)=>{const n=r(922);e.exports=(e,t,r)=>n(e,t,">",r)},3780:(e,t,r)=>{const n=r(3514);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t))},5262:(e,t,r)=>{const n=r(922);e.exports=(e,t,r)=>n(e,t,"<",r)},3206:(e,t,r)=>{const n=r(3292),i=r(3514);e.exports=(e,t,r)=>{let o=null,s=null,a=null;try{a=new i(t,r)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(o&&-1!==s.compare(e)||(o=e,s=new n(o,r)))})),o}},7879:(e,t,r)=>{const n=r(3292),i=r(3514);e.exports=(e,t,r)=>{let o=null,s=null,a=null;try{a=new i(t,r)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(o&&1!==s.compare(e)||(o=e,s=new n(o,r)))})),o}},8541:(e,t,r)=>{const n=r(3292),i=r(3514),o=r(873);e.exports=(e,t)=>{e=new i(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const i=e.set[t];let s=null;i.forEach((e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!o(t,s)||(s=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!s||r&&!o(r,s)||(r=s)}return r&&e.test(r)?r:null}},922:(e,t,r)=>{const n=r(3292),i=r(4765),{ANY:o}=i,s=r(3514),a=r(3286),c=r(873),u=r(1258),l=r(5256),h=r(4148);e.exports=(e,t,r,f)=>{let d,p,m,g,v;switch(e=new n(e,f),t=new s(t,f),r){case">":d=c,p=l,m=u,g=">",v=">=";break;case"<":d=u,p=h,m=c,g="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,f))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let s=null,a=null;if(n.forEach((e=>{e.semver===o&&(e=new i(">=0.0.0")),s=s||e,a=a||e,d(e.semver,s.semver,f)?s=e:m(e.semver,a.semver,f)&&(a=e)})),s.operator===g||s.operator===v)return!1;if((!a.operator||a.operator===g)&&p(e,a.semver))return!1;if(a.operator===v&&m(e,a.semver))return!1}return!0}},5002:(e,t,r)=>{const n=r(3286),i=r(7569);e.exports=(e,t,r)=>{const o=[];let s=null,a=null;const c=e.sort(((e,t)=>i(e,t,r)));for(const e of c){n(e,t,r)?(a=e,s||(s=e)):(a&&o.push([s,a]),a=null,s=null)}s&&o.push([s,null]);const u=[];for(const[e,t]of o)e===t?u.push(e):t||e!==c[0]?t?e===c[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const l=u.join(" || "),h="string"==typeof t.raw?t.raw:String(t);return l.length<h.length?l:t}},2761:(e,t,r)=>{const n=r(3514),i=r(4765),{ANY:o}=i,s=r(3286),a=r(7569),c=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===o){if(1===t.length&&t[0].semver===o)return!0;e=r.includePrerelease?[new i(">=0.0.0-0")]:[new i(">=0.0.0")]}if(1===t.length&&t[0].semver===o){if(r.includePrerelease)return!0;t=[new i(">=0.0.0")]}const n=new Set;let c,h,f,d,p,m,g;for(const t of e)">"===t.operator||">="===t.operator?c=u(c,t,r):"<"===t.operator||"<="===t.operator?h=l(h,t,r):n.add(t.semver);if(n.size>1)return null;if(c&&h){if(f=a(c.semver,h.semver,r),f>0)return null;if(0===f&&(">="!==c.operator||"<="!==h.operator))return null}for(const e of n){if(c&&!s(e,String(c),r))return null;if(h&&!s(e,String(h),r))return null;for(const n of t)if(!s(e,String(n),r))return!1;return!0}let v=!(!h||r.includePrerelease||!h.semver.prerelease.length)&&h.semver,y=!(!c||r.includePrerelease||!c.semver.prerelease.length)&&c.semver;v&&1===v.prerelease.length&&"<"===h.operator&&0===v.prerelease[0]&&(v=!1);for(const e of t){if(g=g||">"===e.operator||">="===e.operator,m=m||"<"===e.operator||"<="===e.operator,c)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),">"===e.operator||">="===e.operator){if(d=u(c,e,r),d===e&&d!==c)return!1}else if(">="===c.operator&&!s(c.semver,String(e),r))return!1;if(h)if(v&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===v.major&&e.semver.minor===v.minor&&e.semver.patch===v.patch&&(v=!1),"<"===e.operator||"<="===e.operator){if(p=l(h,e,r),p===e&&p!==h)return!1}else if("<="===h.operator&&!s(h.semver,String(e),r))return!1;if(!e.operator&&(h||c)&&0!==f)return!1}return!(c&&m&&!h&&0!==f)&&(!(h&&g&&!c&&0!==f)&&(!y&&!v))},u=(e,t,r)=>{if(!e)return t;const n=a(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},l=(e,t,r)=>{if(!e)return t;const n=a(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let i=!1;e:for(const n of e.set){for(const e of t.set){const t=c(n,e,r);if(i=i||null!==t,t)continue e}if(i)return!1}return!0}},4275:(e,t,r)=>{const n=r(3514);e.exports=(e,t)=>new n(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},9240:(e,t,r)=>{const n=r(3514);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},9397:e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},4489:(e,t,r)=>{"use strict";var n=r(7092),i=r(7427),o=r(4010),s=r(2527);function a(e){return e.call.bind(e)}var c="undefined"!=typeof BigInt,u="undefined"!=typeof Symbol,l=a(Object.prototype.toString),h=a(Number.prototype.valueOf),f=a(String.prototype.valueOf),d=a(Boolean.prototype.valueOf);if(c)var p=a(BigInt.prototype.valueOf);if(u)var m=a(Symbol.prototype.valueOf);function g(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function v(e){return"[object Map]"===l(e)}function y(e){return"[object Set]"===l(e)}function E(e){return"[object WeakMap]"===l(e)}function b(e){return"[object WeakSet]"===l(e)}function w(e){return"[object ArrayBuffer]"===l(e)}function _(e){return"undefined"!=typeof ArrayBuffer&&(w.working?w(e):e instanceof ArrayBuffer)}function A(e){return"[object DataView]"===l(e)}function T(e){return"undefined"!=typeof DataView&&(A.working?A(e):e instanceof DataView)}t.isArgumentsObject=n,t.isGeneratorFunction=i,t.isTypedArray=s,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):s(e)||T(e)},t.isUint8Array=function(e){return"Uint8Array"===o(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===o(e)},t.isUint16Array=function(e){return"Uint16Array"===o(e)},t.isUint32Array=function(e){return"Uint32Array"===o(e)},t.isInt8Array=function(e){return"Int8Array"===o(e)},t.isInt16Array=function(e){return"Int16Array"===o(e)},t.isInt32Array=function(e){return"Int32Array"===o(e)},t.isFloat32Array=function(e){return"Float32Array"===o(e)},t.isFloat64Array=function(e){return"Float64Array"===o(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===o(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===o(e)},v.working="undefined"!=typeof Map&&v(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(v.working?v(e):e instanceof Map)},y.working="undefined"!=typeof Set&&y(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(y.working?y(e):e instanceof Set)},E.working="undefined"!=typeof WeakMap&&E(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(E.working?E(e):e instanceof WeakMap)},b.working="undefined"!=typeof WeakSet&&b(new WeakSet),t.isWeakSet=function(e){return b(e)},w.working="undefined"!=typeof ArrayBuffer&&w(new ArrayBuffer),t.isArrayBuffer=_,A.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&A(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=T;var I="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function S(e){return"[object SharedArrayBuffer]"===l(e)}function x(e){return void 0!==I&&(void 0===S.working&&(S.working=S(new I)),S.working?S(e):e instanceof I)}function O(e){return g(e,h)}function R(e){return g(e,f)}function k(e){return g(e,d)}function N(e){return c&&g(e,p)}function C(e){return u&&g(e,m)}t.isSharedArrayBuffer=x,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===l(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===l(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===l(e)},t.isGeneratorObject=function(e){return"[object Generator]"===l(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===l(e)},t.isNumberObject=O,t.isStringObject=R,t.isBooleanObject=k,t.isBigIntObject=N,t.isSymbolObject=C,t.isBoxedPrimitive=function(e){return O(e)||R(e)||k(e)||N(e)||C(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(_(e)||x(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},5663:(e,t,r)=>{var n=r(8283),i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},o=/%[sdj%]/g;t.format=function(e){if(!E(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(u(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,s=String(e).replace(o,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),a=n[r];r<i;a=n[++r])v(a)||!_(a)?s+=" "+a:s+=" "+u(a);return s},t.deprecate=function(e,r){if(void 0!==n&&!0===n.noDeprecation)return e;if(void 0===n)return function(){return t.deprecate(e,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation,i=!0}return e.apply(this,arguments)}};var s={},a=/^$/;if(n.env.NODE_DEBUG){var c=n.env.NODE_DEBUG;c=c.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+c+"$","i")}function u(e,r){var n={seen:[],stylize:h};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(r)?n.showHidden=r:r&&t._extend(n,r),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=l),f(n,e,n.depth)}function l(e,t){var r=u.styles[t];return r?"\x1b["+u.colors[r][0]+"m"+e+"\x1b["+u.colors[r][1]+"m":e}function h(e,t){return e}function f(e,r,n){if(e.customInspect&&r&&I(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return E(i)||(i=f(e,i,n)),i}var o=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(E(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(y(t))return e.stylize(""+t,"number");if(g(t))return e.stylize(""+t,"boolean");if(v(t))return e.stylize("null","null")}(e,r);if(o)return o;var s=Object.keys(r),a=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),T(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return d(r);if(0===s.length){if(I(r)){var c=r.name?": "+r.name:"";return e.stylize("[Function"+c+"]","special")}if(w(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(A(r))return e.stylize(Date.prototype.toString.call(r),"date");if(T(r))return d(r)}var u,l="",h=!1,_=["{","}"];(m(r)&&(h=!0,_=["[","]"]),I(r))&&(l=" [Function"+(r.name?": "+r.name:"")+"]");return w(r)&&(l=" "+RegExp.prototype.toString.call(r)),A(r)&&(l=" "+Date.prototype.toUTCString.call(r)),T(r)&&(l=" "+d(r)),0!==s.length||h&&0!=r.length?n<0?w(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),u=h?function(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)x(t,String(s))?o.push(p(e,t,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(p(e,t,r,n,i,!0))})),o}(e,r,n,a,s):s.map((function(t){return p(e,r,n,a,t,h)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(u,l,_)):_[0]+l+_[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,r,n,i,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),x(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(a=v(r)?f(e,c.value,null):f(e,c.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),b(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function m(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function v(e){return null===e}function y(e){return"number"==typeof e}function E(e){return"string"==typeof e}function b(e){return void 0===e}function w(e){return _(e)&&"[object RegExp]"===S(e)}function _(e){return"object"==typeof e&&null!==e}function A(e){return _(e)&&"[object Date]"===S(e)}function T(e){return _(e)&&("[object Error]"===S(e)||e instanceof Error)}function I(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}t.debuglog=function(e){if(e=e.toUpperCase(),!s[e])if(a.test(e)){n.pid;s[e]=function(){t.format.apply(t,arguments)}}else s[e]=function(){};return s[e]},t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=r(4489),t.isArray=m,t.isBoolean=g,t.isNull=v,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=E,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=b,t.isRegExp=w,t.types.isRegExp=w,t.isObject=_,t.isDate=A,t.types.isDate=A,t.isError=T,t.types.isNativeError=T,t.isFunction=I,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(9397);function x(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){},t.inherits=r(8575),t._extend=function(e,t){if(!t||!_(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var O="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function R(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(O&&e[O]){var t;if("function"!=typeof(t=e[O]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,O,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,i)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),O&&Object.defineProperty(t,O,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=O,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var i=t.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};e.apply(this,t).then((function(e){n.nextTick(s.bind(null,null,e))}),(function(e){n.nextTick(R.bind(null,e,s))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,i(e)),t}},1935:function(e,t){var r,n,i;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=[e],r=function(e){"use strict";if("object"!=typeof globalThis||"object"!=typeof chrome||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const t="The message port closed before a response was received.",r=e=>{const r={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(r).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class n extends WeakMap{constructor(e,t){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const i=e=>e&&"object"==typeof e&&"function"==typeof e.then,o=(t,r)=>(...n)=>{e.runtime.lastError?t.reject(new Error(e.runtime.lastError.message)):r.singleCallbackArg||n.length<=1&&!1!==r.singleCallbackArg?t.resolve(n[0]):t.resolve(n)},s=e=>1==e?"argument":"arguments",a=(e,t)=>function(r,...n){if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${s(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${s(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((i,s)=>{if(t.fallbackToNoCallback)try{r[e](...n,o({resolve:i,reject:s},t))}catch(o){r[e](...n),t.fallbackToNoCallback=!1,t.noCallback=!0,i()}else t.noCallback?(r[e](...n),i()):r[e](...n,o({resolve:i,reject:s},t))}))},c=(e,t,r)=>new Proxy(t,{apply:(t,n,i)=>r.call(n,e,...i)});let u=Function.call.bind(Object.prototype.hasOwnProperty);const l=(e,t={},r={})=>{let n=Object.create(null),i={has:(t,r)=>r in e||r in n,get(i,o,s){if(o in n)return n[o];if(!(o in e))return;let h=e[o];if("function"==typeof h)if("function"==typeof t[o])h=c(e,e[o],t[o]);else if(u(r,o)){let t=a(o,r[o]);h=c(e,e[o],t)}else h=h.bind(e);else if("object"==typeof h&&null!==h&&(u(t,o)||u(r,o)))h=l(h,t[o],r[o]);else{if(!u(r,"*"))return Object.defineProperty(n,o,{configurable:!0,enumerable:!0,get:()=>e[o],set(t){e[o]=t}}),h;h=l(h,t[o],r["*"])}return n[o]=h,h},set:(t,r,i,o)=>(r in n?n[r]=i:e[r]=i,!0),defineProperty:(e,t,r)=>Reflect.defineProperty(n,t,r),deleteProperty:(e,t)=>Reflect.deleteProperty(n,t)},o=Object.create(e);return new Proxy(o,i)},h=e=>({addListener(t,r,...n){t.addListener(e.get(r),...n)},hasListener:(t,r)=>t.hasListener(e.get(r)),removeListener(t,r){t.removeListener(e.get(r))}}),f=new n((e=>"function"!=typeof e?e:function(t){const r=l(t,{},{getContent:{minArgs:0,maxArgs:0}});e(r)}));let d=!1;const p=new n((e=>"function"!=typeof e?e:function(t,r,n){let o,s,a=!1,c=new Promise((e=>{o=function(t){d||(d=!0),a=!0,e(t)}}));try{s=e(t,r,o)}catch(e){s=Promise.reject(e)}const u=!0!==s&&i(s);if(!0!==s&&!u&&!a)return!1;const l=e=>{e.then((e=>{n(e)}),(e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",n({__mozWebExtensionPolyfillReject__:!0,message:t})})).catch((e=>{}))};return l(u?s:c),!0})),m=({reject:r,resolve:n},i)=>{e.runtime.lastError?e.runtime.lastError.message===t?n():r(new Error(e.runtime.lastError.message)):i&&i.__mozWebExtensionPolyfillReject__?r(new Error(i.message)):n(i)},g=(e,t,r,...n)=>{if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${s(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${s(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((e,t)=>{const i=m.bind(null,{resolve:e,reject:t});n.push(i),r.sendMessage(...n)}))},v={devtools:{network:{onRequestFinished:h(f)}},runtime:{onMessage:h(p),onMessageExternal:h(p),sendMessage:g.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:g.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},y={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return r.privacy={network:{"*":y},services:{"*":y},websites:{"*":y}},l(e,v,r)};e.exports=r(chrome)}else e.exports=globalThis.browser},void 0===(i="function"==typeof r?r.apply(t,n):r)||(e.exports=i)},4010:(e,t,r)=>{"use strict";var n=r(4843),i=r(4343),o=r(7615),s=o("Object.prototype.toString"),a=r(4111)(),c="undefined"==typeof globalThis?r.g:globalThis,u=i(),l=o("String.prototype.slice"),h={},f=r(7065),d=Object.getPrototypeOf;a&&f&&d&&n(u,(function(e){if("function"==typeof c[e]){var t=new c[e];if(Symbol.toStringTag in t){var r=d(t),n=f(r,Symbol.toStringTag);if(!n){var i=d(r);n=f(i,Symbol.toStringTag)}h[e]=n.get}}}));var p=r(2527);e.exports=function(e){return!!p(e)&&(a&&Symbol.toStringTag in e?function(e){var t=!1;return n(h,(function(r,n){if(!t)try{var i=r.call(e);i===n&&(t=i)}catch(e){}})),t}(e):l(s(e),8,-1))}},7876:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},1123:(e,t,r)=>{"use strict";function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)t.push(arguments[r]);return t}function i(e,t,r){var n=t===e.head?new a(r,null,t,e):new a(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}function o(e,t){e.tail=new a(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function s(e,t){e.head=new a(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function a(e,t,r,n){if(!(this instanceof a))return new a(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=a,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)s(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,i=this.head;null!==i;)r.push(e.call(t,i.value,this)),i=i.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,i=this.tail;null!==i;)r.push(e.call(t,i.value,this)),i=i.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var i=0;null!==n;i++)r=e(r,n.value,i),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var i=this.length-1;null!==n;i--)r=e(r,n.value,i),n=n.prev;return r},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,o=this.head;null!==o&&i<e;i++)o=o.next;for(;null!==o&&i<t;i++,o=o.next)r.push(o.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,o=this.tail;null!==o&&i>t;i--)o=o.prev;for(;null!==o&&i>e;i--,o=o.prev)r.push(o.value);return r},n.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,o=this.head;null!==o&&n<e;n++)o=o.next;var s=[];for(n=0;o&&n<t;n++)s.push(o.value),o=this.removeNode(o);null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(n=0;n<r.length;n++)o=i(this,o,r[n]);return s},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(7876)(n)}catch(e){}},4343:(e,t,r)=>{"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],i="undefined"==typeof globalThis?r.g:globalThis;e.exports=function(){for(var e=[],t=0;t<n.length;t++)"function"==typeof i[n[t]]&&(e[e.length]=n[t]);return e}},7065:(e,t,r)=>{"use strict";var n=r(1801)("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch(e){n=null}e.exports=n},741:function(e,t,r){e.exports=function(){var e="1.13.4",t="object"==typeof self&&self.self===self&&self||"object"==typeof r.g&&r.g.global===r.g&&r.g||Function("return this")()||{},n=Array.prototype,i=Object.prototype,o="undefined"!=typeof Symbol?Symbol.prototype:null,s=n.push,a=n.slice,c=i.toString,u=i.hasOwnProperty,l="undefined"!=typeof ArrayBuffer,h="undefined"!=typeof DataView,f=Array.isArray,d=Object.keys,p=Object.create,m=l&&ArrayBuffer.isView,g=isNaN,v=isFinite,y=!{toString:null}.propertyIsEnumerable("toString"),E=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],b=Math.pow(2,53)-1;function w(e,t){return t=null==t?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=n,e.apply(this,o)}}function _(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function A(e){return void 0===e}function T(e){return!0===e||!1===e||"[object Boolean]"===c.call(e)}function I(e){var t="[object "+e+"]";return function(e){return c.call(e)===t}}var S=I("String"),x=I("Number"),O=I("Date"),R=I("RegExp"),k=I("Error"),N=I("Symbol"),C=I("ArrayBuffer"),D=I("Function"),L=t.document&&t.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof L&&(D=function(e){return"function"==typeof e||!1});var B=D,P=I("Object"),U=h&&P(new DataView(new ArrayBuffer(8))),M="undefined"!=typeof Map&&P(new Map),j=I("DataView"),F=U?function(e){return null!=e&&B(e.getInt8)&&C(e.buffer)}:j,V=f||I("Array");function $(e,t){return null!=e&&u.call(e,t)}var z=I("Arguments");!function(){z(arguments)||(z=function(e){return $(e,"callee")})}();var G=z;function q(e){return x(e)&&g(e)}function H(e){return function(){return e}}function W(e){return function(t){var r=e(t);return"number"==typeof r&&r>=0&&r<=b}}function K(e){return function(t){return null==t?void 0:t[e]}}var J=K("byteLength"),Y=W(J),X=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,Z=l?function(e){return m?m(e)&&!F(e):Y(e)&&X.test(c.call(e))}:H(!1),Q=K("length");function ee(e,t){t=function(e){for(var t={},r=e.length,n=0;n<r;++n)t[e[n]]=!0;return{contains:function(e){return!0===t[e]},push:function(r){return t[r]=!0,e.push(r)}}}(t);var r=E.length,n=e.constructor,o=B(n)&&n.prototype||i,s="constructor";for($(e,s)&&!t.contains(s)&&t.push(s);r--;)(s=E[r])in e&&e[s]!==o[s]&&!t.contains(s)&&t.push(s)}function te(e){if(!_(e))return[];if(d)return d(e);var t=[];for(var r in e)$(e,r)&&t.push(r);return y&&ee(e,t),t}function re(e,t){var r=te(t),n=r.length;if(null==e)return!n;for(var i=Object(e),o=0;o<n;o++){var s=r[o];if(t[s]!==i[s]||!(s in i))return!1}return!0}function ne(e){return e instanceof ne?e:this instanceof ne?void(this._wrapped=e):new ne(e)}function ie(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,J(e))}ne.VERSION=e,ne.prototype.value=function(){return this._wrapped},ne.prototype.valueOf=ne.prototype.toJSON=ne.prototype.value,ne.prototype.toString=function(){return String(this._wrapped)};var oe="[object DataView]";function se(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&function e(t,r,n,i){t instanceof ne&&(t=t._wrapped),r instanceof ne&&(r=r._wrapped);var s=c.call(t);if(s!==c.call(r))return!1;if(U&&"[object Object]"==s&&F(t)){if(!F(r))return!1;s=oe}switch(s){case"[object RegExp]":case"[object String]":return""+t==""+r;case"[object Number]":return+t!=+t?+r!=+r:0==+t?1/+t==1/r:+t==+r;case"[object Date]":case"[object Boolean]":return+t==+r;case"[object Symbol]":return o.valueOf.call(t)===o.valueOf.call(r);case"[object ArrayBuffer]":case oe:return e(ie(t),ie(r),n,i)}var a="[object Array]"===s;if(!a&&Z(t)){if(J(t)!==J(r))return!1;if(t.buffer===r.buffer&&t.byteOffset===r.byteOffset)return!0;a=!0}if(!a){if("object"!=typeof t||"object"!=typeof r)return!1;var u=t.constructor,l=r.constructor;if(u!==l&&!(B(u)&&u instanceof u&&B(l)&&l instanceof l)&&"constructor"in t&&"constructor"in r)return!1}i=i||[];for(var h=(n=n||[]).length;h--;)if(n[h]===t)return i[h]===r;if(n.push(t),i.push(r),a){if((h=t.length)!==r.length)return!1;for(;h--;)if(!se(t[h],r[h],n,i))return!1}else{var f,d=te(t);if(h=d.length,te(r).length!==h)return!1;for(;h--;)if(!$(r,f=d[h])||!se(t[f],r[f],n,i))return!1}return n.pop(),i.pop(),!0}(e,t,r,n)}function ae(e){if(!_(e))return[];var t=[];for(var r in e)t.push(r);return y&&ee(e,t),t}function ce(e){var t=Q(e);return function(r){if(null==r)return!1;var n=ae(r);if(Q(n))return!1;for(var i=0;i<t;i++)if(!B(r[e[i]]))return!1;return e!==pe||!B(r[ue])}}var ue="forEach",le="has",he=["clear","delete"],fe=["get",le,"set"],de=he.concat(ue,fe),pe=he.concat(fe),me=["add"].concat(he,ue,le),ge=M?ce(de):I("Map"),ve=M?ce(pe):I("WeakMap"),ye=M?ce(me):I("Set"),Ee=I("WeakSet");function be(e){for(var t=te(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n}function we(e){for(var t={},r=te(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t}function _e(e){var t=[];for(var r in e)B(e[r])&&t.push(r);return t.sort()}function Ae(e,t){return function(r){var n=arguments.length;if(t&&(r=Object(r)),n<2||null==r)return r;for(var i=1;i<n;i++)for(var o=arguments[i],s=e(o),a=s.length,c=0;c<a;c++){var u=s[c];t&&void 0!==r[u]||(r[u]=o[u])}return r}}var Te=Ae(ae),Ie=Ae(te),Se=Ae(ae,!0);function xe(e){if(!_(e))return{};if(p)return p(e);var t=function(){};t.prototype=e;var r=new t;return t.prototype=null,r}function Oe(e){return V(e)?e:[e]}function Re(e){return ne.toPath(e)}function ke(e,t){for(var r=t.length,n=0;n<r;n++){if(null==e)return;e=e[t[n]]}return r?e:void 0}function Ne(e,t,r){var n=ke(e,Re(t));return A(n)?r:n}function Ce(e){return e}function De(e){return e=Ie({},e),function(t){return re(t,e)}}function Le(e){return e=Re(e),function(t){return ke(t,e)}}function Be(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,o){return e.call(t,r,n,i,o)}}return function(){return e.apply(t,arguments)}}function Pe(e,t,r){return null==e?Ce:B(e)?Be(e,t,r):_(e)&&!V(e)?De(e):Le(e)}function Ue(e,t){return Pe(e,t,1/0)}function Me(e,t,r){return ne.iteratee!==Ue?ne.iteratee(e,t):Pe(e,t,r)}function je(){}function Fe(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}ne.toPath=Oe,ne.iteratee=Ue;var Ve=Date.now||function(){return(new Date).getTime()};function $e(e){var t=function(t){return e[t]},r="(?:"+te(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(i,t):e}}var ze={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Ge=$e(ze),qe=$e(we(ze)),He=ne.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},We=/(.)^/,Ke={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Je=/\\|'|\r|\n|\u2028|\u2029/g;function Ye(e){return"\\"+Ke[e]}var Xe=/^\s*(\w|\$)+\s*$/,Ze=0;function Qe(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var o=xe(e.prototype),s=e.apply(o,i);return _(s)?s:o}var et=w((function(e,t){var r=et.placeholder,n=function(){for(var i=0,o=t.length,s=Array(o),a=0;a<o;a++)s[a]=t[a]===r?arguments[i++]:t[a];for(;i<arguments.length;)s.push(arguments[i++]);return Qe(e,n,this,this,s)};return n}));et.placeholder=ne;var tt=w((function(e,t,r){if(!B(e))throw new TypeError("Bind must be called on a function");var n=w((function(i){return Qe(e,n,t,this,r.concat(i))}));return n})),rt=W(Q);function nt(e,t,r,n){if(n=n||[],t||0===t){if(t<=0)return n.concat(e)}else t=1/0;for(var i=n.length,o=0,s=Q(e);o<s;o++){var a=e[o];if(rt(a)&&(V(a)||G(a)))if(t>1)nt(a,t-1,r,n),i=n.length;else for(var c=0,u=a.length;c<u;)n[i++]=a[c++];else r||(n[i++]=a)}return n}var it=w((function(e,t){var r=(t=nt(t,!1,!1)).length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=t[r];e[n]=tt(e[n],e)}return e})),ot=w((function(e,t,r){return setTimeout((function(){return e.apply(null,r)}),t)})),st=et(ot,ne,1);function at(e){return function(){return!e.apply(this,arguments)}}function ct(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}}var ut=et(ct,2);function lt(e,t,r){t=Me(t,r);for(var n,i=te(e),o=0,s=i.length;o<s;o++)if(t(e[n=i[o]],n,e))return n}function ht(e){return function(t,r,n){r=Me(r,n);for(var i=Q(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(r(t[o],o,t))return o;return-1}}var ft=ht(1),dt=ht(-1);function pt(e,t,r,n){for(var i=(r=Me(r,n,1))(t),o=0,s=Q(e);o<s;){var a=Math.floor((o+s)/2);r(e[a])<i?o=a+1:s=a}return o}function mt(e,t,r){return function(n,i,o){var s=0,c=Q(n);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+c,s):c=o>=0?Math.min(o+1,c):o+c+1;else if(r&&o&&c)return n[o=r(n,i)]===i?o:-1;if(i!=i)return(o=t(a.call(n,s,c),q))>=0?o+s:-1;for(o=e>0?s:c-1;o>=0&&o<c;o+=e)if(n[o]===i)return o;return-1}}var gt=mt(1,ft,pt),vt=mt(-1,dt);function yt(e,t,r){var n=(rt(e)?ft:lt)(e,t,r);if(void 0!==n&&-1!==n)return e[n]}function Et(e,t,r){var n,i;if(t=Be(t,r),rt(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var o=te(e);for(n=0,i=o.length;n<i;n++)t(e[o[n]],o[n],e)}return e}function bt(e,t,r){t=Me(t,r);for(var n=!rt(e)&&te(e),i=(n||e).length,o=Array(i),s=0;s<i;s++){var a=n?n[s]:s;o[s]=t(e[a],a,e)}return o}function wt(e){var t=function(t,r,n,i){var o=!rt(t)&&te(t),s=(o||t).length,a=e>0?0:s-1;for(i||(n=t[o?o[a]:a],a+=e);a>=0&&a<s;a+=e){var c=o?o[a]:a;n=r(n,t[c],c,t)}return n};return function(e,r,n,i){var o=arguments.length>=3;return t(e,Be(r,i,4),n,o)}}var _t=wt(1),At=wt(-1);function Tt(e,t,r){var n=[];return t=Me(t,r),Et(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function It(e,t,r){t=Me(t,r);for(var n=!rt(e)&&te(e),i=(n||e).length,o=0;o<i;o++){var s=n?n[o]:o;if(!t(e[s],s,e))return!1}return!0}function St(e,t,r){t=Me(t,r);for(var n=!rt(e)&&te(e),i=(n||e).length,o=0;o<i;o++){var s=n?n[o]:o;if(t(e[s],s,e))return!0}return!1}function xt(e,t,r,n){return rt(e)||(e=be(e)),("number"!=typeof r||n)&&(r=0),gt(e,t,r)>=0}var Ot=w((function(e,t,r){var n,i;return B(t)?i=t:(t=Re(t),n=t.slice(0,-1),t=t[t.length-1]),bt(e,(function(e){var o=i;if(!o){if(n&&n.length&&(e=ke(e,n)),null==e)return;o=e[t]}return null==o?o:o.apply(e,r)}))}));function Rt(e,t){return bt(e,Le(t))}function kt(e,t,r){var n,i,o=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=rt(e)?e:be(e)).length;a<c;a++)null!=(n=e[a])&&n>o&&(o=n);else t=Me(t,r),Et(e,(function(e,r,n){((i=t(e,r,n))>s||i===-1/0&&o===-1/0)&&(o=e,s=i)}));return o}var Nt=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Ct(e){return e?V(e)?a.call(e):S(e)?e.match(Nt):rt(e)?bt(e,Ce):be(e):[]}function Dt(e,t,r){if(null==t||r)return rt(e)||(e=be(e)),e[Fe(e.length-1)];var n=Ct(e),i=Q(n);t=Math.max(Math.min(t,i),0);for(var o=i-1,s=0;s<t;s++){var a=Fe(s,o),c=n[s];n[s]=n[a],n[a]=c}return n.slice(0,t)}function Lt(e,t){return function(r,n,i){var o=t?[[],[]]:{};return n=Me(n,i),Et(r,(function(t,i){var s=n(t,i,r);e(o,t,s)})),o}}var Bt=Lt((function(e,t,r){$(e,r)?e[r].push(t):e[r]=[t]})),Pt=Lt((function(e,t,r){e[r]=t})),Ut=Lt((function(e,t,r){$(e,r)?e[r]++:e[r]=1})),Mt=Lt((function(e,t,r){e[r?0:1].push(t)}),!0);function jt(e,t,r){return t in r}var Ft=w((function(e,t){var r={},n=t[0];if(null==e)return r;B(n)?(t.length>1&&(n=Be(n,t[1])),t=ae(e)):(n=jt,t=nt(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var s=t[i],a=e[s];n(a,s,e)&&(r[s]=a)}return r})),Vt=w((function(e,t){var r,n=t[0];return B(n)?(n=at(n),t.length>1&&(r=t[1])):(t=bt(nt(t,!1,!1),String),n=function(e,r){return!xt(t,r)}),Ft(e,n,r)}));function $t(e,t,r){return a.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))}function zt(e,t,r){return null==e||e.length<1?null==t||r?void 0:[]:null==t||r?e[0]:$t(e,e.length-t)}function Gt(e,t,r){return a.call(e,null==t||r?1:t)}var qt=w((function(e,t){return t=nt(t,!0,!0),Tt(e,(function(e){return!xt(t,e)}))})),Ht=w((function(e,t){return qt(e,t)}));function Wt(e,t,r,n){T(t)||(n=r,r=t,t=!1),null!=r&&(r=Me(r,n));for(var i=[],o=[],s=0,a=Q(e);s<a;s++){var c=e[s],u=r?r(c,s,e):c;t&&!r?(s&&o===u||i.push(c),o=u):r?xt(o,u)||(o.push(u),i.push(c)):xt(i,c)||i.push(c)}return i}var Kt=w((function(e){return Wt(nt(e,!0,!0))}));function Jt(e){for(var t=e&&kt(e,Q).length||0,r=Array(t),n=0;n<t;n++)r[n]=Rt(e,n);return r}var Yt=w(Jt);function Xt(e,t){return e._chain?ne(t).chain():t}function Zt(e){return Et(_e(e),(function(t){var r=ne[t]=e[t];ne.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),Xt(this,r.apply(ne,e))}})),ne}Et(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=n[e];ne.prototype[e]=function(){var r=this._wrapped;return null!=r&&(t.apply(r,arguments),"shift"!==e&&"splice"!==e||0!==r.length||delete r[0]),Xt(this,r)}})),Et(["concat","join","slice"],(function(e){var t=n[e];ne.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Xt(this,e)}}));var Qt=Zt({__proto__:null,VERSION:e,restArguments:w,isObject:_,isNull:function(e){return null===e},isUndefined:A,isBoolean:T,isElement:function(e){return!(!e||1!==e.nodeType)},isString:S,isNumber:x,isDate:O,isRegExp:R,isError:k,isSymbol:N,isArrayBuffer:C,isDataView:F,isArray:V,isFunction:B,isArguments:G,isFinite:function(e){return!N(e)&&v(e)&&!isNaN(parseFloat(e))},isNaN:q,isTypedArray:Z,isEmpty:function(e){if(null==e)return!0;var t=Q(e);return"number"==typeof t&&(V(e)||S(e)||G(e))?0===t:0===Q(te(e))},isMatch:re,isEqual:function(e,t){return se(e,t)},isMap:ge,isWeakMap:ve,isSet:ye,isWeakSet:Ee,keys:te,allKeys:ae,values:be,pairs:function(e){for(var t=te(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n},invert:we,functions:_e,methods:_e,extend:Te,extendOwn:Ie,assign:Ie,defaults:Se,create:function(e,t){var r=xe(e);return t&&Ie(r,t),r},clone:function(e){return _(e)?V(e)?e.slice():Te({},e):e},tap:function(e,t){return t(e),e},get:Ne,has:function(e,t){for(var r=(t=Re(t)).length,n=0;n<r;n++){var i=t[n];if(!$(e,i))return!1;e=e[i]}return!!r},mapObject:function(e,t,r){t=Me(t,r);for(var n=te(e),i=n.length,o={},s=0;s<i;s++){var a=n[s];o[a]=t(e[a],a,e)}return o},identity:Ce,constant:H,noop:je,toPath:Oe,property:Le,propertyOf:function(e){return null==e?je:function(t){return Ne(e,t)}},matcher:De,matches:De,times:function(e,t,r){var n=Array(Math.max(0,e));t=Be(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n},random:Fe,now:Ve,escape:Ge,unescape:qe,templateSettings:He,template:function(e,t,r){!t&&r&&(t=r),t=Se({},t,ne.templateSettings);var n=RegExp([(t.escape||We).source,(t.interpolate||We).source,(t.evaluate||We).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(n,(function(t,r,n,s,a){return o+=e.slice(i,a).replace(Je,Ye),i=a+t.length,r?o+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),t})),o+="';\n";var s,a=t.variable;if(a){if(!Xe.test(a))throw new Error("variable is not a bare identifier: "+a)}else o="with(obj||{}){\n"+o+"}\n",a="obj";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{s=new Function(a,"_",o)}catch(e){throw e.source=o,e}var c=function(e){return s.call(this,e,ne)};return c.source="function("+a+"){\n"+o+"}",c},result:function(e,t,r){var n=(t=Re(t)).length;if(!n)return B(r)?r.call(e):r;for(var i=0;i<n;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=r,i=n),e=B(o)?o.call(e):o}return e},uniqueId:function(e){var t=++Ze+"";return e?e+t:t},chain:function(e){var t=ne(e);return t._chain=!0,t},iteratee:Ue,partial:et,bind:tt,bindAll:it,memoize:function(e,t){var r=function(n){var i=r.cache,o=""+(t?t.apply(this,arguments):n);return $(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return r.cache={},r},delay:ot,defer:st,throttle:function(e,t,r){var n,i,o,s,a=0;r||(r={});var c=function(){a=!1===r.leading?0:Ve(),n=null,s=e.apply(i,o),n||(i=o=null)},u=function(){var u=Ve();a||!1!==r.leading||(a=u);var l=t-(u-a);return i=this,o=arguments,l<=0||l>t?(n&&(clearTimeout(n),n=null),a=u,s=e.apply(i,o),n||(i=o=null)):n||!1===r.trailing||(n=setTimeout(c,l)),s};return u.cancel=function(){clearTimeout(n),a=0,n=i=o=null},u},debounce:function(e,t,r){var n,i,o,s,a,c=function(){var u=Ve()-i;t>u?n=setTimeout(c,t-u):(n=null,r||(s=e.apply(a,o)),n||(o=a=null))},u=w((function(u){return a=this,o=u,i=Ve(),n||(n=setTimeout(c,t),r&&(s=e.apply(a,o))),s}));return u.cancel=function(){clearTimeout(n),n=o=a=null},u},wrap:function(e,t){return et(t,e)},negate:at,compose:function(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}},after:function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},before:ct,once:ut,findKey:lt,findIndex:ft,findLastIndex:dt,sortedIndex:pt,indexOf:gt,lastIndexOf:vt,find:yt,detect:yt,findWhere:function(e,t){return yt(e,De(t))},each:Et,forEach:Et,map:bt,collect:bt,reduce:_t,foldl:_t,inject:_t,reduceRight:At,foldr:At,filter:Tt,select:Tt,reject:function(e,t,r){return Tt(e,at(Me(t)),r)},every:It,all:It,some:St,any:St,contains:xt,includes:xt,include:xt,invoke:Ot,pluck:Rt,where:function(e,t){return Tt(e,De(t))},max:kt,min:function(e,t,r){var n,i,o=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=rt(e)?e:be(e)).length;a<c;a++)null!=(n=e[a])&&n<o&&(o=n);else t=Me(t,r),Et(e,(function(e,r,n){((i=t(e,r,n))<s||i===1/0&&o===1/0)&&(o=e,s=i)}));return o},shuffle:function(e){return Dt(e,1/0)},sample:Dt,sortBy:function(e,t,r){var n=0;return t=Me(t,r),Rt(bt(e,(function(e,r,i){return{value:e,index:n++,criteria:t(e,r,i)}})).sort((function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index})),"value")},groupBy:Bt,indexBy:Pt,countBy:Ut,partition:Mt,toArray:Ct,size:function(e){return null==e?0:rt(e)?e.length:te(e).length},pick:Ft,omit:Vt,first:zt,head:zt,take:zt,initial:$t,last:function(e,t,r){return null==e||e.length<1?null==t||r?void 0:[]:null==t||r?e[e.length-1]:Gt(e,Math.max(0,e.length-t))},rest:Gt,tail:Gt,drop:Gt,compact:function(e){return Tt(e,Boolean)},flatten:function(e,t){return nt(e,t,!1)},without:Ht,uniq:Wt,unique:Wt,union:Kt,intersection:function(e){for(var t=[],r=arguments.length,n=0,i=Q(e);n<i;n++){var o=e[n];if(!xt(t,o)){var s;for(s=1;s<r&&xt(arguments[s],o);s++);s===r&&t.push(o)}}return t},difference:qt,unzip:Jt,transpose:Jt,zip:Yt,object:function(e,t){for(var r={},n=0,i=Q(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},range:function(e,t,r){null==t&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),o=0;o<n;o++,e+=r)i[o]=e;return i},chunk:function(e,t){if(null==t||t<1)return[];for(var r=[],n=0,i=e.length;n<i;)r.push(a.call(e,n,n+=t));return r},mixin:Zt,default:ne});return Qt._=Qt,Qt}()},4835:(e,t,r)=>{"use strict";r.d(t,{tS:()=>yt,d9:()=>Me,r3:()=>rr,ce:()=>Be,l7:()=>De,hX:()=>Zt,_e:()=>Ht,xH:()=>xr,q9:()=>rr,jV:()=>Cr,kJ:()=>H,hj:()=>C,UI:()=>Kt,Xc:()=>Ze,Fp:()=>sr,VV:()=>ar,CE:()=>wr,ei:()=>br,u4:()=>Yt,TV:()=>hr,P2:()=>Rt,G0:()=>Nr,jj:()=>kr,Tw:()=>kr,zu:()=>Rr});var n={};r.r(n),r.d(n,{VERSION:()=>i,after:()=>Lt,all:()=>er,allKeys:()=>ge,any:()=>tr,assign:()=>Le,before:()=>Bt,bind:()=>_t,bindAll:()=>It,chain:()=>yt,chunk:()=>Ur,clone:()=>Me,collect:()=>Kt,compact:()=>Sr,compose:()=>Dt,constant:()=>Z,contains:()=>rr,countBy:()=>gr,create:()=>Ue,debounce:()=>kt,default:()=>Fr,defaults:()=>Be,defer:()=>Ot,delay:()=>xt,detect:()=>qt,difference:()=>Or,drop:()=>Tr,each:()=>Wt,escape:()=>st,every:()=>er,extend:()=>De,extendOwn:()=>Le,filter:()=>Zt,find:()=>qt,findIndex:()=>jt,findKey:()=>Ut,findLastIndex:()=>Ft,findWhere:()=>Ht,first:()=>Ar,flatten:()=>xr,foldl:()=>Yt,foldr:()=>Xt,forEach:()=>Wt,functions:()=>Ne,get:()=>ze,groupBy:()=>pr,has:()=>Ge,head:()=>Ar,identity:()=>qe,include:()=>rr,includes:()=>rr,indexBy:()=>mr,indexOf:()=>zt,initial:()=>_r,inject:()=>Yt,intersection:()=>Cr,invert:()=>ke,invoke:()=>nr,isArguments:()=>J,isArray:()=>H,isArrayBuffer:()=>U,isBoolean:()=>O,isDataView:()=>q,isDate:()=>D,isElement:()=>R,isEmpty:()=>ce,isEqual:()=>me,isError:()=>B,isFinite:()=>Y,isFunction:()=>F,isMap:()=>Te,isMatch:()=>ue,isNaN:()=>X,isNull:()=>S,isNumber:()=>C,isObject:()=>I,isRegExp:()=>L,isSet:()=>Se,isString:()=>N,isSymbol:()=>P,isTypedArray:()=>ie,isUndefined:()=>x,isWeakMap:()=>Ie,isWeakSet:()=>xe,iteratee:()=>Ye,keys:()=>ae,last:()=>Ir,lastIndexOf:()=>Gt,map:()=>Kt,mapObject:()=>Ze,matcher:()=>He,matches:()=>He,max:()=>sr,memoize:()=>St,methods:()=>Ne,min:()=>ar,mixin:()=>jr,negate:()=>Ct,noop:()=>Qe,now:()=>nt,object:()=>Br,omit:()=>wr,once:()=>Pt,pairs:()=>Re,partial:()=>wt,partition:()=>vr,pick:()=>br,pluck:()=>ir,property:()=>We,propertyOf:()=>et,random:()=>rt,range:()=>Pr,reduce:()=>Yt,reduceRight:()=>Xt,reject:()=>Qt,rest:()=>Tr,restArguments:()=>T,result:()=>mt,sample:()=>lr,select:()=>Zt,shuffle:()=>hr,size:()=>yr,some:()=>tr,sortBy:()=>fr,sortedIndex:()=>Vt,tail:()=>Tr,take:()=>Ar,tap:()=>je,template:()=>pt,templateSettings:()=>ct,throttle:()=>Rt,times:()=>tt,toArray:()=>ur,toPath:()=>Fe,transpose:()=>Dr,unescape:()=>at,union:()=>Nr,uniq:()=>kr,unique:()=>kr,uniqueId:()=>vt,unzip:()=>Dr,values:()=>Oe,where:()=>or,without:()=>Rr,wrap:()=>Nt,zip:()=>Lr});var i="1.13.4",o="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},s=Array.prototype,a=Object.prototype,c="undefined"!=typeof Symbol?Symbol.prototype:null,u=s.push,l=s.slice,h=a.toString,f=a.hasOwnProperty,d="undefined"!=typeof ArrayBuffer,p="undefined"!=typeof DataView,m=Array.isArray,g=Object.keys,v=Object.create,y=d&&ArrayBuffer.isView,E=isNaN,b=isFinite,w=!{toString:null}.propertyIsEnumerable("toString"),_=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],A=Math.pow(2,53)-1;function T(e,t){return t=null==t?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=n,e.apply(this,o)}}function I(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function S(e){return null===e}function x(e){return void 0===e}function O(e){return!0===e||!1===e||"[object Boolean]"===h.call(e)}function R(e){return!(!e||1!==e.nodeType)}function k(e){var t="[object "+e+"]";return function(e){return h.call(e)===t}}const N=k("String"),C=k("Number"),D=k("Date"),L=k("RegExp"),B=k("Error"),P=k("Symbol"),U=k("ArrayBuffer");var M=k("Function"),j=o.document&&o.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof j&&(M=function(e){return"function"==typeof e||!1});const F=M,V=k("Object");var $=p&&V(new DataView(new ArrayBuffer(8))),z="undefined"!=typeof Map&&V(new Map),G=k("DataView");const q=$?function(e){return null!=e&&F(e.getInt8)&&U(e.buffer)}:G,H=m||k("Array");function W(e,t){return null!=e&&f.call(e,t)}var K=k("Arguments");!function(){K(arguments)||(K=function(e){return W(e,"callee")})}();const J=K;function Y(e){return!P(e)&&b(e)&&!isNaN(parseFloat(e))}function X(e){return C(e)&&E(e)}function Z(e){return function(){return e}}function Q(e){return function(t){var r=e(t);return"number"==typeof r&&r>=0&&r<=A}}function ee(e){return function(t){return null==t?void 0:t[e]}}const te=ee("byteLength"),re=Q(te);var ne=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const ie=d?function(e){return y?y(e)&&!q(e):re(e)&&ne.test(h.call(e))}:Z(!1),oe=ee("length");function se(e,t){t=function(e){for(var t={},r=e.length,n=0;n<r;++n)t[e[n]]=!0;return{contains:function(e){return!0===t[e]},push:function(r){return t[r]=!0,e.push(r)}}}(t);var r=_.length,n=e.constructor,i=F(n)&&n.prototype||a,o="constructor";for(W(e,o)&&!t.contains(o)&&t.push(o);r--;)(o=_[r])in e&&e[o]!==i[o]&&!t.contains(o)&&t.push(o)}function ae(e){if(!I(e))return[];if(g)return g(e);var t=[];for(var r in e)W(e,r)&&t.push(r);return w&&se(e,t),t}function ce(e){if(null==e)return!0;var t=oe(e);return"number"==typeof t&&(H(e)||N(e)||J(e))?0===t:0===oe(ae(e))}function ue(e,t){var r=ae(t),n=r.length;if(null==e)return!n;for(var i=Object(e),o=0;o<n;o++){var s=r[o];if(t[s]!==i[s]||!(s in i))return!1}return!0}function le(e){return e instanceof le?e:this instanceof le?void(this._wrapped=e):new le(e)}function he(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,te(e))}le.VERSION=i,le.prototype.value=function(){return this._wrapped},le.prototype.valueOf=le.prototype.toJSON=le.prototype.value,le.prototype.toString=function(){return String(this._wrapped)};var fe="[object DataView]";function de(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&pe(e,t,r,n)}function pe(e,t,r,n){e instanceof le&&(e=e._wrapped),t instanceof le&&(t=t._wrapped);var i=h.call(e);if(i!==h.call(t))return!1;if($&&"[object Object]"==i&&q(e)){if(!q(t))return!1;i=fe}switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return c.valueOf.call(e)===c.valueOf.call(t);case"[object ArrayBuffer]":case fe:return pe(he(e),he(t),r,n)}var o="[object Array]"===i;if(!o&&ie(e)){if(te(e)!==te(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;o=!0}if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(F(s)&&s instanceof s&&F(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[];for(var u=(r=r||[]).length;u--;)if(r[u]===e)return n[u]===t;if(r.push(e),n.push(t),o){if((u=e.length)!==t.length)return!1;for(;u--;)if(!de(e[u],t[u],r,n))return!1}else{var l,f=ae(e);if(u=f.length,ae(t).length!==u)return!1;for(;u--;)if(!W(t,l=f[u])||!de(e[l],t[l],r,n))return!1}return r.pop(),n.pop(),!0}function me(e,t){return de(e,t)}function ge(e){if(!I(e))return[];var t=[];for(var r in e)t.push(r);return w&&se(e,t),t}function ve(e){var t=oe(e);return function(r){if(null==r)return!1;var n=ge(r);if(oe(n))return!1;for(var i=0;i<t;i++)if(!F(r[e[i]]))return!1;return e!==_e||!F(r[ye])}}var ye="forEach",Ee=["clear","delete"],be=["get","has","set"],we=Ee.concat(ye,be),_e=Ee.concat(be),Ae=["add"].concat(Ee,ye,"has");const Te=z?ve(we):k("Map"),Ie=z?ve(_e):k("WeakMap"),Se=z?ve(Ae):k("Set"),xe=k("WeakSet");function Oe(e){for(var t=ae(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n}function Re(e){for(var t=ae(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n}function ke(e){for(var t={},r=ae(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t}function Ne(e){var t=[];for(var r in e)F(e[r])&&t.push(r);return t.sort()}function Ce(e,t){return function(r){var n=arguments.length;if(t&&(r=Object(r)),n<2||null==r)return r;for(var i=1;i<n;i++)for(var o=arguments[i],s=e(o),a=s.length,c=0;c<a;c++){var u=s[c];t&&void 0!==r[u]||(r[u]=o[u])}return r}}const De=Ce(ge),Le=Ce(ae),Be=Ce(ge,!0);function Pe(e){if(!I(e))return{};if(v)return v(e);var t=function(){};t.prototype=e;var r=new t;return t.prototype=null,r}function Ue(e,t){var r=Pe(e);return t&&Le(r,t),r}function Me(e){return I(e)?H(e)?e.slice():De({},e):e}function je(e,t){return t(e),e}function Fe(e){return H(e)?e:[e]}function Ve(e){return le.toPath(e)}function $e(e,t){for(var r=t.length,n=0;n<r;n++){if(null==e)return;e=e[t[n]]}return r?e:void 0}function ze(e,t,r){var n=$e(e,Ve(t));return x(n)?r:n}function Ge(e,t){for(var r=(t=Ve(t)).length,n=0;n<r;n++){var i=t[n];if(!W(e,i))return!1;e=e[i]}return!!r}function qe(e){return e}function He(e){return e=Le({},e),function(t){return ue(t,e)}}function We(e){return e=Ve(e),function(t){return $e(t,e)}}function Ke(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,o){return e.call(t,r,n,i,o)}}return function(){return e.apply(t,arguments)}}function Je(e,t,r){return null==e?qe:F(e)?Ke(e,t,r):I(e)&&!H(e)?He(e):We(e)}function Ye(e,t){return Je(e,t,1/0)}function Xe(e,t,r){return le.iteratee!==Ye?le.iteratee(e,t):Je(e,t,r)}function Ze(e,t,r){t=Xe(t,r);for(var n=ae(e),i=n.length,o={},s=0;s<i;s++){var a=n[s];o[a]=t(e[a],a,e)}return o}function Qe(){}function et(e){return null==e?Qe:function(t){return ze(e,t)}}function tt(e,t,r){var n=Array(Math.max(0,e));t=Ke(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n}function rt(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}le.toPath=Fe,le.iteratee=Ye;const nt=Date.now||function(){return(new Date).getTime()};function it(e){var t=function(t){return e[t]},r="(?:"+ae(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(i,t):e}}const ot={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},st=it(ot),at=it(ke(ot)),ct=le.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ut=/(.)^/,lt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ht=/\\|'|\r|\n|\u2028|\u2029/g;function ft(e){return"\\"+lt[e]}var dt=/^\s*(\w|\$)+\s*$/;function pt(e,t,r){!t&&r&&(t=r),t=Be({},t,le.templateSettings);var n=RegExp([(t.escape||ut).source,(t.interpolate||ut).source,(t.evaluate||ut).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(n,(function(t,r,n,s,a){return o+=e.slice(i,a).replace(ht,ft),i=a+t.length,r?o+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),t})),o+="';\n";var s,a=t.variable;if(a){if(!dt.test(a))throw new Error("variable is not a bare identifier: "+a)}else o="with(obj||{}){\n"+o+"}\n",a="obj";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{s=new Function(a,"_",o)}catch(e){throw e.source=o,e}var c=function(e){return s.call(this,e,le)};return c.source="function("+a+"){\n"+o+"}",c}function mt(e,t,r){var n=(t=Ve(t)).length;if(!n)return F(r)?r.call(e):r;for(var i=0;i<n;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=r,i=n),e=F(o)?o.call(e):o}return e}var gt=0;function vt(e){var t=++gt+"";return e?e+t:t}function yt(e){var t=le(e);return t._chain=!0,t}function Et(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var o=Pe(e.prototype),s=e.apply(o,i);return I(s)?s:o}var bt=T((function(e,t){var r=bt.placeholder,n=function(){for(var i=0,o=t.length,s=Array(o),a=0;a<o;a++)s[a]=t[a]===r?arguments[i++]:t[a];for(;i<arguments.length;)s.push(arguments[i++]);return Et(e,n,this,this,s)};return n}));bt.placeholder=le;const wt=bt,_t=T((function(e,t,r){if(!F(e))throw new TypeError("Bind must be called on a function");var n=T((function(i){return Et(e,n,t,this,r.concat(i))}));return n})),At=Q(oe);function Tt(e,t,r,n){if(n=n||[],t||0===t){if(t<=0)return n.concat(e)}else t=1/0;for(var i=n.length,o=0,s=oe(e);o<s;o++){var a=e[o];if(At(a)&&(H(a)||J(a)))if(t>1)Tt(a,t-1,r,n),i=n.length;else for(var c=0,u=a.length;c<u;)n[i++]=a[c++];else r||(n[i++]=a)}return n}const It=T((function(e,t){var r=(t=Tt(t,!1,!1)).length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=t[r];e[n]=_t(e[n],e)}return e}));function St(e,t){var r=function(n){var i=r.cache,o=""+(t?t.apply(this,arguments):n);return W(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return r.cache={},r}const xt=T((function(e,t,r){return setTimeout((function(){return e.apply(null,r)}),t)})),Ot=wt(xt,le,1);function Rt(e,t,r){var n,i,o,s,a=0;r||(r={});var c=function(){a=!1===r.leading?0:nt(),n=null,s=e.apply(i,o),n||(i=o=null)},u=function(){var u=nt();a||!1!==r.leading||(a=u);var l=t-(u-a);return i=this,o=arguments,l<=0||l>t?(n&&(clearTimeout(n),n=null),a=u,s=e.apply(i,o),n||(i=o=null)):n||!1===r.trailing||(n=setTimeout(c,l)),s};return u.cancel=function(){clearTimeout(n),a=0,n=i=o=null},u}function kt(e,t,r){var n,i,o,s,a,c=function(){var u=nt()-i;t>u?n=setTimeout(c,t-u):(n=null,r||(s=e.apply(a,o)),n||(o=a=null))},u=T((function(u){return a=this,o=u,i=nt(),n||(n=setTimeout(c,t),r&&(s=e.apply(a,o))),s}));return u.cancel=function(){clearTimeout(n),n=o=a=null},u}function Nt(e,t){return wt(t,e)}function Ct(e){return function(){return!e.apply(this,arguments)}}function Dt(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}}function Lt(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function Bt(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}}const Pt=wt(Bt,2);function Ut(e,t,r){t=Xe(t,r);for(var n,i=ae(e),o=0,s=i.length;o<s;o++)if(t(e[n=i[o]],n,e))return n}function Mt(e){return function(t,r,n){r=Xe(r,n);for(var i=oe(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(r(t[o],o,t))return o;return-1}}const jt=Mt(1),Ft=Mt(-1);function Vt(e,t,r,n){for(var i=(r=Xe(r,n,1))(t),o=0,s=oe(e);o<s;){var a=Math.floor((o+s)/2);r(e[a])<i?o=a+1:s=a}return o}function $t(e,t,r){return function(n,i,o){var s=0,a=oe(n);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(r&&o&&a)return n[o=r(n,i)]===i?o:-1;if(i!=i)return(o=t(l.call(n,s,a),X))>=0?o+s:-1;for(o=e>0?s:a-1;o>=0&&o<a;o+=e)if(n[o]===i)return o;return-1}}const zt=$t(1,jt,Vt),Gt=$t(-1,Ft);function qt(e,t,r){var n=(At(e)?jt:Ut)(e,t,r);if(void 0!==n&&-1!==n)return e[n]}function Ht(e,t){return qt(e,He(t))}function Wt(e,t,r){var n,i;if(t=Ke(t,r),At(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var o=ae(e);for(n=0,i=o.length;n<i;n++)t(e[o[n]],o[n],e)}return e}function Kt(e,t,r){t=Xe(t,r);for(var n=!At(e)&&ae(e),i=(n||e).length,o=Array(i),s=0;s<i;s++){var a=n?n[s]:s;o[s]=t(e[a],a,e)}return o}function Jt(e){var t=function(t,r,n,i){var o=!At(t)&&ae(t),s=(o||t).length,a=e>0?0:s-1;for(i||(n=t[o?o[a]:a],a+=e);a>=0&&a<s;a+=e){var c=o?o[a]:a;n=r(n,t[c],c,t)}return n};return function(e,r,n,i){var o=arguments.length>=3;return t(e,Ke(r,i,4),n,o)}}const Yt=Jt(1),Xt=Jt(-1);function Zt(e,t,r){var n=[];return t=Xe(t,r),Wt(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function Qt(e,t,r){return Zt(e,Ct(Xe(t)),r)}function er(e,t,r){t=Xe(t,r);for(var n=!At(e)&&ae(e),i=(n||e).length,o=0;o<i;o++){var s=n?n[o]:o;if(!t(e[s],s,e))return!1}return!0}function tr(e,t,r){t=Xe(t,r);for(var n=!At(e)&&ae(e),i=(n||e).length,o=0;o<i;o++){var s=n?n[o]:o;if(t(e[s],s,e))return!0}return!1}function rr(e,t,r,n){return At(e)||(e=Oe(e)),("number"!=typeof r||n)&&(r=0),zt(e,t,r)>=0}const nr=T((function(e,t,r){var n,i;return F(t)?i=t:(t=Ve(t),n=t.slice(0,-1),t=t[t.length-1]),Kt(e,(function(e){var o=i;if(!o){if(n&&n.length&&(e=$e(e,n)),null==e)return;o=e[t]}return null==o?o:o.apply(e,r)}))}));function ir(e,t){return Kt(e,We(t))}function or(e,t){return Zt(e,He(t))}function sr(e,t,r){var n,i,o=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=At(e)?e:Oe(e)).length;a<c;a++)null!=(n=e[a])&&n>o&&(o=n);else t=Xe(t,r),Wt(e,(function(e,r,n){((i=t(e,r,n))>s||i===-1/0&&o===-1/0)&&(o=e,s=i)}));return o}function ar(e,t,r){var n,i,o=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=At(e)?e:Oe(e)).length;a<c;a++)null!=(n=e[a])&&n<o&&(o=n);else t=Xe(t,r),Wt(e,(function(e,r,n){((i=t(e,r,n))<s||i===1/0&&o===1/0)&&(o=e,s=i)}));return o}var cr=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function ur(e){return e?H(e)?l.call(e):N(e)?e.match(cr):At(e)?Kt(e,qe):Oe(e):[]}function lr(e,t,r){if(null==t||r)return At(e)||(e=Oe(e)),e[rt(e.length-1)];var n=ur(e),i=oe(n);t=Math.max(Math.min(t,i),0);for(var o=i-1,s=0;s<t;s++){var a=rt(s,o),c=n[s];n[s]=n[a],n[a]=c}return n.slice(0,t)}function hr(e){return lr(e,1/0)}function fr(e,t,r){var n=0;return t=Xe(t,r),ir(Kt(e,(function(e,r,i){return{value:e,index:n++,criteria:t(e,r,i)}})).sort((function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index})),"value")}function dr(e,t){return function(r,n,i){var o=t?[[],[]]:{};return n=Xe(n,i),Wt(r,(function(t,i){var s=n(t,i,r);e(o,t,s)})),o}}const pr=dr((function(e,t,r){W(e,r)?e[r].push(t):e[r]=[t]})),mr=dr((function(e,t,r){e[r]=t})),gr=dr((function(e,t,r){W(e,r)?e[r]++:e[r]=1})),vr=dr((function(e,t,r){e[r?0:1].push(t)}),!0);function yr(e){return null==e?0:At(e)?e.length:ae(e).length}function Er(e,t,r){return t in r}const br=T((function(e,t){var r={},n=t[0];if(null==e)return r;F(n)?(t.length>1&&(n=Ke(n,t[1])),t=ge(e)):(n=Er,t=Tt(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var s=t[i],a=e[s];n(a,s,e)&&(r[s]=a)}return r})),wr=T((function(e,t){var r,n=t[0];return F(n)?(n=Ct(n),t.length>1&&(r=t[1])):(t=Kt(Tt(t,!1,!1),String),n=function(e,r){return!rr(t,r)}),br(e,n,r)}));function _r(e,t,r){return l.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))}function Ar(e,t,r){return null==e||e.length<1?null==t||r?void 0:[]:null==t||r?e[0]:_r(e,e.length-t)}function Tr(e,t,r){return l.call(e,null==t||r?1:t)}function Ir(e,t,r){return null==e||e.length<1?null==t||r?void 0:[]:null==t||r?e[e.length-1]:Tr(e,Math.max(0,e.length-t))}function Sr(e){return Zt(e,Boolean)}function xr(e,t){return Tt(e,t,!1)}const Or=T((function(e,t){return t=Tt(t,!0,!0),Zt(e,(function(e){return!rr(t,e)}))})),Rr=T((function(e,t){return Or(e,t)}));function kr(e,t,r,n){O(t)||(n=r,r=t,t=!1),null!=r&&(r=Xe(r,n));for(var i=[],o=[],s=0,a=oe(e);s<a;s++){var c=e[s],u=r?r(c,s,e):c;t&&!r?(s&&o===u||i.push(c),o=u):r?rr(o,u)||(o.push(u),i.push(c)):rr(i,c)||i.push(c)}return i}const Nr=T((function(e){return kr(Tt(e,!0,!0))}));function Cr(e){for(var t=[],r=arguments.length,n=0,i=oe(e);n<i;n++){var o=e[n];if(!rr(t,o)){var s;for(s=1;s<r&&rr(arguments[s],o);s++);s===r&&t.push(o)}}return t}function Dr(e){for(var t=e&&sr(e,oe).length||0,r=Array(t),n=0;n<t;n++)r[n]=ir(e,n);return r}const Lr=T(Dr);function Br(e,t){for(var r={},n=0,i=oe(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r}function Pr(e,t,r){null==t&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),o=0;o<n;o++,e+=r)i[o]=e;return i}function Ur(e,t){if(null==t||t<1)return[];for(var r=[],n=0,i=e.length;n<i;)r.push(l.call(e,n,n+=t));return r}function Mr(e,t){return e._chain?le(t).chain():t}function jr(e){return Wt(Ne(e),(function(t){var r=le[t]=e[t];le.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),Mr(this,r.apply(le,e))}})),le}Wt(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=s[e];le.prototype[e]=function(){var r=this._wrapped;return null!=r&&(t.apply(r,arguments),"shift"!==e&&"splice"!==e||0!==r.length||delete r[0]),Mr(this,r)}})),Wt(["concat","join","slice"],(function(e){var t=s[e];le.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Mr(this,e)}}));const Fr=le;var Vr=jr(n);Vr._=Vr}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n);var e={};r.r(e),r.d(e,{CcReminder:()=>Wu,Groupon:()=>Ku,HomeDomain:()=>Hu,InStoreCashBack:()=>Ju,Merchant:()=>Yu,PriceMagic:()=>Xu,ProcessInterstitial:()=>Zu,ProductPage:()=>Qu,Serp:()=>el,TaxesPromo:()=>tl});function t(e){let t=e.length;for(;--t>=0;)e[t]=0}const i=256,o=286,s=30,a=15,c=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),l=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=new Array(576);t(f);const d=new Array(60);t(d);const p=new Array(512);t(p);const m=new Array(256);t(m);const g=new Array(29);t(g);const v=new Array(s);function y(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}let E,b,w;function _(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}t(v);const A=e=>e<256?p[e]:p[256+(e>>>7)],T=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},I=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,T(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},S=(e,t,r)=>{I(e,r[2*t],r[2*t+1])},x=(e,t)=>{let r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},O=(e,t,r)=>{const n=new Array(16);let i,o,s=0;for(i=1;i<=a;i++)n[i]=s=s+r[i-1]<<1;for(o=0;o<=t;o++){let t=e[2*o+1];0!==t&&(e[2*o]=x(n[t]++,t))}},R=e=>{let t;for(t=0;t<o;t++)e.dyn_ltree[2*t]=0;for(t=0;t<s;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},k=e=>{e.bi_valid>8?T(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},N=(e,t,r,n)=>{const i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]},C=(e,t,r)=>{const n=e.heap[r];let i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&N(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!N(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},D=(e,t,r)=>{let n,o,s,a,l=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],o=e.pending_buf[e.l_buf+l],l++,0===n?S(e,o,t):(s=m[o],S(e,s+i+1,t),a=c[s],0!==a&&(o-=g[s],I(e,o,a)),n--,s=A(n),S(e,s,r),a=u[s],0!==a&&(n-=v[s],I(e,n,a)))}while(l<e.last_lit);S(e,256,t)},L=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems;let s,c,u,l=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<o;s++)0!==r[2*s]?(e.heap[++e.heap_len]=l=s,e.depth[s]=0):r[2*s+1]=0;for(;e.heap_len<2;)u=e.heap[++e.heap_len]=l<2?++l:0,r[2*u]=1,e.depth[u]=0,e.opt_len--,i&&(e.static_len-=n[2*u+1]);for(t.max_code=l,s=e.heap_len>>1;s>=1;s--)C(e,r,s);u=o;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],C(e,r,1),c=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=c,r[2*u]=r[2*s]+r[2*c],e.depth[u]=(e.depth[s]>=e.depth[c]?e.depth[s]:e.depth[c])+1,r[2*s+1]=r[2*c+1]=u,e.heap[1]=u++,C(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,c=t.stat_desc.extra_base,u=t.stat_desc.max_length;let l,h,f,d,p,m,g=0;for(d=0;d<=a;d++)e.bl_count[d]=0;for(r[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)h=e.heap[l],d=r[2*r[2*h+1]+1]+1,d>u&&(d=u,g++),r[2*h+1]=d,h>n||(e.bl_count[d]++,p=0,h>=c&&(p=s[h-c]),m=r[2*h],e.opt_len+=m*(d+p),o&&(e.static_len+=m*(i[2*h+1]+p)));if(0!==g){do{for(d=u-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[u]--,g-=2}while(g>0);for(d=u;0!==d;d--)for(h=e.bl_count[d];0!==h;)f=e.heap[--l],f>n||(r[2*f+1]!==d&&(e.opt_len+=(d-r[2*f+1])*r[2*f],r[2*f+1]=d),h--)}})(e,t),O(r,l,e.bl_count)},B=(e,t,r)=>{let n,i,o=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=t[2*(n+1)+1],++a<c&&i===s||(a<u?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,o=i,0===s?(c=138,u=3):i===s?(c=6,u=3):(c=7,u=4))},P=(e,t,r)=>{let n,i,o=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),n=0;n<=r;n++)if(i=s,s=t[2*(n+1)+1],!(++a<c&&i===s)){if(a<u)do{S(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==o&&(S(e,i,e.bl_tree),a--),S(e,16,e.bl_tree),I(e,a-3,2)):a<=10?(S(e,17,e.bl_tree),I(e,a-3,3)):(S(e,18,e.bl_tree),I(e,a-11,7));a=0,o=i,0===s?(c=138,u=3):i===s?(c=6,u=3):(c=7,u=4)}};let U=!1;const M=(e,t,r,n)=>{I(e,0+(n?1:0),3),((e,t,r,n)=>{k(e),n&&(T(e,r),T(e,~r)),e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r})(e,t,r,!0)};var j=e=>{U||((()=>{let e,t,r,n,i;const h=new Array(16);for(r=0,n=0;n<28;n++)for(g[n]=r,e=0;e<1<<c[n];e++)m[r++]=n;for(m[r-1]=n,i=0,n=0;n<16;n++)for(v[n]=i,e=0;e<1<<u[n];e++)p[i++]=n;for(i>>=7;n<s;n++)for(v[n]=i<<7,e=0;e<1<<u[n]-7;e++)p[256+i++]=n;for(t=0;t<=a;t++)h[t]=0;for(e=0;e<=143;)f[2*e+1]=8,e++,h[8]++;for(;e<=255;)f[2*e+1]=9,e++,h[9]++;for(;e<=279;)f[2*e+1]=7,e++,h[7]++;for(;e<=287;)f[2*e+1]=8,e++,h[8]++;for(O(f,287,h),e=0;e<s;e++)d[2*e+1]=5,d[2*e]=x(e,5);E=new y(f,c,257,o,a),b=new y(d,u,0,s,a),w=new y(new Array(0),l,0,19,7)})(),U=!0),e.l_desc=new _(e.dyn_ltree,E),e.d_desc=new _(e.dyn_dtree,b),e.bl_desc=new _(e.bl_tree,w),e.bi_buf=0,e.bi_valid=0,R(e)},F=(e,t,r,n)=>{let o,s,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<i;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),L(e,e.l_desc),L(e,e.d_desc),a=(e=>{let t;for(B(e,e.dyn_ltree,e.l_desc.max_code),B(e,e.dyn_dtree,e.d_desc.max_code),L(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*h[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),o=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=o&&(o=s)):o=s=r+5,r+4<=o&&-1!==t?M(e,t,r,n):4===e.strategy||s===o?(I(e,2+(n?1:0),3),D(e,f,d)):(I(e,4+(n?1:0),3),((e,t,r,n)=>{let i;for(I(e,t-257,5),I(e,r-1,5),I(e,n-4,4),i=0;i<n;i++)I(e,e.bl_tree[2*h[i]+1],3);P(e,e.dyn_ltree,t-1),P(e,e.dyn_dtree,r-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),D(e,e.dyn_ltree,e.dyn_dtree)),R(e),n&&k(e)},V=(e,t,r)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(m[r]+i+1)]++,e.dyn_dtree[2*A(t)]++),e.last_lit===e.lit_bufsize-1),$=e=>{I(e,2,3),S(e,256,f),(e=>{16===e.bi_valid?(T(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)},z={_tr_init:j,_tr_stored_block:M,_tr_flush_block:F,_tr_tally:V,_tr_align:$};var G=(e,t,r,n)=>{let i=65535&e|0,o=e>>>16&65535|0,s=0;for(;0!==r;){s=r>2e3?2e3:r,r-=s;do{i=i+t[n++]|0,o=o+i|0}while(--s);i%=65521,o%=65521}return i|o<<16|0};const q=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})());var H=(e,t,r,n)=>{const i=q,o=n+r;e^=-1;for(let r=n;r<o;r++)e=e>>>8^i[255&(e^t[r])];return-1^e},W={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},K={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:J,_tr_stored_block:Y,_tr_flush_block:X,_tr_tally:Z,_tr_align:Q}=z,{Z_NO_FLUSH:ee,Z_PARTIAL_FLUSH:te,Z_FULL_FLUSH:re,Z_FINISH:ne,Z_BLOCK:ie,Z_OK:oe,Z_STREAM_END:se,Z_STREAM_ERROR:ae,Z_DATA_ERROR:ce,Z_BUF_ERROR:ue,Z_DEFAULT_COMPRESSION:le,Z_FILTERED:he,Z_HUFFMAN_ONLY:fe,Z_RLE:de,Z_FIXED:pe,Z_DEFAULT_STRATEGY:me,Z_UNKNOWN:ge,Z_DEFLATED:ve}=K,ye=258,Ee=262,be=103,we=113,_e=666,Ae=(e,t)=>(e.msg=W[t],t),Te=e=>(e<<1)-(e>4?9:0),Ie=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let Se=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const xe=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},Oe=(e,t)=>{X(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,xe(e.strm)},Re=(e,t)=>{e.pending_buf[e.pending++]=t},ke=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Ne=(e,t,r,n)=>{let i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),1===e.state.wrap?e.adler=G(e.adler,t,i,r):2===e.state.wrap&&(e.adler=H(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},Ce=(e,t)=>{let r,n,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-Ee?e.strstart-(e.w_size-Ee):0,u=e.window,l=e.w_mask,h=e.prev,f=e.strstart+ye;let d=u[o+s-1],p=u[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(r=t,u[r+s]===p&&u[r+s-1]===d&&u[r]===u[o]&&u[++r]===u[o+1]){o+=2,r++;do{}while(u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&o<f);if(n=ye-(f-o),o=f-ye,n>s){if(e.match_start=t,s=n,n>=a)break;d=u[o+s-1],p=u[o+s]}}}while((t=h[t&l])>c&&0!=--i);return s<=e.lookahead?s:e.lookahead},De=e=>{const t=e.w_size;let r,n,i,o,s;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Ee)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,r=n;do{i=e.head[--r],e.head[r]=i>=t?i-t:0}while(--n);n=t,r=n;do{i=e.prev[--r],e.prev[r]=i>=t?i-t:0}while(--n);o+=t}if(0===e.strm.avail_in)break;if(n=Ne(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=n,e.lookahead+e.insert>=3)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=Se(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=Se(e,e.ins_h,e.window[s+3-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Ee&&0!==e.strm.avail_in)},Le=(e,t)=>{let r,n;for(;;){if(e.lookahead<Ee){if(De(e),e.lookahead<Ee&&t===ee)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=Se(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-Ee&&(e.match_length=Ce(e,r)),e.match_length>=3)if(n=Z(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Se(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Se(e,e.ins_h,e.window[e.strstart+1]);else n=Z(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Oe(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===ne?(Oe(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Oe(e,!1),0===e.strm.avail_out)?1:2},Be=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<Ee){if(De(e),e.lookahead<Ee&&t===ee)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=Se(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-Ee&&(e.match_length=Ce(e,r),e.match_length<=5&&(e.strategy===he||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,n=Z(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=Se(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(Oe(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(n=Z(e,0,e.window[e.strstart-1]),n&&Oe(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Z(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===ne?(Oe(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Oe(e,!1),0===e.strm.avail_out)?1:2};function Pe(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}const Ue=[new Pe(0,0,0,0,((e,t)=>{let r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(De(e),0===e.lookahead&&t===ee)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;const n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,Oe(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-Ee&&(Oe(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ne?(Oe(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(Oe(e,!1),e.strm.avail_out),1)})),new Pe(4,4,8,4,Le),new Pe(4,5,16,8,Le),new Pe(4,6,32,32,Le),new Pe(4,4,16,16,Be),new Pe(8,16,32,32,Be),new Pe(8,16,128,128,Be),new Pe(8,32,128,256,Be),new Pe(32,128,258,1024,Be),new Pe(32,258,258,4096,Be)];function Me(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ve,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ie(this.dyn_ltree),Ie(this.dyn_dtree),Ie(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ie(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ie(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const je=e=>{if(!e||!e.state)return Ae(e,ae);e.total_in=e.total_out=0,e.data_type=ge;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:we,e.adler=2===t.wrap?0:1,t.last_flush=ee,J(t),oe},Fe=e=>{const t=je(e);return t===oe&&(e=>{e.window_size=2*e.w_size,Ie(e.head),e.max_lazy_match=Ue[e.level].max_lazy,e.good_match=Ue[e.level].good_length,e.nice_match=Ue[e.level].nice_length,e.max_chain_length=Ue[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},Ve=(e,t,r,n,i,o)=>{if(!e)return ae;let s=1;if(t===le&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),i<1||i>9||r!==ve||n<8||n>15||t<0||t>9||o<0||o>pe)return Ae(e,ae);8===n&&(n=9);const a=new Me;return e.state=a,a.strm=e,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=o,a.method=r,Fe(e)};var $e=(e,t)=>{let r,n;if(!e||!e.state||t>ie||t<0)return e?Ae(e,ae):ae;const i=e.state;if(!e.output||!e.input&&0!==e.avail_in||i.status===_e&&t!==ne)return Ae(e,0===e.avail_out?ue:ae);i.strm=e;const o=i.last_flush;if(i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,Re(i,31),Re(i,139),Re(i,8),i.gzhead?(Re(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Re(i,255&i.gzhead.time),Re(i,i.gzhead.time>>8&255),Re(i,i.gzhead.time>>16&255),Re(i,i.gzhead.time>>24&255),Re(i,9===i.level?2:i.strategy>=fe||i.level<2?4:0),Re(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(Re(i,255&i.gzhead.extra.length),Re(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=H(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(Re(i,0),Re(i,0),Re(i,0),Re(i,0),Re(i,0),Re(i,9===i.level?2:i.strategy>=fe||i.level<2?4:0),Re(i,3),i.status=we);else{let t=ve+(i.w_bits-8<<4)<<8,r=-1;r=i.strategy>=fe||i.level<2?0:i.level<6?1:6===i.level?2:3,t|=r<<6,0!==i.strstart&&(t|=32),t+=31-t%31,i.status=we,ke(i,t),0!==i.strstart&&(ke(i,e.adler>>>16),ke(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>r&&(e.adler=H(e.adler,i.pending_buf,i.pending-r,r)),xe(e),r=i.pending,i.pending!==i.pending_buf_size));)Re(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(e.adler=H(e.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=H(e.adler,i.pending_buf,i.pending-r,r)),xe(e),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}n=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,Re(i,n)}while(0!==n);i.gzhead.hcrc&&i.pending>r&&(e.adler=H(e.adler,i.pending_buf,i.pending-r,r)),0===n&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=H(e.adler,i.pending_buf,i.pending-r,r)),xe(e),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}n=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,Re(i,n)}while(0!==n);i.gzhead.hcrc&&i.pending>r&&(e.adler=H(e.adler,i.pending_buf,i.pending-r,r)),0===n&&(i.status=be)}else i.status=be;if(i.status===be&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&xe(e),i.pending+2<=i.pending_buf_size&&(Re(i,255&e.adler),Re(i,e.adler>>8&255),e.adler=0,i.status=we)):i.status=we),0!==i.pending){if(xe(e),0===e.avail_out)return i.last_flush=-1,oe}else if(0===e.avail_in&&Te(t)<=Te(o)&&t!==ne)return Ae(e,ue);if(i.status===_e&&0!==e.avail_in)return Ae(e,ue);if(0!==e.avail_in||0!==i.lookahead||t!==ee&&i.status!==_e){let r=i.strategy===fe?((e,t)=>{let r;for(;;){if(0===e.lookahead&&(De(e),0===e.lookahead)){if(t===ee)return 1;break}if(e.match_length=0,r=Z(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(Oe(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ne?(Oe(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Oe(e,!1),0===e.strm.avail_out)?1:2})(i,t):i.strategy===de?((e,t)=>{let r,n,i,o;const s=e.window;for(;;){if(e.lookahead<=ye){if(De(e),e.lookahead<=ye&&t===ee)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){o=e.strstart+ye;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<o);e.match_length=ye-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=Z(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=Z(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(Oe(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ne?(Oe(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Oe(e,!1),0===e.strm.avail_out)?1:2})(i,t):Ue[i.level].func(i,t);if(3!==r&&4!==r||(i.status=_e),1===r||3===r)return 0===e.avail_out&&(i.last_flush=-1),oe;if(2===r&&(t===te?Q(i):t!==ie&&(Y(i,0,0,!1),t===re&&(Ie(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),xe(e),0===e.avail_out))return i.last_flush=-1,oe}return t!==ne?oe:i.wrap<=0?se:(2===i.wrap?(Re(i,255&e.adler),Re(i,e.adler>>8&255),Re(i,e.adler>>16&255),Re(i,e.adler>>24&255),Re(i,255&e.total_in),Re(i,e.total_in>>8&255),Re(i,e.total_in>>16&255),Re(i,e.total_in>>24&255)):(ke(i,e.adler>>>16),ke(i,65535&e.adler)),xe(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?oe:se)},ze=(e,t)=>{let r=t.length;if(!e||!e.state)return ae;const n=e.state,i=n.wrap;if(2===i||1===i&&42!==n.status||n.lookahead)return ae;if(1===i&&(e.adler=G(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===i&&(Ie(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}const o=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,De(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do{n.ins_h=Se(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=2,De(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=s,e.input=a,e.avail_in=o,n.wrap=i,oe},Ge={deflateInit:(e,t)=>Ve(e,t,ve,15,8,me),deflateInit2:Ve,deflateReset:Fe,deflateResetKeep:je,deflateSetHeader:(e,t)=>e&&e.state?2!==e.state.wrap?ae:(e.state.gzhead=t,oe):ae,deflate:$e,deflateEnd:e=>{if(!e||!e.state)return ae;const t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&t!==be&&t!==we&&t!==_e?Ae(e,ae):(e.state=null,t===we?Ae(e,ce):oe)},deflateSetDictionary:ze,deflateInfo:"pako deflate (from Nodeca project)"};const qe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var He=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const t in r)qe(r,t)&&(e[t]=r[t])}}return e},We=e=>{let t=0;for(let r=0,n=e.length;r<n;r++)t+=e[r].length;const r=new Uint8Array(t);for(let t=0,n=0,i=e.length;t<i;t++){let i=e[t];r.set(i,n),n+=i.length}return r};let Ke=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Ke=!1}const Je=new Uint8Array(256);for(let e=0;e<256;e++)Je[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Je[254]=Je[254]=1;var Ye=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,r,n,i,o,s=e.length,a=0;for(i=0;i<s;i++)r=e.charCodeAt(i),55296==(64512&r)&&i+1<s&&(n=e.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),o=0,i=0;o<a;i++)r=e.charCodeAt(i),55296==(64512&r)&&i+1<s&&(n=e.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|63&r):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|63&r):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|63&r);return t},Xe=(e,t)=>{const r=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let n,i;const o=new Array(2*r);for(i=0,n=0;n<r;){let t=e[n++];if(t<128){o[i++]=t;continue}let s=Je[t];if(s>4)o[i++]=65533,n+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&n<r;)t=t<<6|63&e[n++],s--;s>1?o[i++]=65533:t<65536?o[i++]=t:(t-=65536,o[i++]=55296|t>>10&1023,o[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Ke)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r})(o,i)},Ze=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let r=t-1;for(;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+Je[e[r]]>t?r:t};var Qe=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const et=Object.prototype.toString,{Z_NO_FLUSH:tt,Z_SYNC_FLUSH:rt,Z_FULL_FLUSH:nt,Z_FINISH:it,Z_OK:ot,Z_STREAM_END:st,Z_DEFAULT_COMPRESSION:at,Z_DEFAULT_STRATEGY:ct,Z_DEFLATED:ut}=K;function lt(e){this.options=He({level:at,method:ut,chunkSize:16384,windowBits:15,memLevel:8,strategy:ct},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Qe,this.strm.avail_out=0;let r=Ge.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==ot)throw new Error(W[r]);if(t.header&&Ge.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Ye(t.dictionary):"[object ArrayBuffer]"===et.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,r=Ge.deflateSetDictionary(this.strm,e),r!==ot)throw new Error(W[r]);this._dict_set=!0}}function ht(e,t){const r=new lt(t);if(r.push(e,!0),r.err)throw r.msg||W[r.err];return r.result}lt.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let i,o;if(this.ended)return!1;for(o=t===~~t?t:!0===t?it:tt,"string"==typeof e?r.input=Ye(e):"[object ArrayBuffer]"===et.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(o===rt||o===nt)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(i=Ge.deflate(r,o),i===st)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=Ge.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===ot;if(0!==r.avail_out){if(o>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},lt.prototype.onData=function(e){this.chunks.push(e)},lt.prototype.onEnd=function(e){e===ot&&(this.result=We(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ft={Deflate:lt,deflate:ht,deflateRaw:function(e,t){return(t=t||{}).raw=!0,ht(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,ht(e,t)},constants:K};var dt=function(e,t){let r,n,i,o,s,a,c,u,l,h,f,d,p,m,g,v,y,E,b,w,_,A,T,I;const S=e.state;r=e.next_in,T=e.input,n=r+(e.avail_in-5),i=e.next_out,I=e.output,o=i-(t-e.avail_out),s=i+(e.avail_out-257),a=S.dmax,c=S.wsize,u=S.whave,l=S.wnext,h=S.window,f=S.hold,d=S.bits,p=S.lencode,m=S.distcode,g=(1<<S.lenbits)-1,v=(1<<S.distbits)-1;e:do{d<15&&(f+=T[r++]<<d,d+=8,f+=T[r++]<<d,d+=8),y=p[f&g];t:for(;;){if(E=y>>>24,f>>>=E,d-=E,E=y>>>16&255,0===E)I[i++]=65535&y;else{if(!(16&E)){if(0==(64&E)){y=p[(65535&y)+(f&(1<<E)-1)];continue t}if(32&E){S.mode=12;break e}e.msg="invalid literal/length code",S.mode=30;break e}b=65535&y,E&=15,E&&(d<E&&(f+=T[r++]<<d,d+=8),b+=f&(1<<E)-1,f>>>=E,d-=E),d<15&&(f+=T[r++]<<d,d+=8,f+=T[r++]<<d,d+=8),y=m[f&v];r:for(;;){if(E=y>>>24,f>>>=E,d-=E,E=y>>>16&255,!(16&E)){if(0==(64&E)){y=m[(65535&y)+(f&(1<<E)-1)];continue r}e.msg="invalid distance code",S.mode=30;break e}if(w=65535&y,E&=15,d<E&&(f+=T[r++]<<d,d+=8,d<E&&(f+=T[r++]<<d,d+=8)),w+=f&(1<<E)-1,w>a){e.msg="invalid distance too far back",S.mode=30;break e}if(f>>>=E,d-=E,E=i-o,w>E){if(E=w-E,E>u&&S.sane){e.msg="invalid distance too far back",S.mode=30;break e}if(_=0,A=h,0===l){if(_+=c-E,E<b){b-=E;do{I[i++]=h[_++]}while(--E);_=i-w,A=I}}else if(l<E){if(_+=c+l-E,E-=l,E<b){b-=E;do{I[i++]=h[_++]}while(--E);if(_=0,l<b){E=l,b-=E;do{I[i++]=h[_++]}while(--E);_=i-w,A=I}}}else if(_+=l-E,E<b){b-=E;do{I[i++]=h[_++]}while(--E);_=i-w,A=I}for(;b>2;)I[i++]=A[_++],I[i++]=A[_++],I[i++]=A[_++],b-=3;b&&(I[i++]=A[_++],b>1&&(I[i++]=A[_++]))}else{_=i-w;do{I[i++]=I[_++],I[i++]=I[_++],I[i++]=I[_++],b-=3}while(b>2);b&&(I[i++]=I[_++],b>1&&(I[i++]=I[_++]))}break}}break}}while(r<n&&i<s);b=d>>3,r-=b,d-=b<<3,f&=(1<<d)-1,e.next_in=r,e.next_out=i,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=i<s?s-i+257:257-(i-s),S.hold=f,S.bits=d};const pt=15,mt=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),gt=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),vt=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),yt=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Et=(e,t,r,n,i,o,s,a)=>{const c=a.bits;let u,l,h,f,d,p,m=0,g=0,v=0,y=0,E=0,b=0,w=0,_=0,A=0,T=0,I=null,S=0;const x=new Uint16Array(16),O=new Uint16Array(16);let R,k,N,C=null,D=0;for(m=0;m<=pt;m++)x[m]=0;for(g=0;g<n;g++)x[t[r+g]]++;for(E=c,y=pt;y>=1&&0===x[y];y--);if(E>y&&(E=y),0===y)return i[o++]=20971520,i[o++]=20971520,a.bits=1,0;for(v=1;v<y&&0===x[v];v++);for(E<v&&(E=v),_=1,m=1;m<=pt;m++)if(_<<=1,_-=x[m],_<0)return-1;if(_>0&&(0===e||1!==y))return-1;for(O[1]=0,m=1;m<pt;m++)O[m+1]=O[m]+x[m];for(g=0;g<n;g++)0!==t[r+g]&&(s[O[t[r+g]]++]=g);if(0===e?(I=C=s,p=19):1===e?(I=mt,S-=257,C=gt,D-=257,p=256):(I=vt,C=yt,p=-1),T=0,g=0,m=v,d=o,b=E,w=0,h=-1,A=1<<E,f=A-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){R=m-w,s[g]<p?(k=0,N=s[g]):s[g]>p?(k=C[D+s[g]],N=I[S+s[g]]):(k=96,N=0),u=1<<m-w,l=1<<b,v=l;do{l-=u,i[d+(T>>w)+l]=R<<24|k<<16|N|0}while(0!==l);for(u=1<<m-1;T&u;)u>>=1;if(0!==u?(T&=u-1,T+=u):T=0,g++,0==--x[m]){if(m===y)break;m=t[r+s[g]]}if(m>E&&(T&f)!==h){for(0===w&&(w=E),d+=v,b=m-w,_=1<<b;b+w<y&&(_-=x[b+w],!(_<=0));)b++,_<<=1;if(A+=1<<b,1===e&&A>852||2===e&&A>592)return 1;h=T&f,i[h]=E<<24|b<<16|d-o|0}}return 0!==T&&(i[d+T]=m-w<<24|64<<16|0),a.bits=E,0};const{Z_FINISH:bt,Z_BLOCK:wt,Z_TREES:_t,Z_OK:At,Z_STREAM_END:Tt,Z_NEED_DICT:It,Z_STREAM_ERROR:St,Z_DATA_ERROR:xt,Z_MEM_ERROR:Ot,Z_BUF_ERROR:Rt,Z_DEFLATED:kt}=K,Nt=12,Ct=30,Dt=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Lt(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Bt=e=>{if(!e||!e.state)return St;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,At},Pt=e=>{if(!e||!e.state)return St;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Bt(e)},Ut=(e,t)=>{let r;if(!e||!e.state)return St;const n=e.state;return t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?St:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Pt(e))},Mt=(e,t)=>{if(!e)return St;const r=new Lt;e.state=r,r.window=null;const n=Ut(e,t);return n!==At&&(e.state=null),n};let jt,Ft,Vt=!0;const $t=e=>{if(Vt){jt=new Int32Array(512),Ft=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Et(1,e.lens,0,288,jt,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Et(2,e.lens,0,32,Ft,0,e.work,{bits:5}),Vt=!1}e.lencode=jt,e.lenbits=9,e.distcode=Ft,e.distbits=5},zt=(e,t,r,n)=>{let i;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(t.subarray(r-n,r-n+i),o.wnext),(n-=i)?(o.window.set(t.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0};var Gt=(e,t)=>{let r,n,i,o,s,a,c,u,l,h,f,d,p,m,g,v,y,E,b,w,_,A,T=0;const I=new Uint8Array(4);let S,x;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return St;r=e.state,r.mode===Nt&&(r.mode=13),s=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,u=r.hold,l=r.bits,h=a,f=c,A=At;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;l<16;){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}if(2&r.wrap&&35615===u){r.check=0,I[0]=255&u,I[1]=u>>>8&255,r.check=H(r.check,I,2,0),u=0,l=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=Ct;break}if((15&u)!==kt){e.msg="unknown compression method",r.mode=Ct;break}if(u>>>=4,l-=4,_=8+(15&u),0===r.wbits)r.wbits=_;else if(_>r.wbits){e.msg="invalid window size",r.mode=Ct;break}r.dmax=1<<r.wbits,e.adler=r.check=1,r.mode=512&u?10:Nt,u=0,l=0;break;case 2:for(;l<16;){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}if(r.flags=u,(255&r.flags)!==kt){e.msg="unknown compression method",r.mode=Ct;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=Ct;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&(I[0]=255&u,I[1]=u>>>8&255,r.check=H(r.check,I,2,0)),u=0,l=0,r.mode=3;case 3:for(;l<32;){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}r.head&&(r.head.time=u),512&r.flags&&(I[0]=255&u,I[1]=u>>>8&255,I[2]=u>>>16&255,I[3]=u>>>24&255,r.check=H(r.check,I,4,0)),u=0,l=0,r.mode=4;case 4:for(;l<16;){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&(I[0]=255&u,I[1]=u>>>8&255,r.check=H(r.check,I,2,0)),u=0,l=0,r.mode=5;case 5:if(1024&r.flags){for(;l<16;){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&(I[0]=255&u,I[1]=u>>>8&255,r.check=H(r.check,I,2,0)),u=0,l=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(d=r.length,d>a&&(d=a),d&&(r.head&&(_=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+d),_)),512&r.flags&&(r.check=H(r.check,n,d,o)),a-=d,o+=d,r.length-=d),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===a)break e;d=0;do{_=n[o+d++],r.head&&_&&r.length<65536&&(r.head.name+=String.fromCharCode(_))}while(_&&d<a);if(512&r.flags&&(r.check=H(r.check,n,d,o)),a-=d,o+=d,_)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===a)break e;d=0;do{_=n[o+d++],r.head&&_&&r.length<65536&&(r.head.comment+=String.fromCharCode(_))}while(_&&d<a);if(512&r.flags&&(r.check=H(r.check,n,d,o)),a-=d,o+=d,_)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;l<16;){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}if(u!==(65535&r.check)){e.msg="header crc mismatch",r.mode=Ct;break}u=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Nt;break;case 10:for(;l<32;){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}e.adler=r.check=Dt(u),u=0,l=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,r.hold=u,r.bits=l,It;e.adler=r.check=1,r.mode=Nt;case Nt:if(t===wt||t===_t)break e;case 13:if(r.last){u>>>=7&l,l-=7&l,r.mode=27;break}for(;l<3;){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}switch(r.last=1&u,u>>>=1,l-=1,3&u){case 0:r.mode=14;break;case 1:if($t(r),r.mode=20,t===_t){u>>>=2,l-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=Ct}u>>>=2,l-=2;break;case 14:for(u>>>=7&l,l-=7&l;l<32;){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Ct;break}if(r.length=65535&u,u=0,l=0,r.mode=15,t===_t)break e;case 15:r.mode=16;case 16:if(d=r.length,d){if(d>a&&(d=a),d>c&&(d=c),0===d)break e;i.set(n.subarray(o,o+d),s),a-=d,o+=d,c-=d,s+=d,r.length-=d;break}r.mode=Nt;break;case 17:for(;l<14;){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}if(r.nlen=257+(31&u),u>>>=5,l-=5,r.ndist=1+(31&u),u>>>=5,l-=5,r.ncode=4+(15&u),u>>>=4,l-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Ct;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;l<3;){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}r.lens[O[r.have++]]=7&u,u>>>=3,l-=3}for(;r.have<19;)r.lens[O[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,S={bits:r.lenbits},A=Et(0,r.lens,0,19,r.lencode,0,r.work,S),r.lenbits=S.bits,A){e.msg="invalid code lengths set",r.mode=Ct;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;T=r.lencode[u&(1<<r.lenbits)-1],g=T>>>24,v=T>>>16&255,y=65535&T,!(g<=l);){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}if(y<16)u>>>=g,l-=g,r.lens[r.have++]=y;else{if(16===y){for(x=g+2;l<x;){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}if(u>>>=g,l-=g,0===r.have){e.msg="invalid bit length repeat",r.mode=Ct;break}_=r.lens[r.have-1],d=3+(3&u),u>>>=2,l-=2}else if(17===y){for(x=g+3;l<x;){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}u>>>=g,l-=g,_=0,d=3+(7&u),u>>>=3,l-=3}else{for(x=g+7;l<x;){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}u>>>=g,l-=g,_=0,d=11+(127&u),u>>>=7,l-=7}if(r.have+d>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Ct;break}for(;d--;)r.lens[r.have++]=_}}if(r.mode===Ct)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=Ct;break}if(r.lenbits=9,S={bits:r.lenbits},A=Et(1,r.lens,0,r.nlen,r.lencode,0,r.work,S),r.lenbits=S.bits,A){e.msg="invalid literal/lengths set",r.mode=Ct;break}if(r.distbits=6,r.distcode=r.distdyn,S={bits:r.distbits},A=Et(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,S),r.distbits=S.bits,A){e.msg="invalid distances set",r.mode=Ct;break}if(r.mode=20,t===_t)break e;case 20:r.mode=21;case 21:if(a>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,r.hold=u,r.bits=l,dt(e,f),s=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,u=r.hold,l=r.bits,r.mode===Nt&&(r.back=-1);break}for(r.back=0;T=r.lencode[u&(1<<r.lenbits)-1],g=T>>>24,v=T>>>16&255,y=65535&T,!(g<=l);){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}if(v&&0==(240&v)){for(E=g,b=v,w=y;T=r.lencode[w+((u&(1<<E+b)-1)>>E)],g=T>>>24,v=T>>>16&255,y=65535&T,!(E+g<=l);){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}u>>>=E,l-=E,r.back+=E}if(u>>>=g,l-=g,r.back+=g,r.length=y,0===v){r.mode=26;break}if(32&v){r.back=-1,r.mode=Nt;break}if(64&v){e.msg="invalid literal/length code",r.mode=Ct;break}r.extra=15&v,r.mode=22;case 22:if(r.extra){for(x=r.extra;l<x;){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;T=r.distcode[u&(1<<r.distbits)-1],g=T>>>24,v=T>>>16&255,y=65535&T,!(g<=l);){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}if(0==(240&v)){for(E=g,b=v,w=y;T=r.distcode[w+((u&(1<<E+b)-1)>>E)],g=T>>>24,v=T>>>16&255,y=65535&T,!(E+g<=l);){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}u>>>=E,l-=E,r.back+=E}if(u>>>=g,l-=g,r.back+=g,64&v){e.msg="invalid distance code",r.mode=Ct;break}r.offset=y,r.extra=15&v,r.mode=24;case 24:if(r.extra){for(x=r.extra;l<x;){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Ct;break}r.mode=25;case 25:if(0===c)break e;if(d=f-c,r.offset>d){if(d=r.offset-d,d>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Ct;break}d>r.wnext?(d-=r.wnext,p=r.wsize-d):p=r.wnext-d,d>r.length&&(d=r.length),m=r.window}else m=i,p=s-r.offset,d=r.length;d>c&&(d=c),c-=d,r.length-=d;do{i[s++]=m[p++]}while(--d);0===r.length&&(r.mode=21);break;case 26:if(0===c)break e;i[s++]=r.length,c--,r.mode=21;break;case 27:if(r.wrap){for(;l<32;){if(0===a)break e;a--,u|=n[o++]<<l,l+=8}if(f-=c,e.total_out+=f,r.total+=f,f&&(e.adler=r.check=r.flags?H(r.check,i,f,s-f):G(r.check,i,f,s-f)),f=c,(r.flags?u:Dt(u))!==r.check){e.msg="incorrect data check",r.mode=Ct;break}u=0,l=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;l<32;){if(0===a)break e;a--,u+=n[o++]<<l,l+=8}if(u!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=Ct;break}u=0,l=0}r.mode=29;case 29:A=Tt;break e;case Ct:A=xt;break e;case 31:return Ot;default:return St}return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,r.hold=u,r.bits=l,(r.wsize||f!==e.avail_out&&r.mode<Ct&&(r.mode<27||t!==bt))&&zt(e,e.output,e.next_out,f-e.avail_out),h-=e.avail_in,f-=e.avail_out,e.total_in+=h,e.total_out+=f,r.total+=f,r.wrap&&f&&(e.adler=r.check=r.flags?H(r.check,i,f,e.next_out-f):G(r.check,i,f,e.next_out-f)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Nt?128:0)+(20===r.mode||15===r.mode?256:0),(0===h&&0===f||t===bt)&&A===At&&(A=Rt),A},qt={inflateReset:Pt,inflateReset2:Ut,inflateResetKeep:Bt,inflateInit:e=>Mt(e,15),inflateInit2:Mt,inflate:Gt,inflateEnd:e=>{if(!e||!e.state)return St;let t=e.state;return t.window&&(t.window=null),e.state=null,At},inflateGetHeader:(e,t)=>{if(!e||!e.state)return St;const r=e.state;return 0==(2&r.wrap)?St:(r.head=t,t.done=!1,At)},inflateSetDictionary:(e,t)=>{const r=t.length;let n,i,o;return e&&e.state?(n=e.state,0!==n.wrap&&11!==n.mode?St:11===n.mode&&(i=1,i=G(i,t,r,0),i!==n.check)?xt:(o=zt(e,t,r,r),o?(n.mode=31,Ot):(n.havedict=1,At))):St},inflateInfo:"pako inflate (from Nodeca project)"};var Ht=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Wt=Object.prototype.toString,{Z_NO_FLUSH:Kt,Z_FINISH:Jt,Z_OK:Yt,Z_STREAM_END:Xt,Z_NEED_DICT:Zt,Z_STREAM_ERROR:Qt,Z_DATA_ERROR:er,Z_MEM_ERROR:tr}=K;function rr(e){this.options=He({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Qe,this.strm.avail_out=0;let r=qt.inflateInit2(this.strm,t.windowBits);if(r!==Yt)throw new Error(W[r]);if(this.header=new Ht,qt.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Ye(t.dictionary):"[object ArrayBuffer]"===Wt.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=qt.inflateSetDictionary(this.strm,t.dictionary),r!==Yt)))throw new Error(W[r])}function nr(e,t){const r=new rr(t);if(r.push(e),r.err)throw r.msg||W[r.err];return r.result}rr.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let o,s,a;if(this.ended)return!1;for(s=t===~~t?t:!0===t?Jt:Kt,"[object ArrayBuffer]"===Wt.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),o=qt.inflate(r,s),o===Zt&&i&&(o=qt.inflateSetDictionary(r,i),o===Yt?o=qt.inflate(r,s):o===er&&(o=Zt));r.avail_in>0&&o===Xt&&r.state.wrap>0&&0!==e[r.next_in];)qt.inflateReset(r),o=qt.inflate(r,s);switch(o){case Qt:case er:case Zt:case tr:return this.onEnd(o),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(0===r.avail_out||o===Xt))if("string"===this.options.to){let e=Ze(r.output,r.next_out),t=r.next_out-e,i=Xe(r.output,e);r.next_out=t,r.avail_out=n-t,t&&r.output.set(r.output.subarray(e,e+t),0),this.onData(i)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(o!==Yt||0!==a){if(o===Xt)return o=qt.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},rr.prototype.onData=function(e){this.chunks.push(e)},rr.prototype.onEnd=function(e){e===Yt&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=We(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ir={Inflate:rr,inflate:nr,inflateRaw:function(e,t){return(t=t||{}).raw=!0,nr(e,t)},ungzip:nr,constants:K};const{Deflate:or,deflate:sr,deflateRaw:ar,gzip:cr}=ft,{Inflate:ur,inflate:lr,inflateRaw:hr,ungzip:fr}=ir;var dr=cr;function pr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var mr=r(1935),gr=r.n(mr);const vr="unknown";var yr,Er;!function(e){e[e.DOCUMENTCOMPLETE=0]="DOCUMENTCOMPLETE",e[e.BEFORENAVIGATE=1]="BEFORENAVIGATE",e[e.TABCHANGED=2]="TABCHANGED",e[e.TABUPDATED=3]="TABUPDATED",e[e.NAVIGATIONCOMMITTED=4]="NAVIGATIONCOMMITTED",e[e.TABCLOSED=5]="TABCLOSED"}(yr||(yr={})),function(e){e[e.NEWTAB=-1]="NEWTAB",e[e.CURRENTTAB=-2]="CURRENTTAB",e[e.NEWWINDOW=-3]="NEWWINDOW",e[e.ALLTABS=-4]="ALLTABS",e[e.BACKGROUNDTAB=-6]="BACKGROUNDTAB"}(Er||(Er={}));class br extends class{constructor(){if(pr(this,"name","chromium"),pr(this,"version",vr),pr(this,"isLegacyEdge",!1),pr(this,"isWebkitEdge",!1),pr(this,"isChrome",!1),pr(this,"isFirefox",!1),pr(this,"isEdge",!1),pr(this,"isWebkit",!1),pr(this,"isLegacySafari",!1),pr(this,"isSafariApp",!1),pr(this,"isSafariWebext",!1),pr(this,"isSafari",!1),pr(this,"DOCUMENTCOMPLETE",yr.DOCUMENTCOMPLETE),pr(this,"BEFORENAVIGATE",yr.BEFORENAVIGATE),pr(this,"TABCHANGED",yr.TABCHANGED),pr(this,"TABUPDATED",yr.TABUPDATED),pr(this,"NAVIGATIONCOMMITTED",yr.NAVIGATIONCOMMITTED),pr(this,"TABCLOSED",yr.TABCLOSED),pr(this,"NEWTAB",Er.NEWTAB),pr(this,"CURRENTTAB",Er.CURRENTTAB),pr(this,"NEWWINDOW",Er.NEWWINDOW),pr(this,"ALLTABS",Er.ALLTABS),pr(this,"BACKGROUNDTAB",Er.BACKGROUNDTAB),navigator.userAgentData){const e={"Google Chrome":"Chrome","Microsoft Edge":"WebkitEdge",Opera:"Opera"};navigator.userAgentData.brands.forEach((t=>{e[t.brand]&&(this.name=e[t.brand],this.version=t.version)}))}else if(navigator.userAgent){var e;const[,t,r]=(null===(e=navigator.userAgent)||void 0===e?void 0:e.match(/.*(opr|yabrowser|mrchrome|chrome|firefox|edge|edg|avast)\/?\s*([.\d]+)/i))||[];if("object"==typeof chrome&&"object"==typeof chrome.avast)this.name="Avast";else switch(null==t?void 0:t.toLowerCase()){case"avast":this.name="Avast";break;case"opr":this.name="Opera";break;case"firefox":this.name="Firefox";break;case"edge":this.name="Edge";break;case"edg":this.name="WebkitEdge";break;default:this.name="Chrome"}this.version=r||vr}else if(/Safari\/.+/i.test(navigator.userAgent)&&!/(Chrome|Chromium)\/.+/i.test(navigator.userAgent)){var t;this.name="Safari",this.isSafariWebext=!0,this.version=(null===(t=navigator.userAgent.match(/ Version\/(.+) /i))||void 0===t?void 0:t[1])||vr}this.isLegacyEdge="Edge"===this.name,this.isWebkitEdge="WebkitEdge"===this.name,this.isChrome="Chrome"===this.name,this.isFirefox="Firefox"===this.name,this.isEdge=this.isLegacyEdge||this.isWebkitEdge,this.isWebkit=this.isChrome||this.isWebkitEdge||"Opera"===this.name||"Avast"===this.name,this.isLegacySafari=!1,this.isSafariApp=!1,this.isSafari=this.isLegacySafari||this.isSafariApp||this.isSafariWebext}}{constructor(){super(),pr(this,"tabManager",[]),pr(this,"fnCallbacks",{}),pr(this,"oPendingNavigates",{}),gr().tabs.onActivated.addListener((e=>{this.oPendingNavigates[e.tabId]&&this.navigate(this.oPendingNavigates[e.tabId]),gr().tabs.get(e.tabId).then((t=>{gr().runtime.lastError||this.tabChanged({url:t&&t.url?t.url:"",id:e.tabId})}))})),gr().windows.onFocusChanged.addListener((e=>{e!==gr().windows.WINDOW_ID_NONE&&gr().tabs.query({windowId:e,active:!0}).then((e=>{e&&this.tabChanged(e.pop())}))})),gr().tabs.onRemoved.addListener((e=>{this.tabManager.splice(e,1),this.fireEvent(yr.TABCLOSED,{name:yr.TABCLOSED,tabId:e,url:this.tabManager[e]&&this.tabManager[e].url?this.tabManager[e].url:""})})),gr().tabs.onUpdated.addListener(((e,t)=>{t.url&&(this.tabManager[e]={url:t.url},this.fireEvent(yr.TABUPDATED,{name:yr.TABUPDATED,tabId:e,url:t.url}))})),gr().webNavigation&&(gr().webNavigation.onCommitted.addListener((e=>{this.fireWebNavigationEvent(yr.NAVIGATIONCOMMITTED,e)})),gr().webNavigation.onDOMContentLoaded.addListener((e=>{this.fireWebNavigationEvent(yr.DOCUMENTCOMPLETE,e)}))),gr().webRequest.onBeforeRequest.addListener((e=>{0===e.frameId&&e.url&&this.fireEvent(yr.BEFORENAVIGATE,{name:yr.BEFORENAVIGATE,tabId:e.tabId,url:e.url})}),{urls:["<all_urls>"],types:["main_frame"]})}fireWebNavigationEvent(e,t){0===t.frameId&&gr().tabs.get(t.tabId).then((r=>{!gr().runtime.lastError&&r&&this.fireEvent(e,{name:e,tabId:t.tabId,url:t.url,active:r.active})})).catch((()=>{}))}navigate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};const r=new Promise((t=>{let r;r="string"==typeof e?{url:e,tabId:Er.NEWTAB}:e;const n=r.tabId||Er.CURRENTTAB,i={url:r.url};switch(n){case Er.NEWTAB:i.active=!0,void 0!==r.active&&(i.active=r.active),void 0!==r.pinned&&(i.pinned=r.pinned),gr().tabs.create(i).then(t);break;case Er.BACKGROUNDTAB:i.active=!1,void 0!==r.pinned&&(i.pinned=r.pinned),gr().tabs.create(i).then(t);break;case Er.CURRENTTAB:this.redirect(r.url).then(t);break;case Er.NEWWINDOW:i.focused=!0,gr().windows.create(i).then(t);break;case Er.ALLTABS:gr().windows.getAll({populate:!0}).then((e=>{e.forEach((e=>{e.tabs&&e.tabs.forEach((function(e){gr().tabs.update(e.id,i)}))})),t(null)}));break;default:gr().tabs.get(r.tabId).then((e=>{!gr().runtime.lastError&&e?(gr().tabs.update(r.tabId,i).then(t),delete this.oPendingNavigates[r.tabId]):this.oPendingNavigates[r.tabId]=r}))}}));return r.then(t),r}redirect(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};const r=new Promise((t=>{const r="string"==typeof e?e:e.url;gr().tabs.query({active:!0,currentWindow:!0}).then((e=>{e.length>0&&gr().tabs.update(e[0].id,{url:r}),t(e[0])}))}));return r.then(t),r}attachEvent(e,t){this.fnCallbacks[e]||(this.fnCallbacks[e]=[]),this.fnCallbacks[e].push(t)}detachEvent(e,t){if(this.fnCallbacks[e])for(let r=this.fnCallbacks[e].length-1;r>=0;r--)this.fnCallbacks[e][r]&&t===this.fnCallbacks[e][r]&&(delete this.fnCallbacks[e][r],this.fnCallbacks[e].splice(r,1))}fireEvent(e,t){this.fnCallbacks[e]&&this.fnCallbacks[e].forEach((e=>{e&&e.call(this,t)}))}tabChanged(e){if(e){const t={action:"event",data:{name:yr.TABCHANGED,tabId:e.id,url:e.url}};e.url&&0!==e.url.indexOf("chrome://")&&gr().tabs.sendMessage(e.id,t).catch((e=>{})),this.fireEvent(yr.TABCHANGED,t.data)}}removeTab(e){gr().tabs.remove("number"==typeof e?e:e.id)}}const wr=br;br.prototype.closeTab=br.prototype.removeTab,br.prototype.on=br.prototype.attachEvent,br.prototype.emit=br.prototype.fireEvent;class _r{constructor(e){pr(this,"settings",void 0),pr(this,"fnCallbacks",{}),pr(this,"fnListeners",{}),pr(this,"root",void 0),this.root=e;const t=gr().runtime.getManifest();this.settings={name:t.name,version:t.version,optionsPage:t.options_ui},gr().runtime.onMessage.addListener(((t,r)=>new Promise((n=>{let i,o;switch(t.action){case"event":o=t.name,i={name:o,url:r.tab?r.tab.url:r.url},r.tab&&(i.tabId=r.tab.id),t.data&&(i.data=t.data.data),t.data&&t.data.tabId?(i.action="event",t.data.tabId===Er.ALLTABS?this.broadcastEvent(i).then(n):gr().tabs.sendMessage(t.data.tabId,i).then(n)):this.fnCallbacks[o]?this.fnCallbacks[o].forEach((e=>{2===e.length?e.call(this,i,n):(e.call(this,i,(()=>{})),n(null))})):(this.fnListeners[o]||(this.fnListeners[o]=[]),this.fnListeners[o].push({listener:n,message:i}));break;case"ci_browser_navigate":e.browser.navigate(t).then(n);break;case"ci_browser_redirect":e.browser.redirect(t).then(n);break;case"ci_extension_getSettings":n({name:this.name,version:this.version})}})))),gr().runtime.onMessageExternal&&gr().runtime.onMessageExternal.addListener(((e,t)=>new Promise((r=>{if("event"===e.action&&t.id){const n=e.name,i={name:n,url:t.tab?t.tab.url:t.url,extensionId:t.id};e.data&&(i.data=e.data.data),t.tab&&(i.tabId=t.tab.id),this.fnCallbacks[n]?this.fnCallbacks[n].forEach((e=>{2===e.length?e.call(this,i,r):(e.call(this,i,(()=>{})),r(null))})):r(null)}else r(null)}))))}attachEvent(e,t){this.fnListeners[e]&&(this.fnListeners[e].forEach((e=>{let{listener:r,message:n}=e;t.call(this,n,r)})),delete this.fnListeners[e]),this.fnCallbacks[e]||(this.fnCallbacks[e]=[]),this.fnCallbacks[e].push(t)}detachEvent(e,t){if(this.fnCallbacks[e])for(let r=this.fnCallbacks[e].length-1;r>=0;r--)this.fnCallbacks[e][r]&&t===this.fnCallbacks[e][r]&&(delete this.fnCallbacks[e][r],this.fnCallbacks[e].splice(r,1))}fireEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};const n={action:"event",name:e,data:t};const i=new Promise((r=>{t.extensionId?gr().runtime.sendMessage(t.extensionId,n).then(r):t.tabId===Er.ALLTABS?this.broadcastEvent(n).then(r):function(e){return!isNaN(parseInt(e,10))&&isFinite(e)}(t.tabId)&&t.tabId>=0?gr().tabs.sendMessage(t.tabId,n).then(r).catch((e=>{})):gr().tabs.query({active:!0,currentWindow:!0}).then((e=>{e&&e[0]&&e[0].id&&e[0].url&&-1===e[0].url.indexOf("chrome://")&&gr().tabs.sendMessage(e[0].id,n).then(r).catch((e=>{}))})),this.fnCallbacks[e]&&this.fnCallbacks[e].forEach((e=>{e.call(this,t,r)}))}));return i.then(r),i}getItem(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};const r=new Promise((t=>{"string"==typeof e||Array.isArray(e)?gr().storage.local.get(e).then((r=>{t("string"==typeof e?r?r[e]:null:r)})):t(null)}));return r.then(t),r}setItem(e,t){if("string"==typeof e)if(void 0===t)gr().storage.local.remove(e);else{const r={};r[e]=t,gr().storage.local.set(r)}else"object"==typeof e&&gr().storage.local.set(e)}getURL(e){return gr().runtime.getURL(e)}broadcastEvent(e){return gr().windows.getAll({populate:!0}).then((t=>new Promise((r=>{t.forEach((t=>{t.tabs&&t.tabs.forEach((t=>{t.id&&t.url&&-1===t.url.indexOf("chrome://")&&-1===t.url.indexOf("about:")&&gr().tabs.sendMessage(t.id,e).then(r).catch((e=>{}))}))}))}))))}get name(){return this.settings.name}get version(){return this.settings.version}get optionsPage(){return this.settings.optionsPage}}const Ar=_r;_r.prototype.on=_r.prototype.attachEvent,_r.prototype.emit=_r.prototype.fireEvent;class Tr{constructor(){pr(this,"actionReference",void 0),pr(this,"advised",!1),pr(this,"listners",[]),pr(this,"CLICK","ButtonClick");const e=gr().runtime.getManifest();e.action?this.actionReference=gr().action:e.browser_action&&(this.actionReference=gr().browserAction)}onButtonClick(e){for(let t=0;t<this.listners.length;t++)try{this.listners[t]({tabId:e.id,url:e.url,name:this.CLICK})}catch(e){}}attachEvent(e,t){e===this.CLICK&&(this.advised||(this.actionReference&&this.actionReference.onClicked.addListener(this.onButtonClick.bind(this)),this.advised=!0),this.listners.push(t))}detachEvent(e,t){if(e===this.CLICK){for(let e=0;e<this.listners.length;e++)this.listners[e]===t&&(this.listners.splice(e,1),e--);0===this.listners.length&&(this.advised=!1,this.actionReference&&this.actionReference.onClicked.removeListener(this.onButtonClick.bind(this)))}}setIcon(e){this.actionReference&&(this.actionReference!==gr().browserAction&&this.actionReference!==gr().action||this.actionReference.setIcon({path:e}))}setPopup(e){if(!this.actionReference)return;const t=e?e.url:"";this.actionReference!==gr().browserAction&&this.actionReference!==gr().action||this.actionReference.setPopup({popup:t})}setTitle(e){this.actionReference&&(this.actionReference!==gr().browserAction&&this.actionReference!==gr().action||this.actionReference.setTitle({title:e}))}setBadgeText(e){"string"!=typeof e&&(e=e.toString()),this.actionReference&&"setBadgeText"in this.actionReference&&this.actionReference.setBadgeText({text:e.toString()})}setBadgeBackgroundColor(e){this.actionReference&&"setBadgeBackgroundColor"in this.actionReference&&this.actionReference.setBadgeBackgroundColor({color:function(e){const t=/rgb\((\d+), (\d+), (\d+)\)/.exec(e);if(t)return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),255];{const t=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return[t>>16,(65280&t)>>8,255&t,255]}}(e)})}setBadgeColor(){}}const Ir=Tr;Tr.prototype.on=Tr.prototype.attachEvent;const Sr=class{constructor(e){pr(this,"root",void 0),this.root=e}open(){if(gr().runtime.openOptionsPage)gr().runtime.openOptionsPage();else{const e=this.root.extension.optionsPage;e&&this.root.browser.navigate({url:e,tabId:this.root.browser.NEWTAB})}}},xr=new class{constructor(){pr(this,"browser",void 0),pr(this,"extension",void 0),pr(this,"ui",void 0),this.browser=new wr,this.extension=new Ar(this),this.ui={button:new Ir,settings:new Sr(this)}}},Or={CDN:"https://static.rakuten.com",member_api:"www.rakuten.com",domain:"www.rakuten.com",api:"apituner.ecbsn.com",search_api:"search.ecbsn.com",BASE:"https://%domain%",STORES:"https://%api%/apituner/button/domain/entity/list",STORE_REWARDS:"https://%api%/apituner/v1/store/reward/list?channel={channel}",STORE_DEALS_COUNT:"https://%api%/apituner/button/store/deal/count",DEALS:"https://%api%/apituner/button/store/deal/list",STORE_DEALS:"https://%api%/apituner/button/store/deal/list?storeId={storeId}",STORE_CONTENT:"https://%api%/apituner/button/store/content?id={storeId}",STORE_CATEGORIES:"https://%api%/apituner/button/store/category/list",CAMPAIGNS:"https://%api%/apituner/button/campaign/list",CATEGORIES:"https://%api%/apituner/button/category/list",EDS:"https://%api%/apituner/eds/member/profile",GIFT_CARD:"https://%domain%/api/gift-cards/catalog/product/%giftCardProductCode",ABANDONED_PRODUCTS:"https://cas.rrcbsn.com/cart_abandonment/v1/members/%uid%/products",MEMBER_DETAILS:"https://%member_api%/api/v3/button/member",MEMBER_ACTIVITY:"https://%member_api%/api/v3/button/member/activity",MEMBER_CCINFO:"https://%member_api%/api/v3/button/member/ccinfo",MEMBER_GEOGATING:"https://%member_api%/geogating/v1/checkStatus.do",MEMBER_FAVORITES:"https://%member_api%/api/v3/button/member/favorite/stores",MEMBER_VISITED:"https://%member_api%/api/v3/button/member/store/visited",MEMBER_PURCHASED:"https://%member_api%/api/v3/button/member/store/purchased",MEMBER_TICKETS:"https://%member_api%/api/v3/button/member/trackingticket/list",MEMBER_BONUSES:"https://%member_api%/api/v3/button/member/bonus/list",MEMBER_ACTIVATE_BONUS:"https://%member_api%/api/v3/button/member/bonus/activate",MEMBER_ONE_RECEIPTS:"https://%member_api%/api/v3/button/member/receipts/list",MEMBER_ISCB:"https://%member_api%/api/v3/button/member/instore/offers/available",MEMBER_ISCB_LINKED:"https://%member_api%/api/v3/button/member/instore/offers/linked",MEMBER_UDPATE_TCPP:"https://%member_api%/api/v3/button/member/tcpp/update",MEMBER_UDPATE_ATTRIBUTE:"https://%member_api%/api/v3/button/member/attributes/update",MEMBER_TAF:"https://%member_api%/api/v3/button/member/referral/program",SEARCH_PRODUCTS:"https://search.ecbsn.com/search/products/v1/suggest",SIMILAR_PRODUCTS:"https://%api%/apituner/pcs/dataservices/getSimilarProducts/v1?partnerId=1&sourceName=Toolbar",SIMILAR_STORES:"https://%api%/apituner/similar-stores/v1_0",CAPTURE_ORDER:"https://capture.ecbsn.com/api/1.0/commercecapture",SETTINGS:"https://%member_api%/toolbar/config/settings.json",SETTINGS_PM:"https://%member_api%/toolbar/config/pm_stores.json",SETTINGS_COUPONS:"https://%member_api%/toolbar/config/coupons.json",SETTINGS_PRODUCTS:"https://%member_api%/toolbar/config/products.json",SETTINGS_MERCHANTS:"https://button.rrcbsn.com/settings/merchants.json",SETTINGS_SERP:"https://button.rrcbsn.com/settings/serp.json",SETTINGS_PROMOS:"https://button.rrcbsn.com/settings/promos.json",WEB_INSTALL:"https://%domain%/button/%browser/install/success.htm?sourceName=toolbar&eeid=45426&toolbarId=%userid",WEB_LOGON_FORM:"https://%domain%/auth/getLogonForm.do?tb=yes&eeid=26118",WEB_LOGIN:"https://%domain%/button/user-auth.htm?tb=yes&auth_type=su&sourceName=toolbar",WEB_UNINSTALL:"https://%domain%/button/uninstall.htm?tb=yes&toolbarId=%userid&v=%version",WEB_MOBILE_EXTENSION:"rakuten://us/beo?url=https://%domain%/button/mobile/enable&autologin=true",WEB_STORE_PAGE:"https://%domain%/{domainName}",WEB_SEARCH:"https://%domain%/search?term={terms}&tb=yes&ebtoken=%ebtoken",WEB_REWARDS:"https://%domain%/pending-cash-back.htm?tb=yes&ebtoken=%ebtoken&eeid=26117",WEB_CASHBACK:"https://%domain%/cash-back-history.htm?tb=yes&ebtoken=%ebtoken&eeid=26117",WEB_HOME:"https://%domain%/?tb=yes&ebtoken=%ebtoken&eeid=26117",WEB_REFERRAL:"https://%domain%/referral/default.do?tb=yes&ebtoken=%ebtoken",WEB_HELP:"https://%domain%/help/section/ebates-cash-back-button-115002573947?tb=yes",WEB_PRIVACY_PREFERENCES:"https://%domain%/privacy-preferences.htm?tb=yes&ebtoken=%ebtoken&eeid=46021",WEB_DESKTOP_ATTESTATION:"https://%domain%/?showAttestation=true&tb=yes&ebtoken=%ebtoken&eeid=46021",WEB_ADVERTISING_DISCLOSURE:"https://%domain%/help/article/advertising-disclosure-360001940028?tb=yes&ebtoken=%ebtoken&eeid=26117",WEBSTORE_SAFARI:"https://itunes.apple.com/app/apple-store/id1451893560?pt=117880184&mt=12&ls=1",WEBSTORE_FIREFOX:"https://addons.mozilla.org/en-US/firefox/addon/ebates/reviews/add",WEBSTORE_EDGE:"https://microsoftedge.microsoft.com/addons/detail/gmmlpenookphoknnpfilofakghemolmg",WEBSTORE_CHROME:"https://chrome.google.com/webstore/detail/ebates-cash-back/chhjbpecpncaggjpdakmflnfcopglcmi/reviews",POPUP_SEARCH:"https://%search_api%/store/list/suggest?q={terms}&rows=25&start=0"},Rr="https://api.engager.ecbsn.com/datagrid/graphql";var kr=r(8283);const Nr=r(3710),Cr=r(8237),Dr=r(4264),Lr=r(2106),Br=r(9614),Pr=r(6022),Ur=r.g.setImmediate||kr.nextTick.bind(kr),Mr=()=>{};class jr{constructor(e,t){t=t||{},this.queue=[],this.writeKey=e,this.host=Nr(t.host||"https://api.segment.io"),this.timeout=t.timeout||!1,this.flushAt=Math.max(t.flushAt,1)||20,this.flushInterval=t.flushInterval||1e4,this.flushed=!1,this.defaultContext=t.context,this.defaultProperties=t.properties,this._sessionId=null,Object.defineProperty(this,"enable",{configurable:!1,writable:!1,enumerable:!0,value:"boolean"!=typeof t.enable||t.enable})}set(e){Object.assign(this.defaultProperties,e)}setAnonymousId(e){return this.anonymousId=e,this}async startSesssion(e){this._sessionId=e}async endSession(){this._sessionId=null}async validateSession(){const e=(new Date).getTime();if(window.clearInterval(this._sessionTimeout),!this._sessionId)try{this.startSesssion(e)}catch(e){}this._sessionId&&(this._sessionTimeout=window.setInterval((()=>this.endSession()),18e5))}reset(){this.flush(),this._sessionId=null}_validate(e,t){try{Cr(e,t)}catch(e){if("Your message must be < 32kb."===e.message)return;throw e}}identify(e,t,r,n){this.userId=e;let i={userId:e,anonymousId:this.anonymousId,traits:t};return this._validate(i,"identify"),this.enqueue("identify",i,n),this}group(e,t){return this._validate(e,"group"),this.enqueue("group",e,t),this}track(e,t,r){t=Object.assign({},t,this.defaultProperties);let n={userId:this.userId,anonymousId:this.anonymousId,event:e,properties:t};return this._validate(n,"track"),this.enqueue("track",n,r),this}page(e,t){return this._validate(e,"page"),this.enqueue("page",e,t),this}screen(e,t){return this._validate(e,"screen"),this.enqueue("screen",e,t),this}alias(e,t){return this._validate(e,"alias"),this.enqueue("alias",e,t),this}enqueue(e,t,r){return r=r||Mr,this.enable?((t=Object.assign({},t)).type=e,t.context=Object.assign({library:{name:"analytics-webextensions",version:"0.0.10"}},this.defaultContext,t.context),t._metadata=Object.assign({nodeVersion:kr.versions.node},t._metadata),t.timestamp||(t.timestamp=new Date),t.messageId||(t.messageId=`${Br(JSON.stringify(t))}-${Lr()}`),t.anonymousId&&!Pr(t.anonymousId)&&(t.anonymousId=JSON.stringify(t.anonymousId)),t.userId&&!Pr(t.userId)&&(t.userId=JSON.stringify(t.userId)),this._sessionId&&(t.integrations={Amplitude:{session_id:this._sessionId}},t.properties&&(t.properties={session_id:this._sessionId,...t.properties})),this.queue.push({message:t,callback:r}),this.flushed?(this.queue.length>=this.flushAt&&this.flush(),void(this.flushInterval&&!this.timer&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval)))):(this.flushed=!0,void this.flush())):Ur(r)}flush(e){if(e=e||Mr,!this.enable)return Ur(e);if(this.timer&&(clearTimeout(this.timer),this.timer=null),!this.queue.length)return Ur(e);const t=this.queue.splice(0,this.flushAt),r=t.map((e=>e.callback)),n={batch:t.map((e=>e.message)),timestamp:new Date,sentAt:new Date},i=t=>{r.forEach((e=>e(t))),e(t,n)},o={method:"POST",headers:{Authorization:`Basic ${btoa(this.writeKey+":")}`,"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)};this.timeout&&(o.timeout="string"==typeof this.timeout?Dr(this.timeout):this.timeout),fetch(`${this.host}/v1/batch`,o).then((()=>i())).catch((e=>{if(e.response){const t=new Error(e.response.statusText);return i(t)}i(e)}))}}var Fr=r(6922),Vr=r.n(Fr),$r={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},zr=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];Object.prototype.hasOwnProperty.call($r,e)||(e=$r.log),zr[e].apply(zr,t)};function Gr(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{return e.apply(void 0,r)}catch(e){zr.error(t,e)}}}zr.debug=void 0,zr.log=void 0,zr.info=void 0,zr.warn=void 0,zr.error=void 0;var qr,Hr=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},Wr=!1;function Kr(e){Wr=e}function Jr(e,t,r){var n=r.value;r.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=qr?Yr(n):n;return r.apply(this,e)}}function Yr(e){return function(){return Xr(e,this,arguments)}}function Xr(e,t,r){try{return e.apply(t,r)}catch(e){if(Zr($r.error,e),qr)try{qr(e)}catch(e){Zr($r.error,e)}}}function Zr(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];Wr&&zr.apply(void 0,Hr([e,"[MONITOR]"],t,!1))}var Qr=1e3,en=6e4;function tn(e,t,r){var n,i,o=!r||void 0===r.leading||r.leading,s=!r||void 0===r.trailing||r.trailing,a=!1;return{throttled:function(){for(var r=[],c=0;c<arguments.length;c++)r[c]=arguments[c];a?n=r:(o?e.apply(void 0,r):n=r,a=!0,i=setTimeout((function(){s&&n&&e.apply(void 0,n),a=!1,n=void 0}),t))},cancel:function(){clearTimeout(i),a=!1,n=void 0}}}function rn(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.forEach((function(t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})),e}function nn(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,nn)}function on(e){return 0!==e&&100*Math.random()<=e}function sn(){}function an(e,t,r){if("object"!=typeof e||null===e)return JSON.stringify(e);var n=cn(Object.prototype),i=cn(Array.prototype),o=cn(Object.getPrototypeOf(e)),s=cn(e);try{return JSON.stringify(e,t,r)}catch(e){return"<error: unable to serialize object>"}finally{n(),i(),o(),s()}}function cn(e){var t=e,r=t.toJSON;return r?(delete t.toJSON,function(){t.toJSON=r}):sn}function un(e,t){return-1!==e.indexOf(t)}function ln(e){if(Array.from)return Array.from(e);var t=[];if(e instanceof Set)e.forEach((function(e){return t.push(e)}));else for(var r=0;r<e.length;r++)t.push(e[r]);return t}function hn(e){return function(e){return"number"==typeof e}(e)&&e>=0&&e<=100}function fn(e){return Object.keys(e).map((function(t){return e[t]}))}function dn(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof e&&(e="object"==typeof self?self:"object"==typeof window?window:{}),e}function pn(e,t,r){void 0===r&&(r="");var n=e.charCodeAt(t-1),i=n>=55296&&n<=56319?t+1:t;return e.length<=i?e:"".concat(e.slice(0,i)).concat(r)}function mn(e,t,r,n){return gn(e,[t],r,n)}function gn(e,t,r,n){var i=void 0===n?{}:n,o=i.once,s=i.capture,a=i.passive,c=Yr(o?function(e){l(),r(e)}:r),u=a?{capture:s,passive:a}:s;t.forEach((function(t){return e.addEventListener(t,c,u)}));var l=function(){return t.forEach((function(t){return e.removeEventListener(t,c,u)}))};return{stop:l}}function vn(e,t,r){if(void 0===r&&(r=function(){if("undefined"!=typeof WeakSet){var e=new WeakSet;return{hasAlreadyBeenSeen:function(t){var r=e.has(t);return r||e.add(t),r}}}var t=[];return{hasAlreadyBeenSeen:function(e){var r=t.indexOf(e)>=0;return r||t.push(e),r}}}()),void 0===t)return e;if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){var n=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,n)}if(!r.hasAlreadyBeenSeen(t)){if(Array.isArray(t)){for(var i=Array.isArray(e)?e:[],o=0;o<t.length;++o)i[o]=vn(i[o],t[o],r);return i}var s,a="object"==(null===(s=e)?"null":Array.isArray(s)?"array":typeof s)?e:{};for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(a[c]=vn(a[c],t[c],r));return a}}function yn(e){return vn(void 0,e)}function En(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=0,i=t;n<i.length;n++){var o=i[n];null!=o&&(e=vn(e,o))}return e}function bn(){var e={};return{get:function(){return e},add:function(t,r){e[t]=r},remove:function(t){delete e[t]},set:function(t){e=t}}}var wn,_n=function(){function e(){this.buffer=[]}return e.prototype.add=function(e){this.buffer.push(e)>500&&this.buffer.splice(0,1)},e.prototype.drain=function(){this.buffer.forEach((function(e){return e()})),this.buffer.length=0},e}();function An(){return(new Date).getTime()}function Tn(){return An()}function In(){return performance.now()}function Sn(){return{relative:In(),timeStamp:Tn()}}function xn(e,t){return t-e}function On(){return void 0===wn&&(wn=performance.timing.navigationStart),wn}function Rn(){var e=dn().DatadogEventBridge;if(e)return{getAllowedWebViewHosts:function(){return JSON.parse(e.getAllowedWebViewHosts())},send:function(t,r){e.send(JSON.stringify({eventType:t,event:r}))}}}function kn(e){var t;void 0===e&&(e=null===(t=dn().location)||void 0===t?void 0:t.hostname);var r=Rn();return!!r&&r.getAllowedWebViewHosts().some((function(t){return e===t||(r=e,n=".".concat(t),r.slice(-n.length)===n);var r,n}))}var Nn,Cn,Dn;function Ln(e,t,r,n){var i=new Date;i.setTime(i.getTime()+r);var o="expires=".concat(i.toUTCString()),s=n&&n.crossSite?"none":"strict",a=n&&n.domain?";domain=".concat(n.domain):"",c=n&&n.secure?";secure":"";document.cookie="".concat(e,"=").concat(t,";").concat(o,";path=/;samesite=").concat(s).concat(a).concat(c)}function Bn(e){return function(e,t){var r=new RegExp("(?:^|;)\\s*".concat(t,"\\s*=\\s*([^;]+)")).exec(e);return r?r[1]:void 0}(document.cookie,e)}function Pn(e,t){Ln(e,"",0,t)}function Un(){return Cn||new Set}function Mn(e){return jn(e,function(e){if(e.origin)return e.origin;var t=e.host.replace(/(:80|:443)$/,"");return"".concat(e.protocol,"//").concat(t)}(window.location)).href}function jn(e,t){if(function(){if(void 0!==Dn)return Dn;try{var e=new URL("http://test/path");return Dn="http://test/path"===e.href}catch(e){Dn=!1}return Dn}())return void 0!==t?new URL(e,t):new URL(e);if(void 0===t&&!/:/.test(e))throw new Error("Invalid URL: '".concat(e,"'"));var r=document,n=r.createElement("a");if(void 0!==t){var i=(r=document.implementation.createHTMLDocument("")).createElement("base");i.href=t,r.head.appendChild(i),r.body.appendChild(n)}return n.href=e,n}var Fn="datadoghq.com",Vn={logs:"logs",rum:"rum",sessionReplay:"session-replay"},$n={logs:"logs",rum:"rum",sessionReplay:"replay"};function zn(e,t,r){var n=e.site,i=void 0===n?Fn:n,o=e.clientToken,s=i.split("."),a=s.pop(),c="".concat(Vn[t],".browser-intake-").concat(s.join("-"),".").concat(a),u="https://".concat(c,"/api/v2/").concat($n[t]),l=e.proxyUrl&&Mn(e.proxyUrl);return{build:function(){var e="ddsource=browser"+"&ddtags=".concat(encodeURIComponent(["sdk_version:".concat("4.16.1")].concat(r).join(",")))+"&dd-api-key=".concat(o)+"&dd-evp-origin-version=".concat(encodeURIComponent("4.16.1"))+"&dd-evp-origin=browser"+"&dd-request-id=".concat(nn());"rum"===t&&(e+="&batch_time=".concat(Tn()));var n="".concat(u,"?").concat(e);return l?"".concat(l,"?ddforward=").concat(encodeURIComponent(n)):n},buildIntakeUrl:function(){return l?"".concat(l,"?ddforward"):u},endpointType:t}}var Gn=/[^a-z0-9_:./-]/;function qn(e,t){var r=200-e.length-1;(t.length>r||Gn.test(t))&&zr.warn("".concat(e," value doesn't meet tag requirements and will be sanitized"));var n=t.replace(/,/g,"_");return"".concat(e,":").concat(n)}function Hn(e){var t=function(e){var t=e.env,r=e.service,n=e.version,i=e.datacenter,o=[];return t&&o.push(qn("env",t)),r&&o.push(qn("service",r)),n&&o.push(qn("version",n)),i&&o.push(qn("datacenter",i)),o}(e),r=function(e,t){return{logsEndpointBuilder:zn(e,"logs",t),rumEndpointBuilder:zn(e,"rum",t),sessionReplayEndpointBuilder:zn(e,"sessionReplay",t)}}(e,t),n=fn(r).map((function(e){return e.buildIntakeUrl()})),i=function(e,t,r){if(!e.replica)return;var n=rn({},e,{site:Fn,clientToken:e.replica.clientToken}),i={logsEndpointBuilder:zn(n,"logs",r),rumEndpointBuilder:zn(n,"rum",r)};return t.push.apply(t,fn(i).map((function(e){return e.buildIntakeUrl()}))),rn({applicationId:e.replica.applicationId},i)}(e,n,t);return rn({isIntakeUrl:function(e){return n.some((function(t){return 0===e.indexOf(t)}))},replica:i,site:e.site||Fn},r)}function Wn(e){var t,r;if(e&&e.clientToken)if(void 0===e.sampleRate||hn(e.sampleRate)){var n;if(void 0===e.telemetrySampleRate||hn(e.telemetrySampleRate))return n=e.enableExperimentalFeatures,Array.isArray(n)&&(Cn||(Cn=new Set(n)),n.filter((function(e){return"string"==typeof e})).forEach((function(e){Cn.add(e)}))),rn({beforeSend:e.beforeSend&&Gr(e.beforeSend,"beforeSend threw an error:"),cookieOptions:Kn(e),sampleRate:null!==(t=e.sampleRate)&&void 0!==t?t:100,telemetrySampleRate:null!==(r=e.telemetrySampleRate)&&void 0!==r?r:20,service:e.service,silentMultipleInit:!!e.silentMultipleInit,batchBytesLimit:16384,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:3e4,batchMessagesLimit:50,messageBytesLimit:262144},Hn(e));zr.error("Telemetry Sample Rate should be a number between 0 and 100")}else zr.error("Sample Rate should be a number between 0 and 100");else zr.error("Client Token is not configured, we will not send any data.")}function Kn(e){var t={};return t.secure=function(e){return!!e.useSecureSessionCookie||!!e.useCrossSiteSessionCookie}(e),t.crossSite=!!e.useCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=function(){if(void 0===Nn){for(var e="dd_site_test_".concat(nn()),t=window.location.hostname.split("."),r=t.pop();t.length&&!Bn(e);)r="".concat(t.pop(),".").concat(r),Ln(e,"test",Qr,{domain:r});Pn(e,{domain:r}),Nn=r}return Nn}()),t}var Jn="?";function Yn(e){var t=[],r=oi(e,"stack");return r&&r.split("\n").forEach((function(e){var r=function(e){var t=Qn.exec(e);if(!t)return;var r=t[2]&&0===t[2].indexOf("native"),n=t[2]&&0===t[2].indexOf("eval"),i=ei.exec(t[2]);n&&i&&(t[2]=i[1],t[3]=i[2],t[4]=i[3]);return{args:r?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||Jn,line:t[3]?+t[3]:void 0,url:r?void 0:t[2]}}(e)||function(e){var t=ti.exec(e);if(!t)return;return{args:[],column:t[3]?+t[3]:void 0,func:Jn,line:t[2]?+t[2]:void 0,url:t[1]}}(e)||function(e){var t=ri.exec(e);if(!t)return;return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||Jn,line:+t[3],url:t[2]}}(e)||function(e){var t=ni.exec(e);if(!t)return;var r=t[3]&&t[3].indexOf(" > eval")>-1,n=ii.exec(t[3]);r&&n&&(t[3]=n[1],t[4]=n[2],t[5]=void 0);return{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||Jn,line:t[4]?+t[4]:void 0,url:t[3]}}(e);r&&(!r.func&&r.line&&(r.func=Jn),t.push(r))})),{message:oi(e,"message"),name:oi(e,"name"),stack:t}}var Xn="((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\\w+\\.|\\/).*?)",Zn="(?::(\\d+))",Qn=new RegExp("^\\s*at (.*?) ?\\(".concat(Xn).concat(Zn,"?").concat(Zn,"?\\)?\\s*$"),"i"),ei=new RegExp("\\((\\S*)".concat(Zn).concat(Zn,"\\)"));var ti=new RegExp("^\\s*at ?".concat(Xn).concat(Zn,"?").concat(Zn,"??\\s*$"),"i");var ri=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;var ni=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,ii=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function oi(e,t){if("object"==typeof e&&e&&t in e){var r=e[t];return"string"==typeof r?r:void 0}}var si="agent",ai="console",ci="logger",ui="network",li="source",hi="report";function fi(e){var t=di(e);return e.stack.forEach((function(e){var r="?"===e.func?"<anonymous>":e.func,n=e.args&&e.args.length>0?"(".concat(e.args.join(", "),")"):"",i=e.line?":".concat(e.line):"",o=e.line&&e.column?":".concat(e.column):"";t+="\n  at ".concat(r).concat(n," @ ").concat(e.url).concat(i).concat(o)})),t}function di(e){return"".concat(e.name||"Error",": ").concat(e.message)}function pi(){var e,t=new Error;if(!t.stack)try{throw t}catch(e){}return Xr((function(){var r=Yn(t);r.stack=r.stack.slice(2),e=fi(r)})),e}var mi=function(){function e(e){this.onFirstSubscribe=e,this.observers=[]}return e.prototype.subscribe=function(e){var t=this;return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe()||void 0),this.observers.push(e),{unsubscribe:function(){t.observers=t.observers.filter((function(t){return e!==t})),!t.observers.length&&t.onLastUnsubscribe&&t.onLastUnsubscribe()}}},e.prototype.notify=function(e){this.observers.forEach((function(t){return t(e)}))},e}();function gi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=new mi((function(){var t=e.map((function(e){return e.subscribe((function(e){return r.notify(e)}))}));return function(){return t.forEach((function(e){return e.unsubscribe()}))}}));return r}var vi={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function yi(e){var t,r=[];un(e,vi.cspViolation)&&r.push(t=new mi((function(){var e=Yr((function(e){t.notify(function(e){var t=vi.cspViolation,r="'".concat(e.blockedURI,"' blocked by '").concat(e.effectiveDirective,"' directive");return{type:vi.cspViolation,subtype:e.effectiveDirective,message:"".concat(t,": ").concat(r),stack:Ei(e.effectiveDirective,"".concat(r,' of the policy "').concat(pn(e.originalPolicy,100,"..."),'"'),e.sourceFile,e.lineNumber,e.columnNumber)}}(e))}));return mn(document,"securitypolicyviolation",e).stop})));var n=e.filter((function(e){return e!==vi.cspViolation}));return n.length&&r.push(function(e){var t=new mi((function(){if(window.ReportingObserver){var r=Yr((function(e){return e.forEach((function(e){t.notify(function(e){var t=e.type,r=e.body;return{type:t,subtype:r.id,message:"".concat(t,": ").concat(r.message),stack:Ei(r.id,r.message,r.sourceFile,r.lineNumber,r.columnNumber)}}(e))}))})),n=new window.ReportingObserver(r,{types:e,buffered:!0});return n.observe(),function(){n.disconnect()}}}));return t}(n)),gi.apply(void 0,r)}function Ei(e,t,r,n,i){return r&&fi({name:e,message:t,stack:[{func:"?",url:r,line:n,column:i}]})}function bi(e,t,r){return void 0===e?[]:"all"===e||Array.isArray(e)&&e.every((function(e){return un(t,e)}))?"all"===e?t:(n=e,i=new Set,n.forEach((function(e){return i.add(e)})),ln(i)):void zr.error("".concat(r,' should be "all" or an array with allowed values "').concat(t.join('", "'),'"'));var n,i}var wi=function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},_i={debug:"debug",error:"error",info:"info",warn:"warn"},Ai="console",Ti="http",Ii=Object.keys(_i),Si=function(){function e(e,t,r,n,i){void 0===r&&(r=Ti),void 0===n&&(n=_i.debug),void 0===i&&(i={}),this.handleLogStrategy=e,this.handlerType=r,this.level=n,this.contextManager=bn(),this.contextManager.set(rn({},i,t?{logger:{name:t}}:void 0))}return e.prototype.log=function(e,t,r){void 0===r&&(r=_i.info),this.handleLogStrategy({message:e,context:yn(t),status:r},this)},e.prototype.debug=function(e,t){this.log(e,t,_i.debug)},e.prototype.info=function(e,t){this.log(e,t,_i.info)},e.prototype.warn=function(e,t){this.log(e,t,_i.warn)},e.prototype.error=function(e,t){var r={error:{origin:ci}};this.log(e,En(r,t),_i.error)},e.prototype.setContext=function(e){this.contextManager.set(e)},e.prototype.getContext=function(){return this.contextManager.get()},e.prototype.addContext=function(e,t){this.contextManager.add(e,t)},e.prototype.removeContext=function(e){this.contextManager.remove(e)},e.prototype.setHandler=function(e){this.handlerType=e},e.prototype.getHandler=function(){return this.handlerType},e.prototype.setLevel=function(e){this.level=e},e.prototype.getLevel=function(){return this.level},wi([Jr],e.prototype,"log",null),e}();function xi(){return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM||Bn("datadog-synthetics-injects-rum"))}function Oi(){var e=window._DATADOG_SYNTHETICS_RESULT_ID||Bn("datadog-synthetics-result-id");return"string"==typeof e?e:void 0}var Ri,ki=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","http://localhost","<anonymous>"],Ni=["ddog-gov.com"],Ci={maxEventsPerPage:0,sentEventCount:0,telemetryEnabled:!1};function Di(e){var t,r=new mi;return Ci.telemetryEnabled=on(e.telemetrySampleRate),Ri=function(n){!un(Ni,e.site)&&Ci.telemetryEnabled&&r.notify(function(e){return En({type:"telemetry",date:Tn(),service:"browser-sdk",version:"4.16.1",source:"browser",_dd:{format_version:2},telemetry:e,experimental_features:ln(Un())},void 0!==t?t():{})}(n))},qr=Li,rn(Ci,{maxEventsPerPage:e.maxTelemetryEventsPerPage,sentEventCount:0}),{setContextProvider:function(e){t=e},observable:r}}function Li(e){Bi(rn({status:"error"},function(e){if(e instanceof Error){var t=Yn(e);return{error:{kind:t.name,stack:fi(Pi(t))},message:t.message}}return{error:{stack:"Not an instance of error"},message:"Uncaught ".concat(an(e))}}(e)))}function Bi(e){Ri&&Ci.sentEventCount<Ci.maxEventsPerPage&&(Ci.sentEventCount+=1,Ri(e))}function Pi(e){return e.stack=e.stack.filter((function(e){return!e.url||ki.some((function(t){return r=e.url,n=t,r.slice(0,n.length)===n;var r,n}))})),e}var Ui=/[^\u0000-\u007F]/,Mi=function(){function e(e,t,r,n,i,o){void 0===o&&(o=sn),this.request=e,this.batchMessagesLimit=t,this.batchBytesLimit=r,this.messageBytesLimit=n,this.flushTimeout=i,this.beforeUnloadCallback=o,this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesCount=0,this.bufferMessagesCount=0,this.flushOnVisibilityHidden(),this.flushPeriodically()}return e.prototype.add=function(e){this.addOrUpdate(e)},e.prototype.upsert=function(e,t){this.addOrUpdate(e,t)},e.prototype.flush=function(){if(0!==this.bufferMessagesCount){var e=this.pushOnlyBuffer.concat(fn(this.upsertBuffer)),t=this.bufferBytesCount;this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesCount=0,this.bufferMessagesCount=0,this.request.send(e.join("\n"),t)}},e.prototype.computeBytesCount=function(e){return Ui.test(e)?void 0!==window.TextEncoder?(new TextEncoder).encode(e).length:new Blob([e]).size:e.length},e.prototype.addOrUpdate=function(e,t){var r=this.process(e),n=r.processedMessage,i=r.messageBytesCount;i>=this.messageBytesLimit?zr.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(this.messageBytesLimit,"KB.")):(this.hasMessageFor(t)&&this.remove(t),this.willReachedBytesLimitWith(i)&&this.flush(),this.push(n,i,t),this.isFull()&&this.flush())},e.prototype.process=function(e){var t=an(e);return{processedMessage:t,messageBytesCount:this.computeBytesCount(t)}},e.prototype.push=function(e,t,r){this.bufferMessagesCount>0&&(this.bufferBytesCount+=1),void 0!==r?this.upsertBuffer[r]=e:this.pushOnlyBuffer.push(e),this.bufferBytesCount+=t,this.bufferMessagesCount+=1},e.prototype.remove=function(e){var t=this.upsertBuffer[e];delete this.upsertBuffer[e];var r=this.computeBytesCount(t);this.bufferBytesCount-=r,this.bufferMessagesCount-=1,this.bufferMessagesCount>0&&(this.bufferBytesCount-=1)},e.prototype.hasMessageFor=function(e){return void 0!==e&&void 0!==this.upsertBuffer[e]},e.prototype.willReachedBytesLimitWith=function(e){return this.bufferBytesCount+e+1>=this.batchBytesLimit},e.prototype.isFull=function(){return this.bufferMessagesCount===this.batchMessagesLimit||this.bufferBytesCount>=this.batchBytesLimit},e.prototype.flushPeriodically=function(){var e=this;setTimeout(Yr((function(){e.flush(),e.flushPeriodically()})),this.flushTimeout)},e.prototype.flushOnVisibilityHidden=function(){var e=this;navigator.sendBeacon&&(mn(window,"beforeunload",this.beforeUnloadCallback),mn(document,"visibilitychange",(function(){"hidden"===document.visibilityState&&e.flush()})),mn(window,"beforeunload",(function(){return e.flush()})))},e}(),ji=function(){function e(e,t){this.endpointBuilder=e,this.bytesLimit=t}return e.prototype.send=function(e,t){var r=this.endpointBuilder.build();if(!!navigator.sendBeacon&&t<this.bytesLimit)try{if(navigator.sendBeacon(r,e))return}catch(e){!function(e){Fi||(Fi=!0,Li(e))}(e)}var n=new XMLHttpRequest;n.open("POST",r,!0),n.send(e)},e}(),Fi=!1;function Vi(e,t,r){var n,i=o(t);function o(t){return new Mi(new ji(t,e.batchBytesLimit),e.batchMessagesLimit,e.batchBytesLimit,e.messageBytesLimit,e.flushTimeout)}return r&&(n=o(r)),{add:function(e,t){void 0===t&&(t=!0),i.add(e),n&&t&&n.add(e)}}}var $i=1/0,zi=function(){function e(e){var t=this;this.expireDelay=e,this.entries=[],this.clearOldContextsInterval=setInterval((function(){return t.clearOldContexts()}),6e4)}return e.prototype.add=function(e,t){var r=this,n={context:e,startTime:t,endTime:$i,remove:function(){var e=r.entries.indexOf(n);e>=0&&r.entries.splice(e,1)},close:function(e){n.endTime=e}};return this.entries.unshift(n),n},e.prototype.find=function(e){void 0===e&&(e=$i);for(var t=0,r=this.entries;t<r.length;t++){var n=r[t];if(n.startTime<=e){if(e<=n.endTime)return n.context;break}}},e.prototype.closeActive=function(e){var t=this.entries[0];t&&t.endTime===$i&&t.close(e)},e.prototype.findAll=function(e){return void 0===e&&(e=$i),this.entries.filter((function(t){return t.startTime<=e&&e<=t.endTime})).map((function(e){return e.context}))},e.prototype.reset=function(){this.entries=[]},e.prototype.stop=function(){clearInterval(this.clearOldContextsInterval)},e.prototype.clearOldContexts=function(){for(var e=In()-this.expireDelay;this.entries.length>0&&this.entries[this.entries.length-1].endTime<e;)this.entries.pop()},e}();var Gi,qi=144e5,Hi=9e5,Wi=/^([a-z]+)=([a-z0-9-]+)$/,Ki="&",Ji="_dd_s",Yi=[];function Xi(e,t){var r;if(void 0===t&&(t=0),Gi||(Gi=e),e===Gi)if(t>=100)eo();else{var n,i=no();if(Zi()){if(i.lock)return void Qi(e,t);if(n=nn(),i.lock=n,ro(i,e.options),(i=no()).lock!==n)return void Qi(e,t)}var o=e.process(i);if(Zi()&&(i=no()).lock!==n)Qi(e,t);else{if(o&&to(o,e.options),Zi()&&(!o||!io(o))){if((i=no()).lock!==n)return void Qi(e,t);delete i.lock,ro(i,e.options),o=i}null===(r=e.after)||void 0===r||r.call(e,o||i),eo()}}else Yi.push(e)}function Zi(){return!!window.chrome||/HeadlessChrome/.test(window.navigator.userAgent)}function Qi(e,t){setTimeout(Yr((function(){Xi(e,t+1)})),10)}function eo(){Gi=void 0;var e=Yi.shift();e&&Xi(e)}function to(e,t){io(e)?function(e){Ln(Ji,"",0,e)}(t):(e.expire=String(An()+Hi),ro(e,t))}function ro(e,t){Ln(Ji,function(e){return(t=e,Object.keys(t).map((function(e){return[e,t[e]]}))).map((function(e){var t=e[0],r=e[1];return"".concat(t,"=").concat(r)})).join(Ki);var t}(e),Hi,t)}function no(){var e=Bn(Ji),t={};return function(e){return void 0!==e&&(-1!==e.indexOf(Ki)||Wi.test(e))}(e)&&e.split(Ki).forEach((function(e){var r=Wi.exec(e);if(null!==r){var n=r[1],i=r[2];t[n]=i}})),t}function io(e){return t=e,0===Object.keys(t).length;var t}function oo(e,t,r){var n=new mi,i=new mi,o=setInterval(Yr((function(){Xi({options:e,process:function(e){return u(e)?void 0:{}},after:a})})),1e3),s=function(){var e=no();if(u(e))return e;return{}}();function a(e){return u(e)||(e={}),c()&&(!function(e){return s.id!==e.id||s[t]!==e[t]}(e)?s=e:(s={},i.notify())),e}function c(){return void 0!==s[t]}function u(e){return(void 0===e.created||An()-Number(e.created)<qi)&&(void 0===e.expire||An()<Number(e.expire))}return{expandOrRenewSession:tn(Yr((function(){var i;Xi({options:e,process:function(e){var n=a(e);return i=function(e){var n=r(e[t]),i=n.trackingType,o=n.isTracked;e[t]=i,o&&!e.id&&(e.id=nn(),e.created=String(An()));return o}(n),n},after:function(e){i&&!c()&&function(e){s=e,n.notify()}(e),s=e}})})),1e3).throttled,expandSession:function(){Xi({options:e,process:function(e){return c()?a(e):void 0}})},getSession:function(){return s},renewObservable:n,expireObservable:i,stop:function(){clearInterval(o)}}}var so=[];function ao(e,t,r){!function(e){var t=Bn(Ji),r=Bn("_dd"),n=Bn("_dd_r"),i=Bn("_dd_l");if(!t){var o={};r&&(o.id=r),i&&/^[01]$/.test(i)&&(o.logs=i),n&&/^[012]$/.test(n)&&(o.rum=n),to(o,e)}}(e);var n=oo(e,t,r);so.push((function(){return n.stop()}));var i,o=new zi(144e5);function s(){return{id:n.getSession().id,trackingType:n.getSession()[t]}}return so.push((function(){return o.stop()})),n.renewObservable.subscribe((function(){o.add(s(),In())})),n.expireObservable.subscribe((function(){o.closeActive(In())})),n.expandOrRenewSession(),o.add(s(),[0,On()][0]),i=gn(window,["click","touchstart","keydown","scroll"],(function(){return n.expandOrRenewSession()}),{capture:!0,passive:!0}).stop,so.push(i),function(e){var t=Yr((function(){"visible"===document.visibilityState&&e()})),r=mn(document,"visibilitychange",t).stop;so.push(r);var n=setInterval(t,6e4);so.push((function(){clearInterval(n)}))}((function(){return n.expandSession()})),{findActiveSession:function(e){return o.find(e)},renewObservable:n.renewObservable,expireObservable:n.expireObservable}}var co;function uo(e){var t=ao(e.cookieOptions,"logs",(function(t){return function(e,t){var r=function(e){return"0"===e||"1"===e}(t)?t:lo(e);return{trackingType:r,isTracked:"1"===r}}(e,t)}));return{findTrackedSession:function(e){var r=t.findActiveSession(e);return r&&"1"===r.trackingType?{id:r.id}:void 0}}}function lo(e){return on(e.sampleRate)?"1":"0"}var ho=((co={})[_i.debug]=0,co[_i.info]=1,co[_i.warn]=2,co[_i.error]=3,co);function fo(e,t,r){var n=r.getHandler(),i=Array.isArray(n)?n:[n];return ho[e]>=ho[r.getLevel()]&&un(i,t)}function po(e,t,r,n,i){var o=Ii.concat(["custom"]),s={};o.forEach((function(e){var n,i,o,a,c;s[e]=(n=e,i=t.eventRateLimiterThreshold,o=function(e){return function(e,t){t.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:{origin:si},origin:si,status:_i.error}})}(e,r)},a=0,c=!1,{isLimitReached:function(){if(0===a&&setTimeout((function(){a=0}),en),(a+=1)<=i||c)return c=!1,!1;if(a===i+1){c=!0;try{o({message:"Reached max number of ".concat(n,"s by minute: ").concat(i),source:si,startClocks:Sn()})}finally{c=!1}}return!0}})})),r.subscribe(0,(function(o){var a,c,u,l=o.rawLogsEvent,h=o.messageContext,f=void 0===h?void 0:h,d=o.savedCommonContext,p=void 0===d?void 0:d,m=o.logger,g=void 0===m?i:m,v=l.date-On(),y=e.findTrackedSession(v);if(y){var E=p||n(),b=En({service:t.service,session_id:y.id,view:E.view},E.context,go(v),l,g.getContext(),f);!fo(l.status,Ti,g)||!1===(null===(a=t.beforeSend)||void 0===a?void 0:a.call(t,b))||(null===(c=b.error)||void 0===c?void 0:c.origin)!==si&&(null!==(u=s[b.status])&&void 0!==u?u:s.custom).isLimitReached()||r.notify(1,b)}}))}var mo=!1;function go(e){var t,r=window;if(xi()){var n=i(r.DD_RUM_SYNTHETICS);return n||mo||(mo=!0,function(e,t){Zr($r.debug,e,t),Bi(rn({message:e,status:"debug"},t))}("Logs sent before RUM is injected by the synthetics worker",{testId:(t=window._DATADOG_SYNTHETICS_PUBLIC_ID||Bn("datadog-synthetics-public-id"),"string"==typeof t?t:void 0),resultId:Oi()})),n}return i(r.DD_RUM);function i(t){if(t&&t.getInternalContext)return t.getInternalContext(e)}}var vo,yo={};function Eo(e){var t=e.map((function(e){return yo[e]||(yo[e]=function(e){var t=new mi((function(){var r=console[e];return console[e]=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];r.apply(console,n);var o=pi();Xr((function(){t.notify(bo(n,e,o))}))},function(){console[e]=r}}));return t}(e)),yo[e]}));return gi.apply(void 0,t)}function bo(e,t,r){var n,i=e.map((function(e){return function(e){if("string"==typeof e)return e;if(e instanceof Error)return di(Yn(e));return an(e,void 0,2)}(e)})).join(" ");if(t===$r.error){var o=function(e,t){for(var r=0;r<e.length;r+=1){var n=e[r];if(t(n,r))return n}}(e,(function(e){return e instanceof Error}));n=o?fi(Yn(o)):void 0,i="console error: ".concat(i)}return{api:t,message:i,stack:n,handlingStack:r}}var wo,_o=((vo={})[$r.log]=_i.info,vo[$r.debug]=_i.debug,vo[$r.info]=_i.info,vo[$r.warn]=_i.warn,vo[$r.error]=_i.error,vo);var Ao,To=((wo={})[vi.cspViolation]=_i.error,wo[vi.intervention]=_i.error,wo[vi.deprecation]=_i.warn,wo);function Io(e,t,r){var n=e[t],i=r(n),o=function(){return i.apply(this,arguments)};return e[t]=o,{stop:function(){e[t]===o?e[t]=n:i=n}}}function So(e,t,r){var n=r.before,i=r.after;return Io(e,t,(function(e){return function(){var t,r=arguments;return n&&Xr(n,this,r),"function"==typeof e&&(t=e.apply(this,r)),i&&Xr(i,this,r),t}}))}var xo,Oo=new WeakMap;function Ro(){var e;return Ao||(e=new mi((function(){var t=So(XMLHttpRequest.prototype,"open",{before:ko}).stop,r=So(XMLHttpRequest.prototype,"send",{before:function(){No.call(this,e)}}).stop,n=So(XMLHttpRequest.prototype,"abort",{before:Co}).stop;return function(){t(),r(),n()}})),Ao=e),Ao}function ko(e,t){Oo.set(this,{state:"open",method:e,url:Mn(String(t))})}function No(e){var t=this,r=Oo.get(this);if(r){var n=r;n.state="start",n.startTime=In(),n.startClocks=Sn(),n.isAborted=!1,n.xhr=this;var i=!1,o=So(this,"onreadystatechange",{before:function(){this.readyState===XMLHttpRequest.DONE&&s()}}).stop,s=Yr((function(){if(t.removeEventListener("loadend",s),o(),!i){i=!0;var a=r;a.state="complete",a.duration=xn(n.startClocks.timeStamp,Tn()),a.status=t.status,e.notify(rn({},a))}}));this.addEventListener("loadend",s),e.notify(n)}}function Co(){var e=Oo.get(this);e&&(e.isAborted=!0)}function Do(){var e;return xo||(e=new mi((function(){if(window.fetch)return Io(window,"fetch",(function(t){return function(r,n){var i,o=Xr(Lo,null,[e,r,n]);return o?(i=t.call(this,o.input,o.init),Xr(Bo,null,[e,i,o])):i=t.call(this,r,n),i}})).stop})),xo=e),xo}function Lo(e,t,r){var n=r&&r.method||"object"==typeof t&&t.method||"GET",i=Mn("object"==typeof t&&t.url||t),o={state:"start",init:r,input:t,method:n,startClocks:Sn(),url:i};return e.notify(o),o}function Bo(e,t,r){var n=function(t){var n=r;n.state="complete",n.duration=xn(n.startClocks.timeStamp,Tn()),"stack"in t||t instanceof Error?(n.status=0,n.isAborted=t instanceof DOMException&&t.code===DOMException.ABORT_ERR,n.error=t,e.notify(n)):"status"in t&&(n.response=t,n.responseType=t.type,n.status=t.status,n.isAborted=!1,e.notify(n))};t.then(Yr(n),Yr(n))}function Po(e,t){if(!e.forwardErrorsToLogs)return{stop:sn};var r=Ro().subscribe((function(e){"complete"===e.state&&i("xhr",e)})),n=Do().subscribe((function(e){"complete"===e.state&&i("fetch",e)}));function i(r,n){function i(e){t.notify(0,{rawLogsEvent:{message:"".concat(Mo(r)," error ").concat(n.method," ").concat(n.url),date:n.startClocks.timeStamp,error:{origin:ui,stack:e||"Failed to load"},http:{method:n.method,status_code:n.status,url:n.url},status:_i.error,origin:ui}})}e.isIntakeUrl(n.url)||!function(e){return 0===e.status&&"opaque"!==e.responseType}(n)&&!function(e){return e.status>=500}(n)||("xhr"in n?function(e,t,r){"string"==typeof e.response?r(Uo(e.response,t)):r(e.response)}(n.xhr,e,i):n.response?function(e,t,r){window.TextDecoder?e.body?function(e,t,r){!function(e,t,r){var n=e.getReader(),i=[],o=0;function s(){n.read().then(Yr((function(e){e.done?a():(i.push(e.value),(o+=e.value.length)>t?a():s())})),Yr((function(e){return r(e)})))}function a(){var e;if(n.cancel().catch(sn),1===i.length)e=i[0];else{e=new Uint8Array(o);var s=0;i.forEach((function(t){e.set(t,s),s+=t.length}))}r(void 0,e.slice(0,t),e.length>t)}s()}(e,t,(function(e,t,n){if(e)r(e);else{var i=(new TextDecoder).decode(t);n&&(i+="..."),r(void 0,i)}}))}(e.clone().body,t.requestErrorResponseLengthLimit,(function(e,t){r(e?"Unable to retrieve response: ".concat(e):t)})):r():e.clone().text().then(Yr((function(e){return r(Uo(e,t))})),Yr((function(e){return r("Unable to retrieve response: ".concat(e))})))}(n.response,e,i):n.error&&function(e,t,r){r(Uo(fi(Yn(e)),t))}(n.error,e,i))}return{stop:function(){r.unsubscribe(),n.unsubscribe()}}}function Uo(e,t){return e.length>t.requestErrorResponseLengthLimit?"".concat(e.substring(0,t.requestErrorResponseLengthLimit),"..."):e}function Mo(e){return"xhr"===e?"XHR":"Fetch"}var jo=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function Fo(e){var t=function(e){return So(window,"onerror",{before:function(t,r,n,i,o){var s;if(o)s=Yn(o),e(s,o);else{var a,c={url:r,column:i,line:n},u=t;if("[object String]"==={}.toString.call(t)){var l=jo.exec(u);l&&(a=l[1],u=l[2])}e(s={name:a,message:"string"==typeof u?u:void 0,stack:[c]},t)}}})}(e).stop,r=function(e){return So(window,"onunhandledrejection",{before:function(t){var r=t.reason||"Empty reason",n=Yn(r);e(n,r)}})}(e).stop;return{stop:function(){t(),r()}}}function Vo(e){return Fo((function(t,r){var n=function(e,t,r,n){return e&&(void 0!==e.message||t instanceof Error)?{message:e.message||"Empty message",stack:fi(e),handlingStack:n,type:e.name}:{message:"".concat(r," ").concat(an(t)),stack:"No stack, consider using an instance of Error",handlingStack:n,type:e&&e.name}}(t,r,"Uncaught"),i=n.stack,o=n.message,s=n.type;e.notify({message:o,stack:i,type:s,source:li,startClocks:Sn(),originalError:r,handling:"unhandled"})}))}var $o=function(){function e(){this.callbacks={}}return e.prototype.notify=function(e,t){var r=this.callbacks[e];r&&r.forEach((function(e){return e(t)}))},e.prototype.subscribe=function(e,t){var r=this;return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),{unsubscribe:function(){r.callbacks[e]=r.callbacks[e].filter((function(e){return t!==e}))}}},e}();var zo=function(e){var t,r,n=!1,i=bn(),o={},s=function(){},a=new _n,c=function(e,t,r,n){void 0===r&&(r=yn(h())),void 0===n&&(n=Tn()),a.add((function(){return c(e,t,r,n)}))},u=function(){},l=new Si((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.apply(void 0,e)}));function h(){return{view:{referrer:document.referrer,url:window.location.href},context:i.get()}}return t={logger:l,init:Yr((function(t){var r;if(kn()&&(t=function(e){return rn({},e,{clientToken:"empty"})}(t)),function(e){return!n||(e.silentMultipleInit||zr.error("DD_LOGS is already initialized."),!1)}(t)){var i=function(e){var t=Wn(e),r=bi(e.forwardConsoleLogs,fn($r),"Forward Console Logs"),n=bi(e.forwardReports,fn(vi),"Forward Reports");if(t&&r&&n)return e.forwardErrorsToLogs&&!un(r,$r.error)&&r.push($r.error),rn({forwardErrorsToLogs:!1!==e.forwardErrorsToLogs,forwardConsoleLogs:r,forwardReports:n,requestErrorResponseLengthLimit:32768},t)}(t);i&&(r=e(i,h,l),c=r.handleLog,s=r.getInternalContext,u=function(){return yn(t)},a.drain(),n=!0)}})),getLoggerGlobalContext:Yr(i.get),setLoggerGlobalContext:Yr(i.set),addLoggerGlobalContext:Yr(i.add),removeLoggerGlobalContext:Yr(i.remove),createLogger:Yr((function(e,t){return void 0===t&&(t={}),o[e]=new Si((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.apply(void 0,e)}),e,t.handler,t.level,t.context),o[e]})),getLogger:Yr((function(e){return o[e]})),getInitConfiguration:Yr((function(){return u()})),getInternalContext:Yr((function(e){return s(e)}))},r=rn({version:"4.16.1",onReady:function(e){e()}},t),Object.defineProperty(r,"_setDebug",{get:function(){return Kr},enumerable:!1}),r}((function(e,t,r){var n=new $o,i=function(e){var t,r=Di(e);if(kn()){var n=Rn();r.observable.subscribe((function(e){return n.send("internal_telemetry",e)}))}else{var i=Vi(e,e.rumEndpointBuilder,null===(t=e.replica)||void 0===t?void 0:t.rumEndpointBuilder);r.observable.subscribe((function(t){return i.add(t,function(e){return"datad0g.com"===e.site}(e))}))}return r}(e);i.setContextProvider((function(){var e,t,r,n,i,o;return{application:{id:null===(e=go())||void 0===e?void 0:e.application_id},session:{id:null===(t=a.findTrackedSession())||void 0===t?void 0:t.id},view:{id:null===(n=null===(r=go())||void 0===r?void 0:r.view)||void 0===n?void 0:n.id},action:{id:null===(o=null===(i=go())||void 0===i?void 0:i.user_action)||void 0===o?void 0:o.id}}})),Po(e,n),function(e,t){if(!e.forwardErrorsToLogs)return{stop:sn};var r=new mi,n=Vo(r).stop,i=r.subscribe((function(e){t.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:{kind:e.type,origin:li,stack:e.stack},origin:li,status:_i.error}})}))}(e,n),function(e,t){var r=Eo(e.forwardConsoleLogs).subscribe((function(e){t.notify(0,{rawLogsEvent:{date:Tn(),message:e.message,origin:ai,error:e.api===$r.error?{origin:ai,stack:e.stack}:void 0,status:_o[e.api]}})}))}(e,n),function(e,t){var r=yi(e.forwardReports).subscribe((function(e){var r,n=e.message,i=To[e.type];i===_i.error?r={kind:e.subtype,origin:hi,stack:e.stack}:e.stack&&(n+=" Found in ".concat(function(e){var t;return null===(t=/@ (.+)/.exec(e))||void 0===t?void 0:t[1]}(e.stack))),t.notify(0,{rawLogsEvent:{date:Tn(),message:n,origin:hi,error:r,status:i}})}))}(e,n);var o,s=function(e){return{handleLog:function(t,r,n,i){var o=t.context;fo(t.status,Ai,r)&&zr(t.status,t.message,En(r.getContext(),o)),e.notify(0,{rawLogsEvent:{date:i||Tn(),message:t.message,status:t.status,origin:ci},messageContext:o,savedCommonContext:n,logger:r})}}}(n).handleLog,a=!function(e){if(void 0===document.cookie||null===document.cookie)return!1;try{var t="dd_cookie_test_".concat(nn()),r="test";Ln(t,r,Qr,e);var n=Bn(t)===r;return Pn(t,e),n}catch(e){return zr.error(e),!1}}(e.cookieOptions)||kn()||xi()?function(e){var t="1"===lo(e)?{}:void 0;return{findTrackedSession:function(){return t}}}(e):uo(e);return po(a,e,n,t,r),kn()?function(e){var t=Rn();e.subscribe(1,(function(e){t.send("log",e)}))}(n):function(e,t){var r,n=Vi(e,e.logsEndpointBuilder,null===(r=e.replica)||void 0===r?void 0:r.logsEndpointBuilder);t.subscribe(1,(function(e){n.add(e)}))}(e,n),{handleLog:s,getInternalContext:(o=a,{get:function(e){var t=o.findTrackedSession(e);if(t)return{session_id:t.id}}}).get}}));!function(e,t,r){var n=e[t];e[t]=r,n&&n.q&&n.q.forEach((function(e){return Gr(e,"onReady callback threw an error:")()}))}(dn(),"DD_LOGS",zo);var Go=r(4835);function qo(e,t,r){return"string"==typeof e&&e.startsWith("/")&&(r&&r.search(/pattern/i)<0||!r)?t?Wo(t+e):e.search(/\.(png|jpg|jpeg|gif|svg)$/)>0?Wo(Or.CDN+e):Wo(Or.BASE+e):"object"==typeof e&&null!==e?Ho(e,t):e}function Ho(e,t){return(0,Go.kJ)(e)?(0,Go.UI)(e,((e,r)=>qo(e,t,r))):(0,Go.Xc)(e,((e,r)=>qo(e,t,r)))}function Wo(e){const t=self.EBATES&&self.EBATES.toolbarId||"",r=self.EBATES&&self.EBATES.installVersion||"",n=self.EBATES&&self.EBATES.ebToken||"";return qo(e).replace(/%domain%?/g,Or.domain).replace(/%api%?/g,Or.api).replace(/%member_api%?/g,Or.member_api).replace(/%search_api%?/g,Or.search_api).replace(/%CDN%?/g,Or.CDN).replace(/%version%?/g,xr.extension.version).replace(/%browser%?/g,xr.browser.name.toLowerCase().replace("webkitedge","edge")).replace(/%installVersion%?/g,r).replace(/%userid%?/g,t).replace(/%toolbarId%?/g,t).replace(/%targetSet%?/g,self.EBATES&&self.EBATES.member&&self.EBATES.member.get("targetSet")||"").replace(/%uid%?/g,self.EBATES&&self.EBATES.member&&self.EBATES.member.id||"").replace(/%ebtoken%?/g,n).replace(/AutoLoginID=%autologinid%?/g,`ebtoken=${n}`).replace(/%autologinid%?/g,"")}function Ko(e){const t=(e.get("cache-control")??"").match(/max-age=(\d+)[\s;,]?/);return t&&t.length>1?1e3*parseInt(t[1],10):0}function Jo(e){const t=e.match(/\.(.*)\./);try{if(t&&t.length>0){const e=t.pop()||"";return JSON.parse(atob(e))}}catch(e){}return null}function Yo(e,t,r){const n=r&&r.lexicographical,i=r&&r.zeroExtend;let o=e.split("."),s=t.split(".");function a(e){return(n?/^\d+[A-Za-z]*$/:/^\d+$/).test(e)}if(!o.every(a)||!s.every(a))return NaN;if(i){for(;o.length<s.length;)o.push("0");for(;s.length<o.length;)s.push("0")}n||(o=o.map(Number),s=s.map(Number));for(let e=0;e<o.length;++e){if(s.length===e)return 1;if(o[e]!==s[e])return o[e]>s[e]?1:-1}return o.length!==s.length?-1:0}function Xo(e){return!!e&&/(?:ebates\.(?:com|int)\/|\/\/(?!global).*\.rakuten\.(?:com|int)\/(?!shop\/))/i.test(e)}function Zo(e,t){return new Promise(((r,n)=>{gr()&&gr().cookies?"string"==typeof t?gr().cookies.getAll({domain:e,name:t}).then((e=>{e.length>0?r(e[0].value):n()})):gr().cookies.getAll({domain:e}).then((e=>{const i=e.reduce(((e,r)=>(t.includes(r.name)&&(e[r.name]=r.value),e)),{});var o;o=i,0===Object.keys(o).length&&o.constructor===Object?n():r(i)})):n()}))}function Qo(e){let{url:t,width:r=650,height:n=400}=e;if(xr.browser.isSafari)xr.browser.navigate(t);else{const e=Math.floor((screen.availWidth-r)/2),i=Math.floor((screen.availHeight-n)/2);gr().windows.create({type:"popup",height:n,width:r,top:e,left:i,url:t})}}const es=self.ServiceWorkerGlobalScope&&self instanceof self.ServiceWorkerGlobalScope;function ts(e,t){es||self.addEventListener(e,t)}const rs=new jr("RRkzrctEwtmgt8PgYWkF6SzN62oaAiID",{host:"https://events.engager.ecbsn.com",context:{library:{name:"Toolbar"}},properties:{browser:xr.browser.name,browser_agent:navigator.userAgent,app_version:xr.extension.version,application_type:"Toolbar",application_subtype:"Toolbar",client:"toolbar",tenant:"ebates.com",platform:"Toolbar"}});rs.identify=async function(e,t){if(this.disabled)return;const r=(new(Vr().SHA256)).hex(JSON.stringify({userId:e,...t}));if(r!==await xr.extension.getItem("segment-signature"))return xr.extension.setItem("segment-signature",r),jr.prototype.identify.call(this,e,t);rs.userId=e},rs.track=async function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!this.disabled||["Install Application"].includes(e)||n.force)return["Install Application","Update Application"].includes(e)||await this.validateSession(),jr.prototype.track.apply(this,[e,t,r])},xr.extension.attachEvent("segment.track",(e=>{rs.track(e.data.event,e.data.parameters)})),xr.extension.attachEvent("segment.anonymousId",((e,t)=>{t(rs.anonymousId)})),zo.init({clientToken:"pub5c8940d1d60d49fa1ad47b86997d8ed9",datacenter:"us",forwardErrorsToLogs:!1,sampleRate:100}),zo.addLoggerGlobalContext("service","rr-button"),ts("error",(e=>{var t;null!==(t=e.message)&&void 0!==t&&t.startsWith("Uncaught EvalError")||zo.logger.error(e.message,{colno:e.colno,error:e.error,filename:e.filename,lineno:e.lineno})})),ts("unhandledrejection",(e=>{const t=e.reason;"Network error"!==t.message&&t&&t.message&&zo.logger.warn(t.message,t)})),xr.extension.attachEvent("datadogTrack",(e=>{var t,r;let{data:{type:n,name:i,data:o}}=e;null===(t=(r=zo.logger)[n])||void 0===t||t.call(r,i,o)}));var ns=r(7322),is=r.n(ns);function os(e){if(e&&!e.startsWith("data:")){const t=/(?:https?:\/\/)?(?:\w+:\/)?[^:?#/\s]*?([^.\s]+\.(?:[a-z]{2,}|co\.uk|org\.uk|ac\.uk|org\.au|com\.au))(?:[:?#/]|$)/gi.exec(e);return t?t[1].toLowerCase():null}return null}function ss(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"[&?](?:LinkshareID|wmlspartner|siteID|mkwid|pcrid|cmp|adid|sourceid|veh|tid|kwid|ap|gclid|cid|cjevent|cp|aid|sid|aff\\w*||\\w*email\\w*|ran\\w+)=[^&]*";const[r]=e.split("?",1);return e.replace(new RegExp(t,"gi"),"").replace(/([&=])[^&=]+(?:@|%40)[\w.-]+\.\w{2,}/g,"$1").replace(`${r}&`,`${r}?`)}function as(e,t){const r=function(e){return"string"==typeof e?e:Object.keys(e).reduce(((t,r)=>{const n=e[r];return void 0!==n&&""!==n&&t.push(`${r}=${encodeURIComponent(n)}`),t}),[]).join("&")}(t);return r?e+(e.includes("?")?"&":"?")+r:e}function cs(e,t){if(e.display!==t.display)return 0;const r=e.amount,n=t.amount;return r>n?1:r===n?0:-1}const us="Network error";function ls(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t=e instanceof Request?e:new Request(e,r),t.headers.append("X-Button-Version",xr.extension.version),0===t.url.indexOf(Rr)){var n;t.headers.append("Client-Agent","button"),t.headers.append("Content-Type","application/json"),t.headers.append("Authorization",`ebtoken ${null===(n=self.EBATES)||void 0===n?void 0:n.ebToken}`);const e=t.headers.get("If-None-Match");e&&t.headers.append("RR-If-None-Match",e)}return self.EBATES&&(t.url.search(/(?!button|mobile|eds)\/member/)>0||t.url.search(/\/geogating\/v1\/checkStatus\.do/)>0)&&t.headers.append("ebToken",self.EBATES.ebToken),t}async function hs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"!=typeof e||e instanceof URL||(t=e,e=t.url),t.beforeSend&&t.beforeSend(t);const r=t.method||t.type||"GET",n=new Headers(t.headers||{});if(t.contentType&&n.set("Content-Type",t.contentType),!n.get("Accept")){const e={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"};n.set("Accept",t.dataType&&e[t.dataType]?`${e[t.dataType]}${"*"!==t.dataType?", */*; q=0.01":""}`:e["*"])}"GET"===r&&"object"==typeof t.data&&(e=as(t.url,t.data));const i={method:r,headers:n};"POST"===r&&(i.body=t.data||t.body);const o=ls(e,i);let s=null;function a(e){const r=new Error(us);if(s=s||{status:0},!t.error)throw r;t.error(s,s.status,r)}try{s=await fetch(o)}catch(e){return void a(e.message)}if(304===s.status)t.success&&t.success(void 0,s.status,s);else{if(s.ok&&s.status>=200&&s.status<300){const e=(()=>{var e;return null===(e=s.headers.get("Content-Type"))||void 0===e?void 0:e.includes("application/json")})()?await s.json():await s.text();return t.success&&t.success(e,s.status,s),e}a()}}var fs,ds=new Uint8Array(16);function ps(){if(!fs&&!(fs="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fs(ds)}const ms=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const gs=function(e){return"string"==typeof e&&ms.test(e)};for(var vs=[],ys=0;ys<256;++ys)vs.push((ys+256).toString(16).substr(1));const Es=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(vs[e[t+0]]+vs[e[t+1]]+vs[e[t+2]]+vs[e[t+3]]+"-"+vs[e[t+4]]+vs[e[t+5]]+"-"+vs[e[t+6]]+vs[e[t+7]]+"-"+vs[e[t+8]]+vs[e[t+9]]+"-"+vs[e[t+10]]+vs[e[t+11]]+vs[e[t+12]]+vs[e[t+13]]+vs[e[t+14]]+vs[e[t+15]]).toLowerCase();if(!gs(r))throw TypeError("Stringified UUID is invalid");return r};const bs=function(e,t,r){var n=(e=e||{}).random||(e.rng||ps)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return Es(n)};class ws{constructor(){xr.extension.attachEvent("postFillr",(e=>{rs.track("Cart Details",{...e.data})}))}}class _s{constructor(){pr(this,"storage",new Map),xr.extension.attachEvent("updateBadge",(()=>{this.update()}))}update(e,t){self.EBATES.settings.userSettings.get("gatingStatusBadge")?xr.ui.button.setBadgeText("1"):self.EBATES.member.isExtensionDisabled()?"not-certified"===self.EBATES.member.get("gdprCertificationStatus")?xr.ui.button.setBadgeText("1"):xr.ui.button.setBadgeText(""):(e&&this.storage.set(e,t??0),this.display())}display(){let e=0;this.storage.forEach((t=>e+=t)),this.set(e)}set(e){xr.ui.button.setBadgeText(e>0?e:"")}}var As=r(5302);class Ts{constructor(){pr(this,"activatedTests",[]),pr(this,"forced",{}),As.ZP.setLogger(null),this.optimizely=As.ZP.createInstance({sdkKey:"PPyVHL2msj5ovR7W7wP75R",datafileOptions:{autoUpdate:!0,updateInterval:36e5}}),xr.extension.attachEvent("tests",((e,t)=>{t(this.toJSON())})),xr.extension.attachEvent("tests.activate",((e,t)=>{t(this.activate(e.data.id,e.data.props))})),xr.browser.attachEvent(xr.browser.BEFORENAVIGATE,(e=>{let{url:t}=e;if(t.includes("www.rakuten.com/button/setForcedVariation?")){const e=new URLSearchParams(t.split("?").pop());if(e.get("test")&&e.get("variation")){this.optimizely.setForcedVariation(e.get("test"),EBATES.member.id||toolbarId.toString(),e.get("variation"))?alert(`${e.get("test")} has been successfully set to variation ${e.get("variation")}`):alert(`Error: Test ${e.get("test")} could not be set to variation ${e.get("variation")}`)}}}))}onReady(){return this.optimizely.onReady({timeout:3e3})}toJSON(){const e=this.optimizely.getOptimizelyConfig();return e&&e.experimentsMap?Object.keys(this.optimizely.getOptimizelyConfig().experimentsMap).reduce(((e,t)=>{if(0===t.toLowerCase().indexOf("btn")){let r=this.get(t);r&&(e[t]=r)}return{...e,...this.forced}}),{}):{...this.forced}}get(e){return EBATES.member.id?(("number"==typeof e||/^\d+$/.test(e))&&(e=`BTN${e}`),this.forced[e]?this.forced[e]:this.optimizely.getVariation(e,EBATES.member.id||toolbarId.toString(),{platform:"Button",app_version:xr.browser.version,application_subtype:xr.browser.name})):null}activate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!EBATES.member.id)return null;("number"==typeof e||/^\d+$/.test(e))&&(e=`BTN${e}`);const r=this.optimizely[rs.disabled?"getVariation":"activate"](e,EBATES.member.id||toolbarId.toString(),{platform:"Button",app_version:xr.browser.version,application_subtype:xr.browser.name});return r&&(this.activatedTests[e]=r,EBATES.member.identify(),rs.track("View Experiment",{experiment_name:e,variation_name:`${e}${r}`,activation_id:EBATES.member.id||toolbarId.toString(),activation_id_type:EBATES.member.id?"guid":"anonymous",...t})),this.forced[e]||r}getExperiments(){let e=this.activatedTests;return Object.keys(e).reduce(((t,r)=>(t[`experiment_${r}`]=`${r}${e[r]}`,t)),{})}}var Is=r(281),Ss=r.n(Is),xs=r(3564),Os=r.n(xs);function Rs(e){const t=e=>e.toString().replace(/\.0+$/,"");if(e){let r="";switch(e.display){case"Percentage":r=e.range&&e.amount?`Up to ${t(e.amount)}%`:`${t(e.amount)}%`;break;case"Fixed":r=e.amount&&e.range?`Up to ${t(Os().formatMoney(e.amount))}`:t(Os().formatMoney(e.amount));break;case"Coupons":r="Offers Only";break;case"None":r="Not Available"}return r}return""}Ss().ajax=hs;const ks=Ss();var Ns=ks.Model.extend({toJSON(){return Ho((0,Go.d9)(this.attributes))}});let Cs={pauseDocumentCompleteTrigerredUpdates:!0,timeout:null,errorAttempt:0,dynamic:!0,MAX_ERROR_ATTEMPT:4,DEFAULT_UPDATE_INTERVAL:9e5,UPDATE_INTERVAL:null,initialize(){this.dynamic&&xr.browser.attachEvent(xr.browser.DOCUMENTCOMPLETE,(0,Go.P2)((async()=>{!this.pauseDocumentCompleteTrigerredUpdates&&await this.ifCacheExpired()&&this.fetch().catch((()=>{}))}),1e3)),this.once("sync",(()=>this._dataSynced=!0))},setNextUpdateTime(e){this.key&&xr.extension.setItem(`${this.key}.nextUpdateTime`,e),this._nextUpdateTime=e},async getNextUpdateTime(){if(!Number.isFinite(this._nextUpdateTime)){let e=this.key?await xr.extension.getItem(`${this.key}.nextUpdateTime`):0;this._nextUpdateTime=parseInt(e,10)||0}return this._nextUpdateTime},async ifCacheExpired(){return await this.getNextUpdateTime()<Date.now()},clearCache(){xr.extension.setItem(this.key,0),xr.extension.setItem(`${this.key}.nextUpdateTime`,0)},async getCache(){return await xr.extension.getItem(this.key)},async setCache(e){let{...t}=e;xr.extension.setItem(this.key,t)},async readCache(e){if(e.reset||e.force)return!1;if(await this.ifCacheExpired()&&!e.cache)return!1;if(this.key){const e=await this.getCache();if(e&&e.data){this.etag=e.etag;try{this.length||this.set(this.parse(e.data))}catch(e){return!1}try{this.trigger("sync",this)}catch(e){}return!0}}return!1},async sync(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("read"!==e)return await ks.Collection.prototype.sync.apply(t,arguments);if(this.pauseDocumentCompleteTrigerredUpdates=!1,!await this.readCache(r)){t.etag&&!r.reset&&(r.beforeSend=function(e){e.headers=Object.assign({},e.headers,{"If-None-Match":t.etag})});let n=r.success;return r.success=function(e,i,o){try{t.errorAttempt=0;let r=t.DEFAULT_UPDATE_INTERVAL;if(t.UPDATE_INTERVAL)r=t.UPDATE_INTERVAL;else{let e=o.headers.get("Cache-Control");if(e&&e.indexOf("max-age=")>=0){let e=Ko(o.headers);e>0&&(r=e)}}t.etag=o.headers.get("ETag"),t.setNextUpdateTime(Date.now()+r),t.key&&e&&t.setCache({etag:t.etag,data:e}),n&&200===o.status?n.apply(t,arguments):t.trigger("sync",t)}catch(e){r.error(o)}},r.error=function(e){if([401,403].includes(e.status))t.pauseDocumentCompleteTrigerredUpdates=!0;else{let e=t.ERROR_UPDATE_INTERVAL||10*Math.pow(3,Math.min(t.MAX_ERROR_ATTEMPT,++t.errorAttempt))*1e3;t.setNextUpdateTime(Date.now()+e)}t.trigger("error",t,e,r)},await ks.Collection.prototype.sync.call(t,e,t,r)}},stop(){this.pauseDocumentCompleteTrigerredUpdates=!0,this.etag=null,xr.extension.setItem(`${this.key}.nextUpdateTime`,0)},ready(){return new Promise((e=>{this._dataSynced?e(this):this.once("sync",(()=>e(this)))}))}};var Ds=ks.Collection.extend(Cs),Ls=ks.Model.extend(Cs);function Bs(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("read"===e){if(Date.now()<t.nextUpdateTime&&!r.reset&&!r.force)return new Promise((function(e){t.trigger("sync",t,null,r),e()}));if(t.loading)return new Promise((function(e){t.once("sync",(function(){t.trigger("sync",t,null,r),e()}))}));xr.browser.isSafari&&(r.reset||r.force)&&(r.data=(0,Go.l7)({_:Date.now()},r.data)),t.ETag&&(r.headers=Object.assign({},r.headers,{"If-None-Match":t.ETag})),(r.reset||r.force)&&(r.headers=Object.assign({},r.headers,{"Cache-Control":"max-age=0, no-cache"}),r.headers=Object.assign({},r.headers,{Pragma:"no-cache"})),t.loading=!0;var n=r.success;r.success=function(e,i,o){t.loading=!1,t.nextUpdateTime=Date.now()+t.timeout,t.ETag=o.headers.get("ETag"),304!==o.status?n&&(r.headers=o.headers,n.apply(t,arguments)):t.trigger("sync",t,e,r)};var i=r.error;r.error=function(){t.loading=!1,t.nextUpdateTime=Date.now()+t.errorTimeout,i&&i.apply(t,arguments)}}return ks.sync.call(this,e,t,r)}var Ps=ks.Collection.extend({timeout:6e5,nextUpdateTime:0,initialize(e,t){(0,Go.l7)(this,t)},stop(){this.nextUpdateTime=0},sync:Bs}),Us=Ns.extend({timeout:18e5,errorTimeout:3e4,loading:!1,nextUpdateTime:0,sync:Bs}),Ms=ks.Collection.extend({sync:(e,t,r)=>new Promise((n=>{"read"===e&&xr.extension.getItem(t.key,(e=>{r.success(e),n()}))})),save(){xr.extension.setItem(this.key,this.toJSON())}}),js=ks.Model.extend({sync(e,t,r){return new Promise((t=>{"read"===e?xr.extension.getItem(this.key,(e=>{t(),r.success(e)})):"update"!==e&&"create"!==e||(xr.extension.setItem(this.key,(0,Go.d9)(this.attributes)),t())}))}});let Fs=ks.Model.extend({idAttribute:"storeId",toJSON(){let e=ks.Model.prototype.toJSON.apply(this,arguments);return e.categories=e.categories.map((e=>{let t=this.collection.categoryNames.get(e);return t?t.toJSON():{categoryId:e}})),e}}),Vs=ks.Model.extend({idAttribute:"categoryId"});var $s=Ps.extend({model:Fs,timeout:864e5,dynamic:!1,key:"categories-merchants",url:()=>Wo(Or.STORE_CATEGORIES),initialize(){this.categoryNames=new zs,xr.extension.attachEvent("merchants.categories",(async(e,t)=>{await this.fetch();const r=this.toJSON(),n=this.categoryNames.toJSON();n.forEach((e=>{e.storeIds||(e.storeIds=[]),r.forEach((t=>{let{storeId:r,categories:n}=t;n.find((t=>{let{categoryId:r}=t;return r===e.categoryId}))&&e.storeIds.push(r)}))})),t(n)}))},fetch(){return Promise.all([Ps.prototype.fetch.apply(this,arguments),this.categoryNames.fetch()])},parse:e=>(0,Go.UI)(e.store,(e=>({storeId:e.id,categories:e.categories})))});let zs=Ps.extend({model:Vs,timeout:864e5,dynamic:!1,key:"categories",url:()=>Wo(Or.CATEGORIES),parse:e=>e.categories});var Gs=Ps.extend({}),qs=Gs.extend({initialize(){this.on({error:function(e,t){[401,403].includes(t.status)&&EBATES.onTokenExpired()}})}});let Hs=Ns.extend({store:null,defaults:{storeId:11095},initialize(){this.get("code")&&this.get("code").indexOf("&amp;")&&this.set({code:this.get("code").replace("&amp;","&")})},toJSON(){var e=EBATES.merchants.findWhere({storeId:this.get("storeId")});if(e&&e.get("shoppingURL")){let t=as(e.get("shoppingURL").replace("&store_url=%deepLinkUrl%",""),{special:this.id,tb:"yes",domainName:e.get("domainName"),sourceName:"toolbar",channel:4,toolbarFeatureId:"DDD",eeid:e.get("mpl")?"40874":"26141",mpl_id:e.get("mpl")});return(0,Go.l7)(Ns.prototype.toJSON.apply(this,arguments),(0,Go.ei)(e.toJSON(),"images","storeName","reward","rewardsExpired"),{shoppingURL:t})}return null}});var Ws=Gs.extend({model:Hs,comparator:e=>[e.has("code")?0:1,["Store Wide","Department","Free Gift","Free Shipping","Product",null].indexOf(e.get("scope")),e.get("scores")?e.get("scores").score1:0],parse:e=>(0,Go.tS)(e.storeDeals).map((function(e){return(0,Go.UI)(e.deals,(function(t){return(0,Go.l7)({storeId:e.storeId},t)}))})).flatten().value(),search(e){return(0,Go.tS)(this.filter((function(t){return t.get("description").toLowerCase().indexOf(e)>=0}))).invoke("toJSON").value()}});class Ks extends Map{constructor(){super(),pr(this,"_currentTabId",0);const e=e=>{let{tabId:t,url:r,name:n,active:i}=e;const o=Object.assign({},this.get(t),{tabId:t,url:r});(n===xr.browser.TABCHANGED||n===xr.browser.NAVIGATIONCOMMITTED&&i)&&(this._currentTabId=t),n===xr.browser.NAVIGATIONCOMMITTED&&(o.scripts=[]),this.set(t,o)};xr.browser.attachEvent(xr.browser.NAVIGATIONCOMMITTED,e),xr.browser.attachEvent(xr.browser.TABCHANGED,e),xr.browser.attachEvent(xr.browser.TABCLOSED,(e=>{this.delete(e.tabId)})),xr.extension.attachEvent("currentTab",((e,t)=>{t(this.active)}))}get active(){return this.get(this._currentTabId)||{tabId:0,url:"about:blank"}}async executeScript(e,t){var r;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"document_idle";const i=this.get(e);if(i&&(null===(r=i.scripts)||void 0===r||!r.includes(t))){i.scripts=i.scripts||[],i.scripts.push(t);try{await gr().tabs.executeScript(e,{file:t,runAt:n})}catch(e){}}return!0}async executeContentScripts(e){let{tabId:t,settings:r,runAt:n}=e;return await this.executeScript(t,"./commons/bundle.js",n),await this.executeScript(t,"./content/bundle.js",n),await xr.extension.fireEvent("contentSettings",{tabId:t,data:{settings:r}}),!0}}const Js=new Ks,Ys=function(){function e(){}return e.prototype.then=function(t,r){const n=new e,i=this.s;if(i){const e=1&i?t:r;if(e){try{Xs(n,1,e(this.v))}catch(e){Xs(n,2,e)}return n}return this}return this.o=function(e){try{const i=e.v;1&e.s?Xs(n,1,t?t(i):i):r?Xs(n,1,r(i)):Xs(n,2,i)}catch(e){Xs(n,2,e)}},n},e}();function Xs(e,t,r){if(!e.s){if(r instanceof Ys){if(!r.s)return void(r.o=Xs.bind(null,e,t));1&t&&(t=r.s),r=r.v}if(r&&r.then)return void r.then(Xs.bind(null,e,t),Xs.bind(null,e,2));e.s=t,e.v=r;const n=e.o;n&&n(e)}}var Zs=0,Qs="function"==typeof WeakMap?WeakMap:function(){var e="function"==typeof Symbol?Symbol(0):"__weak$"+ ++Zs;this.set=function(t,r){t[e]=r},this.get=function(t){return t[e]}};function ea(e,t){return new Promise((function(r,n){e.onsuccess=function(){var n=e.result;t&&(n=t(n)),r(n)},e.onerror=function(){n(e.error)}}))}function ta(e,t){return ea(e.openCursor(t),(function(e){return e?[e.key,e.value]:[]}))}function ra(e){return new Promise((function(t,r){e.oncomplete=function(){t()},e.onabort=function(){r(e.error)},e.onerror=function(){r(e.error)}}))}function na(e){if(!function(e){if("number"==typeof e||"string"==typeof e)return!0;if("object"==typeof e&&e){if(Array.isArray(e))return!0;if("setUTCFullYear"in e)return!0;if("function"==typeof ArrayBuffer&&ArrayBuffer.isView(e))return!0;if("byteLength"in e&&"length"in e)return!0}return!1}(e))throw Error("kv-storage: The given value is not allowed as a key")}var ia={};function oa(e,t){return ta(e,sa(t))}function sa(e){return e===ia?IDBKeyRange.lowerBound(-1/0):IDBKeyRange.lowerBound(e,!0)}var aa=new Qs,ca=new Qs,ua=new Qs,la=new Qs,ha=function(){};function fa(e,t){return t((function(t,r){try{function c(){return ca.set(e,i),ua.set(e,void 0),{value:s,done:void 0===i}}var n=ca.get(e);if(void 0===n)return Promise.resolve({value:void 0,done:!0});var i,o,s,a=function(e,t){var r,n=-1;e:{for(var i=0;i<t.length;i++){var o=t[i][0];if(o){var s=o();if(s&&s.then)break e;if(s===e){n=i;break}}else n=i}if(-1!==n){do{for(var a=t[n][1];!a;)a=t[++n][1];var c=a();if(c&&c.then){r=!0;break e}var u=t[n][2];n++}while(u&&!u());return c}}const l=new Ys,h=Xs.bind(null,l,2);return(r?c.then(f):s.then((function r(s){for(;;){if(s===e){n=i;break}if(++i===t.length){if(-1!==n)break;return void Xs(l,1,c)}if(o=t[i][0]){if((s=o())&&s.then)return void s.then(r).then(void 0,h)}else n=i}do{for(var a=t[n][1];!a;)a=t[++n][1];var c=a();if(c&&c.then)return void c.then(f).then(void 0,h);var u=t[n][2];n++}while(u&&!u());Xs(l,1,c)}))).then(void 0,h),l;function f(e){for(;;){var r=t[n][2];if(!r||r())break;for(var i=t[++n][1];!i;)i=t[++n][1];if((e=i())&&e.then)return void e.then(f).then(void 0,h)}Xs(l,1,e)}}(la.get(e),[[function(){return"keys"},function(){return Promise.resolve(function(e,t){return ta(e,sa(t)).then((function(e){return e[0]}))}(r,n)).then((function(e){s=i=e}))}],[function(){return"values"},function(){return Promise.resolve(oa(r,n)).then((function(e){var t;i=(t=e)[0],s=o=t[1]}))}],[function(){return"entries"},function(){return Promise.resolve(oa(r,n)).then((function(e){var t;o=(t=e)[1],s=void 0===(i=t[0])?void 0:[i,o]}))}]]);return Promise.resolve(a&&a.then?a.then(c):c())}catch(u){return Promise.reject(u)}}))}function da(e,t){var r=new ha;return la.set(r,e),aa.set(r,t),ca.set(r,ia),ua.set(r,void 0),r}ha.prototype.return=function(){ca.set(this,void 0)},ha.prototype.next=function(){var e=this,t=aa.get(this);if(!t)return Promise.reject(new TypeError("Invalid this value"));var r,n=ua.get(this);return r=void 0!==n?n.then((function(){return fa(e,t)})):fa(this,t),ua.set(this,r),r},"function"==typeof Symbol&&Symbol.asyncIterator&&(ha.prototype[Symbol.asyncIterator]=function(){return this});var pa=function(e,t,r){try{return null===ga.get(e)&&function(e){var t=ma.get(e);ga.set(e,new Promise((function(r,n){var i=self.indexedDB.open(t,1);i.onsuccess=function(){var o=i.result;(function(e,t,r){if(1!==e.objectStoreNames.length)return r(Ea(t)),!1;if(e.objectStoreNames[0]!==va)return r(Ea(t)),!1;var n=e.transaction(va,"readonly").objectStore(va);return!(n.autoIncrement||n.keyPath||n.indexNames.length)||(r(Ea(t)),!1)})(o,t,n)&&(o.onclose=function(){ga.set(e,null)},o.onversionchange=function(){o.close(),ga.set(e,null)},r(o))},i.onerror=function(){return n(i.error)},i.onupgradeneeded=function(){try{i.result.createObjectStore(va)}catch(e){n(e)}}})))}(e),Promise.resolve(ga.get(e)).then((function(e){var n=e.transaction(va,t),i=n.objectStore(va);return r(n,i)}))}catch(e){return Promise.reject(e)}},ma=new Qs,ga=new Qs,va="store",ya=function(e){var t="kv-storage:"+e;ga.set(this,null),ma.set(this,t),this.backingStore={database:t,store:va,version:1}};function Ea(e){return new Error('kv-storage: database "'+e+'" corrupted')}ya.prototype.set=function(e,t){try{return na(e),pa(this,"readwrite",(function(r,n){return void 0===t?n.delete(e):n.put(t,e),ra(r)}))}catch(e){return Promise.reject(e)}},ya.prototype.get=function(e){try{return na(e),pa(this,"readonly",(function(t,r){return ea(r.get(e))}))}catch(e){return Promise.reject(e)}},ya.prototype.delete=function(e){try{return na(e),pa(this,"readwrite",(function(t,r){return r.delete(e),ra(t)}))}catch(e){return Promise.reject(e)}},ya.prototype.clear=function(){try{var e=this;function i(){function r(){return ea(self.indexedDB.deleteDatabase(ma.get(e)))}var n=function(){if(t){try{t.close()}catch(e){}return Promise.resolve(new Promise(setTimeout)).then((function(){}))}}();return n&&n.then?n.then(r):r()}var t,r=ga.get(e),n=function(){if(null!==r){function i(){ga.set(e,null)}var n=function(e,n){try{var i=Promise.resolve(r).then((function(e){t=e}))}catch(e){return}return i&&i.then?i.then(void 0,(function(){})):i}();return n&&n.then?n.then(i):i()}}();return n&&n.then?n.then(i):i()}catch(e){return Promise.reject(e)}},ya.prototype.keys=function(){var e=this;return da("keys",(function(t){return pa(e,"readonly",t)}))},ya.prototype.values=function(){var e=this;return da("values",(function(t){return pa(e,"readonly",t)}))},ya.prototype.entries=function(){var e=this;return da("entries",(function(t){return pa(e,"readonly",t)}))},"function"==typeof Symbol&&Symbol.asyncIterator&&(ya.prototype[Symbol.asyncIterator]=ya.prototype.entries);const ba=new ya("default");var wa=r(5939),_a=r.n(wa);const Aa="Network error";class Ta extends(_a()){constructor(){super(),pr(this,"cache",null),pr(this,"errorAttempt",0),pr(this,"MAX_ERROR_ATTEMPT",4),pr(this,"_promise",null),pr(this,"UPDATE_INTERVAL",0),pr(this,"ERROR_UPDATE_INTERVAL",0),pr(this,"_id",void 0)}get headers(){return{}}get _headers(){var e,t,r;const n=new Headers(this.headers),i=null===(e=this.cache)||void 0===e||null===(t=e.meta)||void 0===t||null===(r=t.headers)||void 0===r?void 0:r.etag;return i&&n.set("If-None-Match",i),n}parse(e){return e}data(){var e;return null===(e=this.cache)||void 0===e?void 0:e.data}async _verifyInternalCache(){const{data:e,meta:t}=this.cache||await ba.get(this._id)||{};if(t){if(this.cache={data:e,meta:t},t.nextUpdateTime&&Date.now()<t.nextUpdateTime){if(e&&!this.errorAttempt)return e;throw new Error(Aa)}throw new Error("Data expired")}throw new Error("Invalid cache")}async load(){return this._promise||(this._promise=this._verifyInternalCache().catch((e=>{if(e.message===Aa)throw new Error(Aa);return this.fetch()})).finally((()=>(this._promise=null,this.cache)))),this._promise}async save(e,t){return this.cache={data:e,meta:t},await ba.set(this._id,{data:e,meta:t})}async clearCache(){return this.cache=null,await ba.delete(this._id)}async fetch(){let e,{url:t=null,headers:r={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.emit("request",this);const n=e=>{const t=this.ERROR_UPDATE_INTERVAL||10*Math.pow(3,Math.min(this.MAX_ERROR_ATTEMPT,++this.errorAttempt))*1e3,{meta:r=i,data:n}=this.cache||o;return r.nextUpdateTime=Date.now()+t,this.save(n,r),new Error(Aa)};try{e=await function(e,t){const r=ls(e,t);return fetch(r)}(t||this.url,{method:"GET",mode:"cors",headers:{...this._headers,...r}})}catch(e){throw n()}const i={nextUpdateTime:0,headers:{}},o={meta:i,data:null};if(304===e.status){const{meta:t=i,data:r}=this.cache||o;let n=this.UPDATE_INTERVAL;const s=Ko(e.headers);return s>0&&(n=s),t.nextUpdateTime=Date.now()+n,this.errorAttempt=0,this.save(r,t),this.emit("sync",this),r}if(e.ok){const t=await e.json();let r=this.UPDATE_INTERVAL;const n=Ko(e.headers);n>0&&(r=n);const i={nextUpdateTime:Date.now()+r,headers:["cache-control","etag","date"].reduce(((t,r)=>(t[r]=e.headers.get(r),t)),{})};this.errorAttempt=0;const o=this.parse(t);return this.save(o,i),this.emit("sync",this),o}throw n()}}class Ia extends Ta{constructor(){super(),this._id="top-products",this._url="https://apituner.ecbsn.com/apituner/pcs/v2/search/product/getProducts?version=2.0&client=Toolbar&partnerId=1&fq=storeId:%224767%22&pgsz=300",this.UPDATE_INTERVAL=36e5,xr.extension.attachEvent("getPromoProducts",(async(e,t)=>{let{data:r}=e;const{storeId:n}=r;t(await(async()=>{if(EBATES.settings.featureFlags.variation("promoProducts")){let s=EBATES.settings.promos.find((e=>{var t;return"top-products"===e.get("type")&&(null===(t=e.get("config"))||void 0===t?void 0:t.storeId)===n&&e.isActive()}));if(s){var e,t,r,i,o;if(null!==(e=s.get("config"))&&void 0!==e&&e.requestUrl)this._url=null===(o=s.get("config"))||void 0===o?void 0:o.requestUrl;let n=await this.load(),a=null===(t=s.get("config"))||void 0===t?void 0:t.url;return{products:null===(r=s.get("config"))||void 0===r||null===(i=r.products)||void 0===i?void 0:i.map((e=>{let t=n.find((t=>t.id===e));var r;t&&(t.landingUrl=null===(r=s.get("config"))||void 0===r?void 0:r.url);return t})).filter(Boolean).slice(0,12),landingUrl:a}}}return null})())}))}get url(){return this._url}parse(e){var t;return null!=e&&null!==(t=e.response)&&void 0!==t&&t.docs?e.response.docs.map((e=>(e.imageUrlEbates=`https://product-image.ebates.com/${e.imageUrlEbates}`,e))):[]}}const Sa=9e5;const xa=new class{constructor(){pr(this,"sessions",new Map),pr(this,"disabled",!1),xr.extension.attachEvent("orderConfirmation",(e=>{let{data:t,tabId:r}=e;if(!self.EBATES)return;const{url:n}=t,i=self.EBATES.merchants.match(n,r);if(i){const e=i.get("storeId");this.sessions.has(e)&&this.flush(e)}}))}isStoreEligible(e){if(self.EBATES.settings.featureFlags.variation("immerseAllStores",!0))return!0;{const t=self.EBATES.settings.promos.get("immerse");if(t&&t.get("active")&&t.campaigns){return!!t.campaigns.find((t=>t.stores.get(e)))}}return!1}isEnabled(){return!this.disabled&&self.EBATES.settings.featureFlags.variation("immerse",!0)}start(e){if(!this.isEnabled())return;const t=e.get("storeId");if(this.isStoreEligible(t)&&!this.sessions.has(t)){let r=null;r=self.setTimeout(this.sessionTimeout.bind(this),Sa,t),this.sessions.set(t,{storeName:e.get("storeName"),ttn:e.session.shoppingTrip.get("ttn"),storeId:t,timeoutId:r,content:[]})}}stop(e){const t=e.get("storeId"),r=this.sessions.get(t);r&&(this.send(r),this.sessions.delete(t),r.timeoutId&&clearTimeout(r.timeoutId))}sessionTimeout(e){this.flush(e)}visit(e,t){if(!this.isEnabled())return;const r=e.get("storeId"),n=this.sessions.get(r);if(n&&(e.session.get("activated")||e.session.get("suppressed"))){const i=e.session.shoppingTrip.get("ttn");i!==n.ttn&&(this.flush(r),n.ttn=i),n.content.push({timestamp:(new Date).toISOString(),url:ss(t)}),n.content.length>=10&&this.flush(r),this.sessions.set(r,n)}}flush(e){const t=this.sessions.get(e);if(t){this.send(t),t.content.length=0;let r=null;t.timeoutId&&(clearTimeout(t.timeoutId),r=self.setTimeout(this.sessionTimeout.bind(this),Sa,e)),t.timeoutId=r}}send(e){if(!this.isEnabled()||0===e.content.length)return;const t={content:e.content,store_name:e.storeName,store_id:e.storeId.toString(),user_agent:navigator.userAgent,source_name:"toolbar",shopping_trip_id:"ebs"+e.ttn+"sbe",rr_member_guid:self.EBATES.member.id};return hs(Wo("https://immerse.onereceipt.com/api/1.0/immerse"),{method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","X-Api-Key":"92e14077-2d12-4429-b580-f658e0fc04bf"},body:new Uint8Array(new dr(JSON.stringify(t)))})}},Oa="merchant",Ra="ccReminder",ka="groupon",Na="homeDomain",Ca="inStoreCashBack",Da="priceMagic",La="processInterstitial",Ba="products",Pa="SERP",Ua="taxesPromo",Ma={4:"BUTTON",23:"BUTTON_PRICE_MAGIC"};class ja extends(_a()){constructor(e){if(super(),pr(this,"_storageId",void 0),!e)throw new Error("storageId required");this._storageId=e}save(e){es&&ba.set(this._storageId,e)}clearCache(){es&&ba.delete(this._storageId)}async load(){if(es)return await ba.get(this._storageId)}}class Fa extends ja{constructor(e){super(`shopping-trip-${e}`),this.pending={},this.attributes={},this.load().then((e=>{e&&0!==Object.keys(e)&&Object.assign(this.attributes,e)}))}get(e){return this.attributes[e]}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.ttn)throw new Error("Missing ttn");this.attributes={...e,...this.pending},this.pending={},this.emit("start",this),this.save(this.attributes)}reset(){this.attributes={},this.clearCache()}resetPendingAttributes(){this.pending={}}addPendingAttribute(e,t){"string"==typeof e?this.pending[e]=t:Object.assign(this.pending,e)}getCurrentState(){return{...this.pending,...this.attributes}}toJSON(){return this.attributes}}class Va extends ja{constructor(e){super(`merchant-session-${e}`),this.shoppingTrip=new Fa(e),this.attributes={},this.reset(),this.load().then((e=>{e&&0!==Object.keys(e)&&Object.assign(this.attributes,e)}))}set(e,t){"string"==typeof e?this.attributes[e]=t:Object.assign(this.attributes,e),this.save(this.attributes)}get(e){return this.attributes[e]}has(e){return void 0!==this.attributes[e]}start(e){let{shoppingTrip:t,...r}=e;(this.shoppingTrip.get("partner")!==t.partner||this.attributes.suppressed)&&this.stop(),this.set(r),t&&this.shoppingTrip.start(t),this.attributes.notification="background"!==this.shoppingTrip.get("type"),this.attributes["notification-reminder"]=!1,this.attributes.activated=!0,this.emit("start",this)}suppress(){this.stop(),this.shoppingTrip.resetPendingAttributes(),this.attributes["notification-reminder"]=!1,this.attributes.suppressed=!0,this.emit("start",this)}stop(){this.reset(),this.shoppingTrip.reset(),this.clearCache(),this.emit("stop",this)}reset(){this.attributes={},this.attributes.notification=!0,this.attributes["notification-reminder"]=!0,this.attributes["notification-checkout"]=!0,this.attributes["notification-confirmation"]=!0,this.attributes.activated=!1}checkSessionTimeout(){const e=this.attributes.sessionInterval||18e5;this.attributes.visit&&(this.attributes.visit+e<Date.now()&&(this.stop(),this.shoppingTrip.resetPendingAttributes()),this.attributes.visit+36e5<Date.now()&&(this.attributes.notification=!0))}toJSON(){return{...this.attributes,shoppingTrip:this.shoppingTrip.toJSON()}}}class $a extends Ta{get url(){return Wo(Or.SETTINGS_MERCHANTS)}constructor(){super(),this._id="settings-merchants",this.UPDATE_INTERVAL=216e5}parse(e){return e.merchants.map((e=>(e.track_events=!0,e)))}}function za(e){if(!e)return{};let t="",r=0,n="";switch(e.display){case"Percentage":t="%";break;case"Fixed":t="$"}return e.amount&&(r=e.amount,n=e.range?"tiered":"flat"),{cash_back_type:t,cash_back:r,cash_back_structure:n}}let Ga=Ns.extend({idAttribute:"storeId",defaults:{reward:null,cashBackDifference:0,lastVisit:Date.now()},recalculateDifference(){var e;let t=null===(e=EBATES.merchants.get(this.id))||void 0===e?void 0:e.getReward();if(t&&this.get("reward")){let e=parseFloat(Rs(t).replace(/[^\d.]/g,"")),r=parseFloat(Rs(this.get("reward")).replace(/[^\d.]/g,""));e?this.set({cashBackDifference:e-r}):this.collection.remove(this)}}});const qa=Ms.extend({model:Ga,comparator:(e,t)=>e.get("cashBackDifference")===t.get("cashBackDifference")?e.get("lastVisit")>t.get("lastVisit")?-1:1:e.get("cashBackDifference")>t.get("cashBackDifference")?-1:1,key:"recent",size:500,initialize(){this.on({add:function(){this.sort(),this.length>this.size&&this.pop(),this.save()}})},save(){xr.extension.setItem(this.key,this.map((e=>e.attributes)))},visit(e){const t=e.get("storeId"),r=e.getReward(),n=this.add({storeId:t,lastVisit:Date.now()},{merge:!0});if(n.get("reward")){let e=cs(r,n.get("reward"));e<0?(n.set({reward:r}),n.recalculateDifference(),this.save()):e>0&&!n.updateTimeout&&(n.updateTimeout=setTimeout((()=>{let e=this.get(t);e&&(e.set({reward:r}),e.updateTimeout=null,e.recalculateDifference(),this.save())}),9e5))}},async updateRecent(){for(let e=this.length-1;e>=0;e--){let t=this.at(e);this.get(t.get("storeId"))?t.recalculateDifference():this.recent.remove(t)}this.sort(),this.save()}});function Ha(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}(e,t,"get");return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var Wa=r(9174),Ka=r.n(Wa);const Ja=function(e){const t=Ka().states({main:{comment:/#.*$/,blockString:{match:/:\s*"""/,push:"blockString"},description:{match:'"""',push:"description"},string:/"(?:\\"|[^"])*"/,variable:/\$[A-z\d]+/,id:/[A-z\d]+/,ws:{match:/[\s\t]+/,lineBreaks:!0},any:/./},description:{descriptionEnd:{match:'"""',pop:1},ws:{match:/[\s\t]+/,lineBreaks:!0},description:/./},blockString:{esc:{match:'"""',pop:1},stringSpace:{match:/[\s\t]+/,lineBreaks:!0},any:/./}});t.reset(e);let r="";for(const{type:e,value:n}of t)"comment"!==e&&"description"!==e&&"descriptionEnd"!==e&&(r+=n);t.reset(r);const n=Array.from(t);return n.map((({type:e,value:t},r)=>"blockString"===e?t.replace(/\s*/g,""):"ws"===e?n[r-1]&&"id"===n[r-1].type&&n[r+1]&&"id"===n[r+1].type?" ":"":t)).join("").trim()};class Ya{constructor(e){return Object.assign(this,{name:"GrapQLException",...e})}}async function Xa(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.query=Ja(e.query);const n=await fetch(Rr,{method:"POST",headers:{"Client-Agent":"button","Content-Type":"application/json",Authorization:`ebtoken ${null===(t=EBATES)||void 0===t?void 0:t.ebToken}`,...r},body:JSON.stringify(e)}),i=await n.json();return i.errors&&i.errors.forEach((e=>{throw new Ya(e)})),i}function Za(e,t){ec(e,t),t.add(e)}function Qa(e,t,r){ec(e,t),t.set(e,r)}function ec(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function tc(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}const rc=3e5;class nc extends Map{constructor(){super([[4,new lc(4)],[23,new lc(23)]]),xr.extension.attachEvent("updateRewards",(async(e,t)=>{let{data:r={}}=e;const n=(null==r?void 0:r.channel)||4,{storeIds:i="all"}=r;t(await this.get(n).fetch(i))}))}get default(){return this.get(4)}reset(){this.forEach((e=>e.reset()))}}var ic=new WeakMap,oc=new WeakMap,sc=new WeakSet,ac=new WeakSet,cc=new WeakSet,uc=new WeakSet;class lc extends(_a()){constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;super(),Za(this,uc),Za(this,cc),Za(this,ac),Za(this,sc),Qa(this,oc,{get:fc,set:void 0}),Qa(this,ic,{get:hc,set:void 0}),this.channel=e,this.stores=null,tc(this,sc,dc).call(this)}get(e){var t;if(!this.stores)throw new Error("Missing Rewards");if(!this.stores.has(e))throw new Error(`Missing Reward (${this.channel}): ${e}`);return null===(t=this.stores.get(e))||void 0===t?void 0:t.rate}async reset(){var e;null===(e=this.stores)||void 0===e||e.forEach(((e,t,r)=>{let{date:n,...i}=e;r.set(t,i)})),tc(this,cc,mc).call(this)}async fetch(e){await tc(this,ac,pc).call(this);const t=Array.isArray(e)?e:[e],r=Date.now()-rc,n=!!t.find((e=>{var t;return!(null!==(t=this.stores.get(e))&&void 0!==t&&t.date)||this.stores.get(e).date<r}));if(n)try{await tc(this,uc,gc).call(this,t)}catch(e){}return Array.isArray(e)?t.map((e=>{var t;return null===(t=this.stores.get(e))||void 0===t?void 0:t.rate})):null===(i=this.stores.get(e))||void 0===i?void 0:i.rate;var i}}function hc(){return Ma[this.channel]}function fc(){return`rates-${Ha(this,ic)}`}async function dc(){var e;4===this.channel&&(await tc(this,ac,pc).call(this),0===(null===(e=this.stores)||void 0===e?void 0:e.size)&&await this.fetch("all"))}async function pc(){if(!this.stores){const e=await ba.get(Ha(this,oc));this.stores=new Map(e)}}async function mc(){await ba.set(Ha(this,oc),[...this.stores])}async function gc(e){const t=await Xa({query:"query stores($storeIds: [String]!) {\n\t\t\t\tstores: byIds(domainIds: $storeIds, domainType: store) {\n\t\t\t\t\t... on Store {\n\t\t\t\t\t\tid\n\t\t\t\t\t\ttiered\n\t\t\t\t\t\treward {\n\t\t\t\t\t\t\tamount:displayAmount\n\t\t\t\t\t\t\tdisplay:displayType\n\t\t\t\t\t\t\trange:showUpTo\n\t\t\t\t\t\t\tdescription\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}",variables:{storeIds:e.map(String)}},{"X-Platform":Ha(this,ic)}),r=Date.now();return t.data.stores.forEach((e=>{let{id:t,tiered:n,reward:i}=e;const o={storeId:t,tiered:n,...i};if(i.range&&i.description){const e=wc(i.description);e&&e.length&&(o.tiers=e,o.tiered=!0)}this.stores.set(t,{date:r,rate:o})})),tc(this,cc,mc).call(this),this.stores}var vc=new WeakMap,yc=new WeakSet;class Ec extends(_a()){constructor(){super(),Za(this,yc),Qa(this,vc,{writable:!0,value:"tiers"}),this.stores=null}async save(){await ba.set(Ha(this,vc),[...this.stores])}async fetch(e){var t;this.stores||(this.stores=new Map(await ba.get(Ha(this,vc))));const r=Date.now()-rc,n=this.stores.get(e);if(!n||n.date<r)try{await tc(this,yc,bc).call(this,e)}catch(e){}return null===(t=this.stores.get(e))||void 0===t?void 0:t.tiers}}async function bc(e){const t=await Xa({query:"query stores($storeIds: [String]!) {\n\t\t\t\tstores: byIds(domainIds: $storeIds, domainType: store) {\n\t\t\t\t\t... on Store {\n\t\t\t\t\t\tstoreId:id\n\t\t\t\t\t\ttiers {\n\t\t\t\t\t\t\tid, name, reward {\n\t\t\t\t\t\t\t\tamount:displayAmount\n\t\t\t\t\t\t\t\tdisplay:displayType\n\t\t\t\t\t\t\t\trange:showUpTo\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treward {\n\t\t\t\t\t\t\trange:showUpTo\n\t\t\t\t\t\t\tdescription\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}",variables:{storeIds:[String(e)]}},{"X-Platform":Ma[4]}),r=Date.now();return t.data.stores.forEach((e=>{let{storeId:t,tiers:n,reward:i}=e;n&&n.length||!i.range||!i.description||(n=wc(i.description)),this.stores.set(t,{date:r,tiers:n})})),this.save(),this.stores}function wc(e){return e.split("\n").map((e=>{let t=e.match(/(.+ Cash Back) (.*)/);if(t)return{cashBack:t[1],description:t[2]}})).filter(Boolean)}let _c=Ns.extend({idAttribute:"matchPattern",initialize(){this.set({topDomain:os(this.get("domainName"))}),".*.*"!==this.get("matchPattern")&&(this.match=new RegExp(this.get("matchPattern"),"i"))}}),Ac=Ss().Collection.extend({model:_c}),Tc=Ns.extend({idAttribute:"storeId",deals:null,session:null,defaults:{activationCode:0},isButtonMerchant(){return[3,5].includes(this.get("activationCode"))},isActiveMerchant(e){try{return(e=e||this.getReward())&&["Percentage","Fixed"].includes(e.display)&&e.amount>0}catch(e){}return!1},isActiveButtonMerchant(){return this.isButtonMerchant()&&this.isActiveMerchant()},isEligibleForIconAnimation(){return!this.session.get("suppressed")&&(this.isActiveButtonMerchant()||6===this.get("activationCode")&&this.session.get("activated"))},processCode(e){const t=this.get("activationCode"),r=this.isActiveMerchant(e),n=this.isButtonMerchant(),i=n&&r;return{settings_notification:3===t&&r||2===t,settings_confirmation:i||6===t,settings_checkout:i,settings_serp:3===t&&r&&!0!==this.get("serpDisabled"),settings_popup:i,settings_caa:n,settings_purchase:n,offers_cb:r}},initialize(){return this.session=new Va(this.get("storeId")),this.has("storeId")&&(this.deals=new Ws([],{url:Wo(Or.STORE_DEALS).replace("{storeId}",this.get("storeId"))})),this.session.shoppingTrip.on("start",(e=>{if(e.get("source")){const t=EBATES.merchants.categories.get(this.id),r=t&&t.get("categories")[0],n=this.session.has("instantActivationVariation")?`Instant Activation #${this.session.get("instantActivationVariation")+1}`:"Remind me Later";rs.track("Start Shopping Trip",{store_category:r,version:n,store_name:this.get("storeName"),store_id:this.get("storeId"),tracking_ticket:`ebs${e.get("ttn")}sbe`,attribution_source_previous_click:e.get("source"),previous_ca_tracking_ticket:e.get("previous_ca_tracking_ticket"),entity_name:e.get("entity_name"),rank:e.get("rank"),activation_type:e.get("type"),serp_rank:e.get("serp_rank"),coupon_info_present:e.get("coupon_info_present"),coupon_qty:e.get("coupon_qty"),type:e.get("featureType"),referring_domain:e.get("referring_domain"),search_term:e.get("search_term"),interstitial_type:e.get("interstitialType"),...e.get("event_attributes"),...za(this.getReward(4))})}})),this.session.on("start",(e=>{this.session.checkSessionTimeout(),this.visit(),e.get("activated")?xa.start(this):e.get("suppressed")&&xa.stop(this),xr.extension.fireEvent("merchant.state:change")})),this.session.on("stop",(()=>{if(xa.stop(this),this.isActiveMerchant()){const e=this.collection.recent.get(this.get("storeId"));e&&e.set({reward:this.getReward(),lastVisit:Date.now()},{merge:!0})}xr.extension.fireEvent("merchant.state:change")})),Ns.prototype.initialize.call(this)},toJSON(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.getReward(e.channel);let r={...Ns.prototype.toJSON.apply(this,arguments),...this.processCode(t),reward:t},n=EBATES.member.bonuses.chain().filter((e=>{var t;return e.get("active")&&(null===(t=e.get("storeIds"))||void 0===t?void 0:t.includes(this.get("storeId")))})).invoke("toJSON").value();const i=this.session.shoppingTrip.get("source");if(EBATES.settings.promos.where({active:!0,hover:!0}).filter((e=>!e.get("source")||e.get("source")===i)).forEach((e=>{if(e.isActive()){let t=e.campaigns&&e.campaigns.findWhere({hover:!0}),r=t&&t.stores.findWhere(this.pick("storeId"));if(t&&r||!t){let t=r?r.attributes:null,i=e.get("description")?e.get("description").replace("%storeName",this.get("storeName")).replace("%url",e.get("url")):null;n.push({...e.toJSON(),...t,type:"promo",description:i})}}})),!this.isActiveMerchant()){let e=EBATES.settings.promos.findWhere({type:"recommended",active:!0,storeId:this.id});e&&(r.recommendedStores=e.toJSON())}r.hoverMessageTrheshold&&r.reward&&cs(r.reward,{amount:r.hoverMessageTrheshold})>=0&&delete r.hoverMessage;const o=this.storeContent?this.storeContent.toJSON():null,s=EBATES.merchants.categories.findWhere({storeId:this.get("storeId")}),a=s?s.get("categories"):[],c=this.session.toJSON();let u=EBATES.merchants.recent.get(this.get("storeId"));return u&&(r.recent=u.toJSON()),c.shoppingTrip.sessionReward&&(r.reward={...r.reward,...c.shoppingTrip.sessionReward}),{...r,...c,storeContent:o,bonuses:n,categories:a,rewardsExpired:this.collection.rates.default.expired,loggedIn:EBATES.loggedIn,travelStore:EBATES.settings.get("travelStores").includes(this.get("storeId"))}},showTakeover(e){e&&this.isActiveMerchant()&&EBATES.settings.get("features").takeover&&xr.extension.fireEvent("takeover",{tabId:e,data:this.toJSON()})},isStandDownIgnored(){const e=EBATES.settings.promos.get("standdown-config");return!!(e&&e.get("active")&&e.campaigns&&e.campaigns.find((e=>e.stores.get(this.id))))},visit(){let e=Date.now();this.session.set("visit",e)},suppress(){xr.extension.fireEvent("closeNotification",{tabId:xr.browser.ALLTABS,data:this.toJSON()});const e=this.session.get("tabId");this.session.suppress(),this.showTakeover(e),this.session.checkSessionTimeout()},getReward(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return this.isButtonMerchant()?this.collection.rates.get(e).get(this.id):{amount:0}},async getTiers(){return await this.collection.tiers.fetch(this.id)},getCashBackAmount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return Rs(this.getReward(e))},async activateInBackground(e){const t=await fetch(`${e}&response=json`),r=(await t.json()).ticket[0];if(r&&r.storeId){const t=r.link[0]["@href"],n=r.trackingNumber.replace(/\D/g,""),i=await xr.browser.navigate({tabId:xr.browser.NEWTAB,active:!1,pinned:!0});EBATES.settings.affiliates.match(e,i.id),EBATES.settings.affiliates.activations.addParameters(i.id,{trackingTicketNumber:n}),await xr.browser.navigate({tabId:i.id,url:t});const o=this.get("activationInterval")||EBATES.settings.get("activationInterval");let s=self.setTimeout((()=>{xr.browser.isSafari?xr.extension.fireEvent("closeWindow",{tabId:i.id}):gr().tabs.remove(i.id),xr.browser.detachEvent(xr.browser.TABCHANGED,a)}),Number.isInteger(o)?o:1e4),a=e=>{let{tabId:t}=e;t===i.id&&(xr.browser.detachEvent(xr.browser.TABCHANGED,a),self.clearTimeout(s))};xr.browser.attachEvent(xr.browser.TABCHANGED,a)}},isEligibleForIgnoredStandDown(){const e=EBATES.settings.promos.get("standdown-config");return!!(e&&e.get("active")&&e.campaigns&&e.campaigns.find((e=>e.stores.get(this.id))))},isEligibleForBackgroundActivation(){if(this.get("mpl"))return!0;let e=EBATES.settings.promos.get("background-activation");if(e&&e.get("active")&&e.campaigns){let t=e.campaigns.find((e=>e.stores.get(this.id)));if(t&&t.get("test")){return"A"===EBATES.tests.activate(t.get("test"),{store_id:this.id})}}return!1},isEligibleForInstantBackgroundActivation(){if(this.get("mpl"))return!0;let e=EBATES.settings.promos.get("background-activation");return!(!e||!e.campaigns)&&!!e.campaigns.find((e=>e.stores.get(this.id)))},activate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.sessionAttributes&&this.session.shoppingTrip.addPendingAttribute(e.sessionAttributes);let t=ss(e.store_url,EBATES.settings.get("sanitization"));8381===this.id&&(t=ss(t,"SourceCode=[^&]+&?"));let r=e.product_url,n=this.get("mpl")?40874:e.eeid,i=this.toJSON(),o=e.channel||4;this.session.shoppingTrip.addPendingAttribute({featureType:e.type});const s=(n=>{let s=n;if(n=`${n.replace("&store_url=%deepLinkUrl%","")}&channel=${o}&tb_v=${xr.extension.version}`,this.get("mpl")&&(n+=`&mpl_id=${this.get("mpl")}`),e.special&&(n+=`&special=${e.special}`),e.toolbarFeatureId&&(n+=`&toolbarFeatureId=${e.toolbarFeatureId}`),e.tabId&&e.tabId!==xr.browser.NEWTAB&&t&&(!i.offers_cb&&2!==this.get("activationCode")||i.nonTrackingPattern&&t.search(i.nonTrackingPattern)>=0||this.isEligibleForBackgroundActivation()||e.forceBackgroundActivation))this.activateInBackground(n).then((()=>{this.session.shoppingTrip.addPendingAttribute({type:"background"}),i.settings_notification&&xr.extension.fireEvent("showConfirmationHover",{tabId:e.tabId,data:{merchant:i}})}));else{let i="xfas",o="";r?(n=`${n}&product_url=${encodeURIComponent(r)}`,i="product"):n.indexOf("store_url")<0&&t&&this.get("affiliatizerEnabled")&&(n=`${n}&store_url=${encodeURIComponent(t)}`,i="affiliatizer",o=t),this.session.shoppingTrip.addPendingAttribute({type:i,startURL:o}),n.length>=2048&&(n=s),xr.browser.navigate({url:n,tabId:e.tabId})}return n})((()=>{switch(parseInt(this.get("activationCode"),10)){case 2:if(this.has("storeLandingURL"))return as(i.storeLandingURL,`tb=yes&sourceName=toolbar&eeid=${n||23509}`);case 5:if(this.has("storeLandingURL"))return as(i.storeLandingURL,"tb=yes");default:return as(i.shoppingURL||Wo(Or.BASE),`tb=yes&sourceName=toolbar&eeid=${n||23509}`)}})());"Search"===e.sessionAttributes.source&&EBATES.tests.get("BTN155")&&rs.track("Search Form Enter",{url:Js.active.url,entry_string:this.sessionAttributes.search_term,event_category:"PCS",created_ts_ms:Date.now(),created_ts:Math.floor(Date.now()/1e3),device_type:"toolbar",us:EBATES.member.get("userStatus"),event_type:null,page_type:null,destination_url:s})},getStoreContent(){return this.storeContent||(this.storeContent=new Ic({id:this.id})),this.storeContent.fetch()},checkAffiliatizer(e){if("affiliatizer"===this.session.shoppingTrip.get("type")){let t,r;try{t=new URL(this.session.shoppingTrip.get("startURL")),r=new URL(e)}catch(e){return}if(t&&r&&t.hostname+t.pathname!==r.hostname+r.pathname){const e={reason:"url_mismatch",starting_url:t.hostname+t.pathname,final_url:r.hostname+r.pathname,merchant_id:this.get("storeId")};zo.logger.warn("AffiliatizerStatus",e)}}}}),Ic=Us.extend({timeout:108e5,url(){return Wo(Or.STORE_CONTENT).replace("{storeId}",this.id)},parse:e=>e&&e.storeContent?e.storeContent[0]:{}});const Sc=Ds.extend({url:()=>{if(EBATES.settings.featureFlags.variation("feedGenMerchants",!1)){const e="\n\t\t\t\tquery stores($storeIds: [String]!) {\n\t\t\t\t\tstores: byIds(domainIds: $storeIds, domainType: store) {\n\t\t\t\t\t\t... on Store {\n\t\t\t\t\t\t\tstoreId: id\n\t\t\t\t\t\t\tstoreName: name\n\t\t\t\t\t\t\tactivationCode: attribute(key: buttonActivationCode, type: Int)\n\t\t\t\t\t\t\taffiliatizerEnabled: attribute(key: affiliatizerEnabled, type: Boolean)\n\t\t\t\t\t\t\torderConfirmationURLRegex: attribute(key: orderConfirmationURLRegex)\n\t\t\t\t\t\t\torderConfirmationDOMRegex: attribute(key: orderConfirmationDOMRegex)\n\t\t\t\t\t\t\ticbEnabled: attribute(key: isICBEnabled, type: Boolean)\n\t\t\t\t\t\t\tcreditCardCB\n\t\t\t\t\t\t\tshoppingURL: storeShoppingLink\n\t\t\t\t\t\t\tlargeLogo:image(type: largeLogo) {\n\t\t\t\t\t\t\t\turl\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tstoreLogo:image(type: dls_store_logo) {\n\t\t\t\t\t\t\t\turl\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsquareLogo:image(type: dls_store_mark) {\n\t\t\t\t\t\t\t\turl\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdomains: webdomains {\n\t\t\t\t\t\t\t\tdomainName: name\n\t\t\t\t\t\t\t\tmatchPattern: expression\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t",t=new URL(Rr);return t.searchParams.append("query",Ja(e)),t.searchParams.append("variables",'{"storeIds": "ALL"}'),t.toString()}return Wo(Or.STORES)},model:Tc,key:"merchants",initialize(){return this.rates=new nc,this.tiers=new Ec,this.recent=new qa,this.customMerchants=new $a,this.categories=new $s,this.domains=new Ac,this.topDealsProducts=new Ia,this.on({remove(e){this.recent.get(e.get("storeId"))&&this.recent.remove(e.get("storeId"))},reset(){EBATES.member.recommended.prepare()},async sync(){if(EBATES.settings.featureFlags.variation("customMerchants",!1)){const e=await this.customMerchants.load();this.add(e,{merge:!0});const t=e.filter((e=>{let{domainName:t,matchPattern:r}=e;return t&&r})).map((e=>{let{domainName:t,matchPattern:r,storeId:n}=e;return{domainName:t,matchPattern:r,storeId:n}}));this.domains.add(t,{merge:!0})}}}),xr.browser.isSafari&&this.recent.fetch(),this.once("sync",(async()=>{await Promise.all([this.categories.fetch()]),await this.recent.fetch(),await EBATES.member.recommended.prepare()})),xr.extension.attachEvent("getMerchant",(async(e,t)=>{let{url:r,tabId:n}=e;t(await this.getMerchant({url:r,tabId:n}))})),xr.extension.attachEvent("getStores",(async(e,t)=>{let{data:r}=e;const n=r.filter((e=>{var t;return null===(t=EBATES.merchants.get(e))||void 0===t?void 0:t.get("activationCode")}));await EBATES.merchants.rates.default.fetch(n),t(r.map((e=>{var t,r,n;return null===(t=EBATES)||void 0===t||null===(r=t.merchants)||void 0===r||null===(n=r.get(e))||void 0===n?void 0:n.toJSON()})))})),xr.extension.attachEvent("matchDomain",((e,t)=>{let{url:r}=e.data;const n=this.match(r,Js.active.tabId);t(n?{storeId:n.id}:null)})),xr.extension.attachEvent("getStore",(async(e,t)=>{let{storeId:r,fetch:n=!1}=e.data,i=e.data.url||Js.active.url;i=i.replace(/^chrome-extension:\/\/.*\/popup\/popup\.html#/,"");let o=null;if(n)try{await EBATES.merchants.fetch()}catch(e){}r?o=this.get(r):i&&i.indexOf(Or.domain)<0&&(o=this.match(i,Js.active.tabId)),o?(n&&await EBATES.merchants.rates.default.fetch(o.id),t(o.toJSON())):t(null)})),xr.extension.attachEvent("getStoresByName",((e,t)=>{if(e.data.name){const r=this.filter((t=>{const r=t.get("storeName");if(r)return e.data.name.length>r.length?-1!==e.data.name.indexOf(r):-1!==r.indexOf(e.data.name)}));t(r&&r.length?r.map((e=>e.toJSON())):null)}else t(null)})),xr.extension.attachEvent("activate",(e=>{let{tabId:t,data:r}=e;const n=this.get(r.storeId);var i;if(n&&(n.activate({tabId:t||Js.active.tabId,...r}),null===(i=r.sessionAttributes)||void 0===i||!i.source))throw new Error("Missing Activation Sourse",r)})),xr.extension.attachEvent("updateMerchantSession",(e=>{let{data:t,tabId:r,url:n}=e;t&&this.updateMerchantSession({data:t,tabId:r,url:n})})),xr.extension.attachEvent("getStoreContent",((e,t)=>{let r=this.get(e.data.storeId);r&&r.getStoreContent().catch((()=>{})).then((()=>{t(r.storeContent.toJSON())}))})),xr.extension.attachEvent("getTiers",(async(e,t)=>{let r=this.get(e.data.storeId);t(await(null==r?void 0:r.getTiers()))})),xr.extension.attachEvent("getOffers",(async(e,t)=>{const{storeId:r}=e.data;if(!r)throw new Error("Missing storeId");{let n=this.findWhere({storeId:r});if(null!=n&&n.isButtonMerchant()){try{await n.deals.fetch()}catch(e){}t(n.deals.toJSON())}else t([])}})),xr.extension.attachEvent("merchants.recent",((e,t)=>{this.recent.updateRecent();t(this.recent.map((e=>{var t;let{id:r}=e;return null===(t=EBATES.merchants.get(r))||void 0===t?void 0:t.toJSON()})).filter(Boolean))})),xr.extension.attachEvent("merchants.search",(async(e,t)=>{let{data:r}=e;const n=r.term.toLowerCase();"A"===EBATES.tests.get("BTN155")?t(await this.searchRemote(n)):t(this.search(n))})),xr.extension.attachEvent("isEligibleForBackgroundActivation",((e,t)=>{var r;const{storeId:n}=e.data;t(null===(r=this.get(n))||void 0===r?void 0:r.isEligibleForBackgroundActivation())})),xr.extension.attachEvent("isEligibleForInstantBackgroundActivation",((e,t)=>{var r;const{storeId:n}=e.data;t(null===(r=this.get(n))||void 0===r?void 0:r.isEligibleForInstantBackgroundActivation())})),Ds.prototype.initialize.apply(this,arguments)},processDocumentComplete(e){var t;let{url:r,tabId:n}=e;if(Xo(r)||!EBATES)return;const i=this.match(r,n);if(!i)return;const o=null===(t=EBATES.session_competition)||void 0===t?void 0:t.domain,s=EBATES.settings.affiliates.state(n);if(s.activation||s.suppress){if(s.activation)EBATES.loggedIn&&(EBATES.activate(i,s.activation),i.checkAffiliatizer(r));else if(s.suppress){EBATES.session_competition&&(rs.track("Start Competitor Shopping Trip",{url:r,domain:o}),EBATES.session_competition=null);const e=o&&EBATES.settings.get("standDownDomains").includes(o);if(EBATES.settings.featureFlags.variation("standDownByMerchant",!1)&&!e&&i.isEligibleForIgnoredStandDown()){const e=i.session.get("activated")?i.session.get("tabId"):null;i.session.stop(),e&&i.showTakeover(e)}else rs.track("Stand Down",{store_id:i.get("storeId"),tracking_ticket:i.session.shoppingTrip.get("ttn"),url:s.suppress.url,competitor:o,paidLink:s.suppress.paidLink}),i.session.set({competitor:o}),i.suppress()}EBATES.settings.affiliates.clear(n)}i.session.get("activated")&&n&&i.session.set("tabId",n),o&&EBATES.settings.priceMagic.get("partnerDomains").includes(o)&&(i.session.set("pmDisabled",!0),EBATES.session_competition=null),i.visit(),xa.visit(i,r)},fetch(e){return Ds.prototype.fetch.call(this,{add:!0,merge:!0,remove:!0,headers:{"X-Platform":Ma[4]},...e})},merge(e){this.set(e)},match(e,t){let r=null;const n=os(e);if(n){const i=this.domains.where({topDomain:n}).filter((t=>t.match&&t.match.test(e)));if(i.length)r=this.get((0,Go.Fp)(i,(e=>e.match.source.length)).get("storeId")),r&&t&&Js.has(t)&&(Js.get(t).storeId=r.get("storeId"));else if(t&&EBATES.settings.get("sharedPages").find((t=>new RegExp(t).test(e)))){const e=Js.get(t),n=null==e?void 0:e.storeId;n&&(r=this.get(n),r&&(e.storeId=n))}}return Js.has(t)&&(Js.get(t).storeId=null),r&&r.session.checkSessionTimeout(),r},search(e){return this.filter((t=>{var r,n;return(null===(r=t.get("storeName"))||void 0===r||null===(n=r.toLowerCase())||void 0===n?void 0:n.startsWith(e))&&t.isActiveButtonMerchant()})).map((e=>e.toJSON()))},async searchRemote(e){var t;null===(t=this.removeSearchController)||void 0===t||t.abort(),this.removeSearchController=new AbortController;const{signal:r}=this.removeSearchController;try{var n,i;const t=await fetch(Wo(Or.POPUP_SEARCH).replace("{terms}",encodeURIComponent(e.toLowerCase())),{signal:r});this.removeSearchController=null;const o=await t.json();return(null===(n=o.response)||void 0===n||null===(i=n.docs)||void 0===i?void 0:i.map((e=>{let{storeId:t}=e;const r=this.get(t);if(null!=r&&r.isActiveButtonMerchant())return r.toJSON()})).filter(Boolean))||[]}catch(t){return"AbortError"===t.name?[]:this.search(e)}},parse(e){if(EBATES.settings.featureFlags.variation("feedGenMerchants",!1)){let t=e.data.stores;return!EBATES.settings.featureFlags.variation("customMerchants",!1)&&EBATES.settings.domains&&EBATES.settings.domains.forEach((e=>{let{domainName:r,matchPattern:n,...i}=e,o=t.find((e=>i.storeId===e.storeId));o?Object.assign(o,i):t.push({...i,domains:r&&n?[{domainName:r,matchPattern:n}]:[]})})),t.map((e=>{var t,r,n,i;let{storeId:o,orderConfirmationURLRegex:s=null,orderConfirmationDOMRegex:a=null,domains:c=[],activationCode:u=0,affiliatizerEnabled:l=!1,icbEnabled:h=!1,largeLogo:f,squareLogo:d,storeLogo:p,...m}=e;return this.domains.add(c.map((e=>({storeId:o,...e})))),p=null===(t=p)||void 0===t?void 0:t.url,d=null===(r=d)||void 0===r?void 0:r.url,f=null===(n=f)||void 0===n?void 0:n.url,{storeId:o,activationCode:parseInt(u,10),affiliatizerEnabled:"true"===l||!0===l,icbEnabled:"true"===h||!0===h,domainName:null===(i=c[0])||void 0===i?void 0:i.domainName,orderConfirmationURLRegex:s,orderConfirmationDOMRegex:a,images:{squareLogo:d,largeLogo:f,storeLogo:p},...m}}))}{let t=e.domainEntities;return!EBATES.settings.featureFlags.variation("customMerchants",!1)&&EBATES.settings.domains&&EBATES.settings.domains.forEach((e=>{let r=t.find((t=>e.storeId===t.storeId));r?Object.assign(r,e):t.push(e)})),t=t.map((e=>{let{orderConfirmation:t,orderConfirmationURLRegex:r=null,orderConfirmationDOMRegex:n=null,...i}=e;return{orderConfirmationURLRegex:r,orderConfirmationDOMRegex:n,...i}})),this.domains.set(t.map((e=>{let{storeId:t,matchPattern:r,domainName:n}=e;return{storeId:t,matchPattern:r,domainName:n}}))),t}},updateMerchantSession(e){let{data:t,tabId:r,url:n}=e;const{storeId:i,sessionAttributes:o,...s}=t;let a=i?EBATES.merchants.get(i):EBATES.merchants.match(n,r);a&&(s&&a.session.set(s),o&&a.session.shoppingTrip.addPendingAttribute(o))},async getMerchant(e){let{url:t,tabId:r}=e;if(Xo(t)||!EBATES)return null;let n=this.match(t,r);if(n){try{var i;if(![0,2].includes(n.get("activationCode")))await Promise.all([!(null!==(i=n.session)&&void 0!==i&&i.get("activated"))&&this.rates.default.fetch(n.id),this.categories.fetch()])}catch(e){}if(this.rates.default.expired){const e=await xr.extension.getItem("rewardsExpire"),t=await xr.extension.getItem("rewards.nextUpdateTime");zo.logger.warn("RewardsExpired",{expired:e,next:t,now:Date.now(),source:"getMerchant"})}return EBATES.ebToken&&n.isActiveMerchant()&&this.recent.visit(n),{...n.toJSON(),blacklisted:EBATES.settings.userSettings.get("blacklistEnabled")&&EBATES.settings.blacklist.contains(t)}}return null}});var xc=r(3261),Oc=r.n(xc);const Rc=Ss().Model.extend({idAttribute:"created",defaults:{created:null,removed:!1,shown:!1,text:""},initialize(){this.get("created")||this.set("created",Date.now()),this.on("change:unread",(()=>{this.collection.trigger("change")}))},toJSON(){let e=Ss().Model.prototype.toJSON.apply(this,arguments);if("bonus"===this.get("type")){let t=EBATES.member.bonuses.get(this.get("bonus_id"));if(t&&(e.bonus=t.toJSON(),e.bonus.description=e.bonus.description.replace(/\$[\d.,]+ Cash Bonus /,""),e.bonus.storeIds&&e.bonus.storeIds.length)){let t=EBATES.merchants.get(e.bonus.storeIds[0]);t&&(e.bonus.store=t.toJSON())}}else if("cashback"===this.get("type")){let t=EBATES.merchants.get(this.get("storeId"));t&&(e.store=t.toJSON())}return e}}),kc=Ms.extend({key:"messages",model:Rc,initialize(){this.fetch({silent:!0}),this.on({"add remove change reset":function(){let e=this.where({shown:!1}).length;EBATES.badge.update("message",e),this.save()},add:function(e){xr.browser.isWebkit&&e.get("desktop")&&this.checkPermission().then((()=>{new Nc({model:e}).render()})).catch((()=>{}))}})},flush(){return this.remove(this.filter((e=>{const t=e.has("created")&&e.get("shown")&&e.get("created")<new Date-EBATES.settings.get("messageExpires");return e.get("removed")||t}))),Promise.resolve()},checkPermission:()=>new Promise(((e,t)=>{gr().permissions.contains({permissions:["notifications"]}).then((r=>{r?e():t()})).catch((()=>{}))}))}),Nc=Ss().View.extend({eventsHandler:{},category:"Desktop Notification",getEventParams(){return{module_type:this.category,entity_name:this.model.get("entity"),store_name:this.getMerchantName()}},events:{onButtonClicked:function(e){e===this.notificationId&&(this.click(),this.track("Click Module",{cta_type:this.model.get("cta")}))},onClicked:function(e){e===this.notificationId&&(this.model.has("url")&&!this.model.has("cta")&&this.click(),this.track("Click Module",{cta_type:"Message"}))},onClosed:function(e){e===this.notificationId&&(this.track("Click Module",{cta_type:"Close"}),!this.model.get("popup")&&this.model.get("desktop")&&this.collection&&this.model.collection.remove(this.model)),this.detachEvents()}},getMerchantName(){if(this.model.has("storeId")&&EBATES.merchants.has(this.model.get("storeId")))return EBATES.merchants.get(this.model.get("storeId")).get("storeName")},track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};rs.track(e,{...this.getEventParams(),...t})},click(){const e=this.model.get("url");this.track("Visit Page",{preceding_screen_name:this.category,url:e}),xr.browser.navigate({url:e,tabId:xr.browser.NEWTAB}),gr().notifications.clear(this.notificationId),this.model.set({shown:!0})},initialize(){this.attachEvents()},attachEvents(){Object.keys(this.events).forEach((e=>{this.eventsHandler[e]=this.events[e].bind(this),gr().notifications[e].addListener(this.eventsHandler[e])}))},detachEvents(){Object.keys(this.events).forEach((e=>{gr().notifications[e].removeListener(this.eventsHandler[e])}))},render(){gr().notifications.create({type:"basic",title:this.model.get("title")||xr.extension.name,iconUrl:this.model.get("image")||"/img/rakuten/icon-rakuten.svg",message:this.model.get("text"),buttons:this.model.has("url")&&this.model.has("cta")?[{title:this.model.get("cta")}]:null}).then((e=>{this.notificationId=e;const t={module_type:this.category,entity_name:this.model.get("entity")};this.model.has("storeId")&&(t.store_name=EBATES.merchants.get(this.model.get("storeId")).get("storeName")),rs.track("View Module",this.getEventParams())})).catch((e=>{}))}});let Cc=Ns.extend({defaults:{popup:!1,badge:!1,shown:!1,active:!1},campaigns:null,initCampaigns(){this.has("campaigns")&&(this.campaigns||(this.campaigns=new Uc(null,this)),this.campaigns.set(this.get("campaigns")))},isActive(){if(EBATES&&EBATES.member.isExtensionDisabled())return!1;if(this.has("expires")&&this.has("starts")){let e=Date.now(),t=new Date(this.get("starts")).getTime(),r=new Date(this.get("expires")).getTime();return this.set({active:e>=t&&e<r&&this.isCampaignSupported()}),this.get("active")}{let e=this.isCampaignSupported();return e||this.set({active:!1}),e}},initTimeouts(){if(this.has("expires")&&this.has("starts")){this.timeout&&self.clearInterval(this.timeout);let e=Date.now(),t=new Date(this.get("starts")).getTime(),r=new Date(this.get("expires")).getTime();this.set({active:e>=t&&e<r&&this.isCampaignSupported()});let n,i=e=>(0,Go.VV)([new Date(e)-Date.now(),6e5]);e<t?n=i(t):e<r&&(n=i(r)),n&&(this.timeout=self.setInterval((()=>{this.initTimeouts()}),n))}},isCampaignSupported(){function e(e){return e.replace(/(\d+\.\d+\.\d+)\.(\d+)/,"$1-$2")}let t=!0;return this.get("browser")&&(t=(0,Go.r3)(this.get("browser").split(","),xr.browser.name)),this.get("version")&&(t=t&&Oc().satisfies(e(xr.extension.version),e(this.get("version")))),t},activate(){this.get("badge")&&!this.get("shown")&&(EBATES.badge.update("promo",1),EBATES.member.overlays.where({shown:!1}).forEach((e=>e.set({shown:!0}))),EBATES.member.overlays.save()),this.get("desktopTitle")&&this.get("desktopMessage")&&!this.get("desktopMessageShown")&&EBATES.member.messages.checkPermission().then((()=>{new Nc({model:new ks.Model({type:this.id,title:this.get("desktopTitle"),text:this.get("desktopMessage"),url:Wo(this.toJSON().url),image:this.get("icon"),entity:this.id})}).render(),this.set({desktopMessageShown:!0})})).catch((()=>{})),this.get("overlay")&&this.get("overlay").template&&!EBATES.member.overlays.get(this.id)&&EBATES.member.overlays.add({id:this.id,view:"CustomOverlayView",persistent:this.get("overlay").persistent,template:this.get("overlay").template})},initialize(){this.isCampaignSupported()?(this.on({"change:campaigns":function(){this.initCampaigns()},"change:starts change:expires":function(){this.initTimeouts()},"change:active":function(e,t){t?this.activate():(EBATES.member.overlays.remove(this.id),EBATES.member.overlays.save(),EBATES.badge.update("promo",0)),"icons"===this.id&&setTimeout((()=>EBATES.icon.load()),500)},"change:shown":function(e,t){t&&EBATES.badge.update("promo",0)}}),this.get("active")&&this.activate(),this.initCampaigns(),this.initTimeouts()):this.set({active:!1})},toJSON(){return{...Ns.prototype.toJSON.apply(this,arguments),...this.collection.savedAttributes.get(this.id)}}});const Dc=Ds.extend({model:Cc,key:"promos",url:()=>Wo(Or.SETTINGS_PROMOS),UPDATE_INTERVAL:108e5,parse(e){return e.promos.map((e=>({...e,...this.savedAttributes.get(e.id)})))},fetch(){return!1!==EBATES.settings.featureFlags.variation("customPromos",!1)&&Ds.prototype.fetch.apply(this,arguments)},initialize(){var e=this;this.savedAttributes=new Map,ba.get(`${this.key}-attributes`).then((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.savedAttributes=new Map(t)}));const t=["shown","desktopMessageShown","interruptShown","serpClosed","disabled","data"];return this.on("change",(e=>{(0,Go.jV)(Object.keys(e.changedAttributes()),t).length>0&&(this.savedAttributes.set(e.id,e.pick(t)),this.saveLocalAttributes())})),xr.extension.attachEvent("updatePromo",(e=>{let{data:t={}}=e;const{id:r,...n}=t;this.get(r)&&(this.get(r).set(n),xr.extension.fireEvent("promoUpdated",{tabId:xr.browser.ALLTABS,data:this.get(r).toJSON()}))})),xr.extension.attachEvent("getCampaignStores",(async(e,t)=>{let{data:r}=e;const{id:n,fetch:i=!1,rewards:o=!1}=r,s=(0,Go.xH)(this.map((e=>e.campaigns&&e.campaigns.models)).filter(Boolean)).find((e=>e.id===n));if(s){if(i)try{await s.stores.fetch(),await EBATES.merchants.rates.default.fetch(s.stores.pluck("storeId"))}catch(e){t(null)}t(o?s.stores.toJSON():s.stores.map((e=>({storeId:e.id}))))}else t(null)})),Ds.prototype.initialize.apply(this,arguments)},saveLocalAttributes(){for(const e of this.savedAttributes)this.get(e)||this.savedAttributes.delete(e);ba.set(`${this.key}-attributes`,[...this.savedAttributes])},getActive(){return this.find((e=>e.get("active")&&Date.now()>=new Date(e.get("starts"))&&Date.now()<new Date(e.get("expires"))))}});let Lc=Ns.extend({idAttribute:"storeId",toJSON(){const e=EBATES.merchants.get(this.get("storeId"));if(e&&e.has("shoppingURL")&&e.isButtonMerchant()){const t=e.toJSON(),r=as(t.shoppingURL.replace("&store_url=%deepLinkUrl%",""),{merchantId:t.storeId,domainName:t.domainName,tb:"yes",toolbarId:EBATES.toolbarId,sourceName:"toolbar",channel:4,toolbarFeatureId:"TOPSTORES",tb_v:xr.extension.version,eeid:t.mpl?"40874":"26142",mpl_id:t.mpl});return{...Ns.prototype.toJSON.apply(this,arguments),...t,shoppingURL:r}}}}),Bc=Gs.extend({model:Lc,url(){return`${Wo(Or.CAMPAIGNS)}?id=${this.id}`},initialize(e,t){this.id=t.id,this.campaign=t,this.on("error",(()=>{let e=this.campaign.collection.promo;var t,r;zo.logger.warn("NetworkException",{type:"campaign",url:this.url(),campaign:e?e.toJSON():this.id,localTime:(t="YYYY-MM-DD HH:mm",is()(r).format(t))})}))},parse(e){var t;let r=null===(t=e.campaigns)||void 0===t?void 0:t.pop();if(r)return this.details=(0,Go.ei)(r,["name","start","expires"]),r.stores},fetch(){let e=this.campaign.collection.promo;return this.id&&e&&e.isActive()?Gs.prototype.fetch.apply(this,arguments):Promise.resolve()},toJSON(){return Gs.prototype.toJSON.apply(this,arguments).filter(Boolean)}}),Pc=ks.Model.extend({defaults:{popup:!1,hover:!1,update:0},lastUpdateTimestamp:0,initialize(){this.stores=new Bc(null,this),this.get("stores")&&this.stores.set(this.get("stores")),this.on("change:update",(()=>this.setUpUpdate())),this.listenTo(this.stores,{request:()=>this.setUpUpdate(),sync:()=>this.lastUpdateTimestamp=Date.now()}),this.listenTo(this.collection.promo,"change:active",(e=>{e&&this.get("update")&&(this.get("popup")||this.get("tab")||this.get("hover"))&&(EBATES.merchants.rates.default&&EBATES.merchants.rates.default.reset(),this.stores.fetch())})),this.collection.promo.get("active")&&setTimeout((()=>this.stores.fetch()),3e3),this.collection.promo.set(this.pick((e=>!0===e)))},setUpUpdate(){if(this.get("update")>0&&this.collection.promo.isActive()){self.clearInterval(this.timeout);let e=()=>{var e,t;null!==(e=this.collection)&&void 0!==e&&null!==(t=e.promo)&&void 0!==t&&t.isActive()?Date.now()>this.lastUpdateTimestamp+this.get("update")&&this.stores.fetch():self.clearInterval(this.timeout)};this.timeout=self.setInterval(e,9e5)}}}),Uc=ks.Collection.extend({model:Pc,initialize(e,t){this.promo=t}});class Mc extends Ta{constructor(){super(),this._id="price-magic-domains",this.UPDATE_INTERVAL=108e5}get url(){return Wo(Or.SETTINGS_PM)}parse(e){const t=e?e.domains:[];return t.forEach((e=>{e.enabled=e.enabled||!0})),t}}class jc{constructor(){this.key="installedExtensions",this.extensions=[],this.CHECK_INTERVAL=864e5,this.initialize()}set(e){let t=[];for(const[r,n]of Object.entries(e))t.push({...this.extensions[r],id:r,url:n});Object.assign(this.extensions,t),this.extensions=this.extensions.filter((t=>{let{id:r}=t;return e[r]})),EBATES.setUninstallURL()}initialize(){xr.extension.attachEvent("installedExtensions",((e,t)=>{t(this.getInstalledExtensions())})),gr().alarms.onAlarm.addListener((e=>{"CheckCompetitors"===e.name&&EBATES.settings&&EBATES.settings.installedExtensions&&EBATES.settings.installedExtensions.check()})),gr().alarms.create("CheckCompetitors",{periodInMinutes:60}),this.load()}async checkRequired(){let e=await xr.extension.getItem("installed_extensions_check");return!e||e+this.CHECK_INTERVAL<=Date.now()}async check(){await this.checkRequired()&&(await Promise.all(this.extensions.map((e=>this.checkUrl(e)))),xr.extension.setItem("installed_extensions_check",Date.now()),this.save(),this.sendEvents())}async checkUrl(e){if(e.url)try{const t=await fetch(`chrome-extension://${e.url}`);e.installed=200===t.status}catch(t){e.installed=!1}}save(){xr.extension.setItem(this.key,this.extensions)}async load(){const e=await xr.extension.getItem(this.key);e&&Object.assign(this.extensions,e)}sendEvents(){const e=this.getInstalledExtensions();rs.track("Competitor Applications",{extensions:e.toString()})}getInstalledExtensions(){return this.extensions.filter((e=>{let{installed:t}=e;return t})).map((e=>{let{id:t}=e;return t}))}}let Fc=ks.Model.extend({constructor:function(e){ks.Model.call(this,{url:e})}}),Vc=ks.Collection.extend({model:Fc,initialize(e,t){let{type:r}=t;this.type=r,this.matches=new Map},find(e){return"string"==typeof e?ks.Collection.prototype.find.call(this,(t=>"string"==typeof t.get("url")?e.indexOf(t.get("url"))>0:t.get("url").test(e))):ks.Collection.prototype.find.apply(this,arguments)},match(e){let{tabId:t,...r}=e,n=this.find(r.url);if(n){let e=this.matches.get(t)||[];r.timeStamp=Date.now(),r.paidLink=n.get("url"),e.push(r),this.matches.set(t,e)}return n},clear(e){this.matches.delete(e)},state(e){const t=Date.now()-6e4,r=(this.matches.get(e)||[]).filter((e=>{let{timeStamp:r}=e;return r>t}));return r.length&&this.matches.set(e,r),r[0]},addParameters(e,t){const r=this.matches.get(e);r?this.matches.set(e,r.map((e=>({...e,...t})))):this.matches.set(e,[{...t,timeStamp:Date.now()}])}});const $c=ks.Model.extend({suppresses:new Vc(null,{type:"suppresses"}),activations:new Vc([/^[^?]*\.(?:ebates|rakuten)\.com\/.*(?:createShoppingSession|xfas|mall_ctrl\.do)/,/\.shopstyle(?:qa)?\.com\/\w+\/(?:loadRetailerProductPage|apiVisitRetailer)/,/\/\/shopping\.yahoo\.com\/rd\?.*?providerId=rkt/],{type:"activations"}),initialize(){xr.browser.attachEvent(xr.browser.TABCLOSED,(e=>{let{tabId:t}=e;this.activations.clear(t),this.suppresses.clear(t)}))},match(e,t){this.activations.match({url:e,tabId:t})||this.suppresses.match({url:e,tabId:t})},state(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{tabId:e,activation:this.activations.state(e),suppress:this.suppresses.state(e)}},clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.suppresses.clear(e),this.activations.clear(e)}});class zc extends Ta{constructor(){super(),this._id="products",this.UPDATE_INTERVAL=864e5}get url(){return Wo(Or.SETTINGS_PRODUCTS)}async getConfigs(){try{return await this.load()}catch(e){return[]}}parse(e){return e.stores}}class Gc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.similarProducts=[],this.request=e}async fetch(){const e=await hs({url:this.url,error:(e,t,r)=>{throw{response:e,status:t,error:r}}});if(this.similarProducts=this.parse(e),this.similarProducts.length)try{const e=(0,Go.Tw)(this.similarProducts.map((e=>e.storeId)));await EBATES.merchants.rates.get(23).fetch(e)}catch(e){}return this.toJSON({channel:23})}get url(){return as(Wo(Or.SIMILAR_PRODUCTS),this.request)}parse(e){var t,r;return null==e||null===(t=e.hits)||void 0===t||null===(r=t.hits)||void 0===r?void 0:r.map((t=>({...t._source,algorithmMatched:t._source.algorithmMatched||e.algorithmMatched})))}toJSON(e){var t;return null===(t=this.similarProducts)||void 0===t?void 0:t.map((t=>{const r=EBATES.merchants.get(t.storeId);return{...Ho({...t},"https://product-image.ebates.com"),merchant:r?r.toJSON(e):null}}))}}xr.extension.attachEvent("getSimilarProducts",(async(e,t)=>{let{data:r}=e;const{requestAllowed:n,request:i}=r;if(i.term&&!i.title&&(i.title=i.term,delete i.term),!1===n)t();else{const e=new Gc(i);try{const n=await e.fetch();n.length?t({url:e.url,products:n,error:!1,requestId:bs()}):t({url:e.url,error:!0,message:"0 results found",status:0,details:r.term})}catch({response:r,status:n}){var o;let i="",s=null;try{i=await r.text(),s=JSON.parse(i)}catch{}t({url:e.url,error:!0,status:n,...null!==(o=s)&&void 0!==o&&o.apiHeader?{message:"Request failed",details:s.apiHeader.message}:{message:"API error",xhr:i}})}}})),xr.extension.attachEvent("saveVisitedProduct",(async e=>{if(EBATES.settings.featureFlags.variation("pmSaveProducts",!1)){const t=7776e6,r=e.data;let n=await ba.get("visited-products")||[];const i=Date.now();for(let e=n.length-1;e>=0;e--){n[e].ts+t<=i&&n.splice(e,1)}const o=n.findIndex((e=>{let{product:t}=e;return r.product.sku&&t.sku?t.sku===r.product.sku:r.product.upc&&t.upc?t.upc===r.product.upc:t.title===r.product.title}));o>-1&&n.splice(o,1),n.unshift(r),ba.set("visited-products",n.slice(0,1e3))}})),xr.extension.attachEvent("getDomainLastVisitedProduct",(async(e,t)=>{const{domain:r}=e.data,n=(await ba.get("visited-products")||[]).find((e=>e.domain===r));t(n?n.product:null)}));class qc extends(_a()){constructor(e,t){let{url:r,appId:n,apiKey:i,updateInterval:o}=e;super(),this._url=r,this._appId=n,this._apiKey=i,this._updateInterval=o,this._variations={},this._attributes={},t&&this.identify(t)}async fetch(){const e=new URL(this._url);Object.keys(this._attributes).forEach((t=>e.searchParams.append(t,this._attributes[t])));try{const t=await hs(e,{headers:{"APP-ID":this._appId,"API-KEY":this._apiKey}}),r={};[...new Set([...Object.keys(this._variations),...Object.keys(t)])].forEach((e=>{const n=t[e];this._variations[e]!==n&&(r[e]=n)})),this._variations=t,Object.entries(r).forEach((e=>{let[t,r]=e;this.emit(`change:${t}`,r)}))}catch(e){}return this}async identify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._updateInterval&&(clearTimeout(this._timeout),this._timeout=setInterval((()=>this.fetch()),this._updateInterval)),this._attributes=e,await this.fetch(),this.emit("ready",this)}variation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.split(".");return function e(r,n){let i=n.shift();return Object.prototype.hasOwnProperty.call(r,i)?n.length?e(r[i],n):r[i]:t}(this._variations,r)}toJSON(){return JSON.parse(JSON.stringify(this._variations))}}const Hc={28:53286,27:53285,26:53284,25:53283};class Wc{constructor(e){pr(this,"term",void 0),this.term=e}get url(){return as(Wo(Or.SEARCH_PRODUCTS),{term:this.term,pgsz:30,partnerId:"1",version:"2.0",client:"Toolbar"})}async fetch(){try{const e=await hs(this.url),t=this.parse(e),r=t.map((e=>e.storeId)).filter((e=>{var t;return null===(t=self.EBATES.merchants.get(e))||void 0===t?void 0:t.get("activationCode")}));return await self.EBATES.merchants.rates.default.fetch(r),t.map((e=>{var t;const r=null===(t=self.EBATES.merchants.get(e.storeId))||void 0===t?void 0:t.toJSON();return null!=r&&r.offers_cb?{...e,merchant:r}:null})).filter(Boolean)}catch{return[]}}parse(e){return e.grouped.groupList.map((e=>{var t;let{product:r}=e;return{...(0,Go.ei)(r,"id","title","description","productUrl","storeId","eligibleForCashBack"),imageUrlEbates:null!==(t=r.imageUrl)&&void 0!==t&&t.length?r.imageUrl[0]:(n=r.imageUrlEbates,/^https?:/.test(n)?n:`https://product-image.ebates.com${n}`),listPrice:parseFloat(r.listPrice),salePrice:parseFloat(r.salePrice),categoryId:r.categoryIdEbates,category:r.categoryNameEbates,brandName:r.brandNameEbates};var n})).filter(Boolean)}}let Kc=ks.Model.extend({constructor:function(e){return ks.Model.call(this,{data:e})},toJSON(){return this.get("data")}}),Jc=Ms.extend({key:"blacklist",model:Kc,initialize(){xr.extension.attachEvent("blacklist-save",(e=>{let{data:t}=e;this.reset(t),this.save()})),xr.extension.attachEvent("blacklist-update",(e=>{let{data:t}=e;const{domain:r,blacklisted:n}=t;r&&"boolean"==typeof n&&(n&&!this.contains(r)?this.add(r):n||this.remove(this.where({data:r})),this.save())}))},contains(e){return!!this.find((function(t){return os(e)===os(t.get("data"))}))}});class Yc extends Ta{get url(){return Wo(Or.SETTINGS_SERP)}constructor(){super(),this._id="serp",this.UPDATE_INTERVAL=216e5}parse(e){return e.serp}}let Xc=js.extend({key:"cart_notifications",defaults:{activation:!0,caa:!0,ccch:!0,ccps:!0,bonus:!0}}),Zc=js.extend({requestPermission(e,t){xr.extension.fireEvent("permission-request-backdrop",{data:"show"}),gr().permissions.request({permissions:["notifications"]}).then((e=>{xr.extension.fireEvent("permission-request-backdrop",{data:"hide"}),e?(EBATES.settings.userSettings.save({notificationsEnabled:"granted"}),new Nc({model:new Rc({type:"permission",title:"Desktop notifications are now on!",text:"We'll let you know whenever Cash Back is placed in your account.",url:Wo("/pending-cash-back.htm?tb=yes&eeid=26117"),cta:"See Cash Back Activity",desktop:!0,entity:"Opt-in"})}).render()):EBATES.settings.userSettings.save({notificationsSuspended:Date.now(),notificationsEnabled:"rejected"}),t&&t()})).catch((e=>{}))}}),Qc=js.extend({key:"settings",defaults:{abandonedProductsReminder:!0,postPurchaseMessage:!0,postPurchaseMessageAddressUpdated:!1,desktopNotifications:{cashBack:!0},ccHover:0,blacklistEnabled:!1,disabledTieredStores:[],reportingEnabled:!0,transitionMessage:!1,postInstallPopup:!1,progressiveEducation:{ReminderHover:!0,ConfirmHover:!0,UpToCB:!0,CouponMagic:!0,SERPinjections:!0,SERPinjectionsClickable:!0,SERPinjectionsGiftCard:!0,PriceMagic:!0,PriceMagicButton:!0}},initialize(){this.on({sync:function(){const e={...this.defaults.progressiveEducation,...this.get("progressiveEducation")};this.save({progressiveEducation:e}),xr.browser.isFirefox&&(this.has("logging")||this.save({logging:Yo(EBATES.installVersion,"4.23.0.0")<0?"opt_in":"pending"}),this.has("anonymousLogging")||this.save({anonymousLogging:Yo(EBATES.installVersion,"4.41.0.0")<0?this.get("logging"):"pending"})),this.has("installedTimestamp")||this.save({installedTimestamp:Date.now()}),Yo(EBATES.installVersion,"5.0.0")>=0&&this.set("transitionMessage",!0)},"change:isDoNotShareActive":()=>{let e=bs();xr.extension.setItem("uiid",e),rs.setAnonymousId(e)},"change:logging change:isDoNotShareActive change:anonymousLogging":()=>this.toggleLogging()})},toggleLogging(){const e=EBATES.member.isExtensionDisabled(),t=EBATES.member.id?!0===EBATES.member.get("isDoNotShareActive"):this.get("isDoNotShareActive"),r=EBATES.settings.featureFlags.variation("dataDogLogging",!0),n=EBATES.settings.featureFlags.variation("segmentLogging",!0),i="opt_out"===this.get("logging")||"pending"===this.get("logging")||e,o="opt_out"===this.get("anonymousLogging")||"pending"===this.get("anonymousLogging")||e,s=i||t;rs.disabled=s||!n,xa.disabled=s,EBATES.fillr&&(EBATES.fillr.disabled=s),zo.logger.setHandler(!r||o||t?"silent":"http")}});const eu=Ls.extend({url:()=>Wo(Or.SETTINGS),blacklist:new Jc,coupons:new class extends Ta{get url(){return Wo(Or.SETTINGS_COUPONS)}constructor(){super(),this._id="coupons",this.UPDATE_INTERVAL=864e5,xr.extension.attachEvent("getCouponsConfig",(async(e,t)=>{let{data:r}=e;if(null!=r&&r.url){t(await this.match(r))}}))}async match(e){let{url:t,storeId:r}=e;try{this.config=await this.load()}catch(e){this.config=[]}return this.config.filter((e=>(!r||e.storeId===r)&&[].concat(e.url).find((e=>new RegExp(e,"i").test(t)))))}parse(e){return e.coupons}},checkoutNotifications:new Xc,affiliates:new $c,priceMagic:new class{constructor(){pr(this,"properties",{affiliatizedLinks:[".popshops.com/","c.affil.walmart.com/"],thresholdAmount:5,excludedDomains:[],partnerDomains:[],exclusions:[],requestThreshold:null,tiers:null,messages:[],giftCardDisplayDelay:0}),pr(this,"domains",new Mc)}set(e){Object.assign(this.properties,e)}get(e){return e?this.properties[e]:this.properties}toJSON(){return this.properties}},browserNotification:new Zc,userSettings:new Qc,mediaPlacements:new class extends Ta{constructor(){var e;super(),e=this,pr(this,"_id","MediaCampaignsCollection"),pr(this,"UPDATE_INTERVAL",216e5),pr(this,"currentMediaCampaigns",new Map),xr.extension.attachEvent("getMediaCampaigns",(async(e,t)=>{let{data:r}=e;t(await this.getMediaCampaigns(r))})),xr.extension.attachEvent("hasMediaCampaigns",(async(e,t)=>{let{data:r}=e;t(await this.hasMediaCampaigns(r))})),xr.extension.attachEvent("showMediaCampaigns",(async e=>{let{data:r}=e;const n=await this.load();this.currentMediaCampaigns.forEach((e=>{let{name:t}=e;n.find((e=>e.name===t))||this.currentMediaCampaigns.delete(t)})),r.forEach((e=>{let{name:t,shown:r}=e;r||this.currentMediaCampaigns.set(t,Date.now())})),ba.set(`${this._id}-shown`,[...this.currentMediaCampaigns]),t(Js.active)})),ba.get(`${this._id}-shown`).then((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.currentMediaCampaigns=new Map(t)}));const t=async e=>{let{url:t,tabId:r}=e;if(self.EBATES&&!self.EBATES.member.isExtensionDisabled()){if(t&&r&&this.enabled){const e=self.EBATES.merchants.match(t,r);let n=0;if(n=e?await this.getNewCampaignsNumber({storeId:e.get("storeId"),imageTypeId:28}):await this.getNewCampaignsNumber({imageTypeId:25}),n)return void self.EBATES.badge.update(this._id,n)}self.EBATES.badge.update(this._id,0)}};xr.browser.attachEvent(xr.browser.DOCUMENTCOMPLETE,t),xr.browser.attachEvent(xr.browser.TABCHANGED,t)}get enabled(){var e;return null===(e=self.EBATES)||void 0===e?void 0:e.settings.featureFlags.variation("mediaPlacements",!1)}async getNewCampaignsNumber(e){let{storeId:t,imageTypeId:r}=e,n=[];try{n=await this.load()}catch{}n=this.filterCampaigns(n,t);let i=0;return n.forEach((e=>{let{images:t,...n}=e;t.forEach((e=>{e.imageTypeId!==r||this.currentMediaCampaigns.has(n.name)||i++}))})),i}async hasMediaCampaigns(e){var t;let{storeId:r}=e;if(!this.enabled)return[];let n=[];try{n=await this.load()}catch{}return(null===(t=this.filterCampaigns(n,r))||void 0===t?void 0:t.length)>0}async getMediaCampaigns(e){let{storeId:t,imageTypeId:r}=e;if(!this.enabled)return[];let n=[];try{n=await this.load()}catch{}n=this.filterCampaigns(n,t);const i=[];return n.forEach((e=>{let{images:t,...n}=e;t.forEach((e=>{if(e.imageTypeId===r){const t=self.EBATES.merchants.get(n.storeId),o=null==t?void 0:t.get("storeName"),s=null==t?void 0:t.getReward(),a=as(Wo(n.uri),{tb:"yes",sourceName:"toolbar",channel:4,eeid:Hc[r],tb_v:xr.extension.version,ebtoken:self.EBATES.ebToken});i.push({...n,storeName:o,storeReward:s,shown:this.currentMediaCampaigns.get(n.name),uri:a,imageUri:Wo(e.imageUri)})}}))})),i}filterCampaigns(e,t){return e.filter((e=>(!e.start||Date.now()>new Date(e.start).getTime())&&(!e.expires||Date.now()<new Date(e.expires).getTime())&&(!t||e.storeId===t)))}get url(){const e=self.EBATES.member.get("personalizationSet");return as(Wo("https://%api%/apituner/button/campaign/list?id=12125&sortBy=rank"),{personalizationSet:e})}parse(e){var t;return(null===(t=e.campaigns[0])||void 0===t?void 0:t.pageComponents)||[]}},serp:[],iscb:[],UPDATE_INTERVAL:108e5,ERROR_UPDATE_INTERVAL:3e5,defaults:{activityUpdateInterval:108e5,activationInterval:1e4,serpEnabled:!0,competitorDomains:["shopathome.com","shopstyle.com","dealmoon.com","mrrebates.com","retailmenot.com","dealsplus.com","jet.com"],standDownDomains:[],contentBlackList:[],travelStores:[],interruptBlackList:[],sharedPages:[],features:{},groupon:{},CDN:Or.CDN,deskNotificationReqFreq:2592e6,messageExpires:12096e5,reportingUpdateInterval:108e5,rewardsExpire:864e5,pendingDeletionTemplate:'<h2>Your Account Deletion is Pending</h2>\n\t\t<p>You requested an account deletion. You can check the status of your request by clicking below. You may also wish to remove Rakuten from your browser extensions.</p>\n\t\t<a href="#" data-href="https://www.rakuten.com/shell-page.htm?sourceName=toolbar" class="btn">Check Deletion Status</a>',confirmationTimeout:{default:5e3,background:7e3,deal:1e4,threshold:500}},parseResponse(e){if(e){this.checkoutNotifications.set(e.checkoutNotifications),this.affiliates.suppresses.set(e.paidLinks),e.paidLinkPatterns&&this.affiliates.suppresses.add((0,Go.UI)(e.paidLinkPatterns,(e=>new RegExp(e))));const t=e.betterChoices||e.priceMagic;t&&this.priceMagic.set((0,Go.CE)(t,"domains")),e.installed_extensions&&this.installedExtensions&&(this.installedExtensions.set(e.installed_extensions),this.installedExtensions.save()),this.serp=e.serp,this.iscb=e.iscb,this.domains=(0,Go.UI)(e.domains,(function(e){return e.track_events=!0,e})),e.promos&&!1===EBATES.settings.featureFlags.variation("customPromos",!1)&&this.promos.set(this.promos.parse({promos:[...e.promos,...e.campaigns]})),this.set((0,Go.CE)(e,"paidLinks","serp","domains","optout","promos","campaigns","betterChoices","priceMagic","checkoutNotifications","installed_extensions"))}},parse(e){this.parseResponse(e),this.trigger("sync-data",e)},initialize(){return this.promos=new Dc,this.customSerp=new Yc,this.productParsers=new zc,this.interstitials=new ks.Collection([{matchPattern:"\\.rakuten\\.com",reward:{ttn:{selector:"meta[name='trackingTicketNumber']",attribute:"content"},amount:{selector:"meta[name='rewardAmount']",attribute:"content"},display:{selector:"meta[name='rewardType']",attribute:"content"},range:{selector:"meta[name='rewardRange']",attribute:"content"},interstitialType:{selector:"meta[name='interstitialType']",attribute:"content"}}},{matchPattern:"\\.shopstyle(?:qa)?\\.com\\/\\w+\\/(?:loadRetailerProductPage|apiVisitRetailer)",defaults:{display:"Percentage",partner:"ShopStyle",sessionInterval:6048e5},reward:{ttn:{selector:"meta[name='trackingTicketNumber']",attribute:"content"},amount:{selector:"meta[name='rewardAmount']",attribute:"content"},display:{selector:"meta[name='rewardType']",attribute:"content"},range:{selector:"meta[name='rewardRange']",attribute:"content"}}},{matchPattern:"\\/\\/shopping\\.yahoo\\.com\\/rd\\?.*?providerId=rkt",defaults:{display:"Percentage",partner:"Yahoo"},reward:{ttn:{selector:'div[class^="Cashback__TrackingInfo-"]',rx:"#(\\d+)"},amount:{selector:'div[class^="Cashback__CashbackInfo-"]',rx:"(.*?)%"}}}]),this.featureFlags=new qc({url:"https://ffconf.ecbsn.com/featureflags",appId:"1af2274e-266f-4228-8765-b498deb0cc46",apiKey:"c0469223-7cfc-49bc-b1d3-378b71d44817",updateInterval:72e5},{browser:xr.browser.name,version:xr.extension.version}),this.featureFlags.on("change:dataDogLogging",(()=>this.userSettings.toggleLogging())),this.featureFlags.on("change:segmentLogging",(()=>this.userSettings.toggleLogging())),this.featureFlags.on("change:customPromos",(e=>e&&this.promos.fetch())),xr.browser.isChrome&&(this.installedExtensions=new jc),this.on({sync:function(){this.installedExtensions&&this.installedExtensions.check()},"change:activityUpdateInterval":function(e,t){EBATES.member.activity.setUpUpdate(t)}}),xr.extension.attachEvent("settings",((e,t)=>{let{data:r}=e;r&&this.userSettings.save(r),EBATES.merchants.ready().then((()=>{t(this.toJSON())}))})),xr.extension.attachEvent("getBrowserNotificationPermission",(e=>{EBATES.settings.browserNotification.requestPermission(e.data)})),xr.extension.attachEvent("getSerpProducts",(async(e,t)=>{let{data:r}=e;const n=(await new Wc(r.term).fetch()).filter((e=>e.eligibleForCashBack&&!e.merchant.reward.range)),i=n.reduce(((e,t)=>{let{categoryId:r}=t;return e[r]=e[r]?e[r]+1:1,e}),{}),o=(0,Go.Fp)(Object.entries(i),(e=>{let[,t]=e;return t}))[0];t(n.filter((e=>{let{categoryId:t}=e;return t===o})))})),Ls.prototype.initialize.apply(this,arguments)},load(){return Promise.all([this.promos.fetch(),this.blacklist.fetch(),this.userSettings.fetch()]).catch((e=>{}))},toJSON(){return(0,Go.l7)(this.userSettings.toJSON(),js.prototype.toJSON.apply(this,arguments),{checkoutNotifications:this.checkoutNotifications.toJSON(),serp:this.serp,blacklist:this.blacklist.toJSON(),priceMagic:this.priceMagic.toJSON(),promos:this.promos.toJSON(),user_id:EBATES.member.id,ebToken:EBATES.ebToken,domain:Or.domain,iscb:this.iscb,extensionDisabled:EBATES.member.isExtensionDisabled(),featureFlags:this.featureFlags.toJSON(),isOffline:0===EBATES.merchants.length,toolbarId:EBATES.toolbarId,isFillrEnabled:!EBATES.fillr.disabled})}}),tu=32,ru=32,nu={neutral:"Rakuten: Get Cash Back for Shopping",activated:"Rakuten: Cash Back Activated",available:"Rakuten: Activate to Earn Cash Back"};let iu=null;class ou{constructor(){pr(this,"load",void 0);const e=100,t=5,r=11,n=8.75,i=3.3;let o=new Map;const s=new Map;let a=t,c=0;const u=(xr.browser.isWebkit?new OffscreenCanvas(tu,ru):function(e,t){const r=document.createElement("canvas");return r.setAttribute("width",`${e}`),r.setAttribute("height",`${t}`),document.body.appendChild(r),r}(tu,ru)).getContext("2d");let l=!1;const h=e=>fetch(e).then((e=>{if(e.ok)return e.blob();throw Promise.reject(e.statusText)})).then((e=>new Promise((t=>{const r=new Image;r.onload=()=>t(r),r.setAttribute("src",URL.createObjectURL(e))})))),f=async e=>{try{return await(e=>{if(self.EBATES){const t=self.EBATES.settings.promos.get("icons");if(t&&t.get("active")&&t.get(e))return h(t.get(e))}return Promise.reject()})(e)}catch{return await h(e)}},d=()=>l?new Promise((e=>{self.setTimeout((()=>d().then(e)),100)})):(l=!0,Promise.all([f("/img/rakuten/icon-32.png"),f("/img/rakuten/icon-32-activated.png"),f("/img/rakuten/icon-32-notactivated.png")]).then((e=>{let[t,r,n]=e;o=new Map,s.set("neutral",t),s.set("activated",r),s.set("available",n)})).catch((()=>{self.setTimeout((()=>{d()}),6e4)})).then((()=>{l=!1}))),p=(e,t)=>{if(!u)return;let r=o.get(e);if(r||(r=new Map,o.set(e,r)),!r.get(t)){u.clearRect(0,0,tu,ru),"neutral"!==e&&(u.setLineDash([0]),"activated"===e?(u.lineWidth=2,u.strokeStyle="#4990e2",u.fillStyle="#FFF"):"available"===e&&(u.lineWidth=2,u.fillStyle="#ee5051",u.strokeStyle="#ee5051"),u.roundRect(16-t*i/2,16-t*i/2,t*i,t*i,{upperLeft:4,upperRight:4,lowerLeft:4,lowerRight:4},!0));try{u.drawImage(s.get(e),0,0,tu,ru),r.set(t,u.getImageData(0,0,tu,ru))}catch(e){}}return{imageData:{32:r.get(t)}}},m=i=>{let{type:o,count:s=0}=i;g(),au(nu[o]),iu=self.setInterval((()=>(e=>{let{type:i,count:o}=e;if(++a>=r&&(a=t,c++),o&&c>o&&a>=n)return c=0,g(i);su(p(i,a)),au(nu[i])})({type:o,count:s})),e)},g=e=>{iu&&(self.clearInterval(iu),iu=null),a=t,c=0,e&&(su(p(e,n)),au(nu[e]))};this.load=async()=>(await d(),g("neutral")),this.load(),self.setInterval((()=>this.load()),108e5);const v=e=>{if(!self.EBATES||self.EBATES.member.isExtensionDisabled())return void g("neutral");if(e.name===xr.browser.DOCUMENTCOMPLETE&&!e.active)return;const t=e.url||Js.active.url,r=e.tabId||Js.active.tabId;if(t&&t.startsWith("http")&&!Xo(t)){const e=self.EBATES.merchants.match(t,r);if(null!=e&&e.isEligibleForIconAnimation())if(e.session.get("activated"))e.session.get("notification")?m({type:"activated",count:2}):g("activated");else{self.EBATES.settings.affiliates.state(r).suppress?g("neutral"):m({type:"available",count:4})}else g("neutral")}else g("neutral")};xr.browser.attachEvent(xr.browser.DOCUMENTCOMPLETE,v),xr.browser.attachEvent(xr.browser.TABCHANGED,v),xr.extension.attachEvent("merchant.state:change",v)}}const su=e=>{if(e)try{gr().browserAction.setIcon(e)}catch(e){}},au=e=>{xr.ui.button.setTitle(e)};CanvasRenderingContext2D.prototype.roundRect=OffscreenCanvasRenderingContext2D.prototype.roundRect=function(e,t,r,n,i,o,s){const a={upperLeft:0,upperRight:0,lowerLeft:0,lowerRight:0};void 0===s&&(s=!0),"object"==typeof i&&Object.keys(i).forEach((e=>{Object.prototype.hasOwnProperty.call(a,e)&&(a[e]=i[e])})),this.beginPath(),this.moveTo(e+a.upperLeft,t),this.lineTo(e+r-a.upperRight,t),this.quadraticCurveTo(e+r,t,e+r,t+a.upperRight),this.lineTo(e+r,t+n-a.lowerRight),this.quadraticCurveTo(e+r,t+n,e+r-a.lowerRight,t+n),this.lineTo(e+a.lowerLeft,t+n),this.quadraticCurveTo(e,t+n,e,t+n-a.lowerLeft),this.lineTo(e,t+a.upperLeft),this.quadraticCurveTo(e,t,e+a.upperLeft,t),this.closePath(),s&&this.stroke(),o&&this.fill()};const cu=ks.Model.extend({idAttribute:"storeId"}),uu=(ks.Collection.extend({model:cu}),Ps.extend({dynamic:!1,timeout:864e5,model:cu,parse:e=>e&&e.campaigns&&e.campaigns[0]&&e.campaigns[0].stores}));let lu=ks.Collection.extend({model:cu}),hu=uu.extend({url:()=>`${Wo(Or.CAMPAIGNS)}?id=${fu}`});const fu=8987;let du=Ms.extend({model:cu,key:"recommended-myStores",initialize(){xr.extension.attachEvent("myStores",((e,t)=>{let{data:r}=e;const{limit:n,storeIds:i}=r;t(this.first(n,(e=>i.includes(e))).map((e=>{var t;let{id:r}=e;return null===(t=EBATES.merchants.get(r))||void 0===t?void 0:t.toJSON()})))}))},first(e,t){return t?this.chain().filter((e=>t(e.id))).first(e).value():Ms.prototype.first.call(this,e)}});class pu{constructor(){this.myStores=new du,this.myStores.fetch(),this.predefinedStores=new hu([{storeId:8333},{storeId:3993},{storeId:2946},{storeId:7206},{storeId:10634},{storeId:5246},{storeId:69},{storeId:4548},{storeId:3726},{storeId:8378},{storeId:4767},{storeId:4207},{storeId:9528},{storeId:3930},{storeId:3466}]),self.setInterval((()=>this.process()),108e5),xr.extension.attachEvent("recommendedStores",(async(e,t)=>{let{data:r}=e;const{limit:n,storeIds:i}=r;t((await this.sample(n,(e=>i.includes(e)))).map((e=>{const{storeId:t,refStoreId:r}=e.toJSON();let n=EBATES.merchants.get(t);return Object.assign(n.toJSON(),{refStoreId:r,refStore:r?EBATES.merchants.get(r).toJSON():null})})))}))}prepare(){return hs(Wo(Or.SIMILAR_STORES),{dataType:"json"}).then((e=>{EBATES.merchants.set(e.stores,{merge:!0,silent:!0,add:!1,remove:!1}),EBATES.member.get("accessLevel")&&this.process()})).catch((()=>{}))}checkRequired(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise(((t,r)=>{EBATES.member.get("accessLevel")?e?t():xr.extension.getItem("recommended_check",(e=>{!e||e+864e5<=Date.now()?t():r()})):r()}))}process(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.checkRequired(e).then((()=>Promise.all([EBATES.member.purchased.fetch({force:e}).catch((()=>{})),EBATES.member.visited.fetch({force:e}).catch((()=>{})),EBATES.member.favorites.fetch({force:e}).catch((()=>{}))]))).then((()=>{xr.extension.setItem("recommended_check",Date.now());let e=new lu;e.add(EBATES.member.visited.toJSON()),e.length<6&&e.add(EBATES.member.purchased.toJSON()),e.length<6&&e.add(EBATES.member.favorites.toJSON()),e.reset(e.filter((e=>{var t;let{id:r}=e;return null===(t=EBATES.merchants.get(r))||void 0===t?void 0:t.isActiveMerchant()}))),this.myStores.reset(e.models),this.myStores.save()})).catch((()=>{}))}getSimilarStores(){let e=new lu;return this.myStores.each((t=>{let r=EBATES.merchants.get(t.id);r&&e.add(r.get("similarStores"))})),e}sample(e,t){let r=new lu;return this.myStores.find((n=>{let i=EBATES.merchants.get(n.id);if(i){let e=(0,Go.TV)(i.get("similarStores")).find((e=>{var n;return e.rank<5&&!r.get(e.storeId)&&!this.myStores.get(e.storeId)&&(null===(n=EBATES.merchants.get(e.storeId))||void 0===n?void 0:n.isActiveMerchant())&&(!t||t(e.storeId))}));e&&(e.refStoreId=n.id,r.add(e))}if(r.length>=e)return!0})),r.length<e&&r.add(EBATES.merchants.filter((e=>e.get("reward")&&e.isActiveMerchant()&&e.get("reward").targetSet&&!this.myStores.get(e.id)&&(!t||t(e.id))))),r.length<e?this.predefinedStores.fetch().catch((()=>{})).then((()=>r.add(this.predefinedStores.shuffle().filter((e=>{let r=EBATES.merchants.get(e.id);return!this.myStores.get(e.id)&&r&&r.isActiveMerchant()&&(!t||t(e.id))}))))).then((()=>r.first(e))):Promise.resolve(r.first(e))}}let mu=ks.Model.extend({defaults:{badgeColor:"#EF5A4E",shown:!1}});const gu=Ms.extend({key:"overlays",model:mu,initialize(){this.fetch().then((()=>{let e=this.get("smart-cards");e&&e.set({shown:!0})})),this.on("add remove change:shown",(()=>{let e=this.where({shown:!1}).length;EBATES.badge.update("overlay",e)}))}});let vu=Ns.extend({idAttribute:"id",initialize(){if(this.get("expiration")){var e=Math.max(this.get("expiration")-Date.now(),1e3);e<2147483647&&(this.expirationTimeout=self.setInterval((()=>{this&&(self.clearInterval(this.expirationTimeout),this.clearLinkedMessage(this.id),this.collection&&this.collection.remove(this))}),e))}this.on({remove:function(){this.clearLinkedMessage(this.id),self.clearInterval(this.expirationTimeout)},error:function(e,t){[401,403].includes(t.status)&&EBATES.onTokenExpired()}})},clearLinkedMessage(e){let t=EBATES.member.messages.findWhere({type:"bonus",bonus_id:e});t&&EBATES.member.messages.remove(t)},activate(){return hs(Wo(Or.MEMBER_ACTIVATE_BONUS),{method:"POST",processData:!1,data:JSON.stringify({bonusId:this.id})}).then((()=>this.collection.fetch({force:!0}))).catch((()=>{}))}});const yu=Ds.extend({key:"bonuses",model:vu,DEFAULT_UPDATE_INTERVAL:864e5,blacklistedBonusIds:[667,668,669,670,771,718,719,720,721,722,772],blacklistedStoreIds:[],url:()=>Wo(Or.MEMBER_BONUSES),initialize(){return this.on({error:function(e,t){[401,403].includes(t.status)&&EBATES.onTokenExpired()}}),Ds.prototype.initialize.apply(this,arguments)},parse(e){return(0,Go.hX)(e.bonuses,(e=>!(0,Go.q9)(this.blacklistedBonusIds,e.id)&&0===(0,Go.jV)(e.storeIds,this.blacklistedStoreIds).length),this)}});let Eu=ks.Collection.extend({}),bu=ks.Model.extend({idAttribute:"offerId",activate(e){return new Promise(((t,r)=>{hs(as(Wo(Or.MEMBER_ISCB_LINKED),{offerId:this.id,cardId:e,store_id:this.get("store")?this.get("store").id:null}),{method:"POST"}).then((()=>{this.set({linkedCardIds:(0,Go.G0)(this.get("linkedCardIds"),[e]),cardIds:(0,Go.zu)(this.get("cardIds"),e)}),t()}),(()=>{r()}))}))},toJSON(){let e=e=>{let t=this.collection.cardDictionary.get(e);return t?t.toJSON():null},t=this.get("store")?this.get("store").id:null,r=t?EBATES.merchants.get(t):null;return(0,Go.l7)(ks.Model.prototype.toJSON.apply(this,arguments),{merchant:r?r.toJSON():null,cards:(0,Go.UI)(this.get("cardIds"),e),linkedCards:(0,Go.UI)(this.get("linkedCardIds"),e),description:this.get("description")?this.get("description").replace(/^Earn Cash Back/,""):""})}});const wu=Ps.extend({model:bu,cardDictionary:new Eu,url:()=>Wo(Or.MEMBER_ISCB),initialize(){xr.extension.attachEvent("ISC",(async(e,t)=>{t(await this.getOffers(e.data))})),xr.extension.attachEvent("ISC-activate",(async(e,t)=>{t(await this.activateOffer(e.data))}))},async getOffers(e){let{name:t}=e;if(EBATES.member.get("accessLevel")){await this.fetch();let e=this.find((e=>e.get("store").name.toLowerCase()===t.toLowerCase()));return null==e?void 0:e.toJSON()}return null},async activateOffer(e){let{offerId:t,cardId:r}=e;const n=this.get(t);if(n)try{return await n.activate(r),{offer:n.toJSON(),cardId:r}}catch(e){return{error:"Oops. We weren't able to enable this card for In-Store Cash Back. Please try again later",cardId:r}}},parse(e){return this.cardDictionary.reset(e.cardDictionary),(0,Go.hX)(e.offers,(e=>!e.dateLinked))}});const _u=JSON.parse('["amazon.com","zappos.com","woot.com","shopbop.com","fabric.com","eero.com","6pm.com","pillpack.com","eastdane.com","wholefoodsmarket.com","apple.com","walmart.com","bonobos.com","moosejaw.com","modcloth.com","shoes.com","yhd.com","samsclub.com","hayneedle.com","art.com","allposters.com","barenecessities.com","dell.com","homedepot.com","blinds.com","supplyworks.com","ebarnett.com","e-leran.com","e-hardwareexpress.com","uslock.com","trayco.com","copperfield.com","thecompanystore.com","wilmar.com","wayfair.com","allmodern.com","jossandmain.com","birchlane.com","dwellstudio.com","play.google.com","store.google.com","nest.com","staples.com","staplesadvantage.com","quill.com","qvc.com","zulily.com","hsn.com","frontgate.com","garnethill.com","ballarddesigns.com","grandinroad.com","bestbuy.com","grainger.com","imperialsupplies.com","target.com","dermstore.com","kroger.com","vitacost.com","kingsoopers.com","fredmeyer.com","bakersplus.com","citymarket.com","copps.com","dillons.com","food4less.com","foodsco.net","fredmeyerjewelers.com","frysfood.com","gerbes.com","harristeeter.com","jaycfoods.com","marianos.com","metromarket.net","owensmarket.com","pay-less.com","picknsave.com","ofc.com","ralphs.com","fanatics.com","fansedge.com","kitbag.com","fanaticsauthentic.com","sportsmemorabilia.com","fanaticsoutlet.com","ruelala.com","gilt.com","nflshop.com","mlbshop.com","shop.nhl.com","store.nba.com","wnbastore.nba.com","gleaguestore.nba.com","teamusashop.com","macys.com","bloomingdales.com","bluemercury.com","costco.com","costcophotocenter.com","costcobusinessdelivery.com","cdw.com","shop.nordstrom.com","hautelook.com","nordstromrack.com","trunkclub.com","chewy.com","petsmart.com","officedepot.com","kohls.com","lowes.com","renodepot.com","gap.com","hillcity.com","bananarepublic.gap.com","athleta.gap.com","oldnavy.gap.com","intermixonline.com","gapfactory.com","bananarepublicfactory.com","nike.com","converse.com","williams-sonoma.com","wshome.com","potterybarn.com","potterybarnkids.com","pbteen.com","westelm.com","markandgraham.com","rejuvenation.com","newegg.com","neweggbusiness.com","newegglogistics.com","victoriassecret.com","bathandbodyworks.com","lasenza.com","henribendel.com","thebay.com","lordandtaylor.com","homeoutfitters.com","saksfifthavenue.com","saksoff5th.com","rubbermaid.com","parkerpen.com","rotring.com","gracobaby.com","dymo.com","calphalon.com","yankeecandle.com","rawlings.com","coleman.com","jostens.com","marmot.com","lenoxtools.com","oster.com","nuk-usa.com","gocontigo.com","foodsaver.com","osterstyle.com","esteelauder.com","clinique.com","maccosmetics.com","origins.com","aveda.com","bobbibrowncosmetics.com","cremedelamer.com","jomalone.com","labseries.com","bumbleandbumble.com","smashbox.com","prescriptives.com","darphin.com","toofaced.com","walgreens.com","skinstore.com","boots.com","jcpenney.com","mscdirect.com","urbanoutfitters.com","anthropologie.com","freepeople.com","shopterrain.com","bhldn.com","nuuly.com","gamestop.com","thinkgeek.com","iherb.com","cabelas.com","basspro.com","anntaylor.com","dressbarn.com","maurices.com","loft.com","shopjustice.com","lanebryant.com","louandgrey.com","catherines.com","loftoutlet.com","amway.com","stitchfix.com","neimanmarcus.com","bergdorfgoodman.com","horchow.com","mytheresa.com","lastcall.com","sears.com","kmart.com","searspartsdirect.com","shopyourway.com","mygofer.com","searsauto.com","overstock.com","dickssportinggoods.com","golfgalaxy.com","fieldandstreamshop.com","thenorthface.com","vans.com","timberland.com","wrangler.com","lee.com","kipling-usa.com","nautica.com","reef.com","lucy.com","7forallmankind.com","splendid.com","altrarunning.com","eaglecreek.com","dickies.com","jansport.com","smartwool.com","icebreaker.com","eastpak.com","footlocker.com","ladyfootlocker.com","kidsfootlocker.com","eastbay.com","footaction.com","champssports.com","shop.ccs.com","six2.com","jcrew.com","factory.jcrew.com","madewell.com","store.hp.com","snapfish.com","ae.com","aerie.com","apmex.com","build.com","faucet.com","lightingdirect.com","livingdirect.com","faucetdirect.com","ventingdirect.com","handlesets.com","pullsdirect.com","ventingpipe.com","shutterfly.com","groovebook.com","restorationhardware.com","rhbabyandchild.com","abercrombie.com","abercrombiekids.com","hollisterco.com","shop.lululemon.com","justfab.com","fabkids.com","fabletics.com","shoedazzle.com","fingerhut.com","gettington.com","blair.com","llbean.com","bedbathandbeyond.com","buybuybaby.com","christmastreeshops.com","worldmarket.com","onekingslane.com","personalizationmall.com","harmondiscount.com","ofakind.com","decorist.com","chefcentral.com","calvinklein.com","speedousa.com","tommyhilfiger.com","izod.com","stylebureau.com","trueandco.com","vanheusen.com","landsend.com","groupon.com/goods","avon.com","sierratradingpost.com","tjmaxx.com","marshalls.com","belk.com","1800flowers.com","thepopcornfactory.com","cheryls.com","stockyards.com","fruitbouquets.com","harryanddavid.com","wolfermans.com","1800baskets.com","personalizationuniverse.com","goodsey.com","shariesberries.com","shop.com","global.shop.com","motivescosmetics.com","isotonix.com","nutrametrix.com","tlsslim.com","lumieredevie.com","getlayered.com","talbots.com","ulta.com","bose.com","freshdirect.com","rei.com","meijer.com","shop.safeway.com","plated.com","sweetwater.com","ralphlauren.com","clubmonaco.com","bn.com","backcountry.com","competitivecyclist.com","steepandcheap.com","loblaws.ca","ftd.com","proflowers.com","sharisberries.com","personalcreations.com","proplants.com","gifts.com","kay.com","jamesallen.com","jared.com","zales.com","gordonsjewelers.com","pagoda.com","peoplesjewellers.com","kayoutlet.com","sterlingjewelers.com","bkstr.com","jmbullion.com","smiledirectclub.com","express.com","expressfactoryoutlet.com","shop.advanceautoparts.com","carters.com","oshkosh.com","skiphop.com","fullbeauty.com","swimsuitsforall.com","womanwithin.com","roamans.com","jessicalondon.com","kingsize.com","ellos.us","brylanehome.com","underarmour.com","shopdisney.com","orientaltrading.com","funexpress.com","mindware.com","smilemakers.com","gemvara.com","jewelry.com","honora.com","silpada.com","1800contacts.com","liingoeyewear.com","fashionnova.com","kyliecosmetics.com","chicos.com","whitehouseblackmarket.com","soma.com","forever21.com","rileyrose.com","microsoft.com","pier1.com","midwayusa.com","revolve.com","fwrd.com","lulus.com","childrensplace.com","musiciansfriend.com","guitarcenter.com","music123.com","wwbw.com","musicarts.com","stamps.com","toryburch.com","torysport.com","customink.com","cityclub.com.mx","soriana.com","petco.com","drsfostersmith.com","pupbox.com","bluenile.com","amerimark.com","lakeside.com","ltdcommodities.com","carolwrightgifts.com","drleonards.com","timeformecatalog.com","feelgoodstore.com","beautyboutique.com","harrietcarter.com","freshfinds.com","scholastic.com","weightwatchers.com","purchasingpower.com","lampsplus.com","lampsplusopenbox.com","nutrisystem.com","northerntool.com","kotulas.com","sportsmansguide.com","tgw.com","cvs.com","keurig.com","wearfigs.com","jomashop.com","onepeloton.com","blueapron.com","honest.com","summitracing.com","pepboys.com","opticsplanet.com","tactical-store.com","dvor.com","eyewearplanet.com","rangefinders.com","guncases.com","opticsforyou.com","labplanet.com","microscopes.com","radarguns.com","shoptics.com","night-optics.com","discountmassagechairs.com","bushnelloptics.com","autozone.com","autoanything.com","mouser.com","warbyparker.com","vizio.com","shopmyexchange.com","liverpool.com.mx","ipsy.com","famousfootwear.com","naturalizer.com","viaspiga.com","drschollsshoes.com","allenedmonds.com","https://www.vionicshoes.com/","ediblearrangements.com","eddiebauer.com","nectarsleep.com","wovenly.com","levelsleep.com","dreamcloudsleep.com","awarasleep.com","bundleliving.com","tirerack.com","publix.com","brownells.com","thrivemarket.com","uline.com","columbia.com","mountainhardwear.com","sorel.com","prana.com","canadagoose.com","baffin.com","bonton.com","carsons.com","elder-beerman.com","herbergers.com","younkers.com","bergners.com","bostonstore.com","casper.com","vminnovations.com","1sale.com","menswearhouse.com","josbank.com","builddirect.com","keh.com","jegs.com","dillards.com","fender.com","harrys.com","shopflamingo.com","dsw.com","fabfitfun.com","summerandrose.com","chicandtonic.com","ish.co","omahasteaks.com","swisscolony.com","wards.com","homevisions.com","seventhavenue.com","midnightvelvet.com","ginnys.com","countrydoor.com","monroeandmain.com","tenderfilet.com","ashro.com","tiffany.com","brooksbrothers.com","duluthtrading.com","weber.com","searsoutlet.com","ugg.com","teva.com","sanuk.com","tsubo.com","hokaoneone.com","mozoshoes.com","patagonia.com","sunbasket.com","barneys.com","barneyswarehouse.com","jpcycles.com","motorcyclesuperstore.com","vipoutlet.com","teespring.com","palmettostatearmory.com","lootcrate.com","nyxcosmetics.com","journeys.com","johnstonmurphy.com","dockersshoes.com","trask.com","littleburgundyshoes.com","ghbass.com","yeti.com","levi.com","dockers.com","beachbody.com","sonos.com","shop.goop.com","oreillyauto.com","saatvamattress.com","loomandleaf.com","zenhaven.com","dollartree.com","nyandcompany.com","adorama.com","zazzle.com","aircompressorsdirect.com","pressurewashersdirect.com","electricgeneratorsdirect.com","snowblowersdirect.com","mowersdirect.com","sumppumpsdirect.com","waterpumpsdirect.com","chainsawsdirect.com","logsplittersdirect.com","ecomfort.com","chippersdirect.com","leafblowersdirect.com","tillersdirect.com","stringtrimmersdirect.com","cymax.com","leesa.com","jjill.com","18petmeds.com","tempurpedic.com","michaels.com","consumercrafts.com","michaelskids.com","michaelsweddings.com","aaronbrothers.com","darice.com","newbalance.com","shophq.com","gardeners.com","menards.com","onpurple.com","rothys.com","karmaloop.com","plndr.com","zennioptical.com","rockauto.com","autopartswarehouse.com","jcwhitney.com","stylintrucks.com","americangirl.com/shop","shop.mattel.com","barbie.mattel.com","fisher-price.mattel.com","hotwheels.mattel.com","shop.xerox.com","barkbox.com","barkshop.com","roomandboard.com","harborfreight.com","theshoppingchannel.com","coach.com","china.coach.com","katespade.com","jackspade.com","stuartweitzman.com","fast-growing-trees.com","fossil.com","fye.com","secondspin.com","wherehouse.com","ecomom.com","everycasa.com","greencupboards.com","coybeauty.com","vaultelectronics.com","vaultelectronics.com","shoplet.com","plantronics.com","farmandfleet.com","appliancesconnection.com","focuscamera.com","robotshop.com","renttherunway.com","ajmadison.com","crocs.com","hanes.com","hanesink.com","champion.com","onehanesplace.com","justmysize.com","alliedelec.com","knifecenter.com","shoemall.com","stoneberry.com","masseys.com","masoneasypay.com","kjordan.com","marylandsquare.com","auditionsshoes.com","bamason.com","figis.com","birchlandmarket.com","puritan.com","hollandandbarrett.com","fullcompass.com","monoprice.com","hhgregg.com","crutchfield.com","campingworld.com","the-house.com","catalog.usmint.gov","pharmapacks.com","michaelkors.com","jimmychoo.com","versace.com","overnightprints.com","birchbox.com","surlatable.com","mileskimball.com","wdrake.com","aswechange.com","nativeremedies.com","exposuresonline.com","easycomforts.com","ultimateears.com","jaybirdsport.com","gamefly.com","benchmade.com","revzilla.com","batesfootwear.com","catfootwear.com","chacos.com","harley-davidsonfootwear.com","hushpuppies.com","hytest.com","merrell.com","wolverine.com","keds.com","saucony.com","sperry.com","striderite.com","sperry.com","striderite.com","aeropostale.com","gojane.com","jtv.com","colehaan.com","monkeysports.com","hockeymonkey.com","goaliemonkey.com","lacrossemonkey.com","baseballmonkey.com","monkeyteamsports.com","cutleryandmore.com","flooranddecor.com","mattressfirm.com","1800mattress.com","mattress.com","sleepys.com","sleeptrain.com","shop.concept2.com","cpooutlets.com","cpotools.com","cpopowertools.com","cpojettools.com","cpomilwaukee.com","tylertool.com","reconditionedtools.com","shop.guess.com","guessbymarciano.guess.com","guessfactory.com","gbyguess.com","thewatchbox.com","govbergwatches.com","toms.com","ereplacementparts.com","orvis.com","vitaminshoppe.com","balsamhill.com","everlane.com","harley-davidson.com","ninewest.com","easyspirit.com","jny.com","brilliantearth.com","ssense.com","zumiez.com","store.gearpatrol.com","ashleystewart.com","factoryoutletstore.com","boxed.com","grizzly.com","mybobs.com","avery.com","shop.hodinkee.com","awaytravel.com","hobbylobby.com","beachcamera.com","buydig.com","signaturehardware.com","beyondtherack.com","helixsleep.com","jetpens.com","poppin.com","untuckit.com","antonline.com","nfm.com","performancebike.com","nashbar.com","amainhobbies.com","gnc.com","luckyvitamin.com","discountsupplements.com","sdbullion.com","americanmuscle.com","extremeterrain.com","unbeatablesale.com","boncui.com","technooutlet.com","petshopusa.com","comfortmarket.com","bigbadtoystore.com","charbroil.com","boats.net","partzilla.com","michaelscycleworks.com","firedog.com","schooloutfitters.com","mgemi.com","thirdlove.com","potpourrigift.com","catalogfavorites.com","northstyle.com","expressionscatalog.com","stitchery.com","whateverworks.com","countrystorecatalog.com","naturesjewelry.com","cuddledown.com","pyramidcollection.com","backinthesaddle.com","youngexplorers.com","inthecompanyofdogs.com","magellans.com","serengeticatalog.com","partycity.com","traegergrills.com","monrovia.com","alexandani.com","indochino.com","cutco.com","zola.com","microcenter.com","bissell.com","ashford.com","footsmart.com","thewalkingcompany.com","towerhobbies.com","classicfirearms.com","birdies.com","realtruck.com","ross-simons.com","bitebeauty.com","hickoryfarms.com","academy.com","thriftbooks.com","adoreme.com","jhilburn.com","store.schoolspecialty.com","smartpakequine.com","americanstandard-us.com","swimoutlet.com","yogaoutlet.com","bhphotovideo.com","cheaperthandirt.com","wine.com","sdwheel.com","shindigz.com","spiritline.com","stumpsparty.com","bizchair.com","fitbit.com","trinaturk.com","ghostbed.com","naturessleep.com","campussleep.com","autonomous.ai","bjs.com","drjays.com","ritani.com","motosport.com","allbirds.com","discoverystore.com","joann.com","coolstuffinc.com","touchofmodern.com","selectblinds.com","waterfilters.net","fridgefilters.com","repairclinic.com","shopperschoice.com","bbqguys.com","ultimatepatio.com","gaslogguys.com","gruntstyle.com","angara.com","baublebar.com","glossier.com","grove.co","yamibuy.com\xa0","thegreatcourses.com","americanmusical.com","traxxas.com","bootbarn.com","sheplers.com","accessories4less.com","naturebox.com","themenlohouse.com","https://www.themenlohouse.com/club","https://shopnewrepublic.com/","https://alesgrey.com/","https://clubfantasy.us/","https://midnightstudios.live/","blackdiamondequipment.com","livingspaces.com","sleepnumber.com","chapters.indigo.ca","thereformation.com","primaryarms.com","hibbett.com","ylighting.com","yliving.com","ruralking.com","bollandbranch.com","ecampus.com","aquasana.com","bombas.com","makegoodfood.ca","yumm.ca","supremenewyork.com","tennis-warehouse.com","artscyclery.com","tacklewarehouse.com","runningwarehouse.com","skatewarehouse.com","inlinewarehouse.com","icewarehouse.com","derbywarehouse.com","racquetballwarehouse.com","ridingwarehouse.com","totalpickleball.com","sunfrog.com","roomstogo.com","roomstogokids.com","lifeway.com","lifewayworship.com","speedwaymotors.com","meundies.com","brooklinen.com","4inkjets.com","ldproducts.com","inkcartridges.com","mmlafleur.com","trekbikes.com","klipsch.com","winelibrary.com","kirklands.com","shop.cricut.com","furniturerow.com","hallmark.com","hottopic.com","torrid.com","pcliquidations.com","vapordna.com","samys.com","mvmtwatches.com","movado.com","reitmans.com","additionelle.com","penningtons.com","rw-co.com","thymematernity.com","roadrunnersports.com","replacements.com","amiclubwear.com","painfulpleasures.com","cabinetparts.com","rockler.com","withclarity.com","leftlanesports.com","theclymb.com","seshday.com","gearup.active.com","containerstore.com","lulzbot.com","morphe.com","benq.us","halloweencostumes.com","fun.com","flappercostumes.com","starwarscostumes.com","wizardofozcostumes.com","buycostumes.com","costumeexpress.com","birthdayexpress.com","vintageking.com","rue21.com","bodycandy.com","crucial.com","bulkapothecary.com","buckle.com","tactics.com","esalerugs.com","petflow.com","evo.com","carid.com","motorcycleid.com","powersportsid.com","truckid.com","boatid.com","camperid.com","recreationid.com","toolsid.com","elementvape.com","skis.com","austinkayak.com","snowboards.com","inlineskates.com","campgear.com","rackboys.com","bostonproper.com","teamexpress.com","baseballexpress.com","softball.com","footballamerica.com","basketballexpress.com","lacrosseexpress.com","softballfans.com","hardballfans.com","uplandgifts.com","hermanmiller.com","dwr.com","marineengine.com","brentwoodhome.com","1000bulbs.com","vermontcountrystore.com","countrycurtains.com","dooney.com","hy-vee.com","cafepress.com","brookstone.com","shapermint.com","tomford.com","clarksusa.com","needsupply.com","aclens.com","discountcontactlenses.com","discountglasses.com","frameboutique.com","zzounds.com","tractorsupply.com","destinationxl.com","dickblick.com","cduniverse.com","klwines.com","chefknivestogo.com","kuiu.com","la-z-boy.com","joybird.com","oxo.com","alibris.com","library.alibris.com","forhims.com","big5sportinggoods.com","explodingkittens.com","bebe.com","bebeoutlets.com","discounttire.com","americastire.com","greenhousemegastore.com","dtlr.com","westmarine.com","thecubicle.us","luckygunner.com","fromyouflowers.com","sendflowers.com","hbloom.com","brookandyork.com","kerrits.com","skinit.com","lesliespool.com","boscovs.com","leevalley.com","collectionsetc.com","us-appliance.com","hannaandersson.com","doitbest.com","lifetime.com","myvaporstore.com","verabradley.com","shop.gopro.com","gopro.com","efaucets.com","paulaschoice.com","destinationmaternity.com","motherhood.com","apeainthepod.com","davidsbridal.com","kennethcole.com","pomellato.com","mcq.com","steinmart.com","databazaar.com","artvan.com","dog.com","horse.com","ferret.com","bird.com","petsupplies.com","statelinetack.com","kvsupply.com","c21stores.com","skymall.com","airsoftgi.com","rcwilley.com","sundancecatalog.com","jeffreestarcosmetics.com","frys.com","papyrusonline.com","shop.americangreetings.com","bluemountain.com","cardstore.com","justwink.com","goldsilver.com","lancasterarchery.com","raymourflanigan.com","billabong.com","quiksilver.com","roxy.com","rcva.com","elementbrand.com","vonzipper.com","dcshoes.com","xcelwetsuits.com","honoluasurf.com","turntablelab.com","jockey.com","propertyroom.com","kraftmusic.com","domyown.com","shoprite.com","thefreshgrocer.com","drinkhint.com","yandy.com","joesnewbalanceoutlet.com","bladehq.com","harvestright.com","store.snapon.com","foryourlegs.com","socksaddict.com","bibandtucker.com","docortho.com","diabeticsockshop.com","piketopeak.com","shoecarnival.com","aritzia.com","beautylish.com","creekstonefarms.com","betterworldbooks.com","thingsremembered.com","article.com","blackriflecoffee.com","casetify.com","knoll.com","officesupply.com","soccer.com","worldsoccershop.com","lacrosse.com","worldrugbyshop.com","tiendafutbolmundial.com","onecall.com","huppins.com","discountdance.com","herroom.com","lunacycle.com","smokecartel.com","longislandwatch.com","swansonvitamins.com","sgammo.com","scentsy.com","otterbox.com","samash.com","nordictrack.com","smoothfitness.com","proform.com","altrarunning.com","shinesty.com","cavenders.com","napaonline.com","christopherandbanks.com","mypillow.com","turtlebeach.com","superbrightleds.com","claroshop.com","minted.com","directvapor.com","reddressboutique.com","buyautoparts.com","carpartswarehouse.com","turbochargerpros.com","discountacparts.com","carsteering.com","titlenine.com","stevemadden.com","boxycharm.com","pacsun.com","tacticalgear.com","workboots.com","store.printm3d.com","troybilt.com","mtdparts.com","pcrichard.com","vermontteddybear.com","pajamagram.com","calyxflowers.com","pajamajeans.com","eforcity.com","beallsflorida.com","burkesoutlet.com","bunulu.com","softchoice.com","rockbottomgolf.com","biglots.com","claires.com","icing.com","shethinx.com","matterhackers.com","smartsign.com","myparkingsign.com","mysafetysign.com","myassettag.com","myparkingpermit.com","discountramps.com","aedsuperstore.com","jimmyjazz.com","avenue.com","zgallerie.com","whiteflowerfarm.com","hammacher.com","ethanallen.com","agacistore.com","americansignaturefurniture.com","us-mattress.com","furniturecrate.com","partysuppliesdelivered.com","daybeddeals.com","carolinarustica.com","bigceramicstore.com","seriouspuzzles.com","serioussips.com","seriouschai.com","killermotorsports.com","americanapparel.com","corelle.com","pyrexware.com","corningware.com","shopworldkitchen.com","marti.mx","relaxtheback.com","shop.theknot.com","weddingshop.theknot.com","https://www.weddingwireshop.com/","sleepcountry.ca","ca.endy.com","dormezvous.com","roots.com","agrisupply.com","brandsmartusa.com","nationalbusinessfurniture.com","officefurniture.com","officechairs.com","dallasmidwest.com","appliancepartspros.com","pureformulas.com","tillys.com","paulfredrick.com","windsorstore.com","pgshop.com","theartofshaving.com","bassettfurniture.com","autoplicity.com","nomnomnow.com","sallybeauty.com","eileenfisher.com","globalgolf.com","globalgolf.com","taylormadegolfpreowned.com","golfshoesonly.com","nuts.com","lehmans.com","furla.com","thehardwarehut.com","govx.com","abt.com","lafayette148ny.com","colemanfurniture.com","pamperedchef.com","jacksonandperkins.com","waysidegardens.com","parkseed.com","rkguns.com","popsockets.com","lorextechnology.com","yaleappliance.com","nixon.com","mancrates.com","carhartt.com","sofamania.com","sonicelectronix.com","rebelcircus.com","jaanuu.com","rugs-direct.com","directron.com","threadless.com","bucketfeet.com","skechers.com","sportique.com","gaiam.com","spri.com","brooksrunning.com","42photo.com","diesel.com","luckybrand.com","1800gunsandammo.com","1800gear.com","gritrholsters.com","rununited.com","saxxunderwear.com","doversaddlery.com","esalon.com","hubblecontacts.com","sheetmusicplus.com","choralsheetmusic.com","rebeccaminkoff.com","musicgoround.com","shop.surfboard.com","thredup.com","fathead.com","icetrends.com","nautilus.com","bowflex.com","octanefitness.com","schwinnfitness.com","modmov.com","lumberliquidators.com","discountfilters.com","dehumidifierexperts.com","iaqsource.com","prothermostats.com","woodlanddirect.com","getfpv.com","skullcandy.com","lovelyskin.com","gardensalive.com","gurneys.com","springhillnursery.com","brecks.com","bouqs.com","jjbuckley.com","partselect.com","schiit.com","bikebandit.com","neutrogena.com","dynamiteclothing.com","garageclothing.com","interiordefine.com","jewlr.com","provantage.com","ultrasabers.com","rackroomshoes.com","entertainmentearth.com","partstree.com","fergusonshowrooms.com","lovesac.com","parts-express.com","paintball-online.com","ourdesigns.com","prankplace.com","bigmouthinc.com","myotcstore.com","lapolicegear.com","elektra.com.mx","betabrand.com","ecstuning.com","catofashions.com","parachutehome.com","rag-bone.com","badcock.com","sharkrobot.com","dia.com","burpee.com","onlinestores.com","englishteastore.com","united-states-flag.com","discountsafetygear.com","constructiongear.com","toysplash.com","safetygirl.com","lightup.com","mygoods.com","azazie.com","softsurroundings.com","wholelattelove.com","traetelo.com","511tactical.com","brambleberry.com","chicagomusicexchange.com","kendrascott.com","allparts.com","bcbg.com","herveleger.com","bcbgeneration.com","dexclusive.com","discountbodyparts.com","stacksocial.com","kitchenaid.com","mantelsdirect.com","electricheatsource.com","electricfireplacesdirect.com","reggioregister.com","americantinceilings.com","decorplanet.com","therealreal.com","turners.com","keenfootwear.com","hasbropulse.com","eshakti.com","propercloth.com","crownandcaliber.com","mellanni.com","bodyartforms.com","cellularoutfitter.com","mobovida.com","supply.com","elderly.com","hipsandcurves.com","payless.com","levenger.com","uniformadvantage.com","tanga.com","bellechic.com","lolshirts.com","peruvianconnection.com","tooltopia.com","shop.nationalgeographic.com","tortugabackpacks.com","outdoorvoices.com","rainbowshops.com","stewmac.com","belkin.com","bisonoffice.com","sportbiketrackgear.com","sportsmans.com","aimsurplus.com","austinbazaar.com","luxedecor.com","beautyencounter.com","cmp.callawaygolf.com","callawaygolfpreowned.com","odysseygolf.com","callawayapparel.com","diamondcandles.com","christianbook.com","tirebuyer.com","shoeshowmega.com","superbiiz.com","well.ca","londondrugs.com","onkyousa.com","bobswatches.com","buyonlinenow.com","autoaccessoriesgarage.com","blissworld.com","origamiowl.com","serta.com","tomorrowsleep.com","lexmark.com","scheels.com","jameco.com","spanx.com","kaiusaltd.com","fullsource.com","stage.com","francescas.com","textbooks.com","uscargocontrol.com","spacesavers.com","fastenersplus.com","bellybling.net","justplasticboxes.com","justplasticboxes.com","thetileapp.com","jerrysartarama.com","blackforestdecor.com","lonestarwesterndecor.com","aspenlighting.com","alltapestry.com","camotrading.com","bellacoastaldecor.com","targetsportsusa.com","kultofathena.com","faucetdepot.com","rickis.com","solesociety.com","webeyecare.com","radpowerbikes.com","saddlebackleather.com","vapes.com","budsgunshop.com","teacollection.com","dvf.com","spencersonline.com","spirithalloween.com","signs.com","jamesavery.com","coolibar.com","aliengearholsters.com","delmarfans.com","lollywollydoodle.com","kiwico.com","onlinelabels.com","bulbamerica.com","rugstudio.com","bellacor.com","acwholesalers.com","goductless.com","fatbraintoys.com","soundstrue.com","shopandroid.com","wineenthusiast.com","wineexpress.com","burton.com","merchbar.com","tomtop.com","plushbeds.com","smarthome.com","bouclair.com","northshorecare.com","usbedbugs.com","store.irobot.com","kingarthurflour.com","perryellis.com","originalpenguin.com","callawayapparel.com","cubavera.com","redwingheritage.com","irishsetterboots.com","vasque.com","dungarees.com","tacticalwatch.com","campsaver.com","elitefts.com","sharperimage.com","cigarsinternational.com","swap.com","natchezss.com","evacuumstore.com","palmbeachjewelry.com","rushordertees.com","fragrantjewels.com","healingcrystals.com","joyus.com","brantano.com.mx","shopjimmy.com","vapewild.com","americanfloormats.com","store.cyberweld.com","qualitylogoproducts.com","promgirl.com","simplydresses.com","gourmetgiftbaskets.com","cheesecake.com","kingofpop.com","strawberries.com","tombihn.com","tackledirect.com","islandbeachgear.com","tigergps.com","turtlemarine.com","diamondnexus.com","foreverartisans.com","1215diamonds.com","juul.com","jackssmallengines.com","snowblowersatjacks.com","mowersatjacks.com","factoryauthorizedoutlet.com","swell.com","woodcraft.com","acmetools.com","pgatoursuperstore.com","helzberg.com","bhcosmetics.com","compacc.com","cheapcycleparts.com","pssl.com","andersenwindows.com","opgi.com","us.humankinetics.com","plantdelights.com","linentablecloth.com","healthydirections.com","drsinatra.com","drwhitaker.com","drdavidwilliams.com","jefferspet.com","letote.com","combatgent.com","printingforless.com","ilmakiage.com","saq.com","kellycodetectors.com","blucoil.com","fishusa.com","treehut.co","shoesforcrews.com","farmgirlflowers.com","windupwatchshop.com","timbuk2.com","weathertech.com","petcomfort.com","freshwatersystems.com","cabinets.com","bargainstation.com","priceplunge.com","nothingbutsavings.com","sylvane.com","brandless.com","touchofclass.com","hollar.com","stevespanglerscience.com","untilgone.com","tipsyelves.com","leatherman.com","prepsportswear.com","dailylook.com","johnsonfitness.com","4wd.com","timex.com","bhfo.com","bungiestore.com","envelopes.com","folders.com","bags.com","luxpaper.com","bigname.com","winc.com","thefryecompany.com","textbookrush.com","13deals.com","thatdailydeal.com","powells.com","closet.gwynniebee.com","brighton.com","theshadestore.com","vitamix.com","arhaus.com","uncommongoods.com","mavistire.com","golfballs.com","tobi.com","cookieskids.com","shopladder.com","burlington.com","saberforge.com","saberpipes.com","uspoloassn.com","fosmon.com","fosmon.com","fospower.com","venaproducts.com","everythingkitchens.com","rugsusa.com","tennisexpress.com","bespokepost.com","pricechopper.com","primestyle.com","motionrc.com","bulkreefsupply.com","ssactivewear.com","heirloomroses.com","bullionexchanges.com","lechateau.com","osprey.com","6dollarshirts.com","qalo.com","plumbingsupply.com","ties.com","scarves.com","alynn.com","wantable.com","simplehuman.com","brandymelvilleusa.com","thertastore.com","willowlanecabinetry.com","heartratemonitorsusa.com","pedometersusa.com","christmascentral.com","poolcentral.com","northlightseasonal.com","btosports.com","adiamor.com","truereligion.com","purehockey.com","goalie.purehockey.com","comlax.purehockey.com","acehardware.com","jackthreads.com","rockport.com","constructiveplaythings.com","cptoys.com","ustoy.com","ustoymagic.com","ustoykidfun.com","jgsales.com","aldoshoes.com","globoshoes.com","sparkfun.com","vintagetub.com","hearthsong.com","plowhearth.com","magiccabin.com","windandweather.com","reuseit.com","inova.com.mx","uscutter.com","blindschalet.com","thursdayboots.com","buggiesunlimited.com","goedekers.com","scrubsandbeyond.com","artifactuprising.com","efavormart.com","elfcosmetics.com","blacklapel.com","jackrabbit.com","dollargeneral.com","catbirdnyc.com","ourpamperedhome.com","loveculture.com","imperfectfoods.com","bulbs.com","dancewearsolutions.com","framebridge.com","pinklily.com","stance.com","coldwatercreek.com","workingperson.com","coffeeforless.com","allheart.com","andrewchristian.com","igigi.com","toywiz.com","caskers.com","alligatorperformance.com","teleflora.com","lovebilly.com","finnjewelry.com","firemountaingems.com","varidesk.com","bulletproof.com","danner.com","silhouetteamerica.com","twistonline.com","roveconcepts.com","gunmagwarehouse.com","innovasport.com","nutricity.com","shopmissa.com","1aauto.com","chubbiesshorts.com","digitalstorm.com","toolup.com","betterbraces.com","universalcycles.com","districtlines.com","athleticgreens.com","food52.com","rocksbox.com","limogesjewelry.com","personalizedplanet.com","tvstoybox.com","shop.wwe.com","burrow.com","charlotterusse.com","batteriesplus.com","leisurepro.com","beprepared.com","mackspw.com","screenprinting.com","albeebaby.com","tecovas.com","galls.com","everythingfurniture.com","conns.com","aicpastore.com","yarnspirations.com","filson.com","gifttree.com","tigerfitness.com","ableammo.com","gemplers.com","whiteflash.com","cardsdirect.com"]'),Au=[36e5,864e5,2592e5];class Tu extends Ta{get url(){const e=new Date(Date.now()-this.PERIOD_FROM).toISOString(),t=as(Wo(Or.ABANDONED_PRODUCTS),{from_timestamp:e,get_full_product:!0,remove_qualifications:!0});return this.latestApiCall=t,t}constructor(){var e;super(),e=this,this._id="abandoned-products",this.reminder=new Iu,this.UPDATE_INTERVAL=18e5,this.PERIOD_TO=108e5,this.PERIOD_FROM=12096e5,this.mutedProducts={},this.latestApiCall=null,this.products={filtered:[],suppressed:[]},ba.get(`${this._id}-muted`).then((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.mutedProducts=t,e.cleanUpMutedProducts()})),this.on("sync",(()=>{var e,t;EBATES.settings.featureFlags.variation("myCartTab")&&!EBATES.settings.userSettings.get("myCartTab")&&null!==(e=this.cache)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.length&&EBATES.settings.userSettings.save({myCartTab:!0})})),xr.extension.attachEvent("hasAbandonedProducts",(async(e,t)=>{const r=await this.load();t((null==r?void 0:r.length)>0)})),xr.extension.attachEvent("getAllAbandonedProducts",(async(e,t)=>{try{const e=await this.load();this.updateMerchants(e),t(this.sortByTimestamp(e))}catch{t([])}})),xr.extension.attachEvent("getAbandonedProducts",(async(e,t)=>{let{data:r}=e;EBATES.settings.featureFlags.variation("cartAbandonment")&&EBATES.member.id?(await this.getAbandonedProducts(r),t({products:this.products.filtered,suppressedProducts:this.products.suppressed})):t({})})),xr.extension.attachEvent("muteAbandonedProducts",(e=>{let{data:t}=e;const{products:r,domainName:n,suppressionReason:i,isPermanent:o,suppressionType:s}=t;r.forEach((e=>{var t;if(this.mutedProducts[e.id]||(this.mutedProducts[e.id]={}),this.mutedProducts[e.id].isPermanent)return;if(o)return void(this.mutedProducts[e.id]={isPermanent:!0,suppressionReason:i,suppressionSourceDomain:n,suppressionType:s});const r=Math.min((null===(t=this.mutedProducts[e.id])||void 0===t?void 0:t.showCounter)+1||1,3);this.mutedProducts[e.id]={showCounter:r,suppressionReason:i,suppressionType:s,showTimestamp:Date.now()+Au[r-1],timestamp:e.abandonedTimestamp}})),this.saveMutedProducts()}))}async getAbandonedProducts(e){let{categoryIds:t,url:r}=e,n=[];try{n=await this.load()}catch(e){}if(n&&Array.isArray(n)){const e=(0,Go.jj)(n.map((e=>e.merchant.storeId))),t=parseFloat(n.reduce(((e,t)=>e+t.salePrice),0)),i=(0,Go.jj)(n,(e=>e.previous_ca_tracking_ticket)).length,o=e.length;rs.track("Request Api",{entity_name:"Cart Abandonment Notification",domain:r,product_count:n.length,abandoned_cart_count:i,store_count:o,total_gmv:t,api_call:this.latestApiCall}),await EBATES.merchants.rates.default.fetch(e)}this.products={filtered:n,suppressed:[]},this.filterByMerchantOffersCashBack(),this.filterByPeriod(),this.filterByCategory(t),this.filterMutedProducts(),this.sortByTimestamp(this.products.filtered),this.cleanUpMutedProducts()}filterByMerchantOffersCashBack(){this.products.filtered=this.products.filtered.filter((e=>{let{merchant:t}=e;return t.offers_cb}))}filterByPeriod(){const e=Date.now()-this.PERIOD_FROM,t=Date.now()-this.PERIOD_TO;this.products.filtered=this.products.filtered.filter((r=>{let{abandonedTimestamp:n}=r;return e<n&&n<t}))}filterByCategory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.products.filtered=this.products.filtered.filter((t=>!!t.category_ids.find((t=>e.find((e=>e==t))))||(this.products.suppressed.push({...t,isSuppressed:!0,suppressionReason:"Item not in the same category",suppressionType:"Display logic"}),!1)))}sortByTimestamp(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).sort(((e,t)=>t.abandonedTimestamp-e.abandonedTimestamp))}filterMutedProducts(){this.products.filtered=this.products.filtered.filter((e=>{const t=this.mutedProducts[e.id];return null!=t&&t.isPermanent?(this.products.suppressed.push({...e,isSuppressed:!0,suppressionReason:t.suppressionReason,suppressionSourceDomain:t.suppressionSourceDomain,suppressionType:t.suppressionType}),!1):null==t||!t.showTimestamp||(t.showTimestamp>Date.now()?(this.products.suppressed.push({...e,isSuppressed:!0,suppressionType:t.suppressionType,suppressionReason:t.suppressionReason}),!1):(delete t.showTimestamp,!0))}))}cleanUpMutedProducts(){let e=!1;for(let t in this.mutedProducts)this.mutedProducts[t].timestamp<Date.now()-this.PERIOD_FROM&&(delete this.mutedProducts[t],e=!0);e&&this.saveMutedProducts()}updateMerchants(e){e.forEach((e=>{var t;const r=null===(t=EBATES.merchants.get(Number(e.merchant.storeId)))||void 0===t?void 0:t.toJSON();e.merchant=(0,Go.ei)(r,"storeId","storeName","reward","affiliatizerEnabled","offers_cb","images")}))}saveMutedProducts(){ba.set(`${this._id}-muted`,this.mutedProducts)}async getCache(){const{data:e}=this.cache||await ba.get(this._id)||{};return e}parse(e){const t=e=>0===(null==e?void 0:e.search(/^https:\/\//))?e:null;return e.data.map((e=>{var r,n;const i=e.product_data;if(!i)return null;const o=e.product_data_at_abandonment.fillr_product_data,s=e.product_data_at_abandonment.rakuten_product_data,a=Number(e.store_id),c=null===(r=EBATES.merchants.get(a))||void 0===r?void 0:r.toJSON(),u=null!=s&&s.cash_back_rate_during_abandonment?null==s||null===(n=s.cash_back_rate_during_abandonment[0])||void 0===n?void 0:n.reward:null,l=(h=parseFloat(i.list_price)-parseFloat(i.sale_price),Number.isFinite(h)?Math.round(100*h)/100:"");var h,f;return{id:e.product_id,title:i.title,brandName:i.brand_name,listPrice:i.list_price,salePrice:i.sale_price,discount:l,category_ids:s.category_ids,category_id:s.category_id,imageUrl:t(o.image_url)||t(s.image_url)||(f=i.image_url,f.replace(/(\.jpe?g)/,"-72x72$1")),productUrl:o.product_url,abandonedTimestamp:new Date(e.assumed_abandoned_timestamp).getTime(),eligibleForCashBack:i.eligible_for_cash_back,previous_ca_tracking_ticket:e.shopping_trip_id,merchant:(0,Go.ei)(c,"storeId","storeName","reward","affiliatizerEnabled","offers_cb","images"),isSuppressed:!1,...u&&{previousReward:{amount:u.display_amount,display:u.display_type}}}})).filter(Boolean)}}class Iu{constructor(){this._id="abandoned-products-reminder",this.eligibleDomains=[],this.DISCARDED_PERIOD=12096e5,ba.get(this._id).then((e=>{e&&(this.cache=e),this.cleanUpDiscardedProducts()})),xr.extension.attachEvent("getReminderProducts",(async(e,t)=>{if(!EBATES.settings.featureFlags.variation("cartAbandonment")||!EBATES.member.id||!await this.isEligibleForShow())return void t({});const r=await this.getProducts(),{showingCounters:n}=this.cache||await ba.get(this._id)||{};t({products:r,showingCounters:n})})),xr.extension.attachEvent("discardProduct",(async e=>{let{data:t}=e,{discardedProducts:r}=this.cache||await ba.get(this._id)||{};r=r||{},r[t.productId]||(r[t.productId]={timestamp:Date.now()}),this.saveCache({discardedProducts:r})})),xr.extension.attachEvent("updateShowingInfo",(async e=>{let{data:t}=e,{showingCount:r,lastShowingTimestamp:n,showingCounters:i}=this.cache||await ba.get(this._id)||{};r=is()().format("DD/MM/YYYY")!==is()(n).format("DD/MM/YYYY")?1:(r||0)+1,i=i||{};const o=i[t.type]||0;i[t.type]=(o+1)%3,this.saveCache({showingCount:r,showingCounters:i,lastShowingTimestamp:Date.now()})}))}saveCache(e){this.cache={...this.cache,...e},ba.set(this._id,this.cache)}async cleanUpDiscardedProducts(){let{discardedProducts:e}=this.cache||await ba.get(this._id)||{};e=e||{};let t=!1;for(let r in e)e[r].timestamp<Date.now()-this.DISCARDED_PERIOD&&(delete e[r],t=!0);t&&this.saveCache({discardedProducts:e})}async getProducts(){const e=await EBATES.member.abandonedProducts.getCache().catch((()=>{}))||[],t=(0,Go.jj)(e,(e=>e.merchant.storeId)).map((e=>e.merchant.storeId));await EBATES.merchants.rates.default.fetch(t);const r=await EBATES.member.abandonedProducts.load().catch((()=>{}))||[];if(Array.isArray(e)&&Array.isArray(r)){const t=this.getProductsWithSavings(e,r);await this.cleanUpDiscardedProducts();let n=t.filter((e=>{let{merchant:t}=e;return t.offers_cb&&!t.reward.range}));return n=await this.filterDiscardedProducts(n),n.sort(((e,t)=>e.totalSavings>t.totalSavings?-1:1)),n}return[]}calcSavingsAmount(e){const t=e.merchant.reward;return e.cashbackSavings=0,t.range&&t.amount||("Percentage"===t.display?e.cashbackSavings=parseFloat(t.amount/100*e.salePrice,10)||0:"Fixed"===t.display&&(e.cashbackSavings=parseFloat(t.amount,10)||0)),e.priceSavings=0,e.oldPrice&&(e.priceSavings=parseFloat(e.oldPrice,10)-parseFloat(e.salePrice,10)||0),e.totalSavings=e.cashbackSavings+e.priceSavings,e}async filterDiscardedProducts(e){const{discardedProducts:t}=this.cache||await ba.get(this._id)||{};return e.filter((e=>{let{id:r}=e;return!(null!=t&&t[r])}))}getProductsWithSavings(e,t){return t.map((t=>{let r={...t},n=!1;t.salePrice<t.listPrice&&(r.oldPrice=t.listPrice,n=!0);const i=e.find((e=>{let{id:r}=e;return r===t.id}));if(i){var o;const e=null===(o=EBATES.merchants.get(t.merchant.storeId))||void 0===o?void 0:o.getReward();if(r.previousReward&&cs(e,r.previousReward)>0&&(n=!0),t.merchant.reward=e,t.salePrice<i.salePrice){i.salePrice-t.salePrice>t.listPrice-t.salePrice&&(r.oldPrice=i.salePrice,n=!0)}}return n?this.calcSavingsAmount(r):null})).filter(Boolean)}async isEligibleForShow(){const{showingCount:e,lastShowingTimestamp:t}=this.cache||await ba.get(this._id)||{};if(Date.now()-t<36e5)return!1;const r=is()().format("DD/MM/YYYY");return!(is()(t).format("DD/MM/YYYY")===r&&e>=3)}async isEligibleDomain(e){const t=os(e);if(_u.find((e=>os(e)===t))){var r;if((await EBATES.settings.priceMagic.domains.load()).find((e=>{let{domainName:r}=e;return r===t})))return!1;const e=EBATES.merchants.domains.findWhere({topDomain:t});return!(e&&(null===(r=EBATES.merchants.get(e.get("storeId")))||void 0===r?void 0:r.get("activationCode"))>0)}return!1}}const Su=Us.extend({timeout:108e5,defaultMessage:"Have you signed up with Rakuten yet? It's the best site for earning Cash Back. Get a $10 bonus when you sign up with my invite link and spend $25. It's free! [link]",defaults:{referBonusAmount:"$$$",referImageToolbar:"/toolbar/images/taf_toolbar.png",referImageToolbar2x:"/toolbar/images/taf_toolbar@2x.png",referSocialMessage:""},url:()=>Wo(Or.MEMBER_TAF),initialize(){return xr.extension.attachEvent("getTafSettings",(async(e,t)=>{let{data:r={}}=e;const{force:n=!1}=r;EbatesPromise.then((async()=>{try{await this.fetch({force:n})}finally{t(this.toJSON())}}))})),Us.prototype.initialize.apply(this,arguments)},toJSON(){var e=Us.prototype.toJSON.apply(this,arguments);return e.referPageHeader=`Get ${e.referBonusAmount}`,self.devicePixelRatio>1&&(e.referImageToolbar=e.referImageToolbar2x),e},async getFacebookMessage(e){let t;return await this.fetch(),t=this.get("referSocialMessage")&&this.get("referSocialMessage").indexOf("|")>=0?this.get("referSocialMessage").split("|")[0]:this.get("referSocialMessage")?this.get("referSocialMessage"):this.defaultMessage,t.indexOf("[link]")>=0?t.replace("[link]",e):`${t} ${e}`},async getTwitterMessage(e){let t;return await this.fetch(),t=this.get("referSocialMessage")&&this.get("referSocialMessage").indexOf("|")>=0?this.get("referSocialMessage").split("|")[1]:this.get("referSocialMessage")?this.get("referSocialMessage"):this.defaultMessage,t.indexOf("[link]")>=0?t.replace("[link]",e):`${t} ${e}`},async getEmailMessage(e){let t,r;if(await this.fetch(),this.get("referEmailMessage")&&this.get("referEmailMessage").indexOf("|")>=0){const e=this.get("referEmailMessage").split("|");t=e.shift(),r=e.join("\n")}else t="Check this out: Get Cash Back for shopping!",r=this.defaultMessage;return r=r.indexOf("[link]")>=0?r.replace("[link]",e):`${r} ${e}`,{subject:t,message:r}}}),xu="BLOCKED";let Ou=Ps.extend({key:"trackingtickets",url:()=>Wo(Or.MEMBER_TICKETS),parse:e=>(0,Go.xH)(e.tickets)}),Ru=Ws.extend({url:()=>Wo(Or.DEALS),comparator(e){let t=EBATES.member.favorites.get(e.get("storeId"));return t?(e.set({section:"favorite"}),EBATES.member.favorites.indexOf(EBATES.member.favorites.get(e.get("storeId")))):(t=EBATES.member.purchased.get(e.get("storeId")),t?(e.set({section:"purchased"}),EBATES.member.favorites.length+EBATES.member.purchased.indexOf(t)):(t=EBATES.member.visited.get(e.get("storeId")),t?(e.set({section:"visited"}),EBATES.member.favorites.length+EBATES.member.purchased.length+EBATES.member.visited.indexOf(t)):(e.unset("section"),EBATES.member.favorites.length+EBATES.member.purchased.length+EBATES.member.visited.length+e.collection.indexOf(e))))},fetch(){return Promise.all([EBATES.member.favorites.fetch(),EBATES.member.get("accessLevel")?EBATES.member.purchased.fetch():null,EBATES.member.visited.fetch()]).catch((()=>{})).then((()=>Ws.prototype.fetch.apply(this,arguments)))}}),ku=Ss().Model.extend({idAttribute:"storeId"}),Nu=qs.extend({model:ku,url:()=>Wo(Or.MEMBER_FAVORITES),parse:e=>(0,Go.tS)(e.favorites).map((e=>(e.id&&!e.storeId&&(e.storeId=e.id),delete e.id,e))).flatten().value()}),Cu=qs.extend({model:ku,url:()=>Wo(Or.MEMBER_VISITED),parse:e=>(0,Go.tS)(e.stores).map((e=>(e.id&&!e.storeId&&(e.storeId=e.id),delete e.id,e))).flatten().value()}),Du=qs.extend({model:ku,url:()=>Wo(Or.MEMBER_PURCHASED),parse:e=>e.stores}),Lu=js.extend({key:"account",initialize(){this.on({"change:pendingAmount change:paidAmount":function(){var e=this.get("pendingAmount"),t=this.get("paidAmount");Number.isFinite(e)&&Number.isFinite(t)&&this.set({totalAmount:e+t})},"change:totalAmount":function(e){var t=e.get("totalAmount"),r=e.previous("totalAmount");Number.isFinite(r)&&Number.isFinite(t)&&t>r&&EBATES.member.trackingtickets.fetch().catch().then((()=>{let e=EBATES.member.trackingtickets.find((e=>e.has("memberReward")&&e.get("memberReward").amount&&parseFloat(e.get("memberReward").amount)));if(e&&e.get("storeId")&&!EBATES.member.messages.find((t=>t.get("memberReward")&&t.get("memberReward").amount===e.get("memberReward").amount))){let t=()=>{let t=EBATES.merchants.get(e.get("storeId"));t&&t.get("storeName")&&EBATES.member.messages.add((0,Go.l7)(e.pick("memberReward","storeId"),{desktop:!!EBATES.settings.userSettings.get("desktopNotifications").cashBack,popup:!0,title:`$${e.get("memberReward").amount} just added!`,text:`You just earned $${e.get("memberReward").amount} Cash Back from your purchase at ${t.get("storeName")}! `,type:"cashback",url:Wo("/pending-cash-back.htm?tb=yes&eeid=26117"),cta:"See Cash Back Activity",entity:"Cash Back Added"}))};EBATES.merchants&&EBATES.merchants.length?t():setTimeout((()=>t()),2e3)}}))}}),this.trigger("change:pendingAmount")}}),Bu=Us.extend({timeout:864e5,defaults:{chStatus:!1,psStatus:!1,itaStatus:!1},url:()=>Wo(Or.MEMBER_CCINFO),initialize(){xr.extension.attachEvent("getCCInfo",((e,t)=>{this.fetch().catch((()=>{})).then((()=>t(this.toJSON())))})),this.on({error:function(e,t){[401,403].includes(t.status)&&EBATES.onTokenExpired()}})},toJSON(){let e=Us.prototype.toJSON.apply(this,arguments);if(e){let t=EBATES.settings.promos.get("rakuten-cc");t&&t.isActive()&&(e.chCardType="rakuten")}return e}}),Pu=Ls.extend({key:"geogating",dynamic:!1,UPDATE_INTERVAL:108e5,defaults:{gatingStatus:"UNRESTRICTED"},url:()=>Wo(Or.MEMBER_GEOGATING),async initialize(){return await this.readCache({silent:!0,cache:!0}),this.isBlocked()&&this.switchToBlockedState(),this.on({"change:gatingStatus":async e=>{const t=e.get("gatingStatus");e.previous("gatingStatus")===xu&&t!==xu?(EBATES.settings.userSettings.toggleLogging(),rs.track("Change Gating Status",{country_code:e.get("countryCode"),gating_status:e.get("gatingStatus")}),EBATES.settings.userSettings.save({gatingStatusBadge:!0}),await this.switchToNormalState()):e.previous("gatingStatus")!==xu&&t===xu&&(rs.track("Change Gating Status",{country_code:e.get("countryCode"),gating_status:e.get("gatingStatus")}),EBATES.settings.userSettings.save({gatingStatusBadge:!0})),t===xu&&this.switchToBlockedState(),EBATES.badge.update()}}),Ls.prototype.initialize.apply(this,arguments)},switchToBlockedState(){xr.ui.button.setPopup(),xr.ui.button.attachEvent(xr.ui.button.CLICK,this.openGatingWebpageUrl),EBATES.settings.userSettings.toggleLogging()},async switchToNormalState(){xr.ui.button.detachEvent(xr.ui.button.CLICK,this.openGatingWebpageUrl),await EBATES.validateUserToken()&&xr.ui.button.setPopup({url:"./popup/popup.html"})},isBlocked(){return this.get("gatingStatus")===xu},isEnabled:()=>EBATES.settings.featureFlags.variation("geogating",!1),parse:e=>e.data,openGatingWebpageUrl(){const e=EBATES.member.geogating.get("gatingWebpageUrl")||Wo(Or.BASE);EBATES.settings.userSettings.get("gatingStatusBadge")&&(EBATES.settings.userSettings.save({gatingStatusBadge:!1}),EBATES.badge.update()),rs.track("Visit Page",{preceding_screen_name:"Icon",url:e},null,{force:!0}),xr.browser.navigate(e)}});var Uu=Us.extend({idAttribute:"member_guid",url:()=>Wo(Or.EDS),parse:e=>e._source});let Mu=Ls.extend({key:"activity",ERROR_UPDATE_INTERVAL:36e5,UPDATE_INTERVAL:108e5,url:()=>Wo(Or.MEMBER_ACTIVITY),setUpUpdate(e){(0,Go.hj)(e)&&e>=6e4&&(this.UPDATE_INTERVAL=e,EBATES.ebToken&&(xr.extension.setItem(`${this.key}.nextUpdateTime`,Date.now()+e),this.fetch()))},parse:e=>e.member});const ju=Us.extend({url:()=>Wo(Or.MEMBER_DETAILS),defaults:{rakutenMode:!0},initialize(){this.overlays=new gu,this.bonuses=new yu,this.trackingtickets=new Ou,this.favorites=new Nu,this.visited=new Cu,this.purchased=new Du,this.topDeals=new Ru,this.accountSummary=new Lu,this.ccinfo=new Bu,this.geogating=new Pu,this.eds=new Uu,this.messages=new kc,this.activity=new Mu,this.iscb=new wu,this.recommended=new pu,this.tafSettings=new Su,this.abandonedProducts=new Tu,this.accountSummary.fetch().catch((()=>{})),this.on({change:function(e,t){t.unset&&(this.nextUpdateTime=0),(this.hasChanged("id")||this.hasChanged("userStatus"))&&this.identify()},"change:targetSet":function(e){e.previous("targetSet")&&this.activity.clearCache()},"change:personalizationSet":function(){EBATES.settings.mediaPlacements.clearCache()},"change:accessLevel":function(e,t){0===t?(this.bonuses.stop(),this.activity.stop()):(EBATES.merchants.ready().then((()=>{this.bonuses.fetch().catch((()=>{}))})),this.activity.fetch({silent:!0}))},"change:id":function(){this.id?this.previous("id")&&(Promise.all([this.activity.fetch({reset:!0,silent:!0}),this.bonuses.fetch({reset:!0}),this.ccinfo.fetch({reset:!0}),this.geogating.isEnabled()&&this.geogating.fetch({reset:!0}),this.eds.fetch({reset:!0})]).catch((()=>{})),this.iscb.stop(),this.favorites.stop(),this.visited.stop(),this.purchased.stop(),this.messages.reset(),this.trackingtickets.reset(),this.recommended.process({force:!0}),EBATES.settings.userSettings.unset("tcppId"),EBATES.settings.userSettings.save(),EBATES.member.abandonedProducts.clearCache()):this.bonuses.stop()},error:function(e,t){[401,403].includes(t.status)&&EBATES.onTokenExpired()},"change:gdprCertificationStatus change:isHardDeleteRequested":e=>{if(EBATES)if(EBATES.settings.userSettings.toggleLogging(),EBATES.badge.update(),EBATES.member.isExtensionDisabled())EBATES.merchants.stop(),EBATES.merchants.reset();else{let t=Object.keys(e.previousAttributes());(t.includes("gdprCertificationStatus")||t.includes("isHardDeleteRequested"))&&EBATES.merchants.fetch()}},"change:shortUrl":(e,t)=>{var r;this.set({refId:null===(r=t.split("/"))||void 0===r?void 0:r.pop()})},"change:isDoNotShareActive":()=>{EBATES&&EBATES.settings.userSettings.toggleLogging()}}),this.listenTo(this.activity,{sync:e=>{this.set(e.toJSON())},"change:lastOrderDate":async e=>{e.previous("lastOrderDate")&&(this.nextUpdateTime=0,this.fetch())}}),xr.extension.attachEvent("account-eds",((e,t)=>{Promise.all([this.fetch(),this.eds.fetch()]).then((()=>t(this.toJSON()))).catch((()=>{}))})),xr.extension.attachEvent("account",((e,t)=>{EbatesPromise.then((()=>{var r;null!==(r=self.EBATES)&&void 0!==r&&r.ebToken?e.data?(this.set(e.data),t&&t(this.toJSON())):this.getAccount().then((e=>t(e))):t()}))})),xr.extension.attachEvent("member.updateEEAMode",(async(e,t)=>{await this.updateEEAMode(e.data),t()})),xr.extension.attachEvent("member.updateTCPP",(async(e,t)=>{await this.updateTCPP(e.data),t()})),xr.extension.attachEvent("createReferralLink",((e,t)=>{t(this.createReferralLink())})),xr.extension.attachEvent("topDeals",(async(e,t)=>{await this.topDeals.fetch();const r=this.topDeals.toJSON().filter(Boolean);r.forEach(((e,t)=>{if(e){let r=EBATES.merchants.get(e.storeId);r&&(e.merchant=r.toJSON(),e.coupon_rank=t)}})),t(r)})),xr.extension.attachEvent("messages",(async(e,t)=>{if(e.data&&e.data.created){const{created:t,...r}=e.data,n=this.messages.find((e=>e.get("created")===t));n&&n.set(r)}else await this.messages.flush();t&&t(this.messages.toJSON())})),xr.extension.attachEvent("share",(async e=>{let{data:t}=e;const{method:r,source:n}=t;return await this.share(r,n)})),xr.extension.attachEvent("updateAttestationState",((e,t)=>{let{data:r}=e;this.updateAttestationState(r.state).then((()=>{t(this.toJSON())})).catch((()=>{t(null)}))})),xr.extension.attachEvent("overlays",((e,t)=>{let{data:r}=e;r&&r.id&&(this.overlays.set(r),this.overlays.save()),t(this.overlays.toJSON())}))},identify(){if(this.id){var e;const t=this.get("shortURLToken"),r=this.get("userStatus"),n=EBATES.tests.getExperiments(),i=(null===(e=EBATES.settings.installedExtensions)||void 0===e?void 0:e.getInstalledExtensions().toString())||"";return rs.userId=this.id,rs.identify(this.id,{referral_token:t,user_status:r,installed_extensions:i,...n})}},async fetch(e){if(!EBATES.ebToken)throw new Error("User is not logged in");await Us.prototype.fetch.apply(this,arguments),this.get("accessLevel")&&await Promise.all([this.ccinfo.fetch(),this.geogating.isEnabled()?this.geogating.fetch(e):null])},parse(e,t){if(this.accountSummary.save((0,Go.u4)(e.accountSummary,((e,t,r)=>(e[r]=Number.isFinite(parseFloat(t))?parseFloat(t):t,e)),{})),t&&t.headers){let r=t.headers.get("ResponseLevel");r&&(e.accessLevel=parseInt(r,10))}return delete e.accountSummary,(0,Go.ce)(e,{gdprCertificationStatus:"",targetSet:"",personalizationSet:""})},toJSON(){var e;return{...Us.prototype.toJSON.apply(this,arguments),ebToken:EBATES.ebToken,accountSummary:this.accountSummary.toJSON(),tafSettings:this.tafSettings.toJSON(),ccinfo:this.ccinfo.toJSON(),geogating:null===(e=this.geogating)||void 0===e?void 0:e.toJSON(),eds:this.eds.toJSON(),isAttestationEligible:this.isAttestationEligible(),isEEAMode:this.isEEAMode(),isPendingDeletion:this.isPendingDeletion(),isExtensionDisabled:this.isExtensionDisabled()}},updateEEAMode(e){return hs(Wo(Or.MEMBER_UDPATE_ATTRIBUTE),{method:"POST",contentType:"application/json",processData:!1,dataType:"json",body:JSON.stringify({updateType:"gdpr-certification",updateKey:"eeaResidentStatus",updateValue:e})}).then((()=>{this.set({gdprCertificationStatus:"true"===e?"certified-yes":"certified-no"})}))},updateAttestationState(e){return hs(Wo(Or.MEMBER_UDPATE_ATTRIBUTE),{method:"POST",contentType:"application/json",processData:!1,dataType:"json",timeout:1e4,body:JSON.stringify({updateType:"attestation",updateKey:"attestedState",updateValue:e})}).then((()=>new Promise((e=>setTimeout(e,1e3))))).then((()=>this.fetch({force:!0}))).catch((()=>{if(this.errorAttempt||(this.errorAttempt=0),this.errorAttempt>0)throw this.errorAttempt=0,"Error Update Attestation State";return this.errorAttempt++,this.updateAttestationState(e)}))},isEEAMode(){return["certified-yes","not-certified"].includes(this.get("gdprCertificationStatus"))},isAttestationEligible(){return"certified-yes"===this.get("attestationStatus")||"not-certified"===this.get("attestationStatus")&&this.get("regulatedStateRes")},isPendingDeletion(){return!0===this.get("isHardDeleteRequested")},isGatingStatusBlocked(){var e;return(null===(e=this.geogating)||void 0===e?void 0:e.isBlocked())&&this.geogating.isEnabled()},isExtensionDisabled(){return this.isEEAMode()||this.isPendingDeletion()||this.isGatingStatusBlocked()},updateTCPP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e&&(this.unset("tcpp"),EBATES.settings.userSettings.save({tcppId:e.tcppId}),hs(Wo(Or.MEMBER_UDPATE_TCPP),{method:"POST",contentType:"application/json",body:JSON.stringify({tcppId:e.tcppId,tcppTypeId:e.type_id,acceptedDate:(new Date).toISOString(),deviceInfo:"button"})}).catch((r=>{400!==r.status&&t<10&&setTimeout((()=>this.updateTCPP(e,t+1)),3e5)})))},getDomain:()=>Or.domain,createReferralLink(){return this.get("shortUrl")},async share(e,t){const r=this.get("shortURLToken"),n={Email:45829,Copy:45830,Facebook:45831,Twitter:45832}[e];const i=as(this.createReferralLink(),{eeid:n});if(rs.track("Start Refer A Friend",{share_method:e,eeid:n,source:t,referral_token:r,type:(this.get("hasReferral")&&this.accountSummary.get("paidAndApprovedReferralAmount")?"has":"never")+" referred"}),"Facebook"===e){let e=await this.tafSettings.getFacebookMessage(i);Qo({url:as("https://www.facebook.com/dialog/share?",{display:xr.browser.isSafari?"page":"popup",app_id:0xc2ee9ccb8e0a,href:i,quote:e,redirect_uri:Wo("/toolbar/taf/success.htm")}),width:550,height:650})}else if("Twitter"===e){Qo({url:as("https://twitter.com/intent/tweet?",{text:await this.tafSettings.getTwitterMessage(i)}),width:550,height:400})}else if("Email"===e){let{subject:e,message:t}=await this.tafSettings.getEmailMessage(i);const r=`mailto:?subject=${encodeURIComponent(e)}&body=${encodeURIComponent(t)}`;xr.browser.navigate(r)}else if("Copy"!==e)throw new Error("Unknown share method")},async getAccount(){try{await this.fetch()}catch(e){}return this.toJSON()}});async function Fu(){const e=await Zo(Or.domain,"extension-install-source").catch((()=>"")),t=await async function(e){let t;return/(?:step2|EB-Test1\d{2,}A)/.test(e)?(t=Wo("https://%domain%?sourceName=toolbar&eeid=45426&toolbarId=%userid"),await xr.browser.navigate({url:t,tabId:xr.browser.NEWTAB},(e=>{let{id:t}=e;setTimeout((()=>xr.extension.fireEvent("welcome",{tabId:t})),2500)})),t):(t=Wo(Or.WEB_INSTALL),await xr.browser.navigate(t),t)}(e),r=await async function(){try{const e="JSESSIONID";return await Zo(Or.domain,e)||new Promise((t=>{function r(i){i.cookie.domain===Or.domain&&i.cookie.name===e&&i.cookie.value&&(clearTimeout(n),gr().cookies.onChanged.removeListener(r),t(i.cookie.value))}gr().cookies.onChanged.addListener(r);let n=setTimeout((()=>{gr().cookies.onChanged.removeListener(r),t("")}),8e3)}))}catch(e){return""}}(),n=await new Promise((e=>{var t,r;null!==(t=chrome)&&void 0!==t&&null!==(r=t.instanceID)&&void 0!==r&&r.getID?chrome.instanceID.getID(e):e(null)}));xr.browser.isWebkit&&gr().windows.getAll({populate:!0}).then((e=>{e.forEach((e=>{e.tabs.forEach((e=>{let{id:t,url:r}=e;r.includes(Wo("%domain/button-landing/"))&&gr().tabs.update(t,{url:r})}))}))})),rs.track("Install Application",{attribution_source:e,desktop_session_id:r,url:t,instanceId:n})}xr.extension.attachEvent("getSessionID",(async(e,t)=>{let r="";try{r=await Zo(Or.domain,"JSESSIONID")}catch(e){}t(r)}));const Vu=new Map;function $u(e){rs.track("CAA",e)}function zu(e){let t=Vu.get(e);t&&(clearTimeout(t.timeoutId),Vu.delete(e),xr.browser.detachEvent(xr.browser.TABCLOSED,Gu))}function Gu(e){let{tabId:t}=e,r=Vu.get(t);r&&($u({coupon_auto_apply_status:"Terminated",...r.event}),zu(t))}class qu{constructor(e){let{settings:t,merchant:r,url:n,tabId:i}=e;pr(this,"runAt","document_idle"),pr(this,"settings",void 0),pr(this,"merchant",void 0),pr(this,"url",void 0),pr(this,"tabId",void 0),this.settings=t,this.merchant=r,this.url=n,this.tabId=i}}class Hu extends qu{constructor(){super(...arguments),pr(this,"name",Na)}isActive(){return Xo(this.url)}async init(){}getParameters(){return{}}}class Wu extends qu{constructor(){super(...arguments),pr(this,"name",Ra),pr(this,"member",null)}async init(){this.settings.ccReminderSelector&&this.settings.ccReminderURL&&this.url.indexOf(this.settings.ccReminderURL)>=0&&(this.member=await self.EBATES.member.getAccount())}isActive(){return!!this.member}getParameters(){return{member:this.member}}}class Ku extends qu{constructor(){super(...arguments),pr(this,"name",ka),pr(this,"grouponSettings",{}),pr(this,"grouponViewKey",void 0)}async init(){this.grouponSettings=this.settings.groupon,this.grouponViewKey=Object.keys(this.grouponSettings).find((e=>{const t=this.grouponSettings[e];return!!(t.enable&&t.rx&&new RegExp(t.rx).test(this.url))}))}isActive(){return this.grouponViewKey}getParameters(){return{grouponViewKey:this.grouponViewKey,config:this.grouponSettings[this.grouponViewKey]}}}class Ju extends qu{constructor(){super(...arguments),pr(this,"name",Ca),pr(this,"config",null)}async init(){const e=this.settings.iscb;if(e)for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const r=e[t];if(new RegExp(r.url).test(this.url))return r.category||(r.category=`ISCB ${t.replace(/-/g," ")}`,r.entity_name=t.replace(/-/g," ")),void(this.config=r)}}isActive(){return!!this.config}getParameters(){return{config:this.config}}}class Yu extends qu{constructor(){super(...arguments),pr(this,"name",Oa)}async init(){var e;null!==(e=this.merchant)&&void 0!==e&&e.caaProgress&&(this.runAt="document_start")}isActive(){return!!this.merchant}getParameters(){return{merchant:this.merchant}}}class Xu extends qu{constructor(){super(...arguments),pr(this,"config",null),pr(this,"name",Da)}async init(){var e;const t=new URL(this.url).host;let r=null;if(!(this.merchant&&(this.merchant.offers_cb||this.merchant.pmDisabled||this.merchant.suppressed&&this.merchant.competitor&&null!==(e=this.settings.standDownDomains)&&void 0!==e&&e.includes(this.merchant.competitor)))){const e=this.settings.priceMagic,n=await self.EBATES.settings.priceMagic.domains.load();e.excludedDomains.find((e=>t.search(e)>=0))||(r=n.find((e=>{let{domainName:r}=e;return t.search(r)>=0}))),self.EBATES.tests.get("BTN162")&&xr.browser.isChrome&&self.EBATES.settings.featureFlags.variation("cartAbandonmentToast",!1)&&self.EBATES.settings.userSettings.get("abandonedProductsReminder")&&await self.EBATES.member.abandonedProducts.reminder.isEligibleDomain(t)&&(r={...r,abandonedReminderActive:!0}),this.config=r}}isActive(){return!!this.config}getParameters(){return{merchant:this.merchant,config:this.config}}}class Zu extends qu{constructor(){super(...arguments),pr(this,"name",La),pr(this,"interstitial",void 0)}async init(){const e=self.EBATES.settings.interstitials.toJSON();this.interstitial=e.find((e=>{let{matchPattern:t}=e;return this.url.search(t)>=0}))}isActive(){return!!this.interstitial}getParameters(){return{interstitial:this.interstitial}}}class Qu extends qu{constructor(){super(...arguments),pr(this,"name",Ba),pr(this,"config",null)}async init(){const e=await self.EBATES.settings.productParsers.getConfigs();this.config=e.find((e=>e.url&&new RegExp(e.url).test(this.url)))}isActive(){return!!this.config}getParameters(){return{merchant:this.merchant,config:this.config}}}class el extends qu{constructor(){super(...arguments),pr(this,"name",Pa),pr(this,"config",null)}async init(){const e=self.EBATES.settings.featureFlags.variation("customSerp",!1)?await self.EBATES.settings.customSerp.load():this.settings.serp,t=new URL(this.url).host;this.config=e.find((e=>{let{domain:r}=e;return t.includes(r)}))}isActive(){return!!this.settings.serpEnabled&&!!this.config}getParameters(){return{config:this.config}}}class tl extends qu{constructor(){super(...arguments),pr(this,"name",Ua),pr(this,"promo",void 0)}getPromo(e){const t=this.settings;if(t.promos){const r=(0,Go._e)(t.promos,{id:e,active:!0});if(r)return r}}async init(){this.promo=this.getPromo("taxes")}isActive(){var e,t;return null===(e=this.promo)||void 0===e||null===(t=e.urls)||void 0===t?void 0:t.find((e=>this.url.search(e)>=0))}getParameters(){return{taxes_promo:this.promo}}}const rl="Started",nl="Finished";class il extends(_a()){constructor(t){let{settings:r,merchant:n,url:i,tabId:o}=t;super(),pr(this,"scriptsExecutionStatus",null),pr(this,"settings",void 0),pr(this,"merchant",void 0),pr(this,"url",void 0),pr(this,"tabId",void 0),pr(this,"contentFeatures",void 0),this.settings=r,this.merchant=n,this.url=i,this.tabId=o,this.contentFeatures=Object.values(e).map((e=>new e(this)))}get isBlacklisted(){return Array.isArray(this.settings.contentBlackList)&&this.settings.contentBlackList.some((e=>{const t=e&&new RegExp(e);return t&&t.test(this.url)}))}async process(){if(this.isBlacklisted)return;await Promise.allSettled(this.contentFeatures.map((e=>e.init())));for(const e of this.contentFeatures)e.isActive()&&await this.execute(e)}async execute(e){this.scriptsExecutionStatus?this.scriptsExecutionStatus===rl&&await new Promise((e=>this.once(nl,e))):(this.scriptsExecutionStatus=rl,this.emit(rl,e.name),await Js.executeContentScripts({tabId:this.tabId,settings:this.settings,runAt:e.runAt}),this.scriptsExecutionStatus=nl,this.emit(nl,e.name)),xr.extension.fireEvent("execute",{tabId:this.tabId,data:{...e.getParameters(),method:e.name}})}}const ol="(gift card|e-?mail delivery)";class sl{constructor(){this.stores=null,xr.extension.attachEvent("getGiftCardStore",(async(e,t)=>{let{data:r}=e;const{product:n,link:i}=r;let o=null;n?o=await this.getGiftCardStoreByProduct(n):i&&(o=this.getGiftCardStoreByDomain(i)),t(o)}))}async save(){this.date=Date.now(),await ba.set("gift-cards",{date:this.date,stores:this.stores})}async get(){return this._promise||(this._promise=new Promise((e=>{this.getStores().then((()=>{this._promise=null,e()}))}))),this._promise}async getStores(){if(!this.stores){const{date:e,stores:t}=await ba.get("gift-cards")||{};this.stores=t,this.date=e}return(!this.stores||!this.date||this.date<Date.now()-3e5)&&await this.fetch(),Promise.resolve()}async fetch(){const e=EBATES.merchants.get(18907);if(!e)return;const t=await Xa({query:"query stores($storeIds: [String]!) {\n\t\t\t\tstores: byIds(domainIds: $storeIds, domainType: store) {\n\t\t\t\t\t... on Store {\n\t\t\t\t\t\tid\n\t\t\t\t\t\ttiers {\n\t\t\t\t\t\t\tstoreId:id\n\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\tproductURL:tierShoppingLink\n\t\t\t\t\t\t\tfacePlate: image(type:feed_lifestyle) {\n\t\t\t\t\t\t\t\turl\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treward {\n\t\t\t\t\t\t\t\tamount:displayAmount\n\t\t\t\t\t\t\t\tdisplay:displayType\n\t\t\t\t\t\t\t\trange:showUpTo\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}",variables:{storeIds:[String(18907)]}}),r=e=>null==e?void 0:e.trim().toLowerCase().replace(/['/]| and | & /g,""),n=(null==e?void 0:e.get("patterns"))||[];this.stores=t.data.stores[0].tiers.map((e=>{const t=n.find((t=>{let{storeId:r}=t;return r===e.storeId}));return t&&(e.pattern=r(t.pattern),e.domain=t.domain),e.name=r(e.name),e.reward.range=e.range?{high:e.amount}:null,e})),this.save()}async getGiftCardStoreByDomain(e){let{domain:t,href:r}=e;await this.get();return this.stores.filter((e=>{if(e.domain)return r.replace(/^https?:\/\/www\./,"").match(e.domain);const n=e.name.trim().toLowerCase().replace(/[-&.\s]/g,"");return t.match(`^${n}\\.`)})).sort(((e,t)=>{var r,n;return(null===(r=e.domain)||void 0===r?void 0:r.length)<(null===(n=t.domain)||void 0===n?void 0:n.length)}))[0]}async getGiftCardStoreByProduct(e){await this.get();return this.stores.find((t=>{const r=t.name;if(e.brandName.includes(r)||new RegExp(`${r}.*${ol}`,"i").test(e.title)||t.pattern&&(e.brandName.search(t.pattern)>=0||new RegExp(`${t.pattern}.*${ol}`,"i").test(e.title)))return!0}))}}new class{constructor(){xr.extension.attachEvent("GrouponDealsCollection",(async(e,t)=>{let{data:r}=e;t(await this.search(r))}))}async search(e){let{query:t,location:r,limit:n}=e;try{if(!t||!r)return null;const e={query:t,limit:n||100,show:"id,dealUrl,announcementTitle,title,options,merchant,grid4ImageUrl",other_deals:!0,locale:"en_US",offset:0,metadata:!1,client_id:"0c9926ce2479a25adec0c9b3c1e6327c73946fe7",tsToken:"US_AFF_0_200014_200067_0",secure_assets:!1,lng:r.lng,lat:r.lat},i=await fetch(`https://api.groupon.com/v2/deals/search?${new URLSearchParams(e)}`),o=await i.json();return this.parse(o)}catch(e){return null}}parse(e){const t=EBATES.settings.get("groupon").exclusions||[],r=e.deals.filter((e=>e.title.indexOf("Cash Back")<0));return(0,Go.UI)(r,(e=>(0,Go.l7)({locations:(0,Go.xH)((0,Go.UI)(e.options,(e=>(0,Go.UI)(e.redemptionLocations,(e=>{if(!t.includes(e.uuid))return(0,Go.ei)(e,"streetAddress1","city","state","postalCode","phoneNumber")})).filter(Boolean))))},(0,Go.ei)(e,"id","dealUrl","announcementTitle","title","grid4ImageUrl","options"),(0,Go.ei)(e.merchant,"name","websiteUrl"))))}},new class{constructor(){xr.extension.attachEvent("log.caa",(e=>{let{data:t,tabId:r}=e;const{action:n,event:i}=t,{coupon_auto_apply_status:o,...s}=i;if($u(i),"start"===n){const e=s.available_coupons?s.available_coupons.split(", ").length:0;if(e>0){const t=setTimeout((()=>function(e){let{tabId:t}=e,r=Vu.get(t);r&&($u({coupon_auto_apply_status:"Timeout",...r.event}),zu(t))}({tabId:r})),30*e*1e3);Vu.set(r,{event:s,timeoutId:t}),xr.browser.attachEvent(xr.browser.TABCLOSED,Gu)}}else["success","error","cancel"].includes(n)&&zu(r)}))}};let al=self.EBATES,cl=!1;const ul=new class{async processPage(e){let{url:t,tabId:r}=e;const n=self.EBATES.settings.toJSON();if(n.extensionDisabled)return!1;const i=await self.EBATES.merchants.getMerchant({url:t,tabId:r});return new il({settings:n,url:t,tabId:r,merchant:i}).process()}};xr.browser.isChrome&&gr().runtime.onInstalled.addListener((e=>{"install"===e.reason&&(cl=!0)}));class ll{constructor(e){pr(this,"toolbarId",null),pr(this,"ebToken",null),pr(this,"sessionData",{}),pr(this,"trackingTicketNumber",null),pr(this,"sessionReward",null),pr(this,"installVersion",null),pr(this,"badge",void 0),pr(this,"fillr",void 0),pr(this,"merchants",void 0),pr(this,"member",void 0),pr(this,"settings",void 0),pr(this,"icon",void 0),pr(this,"ebatesPromo",void 0),pr(this,"tests",void 0),pr(this,"giftCard",void 0),this.ebToken=e,this.badge=new _s,this.fillr=new ws,this.merchants=new Sc;let t=null;if(e){t=Jo(e).mId}this.member=new ju({id:t}),this.settings=new eu,this.icon=new ou,xr.extension.attachEvent("openOptionsPage",(()=>{xr.ui.settings.open()})),gr().alarms.onAlarm.addListener((e=>{"Ping"===e.name&&al.ping()})),gr().alarms.create("Ping",{periodInMinutes:60})}get loggedIn(){return!!this.ebToken}initMembers(){return this.tests=new Ts,this.giftCard=new sl,this.tests.onReady()}validateUserToken(){return new Promise((e=>{this.ebToken?e(this.ebToken):gr().cookies.get({url:`https://${Or.domain}`,name:"euid"}).then((t=>{t?(this.ebToken=t.value,xr.extension.setItem("ebToken",al.ebToken),e(t.value)):e(null)}))}))}async init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{await this.settings.load(),await this.settings.fetch()}catch(e){}if(await this.validateUserToken()){al.member.isGatingStatusBlocked()||(xr.ui.button.detachEvent(xr.ui.button.CLICK,hl),xr.ui.button.setPopup({url:"./popup/popup.html"}));try{await this.member.fetch(e)}catch(e){}this.member.isExtensionDisabled()||this.merchants.fetch().catch((()=>{})),this.ping()}else this.merchants.fetch().catch((()=>{})),xr.ui.button.setPopup(),xr.ui.button.attachEvent(xr.ui.button.CLICK,hl);this.settings.userSettings.toggleLogging(),this.setUninstallURL()}activate(e,t){let{sessionReward:r,trackingTicketNumber:n,partner:i,interstitialType:o,sessionInterval:s}=t;const a={partner:i,interstitialType:o,ttn:n||e.session.shoppingTrip.get("ttn")};if(r&&(r.amount||r.range)){const t=e.getReward(),n=cs(t,r);t&&0!==n&&(a.sessionReward=r,s&&n>0&&(s=null))}try{e.session.start({sessionInterval:s,shoppingTrip:a})}catch(t){const r=e.session.shoppingTrip.getCurrentState();let n="";"string"==typeof t?n=t:t instanceof Error&&(n=t.message),zo.logger.warn(n,{merchant_id:e.get("storeId"),activation_type:r.type,attribution_source_previous_click:r.source,tracking_ticket:r.ttn})}}ping(){xr.extension.getItem("ga_usage",(e=>{const t=new Date(parseInt(e||0,10)),r=new Date;r.toDateString()!==t.toDateString()&&(xr.extension.setItem("ga_usage",r.getTime().toString()),rs.track("Heartbeat Application"))}))}onTokenExpired(){al.member.set({accessLevel:0})}onTokenChanged(e){if(e&&e!==this.ebToken){const t=Jo(e);if(t){const r=this.ebToken&&Jo(this.ebToken);if(r&&r.llt&&r.mId&&t&&!t.llt&&t.mId===r.mId)return;zo.logger.info("login",t),this.ebToken=e,xr.extension.setItem("ebToken",this.ebToken),this.init({reset:!0})}}}setUninstallURL(){new Promise(((e,t)=>{gr().management&&gr().management.getSelf?gr().management.getSelf().then((r=>{"normal"===r.installType?e():t()})):e()})).then((()=>{if(gr().runtime.setUninstallURL){var e;const t=null===(e=al.settings.installedExtensions)||void 0===e?void 0:e.getInstalledExtensions().toString(),r=as(Wo(Or.WEB_UNINSTALL),{ext:t});gr().runtime.setUninstallURL(r)}})).catch((()=>{}))}set(e,t){xr.extension.setItem(e,t)}}function hl(e){let{data:t={},name:r}=e,n=xr.browser.NEWTAB,i="";"getLogonForm"===t.name?i=Wo(Or.WEB_LOGON_FORM):(i=Wo(Or.WEB_LOGIN),t.merchant&&t.merchant.storeId&&(i+=`&merchant_id=${t.merchant.storeId}`,n=t.tabId??xr.browser.CURRENTTAB)),rs.track("Visit Page",{preceding_screen_name:t.preceding_screen_name||"ButtonClick"===r?"Icon":"Hover",url:i,type:t.type}),xr.browser.navigate({url:i,tabId:n})}self.EbatesPromise=new Promise((e=>{xr.browser.attachEvent(xr.browser.DOCUMENTCOMPLETE,(e=>{let{url:t}=e;t&&/^http.*(?:rakuten|ebates)\.(?:com|int)\//.test(t)&&gr().cookies.get({url:t,name:"euid"}).then((e=>{e&&al.onTokenChanged(e.value)}))})),xr.browser.attachEvent(xr.browser.NAVIGATIONCOMMITTED,(e=>{let{tabId:t,url:r}=e;self.EBATES&&(self.EBATES.merchants.processDocumentComplete({url:r,tabId:t}),ul.processPage({url:r,tabId:t}))})),xr.browser.attachEvent(xr.browser.BEFORENAVIGATE,(e=>{let{url:t,tabId:r}=e;self.EBATES&&t&&self.EBATES.settings.affiliates.match(t,r)})),xr.extension.attachEvent("ebToken",(e=>{let{data:t}=e;self.EBATES&&self.EBATES.onTokenChanged(t)})),xr.extension.getItem(["toolbarId","domain","api","member_api","installVersion","currentVersion","uiid"],(function(t){t.domain&&(Or.domain=t.domain),t.api&&(Or.api=t.api),t.member_api&&(Or.member_api=t.member_api),t.uiid||(t.uiid=bs(),xr.extension.setItem("uiid",t.uiid)),rs.setAnonymousId(t.uiid);let r=0,n=null;t.toolbarId?(r=t.toolbarId,rs.set({toolbarid:r}),n=t.installVersion||"4.0.0.0",t.currentVersion!==xr.extension.version&&(rs.track("Update Application"),xr.extension.setItem("currentVersion",xr.extension.version))):(xr.browser.isChrome||(cl=!0),r=Math.floor(1e9*Math.random()),n=xr.extension.version,xr.extension.setItem("toolbarId",r),xr.extension.setItem("installVersion",xr.extension.version),xr.extension.setItem("currentVersion",xr.extension.version),xr.extension.setItem("notification-explanation",0),rs.set({toolbarid:r})),zo.addLoggerGlobalContext("button",{toolbarId:r,version:xr.extension.version,installVersion:n}),xr.extension.getItem("ebToken").then((e=>e||Zo(Or.member_api,"euid"))).catch((()=>null)).then((e=>{al=self.EBATES=new ll(e),al.toolbarId=r,al.installVersion=n})).then((()=>al.initMembers())).then((async()=>{await al.init()})).catch((()=>{})).then((()=>{e(al),gr().cookies.set({domain:"rakuten.com",url:Wo(Or.BASE),name:"toolbarId",value:r.toString()}),cl&&Fu()}))}))})),xr.extension.attachEvent("login",hl),xr.extension.attachEvent("encodeImageURI",((e,t)=>{let{data:r}=e;var n;(n=r,fetch(n).then((e=>e.blob())).then((e=>new Promise(((t,r)=>{const n=new FileReader;n.onloadend=()=>t(n.result),n.onerror=r,n.readAsDataURL(e)}))))).then((e=>{0===e.indexOf("data:text/plain;base64")?t(null):t(e)})).catch((()=>t(null)))}));const fl=new Map;xr.extension.attachEvent("getContent",(async(e,t)=>{let{data:r}=e;if(fl.has(r.file))t(fl.get(r.file));else{const e=await fetch(r.file);let n=await e.text();n=n.replace(/chrome-extension:/g,location.protocol),fl.set(r.file,n),t(n)}})),gr().runtime.onConnect.addListener((()=>{})),gr().webNavigation&&gr().webNavigation.onCommitted.addListener((function(e){if("typed"===e.transitionType&&0!==e.url.search(/https?:\/\/\w+\.rakuten\.com\//)&&al&&al.merchants){al.settings.affiliates.clear(e.tabId);const t=al.merchants.match(e.url,e.tabId);if(t){if(t.session.get("activated")&&"ShopStyle"===t.session.shoppingTrip.get("partner"))return;t.session.stop()}}}));let dl={};ll.prototype.captureOrderPage=function(e){return hs(Wo(Or.CAPTURE_ORDER),{method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip"},body:new Uint8Array(new dr(JSON.stringify(e)))})},xr.extension.attachEvent("CaptureOrderPage",(e=>{var t,r;if(dl[e.tabId]&&dl[e.tabId]===e.url)return;let n=EBATES.member.isExtensionDisabled(),{logging:i}=EBATES.settings.toJSON();if("opt_out"===i||"pending"===i||n)return;dl[e.tabId]=e.url;let{storeName:o,storeId:s,shoppingTrip:a}=e.data.merchant;if(null!=a&&a.ttn||null!==(t=EBATES.settings.promos.get("commercecapture-incrementality"))&&void 0!==t&&null!==(r=t.campaigns)&&void 0!==r&&r.find((e=>e.stores.get(s)))){let t=a.ttn?`ebs${a.ttn}sbe`:"None";EBATES.captureOrderPage({tenant_id:1,source_name:"toolbar",store_name:o,store_id:s,shopping_trip_id:t,rr_member_id:EBATES.member.id,content_source:e.url,content_type:"order confirmation",content_format:"html",client_type:xr.browser.name.toLowerCase(),client_version:xr.extension.version,content:e.data.content,load_time:e.data.load_time,javascript_error:e.data.javascript_error})}}));let pl=e=>{dl[e.tabId]&&e.url!==dl[e.tabId]&&delete dl[e.tabId]};xr.browser.attachEvent(xr.browser.DOCUMENTCOMPLETE,pl),xr.browser.attachEvent(xr.browser.TABCLOSED,pl),xr.extension.attachEvent("interstitial",(e=>{let{tabId:t,data:r}=e;!r.partner||r.trackingTicketNumber&&r.sessionReward?EBATES.settings.affiliates.activations.addParameters(t,r):EBATES.settings.affiliates.activations.clear(t)})),xr.extension.attachEvent("xfas",(async e=>{let{shoppingURL:t,storeURL:r,wid:n,sessionAttributes:i,campaignId:o,tabId:s,eeid:a,channel:c}=e.data;const u=as(t,{response:"json",store_url:r,sourceName:n||"toolbar",tracking_campaign_id:o,channel:c||4,eeid:a||23509,tb_v:xr.extension.version});if(s===xr.browser.NEWTAB){s=(await xr.browser.navigate({url:"about:blank",tabId:xr.browser.NEWTAB})).id}else s=e.tabId;EBATES.settings.affiliates.match(u,s);const l=await fetch(u),h=(await l.json()).ticket[0];if(h&&h.storeId){const e=h.trackingNumber.replace(/\D/g,"");EBATES.settings.affiliates.activations.addParameters(s,{trackingTicketNumber:e});EBATES.merchants.get(h.storeId).session.shoppingTrip.addPendingAttribute({type:"silent",...i}),await xr.browser.navigate({tabId:s,url:h.link[0]["@href"].replace(/wid=.*?&/,`wid=${n}&`)})}})),ll.prototype.logCloseSession=async function(){EBATES.sessionData={}},xr.browser.attachEvent(xr.browser.DOCUMENTCOMPLETE,(e=>{let{url:t}=e;if(EBATES){var r;self.clearTimeout(EBATES.session_timeout),EBATES.session_id&&(EBATES.session_timeout=self.setTimeout(EBATES.logCloseSession,18e5));let e=os(t);EBATES.settings.get("competitorDomains").includes(e)&&e!==(null===(r=EBATES.session_competition)||void 0===r?void 0:r.domain)&&(EBATES.session_competition={url:t,domain:e},rs.track("Visit Competitor Page",{url:t,domain:e}))}})),function(){let e=new Map,t=t=>{e.has(t)&&(e.get(t).timeout&&self.clearTimeout(e.get(t).timeout),e.delete(t))};xr.browser.attachEvent(xr.browser.TABCLOSED,(r=>{let{tabId:n}=r,i=e.get(n);if(i){const e=i.storeId,t=EBATES.merchants.get(e),r=null==t?void 0:t.session.shoppingTrip.getCurrentState(),n={store_id:e,redirect_chain:i.urls.toString(),reason:"closed tab",...r?{activation_type:r.type,attribution_source_previous_click:r.source,tracking_ticket:r.ttn}:{}};rs.track("Interstitial Failure",n),zo.logger.warn("InterstitialStatus",n)}t(n)}));const r=r=>{let{tabId:n,url:i}=r,o=(e=>{let t=/\/\/[-\w]*\.(?:ebates|rakuten)\.com\/.*?(\d+)-xfas(?:\?.*sourceName=([\w-]*))?/.exec(e);if(!(t&&t[1]&&EBATES))return null;{let r=EBATES.merchants.get(parseInt(t[1],10));if(r)return{storeId:r.id,location_flag:r.session.shoppingTrip.get("source")||t[2]||"",urls:[e]}}})(i);if(o)e.set(n,{...o,timeout:self.setTimeout((()=>{const t=e.get(n);if(t){const e=t.storeId,r=EBATES.merchants.get(e),n=null==r?void 0:r.session.shoppingTrip.getCurrentState(),i={store_id:e,redirect_chain:t.urls.toString(),reason:"timed out",...n?{activation_type:n.type,attribution_source_previous_click:n.source,tracking_ticket:n.ttn}:{}};rs.track("Interstitial Failure",i),zo.logger.warn("InterstitialStatus",i)}}),3e4)});else if(e.has(n)){let r=EBATES.merchants.match(i,n);if(r&&r.id===e.get(n).storeId)t(n);else{e.get(n).urls.push(i)}}};xr.browser.attachEvent(xr.browser.DOCUMENTCOMPLETE,r),xr.browser.attachEvent(xr.browser.BEFORENAVIGATE,r)}()})(),source=n})();