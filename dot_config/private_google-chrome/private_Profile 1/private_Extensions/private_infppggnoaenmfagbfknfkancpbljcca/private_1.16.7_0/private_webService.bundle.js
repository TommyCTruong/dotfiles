(()=>{var e={72378:(e,r,t)=>{e=t.nmd(e);var n="__lodash_hash_undefined__",s=9007199254740991,o="[object Arguments]",a="[object Function]",i="[object Object]",g=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,l={};l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l[o]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object DataView]"]=l["[object Date]"]=l["[object Error]"]=l[a]=l["[object Map]"]=l["[object Number]"]=l[i]=l["[object RegExp]"]=l["[object Set]"]=l["[object String]"]=l["[object WeakMap]"]=!1;var m="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g,u="object"==typeof self&&self&&self.Object===Object&&self,A=m||u||Function("return this")(),f=r&&!r.nodeType&&r,d=f&&e&&!e.nodeType&&e,p=d&&d.exports===f,h=p&&m.process,b=function(){try{var e=d&&d.require&&d.require("util").types;return e||h&&h.binding&&h.binding("util")}catch(e){}}(),x=b&&b.isTypedArray;function v(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)}var w,y,_,k=Array.prototype,j=Function.prototype,E=Object.prototype,I=A["__core-js_shared__"],C=j.toString,O=E.hasOwnProperty,P=(w=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"",T=E.toString,S=C.call(Object),B=RegExp("^"+C.call(O).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),D=p?A.Buffer:void 0,L=A.Symbol,M=A.Uint8Array,$=D?D.allocUnsafe:void 0,z=(y=Object.getPrototypeOf,_=Object,function(e){return y(_(e))}),N=Object.create,F=E.propertyIsEnumerable,R=k.splice,U=L?L.toStringTag:void 0,W=function(){try{var e=de(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),q=D?D.isBuffer:void 0,V=Math.max,Z=Date.now,K=de(A,"Map"),G=de(Object,"create"),H=function(){function e(){}return function(r){if(!Ie(r))return{};if(N)return N(r);e.prototype=r;var t=new e;return e.prototype=void 0,t}}();function J(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}function Q(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}function X(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}function Y(e){var r=this.__data__=new Q(e);this.size=r.size}function ee(e,r){var t=ye(e),n=!t&&we(e),s=!t&&!n&&ke(e),o=!t&&!n&&!s&&Oe(e),a=t||n||s||o,i=a?function(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}(e.length,String):[],g=i.length;for(var c in e)!r&&!O.call(e,c)||a&&("length"==c||s&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||pe(c,g))||i.push(c);return i}function re(e,r,t){(void 0!==t&&!ve(e[r],t)||void 0===t&&!(r in e))&&se(e,r,t)}function te(e,r,t){var n=e[r];O.call(e,r)&&ve(n,t)&&(void 0!==t||r in e)||se(e,r,t)}function ne(e,r){for(var t=e.length;t--;)if(ve(e[t][0],r))return t;return-1}function se(e,r,t){"__proto__"==r&&W?W(e,r,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[r]=t}J.prototype.clear=function(){this.__data__=G?G(null):{},this.size=0},J.prototype.delete=function(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r},J.prototype.get=function(e){var r=this.__data__;if(G){var t=r[e];return t===n?void 0:t}return O.call(r,e)?r[e]:void 0},J.prototype.has=function(e){var r=this.__data__;return G?void 0!==r[e]:O.call(r,e)},J.prototype.set=function(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=G&&void 0===r?n:r,this},Q.prototype.clear=function(){this.__data__=[],this.size=0},Q.prototype.delete=function(e){var r=this.__data__,t=ne(r,e);return!(t<0)&&(t==r.length-1?r.pop():R.call(r,t,1),--this.size,!0)},Q.prototype.get=function(e){var r=this.__data__,t=ne(r,e);return t<0?void 0:r[t][1]},Q.prototype.has=function(e){return ne(this.__data__,e)>-1},Q.prototype.set=function(e,r){var t=this.__data__,n=ne(t,e);return n<0?(++this.size,t.push([e,r])):t[n][1]=r,this},X.prototype.clear=function(){this.size=0,this.__data__={hash:new J,map:new(K||Q),string:new J}},X.prototype.delete=function(e){var r=fe(this,e).delete(e);return this.size-=r?1:0,r},X.prototype.get=function(e){return fe(this,e).get(e)},X.prototype.has=function(e){return fe(this,e).has(e)},X.prototype.set=function(e,r){var t=fe(this,e),n=t.size;return t.set(e,r),this.size+=t.size==n?0:1,this},Y.prototype.clear=function(){this.__data__=new Q,this.size=0},Y.prototype.delete=function(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t},Y.prototype.get=function(e){return this.__data__.get(e)},Y.prototype.has=function(e){return this.__data__.has(e)},Y.prototype.set=function(e,r){var t=this.__data__;if(t instanceof Q){var n=t.__data__;if(!K||n.length<199)return n.push([e,r]),this.size=++t.size,this;t=this.__data__=new X(n)}return t.set(e,r),this.size=t.size,this};var oe,ae=function(e,r,t){for(var n=-1,s=Object(e),o=t(e),a=o.length;a--;){var i=o[oe?a:++n];if(!1===r(s[i],i,s))break}return e};function ie(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":U&&U in Object(e)?function(e){var r=O.call(e,U),t=e[U];try{e[U]=void 0;var n=!0}catch(e){}var s=T.call(e);n&&(r?e[U]=t:delete e[U]);return s}(e):function(e){return T.call(e)}(e)}function ge(e){return Ce(e)&&ie(e)==o}function ce(e){return!(!Ie(e)||function(e){return!!P&&P in e}(e))&&(je(e)?B:g).test(function(e){if(null!=e){try{return C.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function le(e){if(!Ie(e))return function(e){var r=[];if(null!=e)for(var t in Object(e))r.push(t);return r}(e);var r=he(e),t=[];for(var n in e)("constructor"!=n||!r&&O.call(e,n))&&t.push(n);return t}function me(e,r,t,n,s){e!==r&&ae(r,(function(o,a){if(s||(s=new Y),Ie(o))!function(e,r,t,n,s,o,a){var g=be(e,t),c=be(r,t),l=a.get(c);if(l)return void re(e,t,l);var m=o?o(g,c,t+"",e,r,a):void 0,u=void 0===m;if(u){var A=ye(c),f=!A&&ke(c),d=!A&&!f&&Oe(c);m=c,A||f||d?ye(g)?m=g:Ce(v=g)&&_e(v)?m=function(e,r){var t=-1,n=e.length;r||(r=Array(n));for(;++t<n;)r[t]=e[t];return r}(g):f?(u=!1,m=function(e,r){if(r)return e.slice();var t=e.length,n=$?$(t):new e.constructor(t);return e.copy(n),n}(c,!0)):d?(u=!1,p=c,h=!0?(b=p.buffer,x=new b.constructor(b.byteLength),new M(x).set(new M(b)),x):p.buffer,m=new p.constructor(h,p.byteOffset,p.length)):m=[]:function(e){if(!Ce(e)||ie(e)!=i)return!1;var r=z(e);if(null===r)return!0;var t=O.call(r,"constructor")&&r.constructor;return"function"==typeof t&&t instanceof t&&C.call(t)==S}(c)||we(c)?(m=g,we(g)?m=function(e){return function(e,r,t,n){var s=!t;t||(t={});var o=-1,a=r.length;for(;++o<a;){var i=r[o],g=n?n(t[i],e[i],i,t,e):void 0;void 0===g&&(g=e[i]),s?se(t,i,g):te(t,i,g)}return t}(e,Pe(e))}(g):Ie(g)&&!je(g)||(m=function(e){return"function"!=typeof e.constructor||he(e)?{}:H(z(e))}(c))):u=!1}var p,h,b,x;var v;u&&(a.set(c,m),s(m,c,n,o,a),a.delete(c));re(e,t,m)}(e,r,a,t,me,n,s);else{var g=n?n(be(e,a),o,a+"",e,r,s):void 0;void 0===g&&(g=o),re(e,a,g)}}),Pe)}function ue(e,r){return xe(function(e,r,t){return r=V(void 0===r?e.length-1:r,0),function(){for(var n=arguments,s=-1,o=V(n.length-r,0),a=Array(o);++s<o;)a[s]=n[r+s];s=-1;for(var i=Array(r+1);++s<r;)i[s]=n[s];return i[r]=t(a),v(e,this,i)}}(e,r,Be),e+"")}var Ae=W?function(e,r){return W(e,"toString",{configurable:!0,enumerable:!1,value:(t=r,function(){return t}),writable:!0});var t}:Be;function fe(e,r){var t,n,s=e.__data__;return("string"==(n=typeof(t=r))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?s["string"==typeof r?"string":"hash"]:s.map}function de(e,r){var t=function(e,r){return null==e?void 0:e[r]}(e,r);return ce(t)?t:void 0}function pe(e,r){var t=typeof e;return!!(r=null==r?s:r)&&("number"==t||"symbol"!=t&&c.test(e))&&e>-1&&e%1==0&&e<r}function he(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||E)}function be(e,r){if(("constructor"!==r||"function"!=typeof e[r])&&"__proto__"!=r)return e[r]}var xe=function(e){var r=0,t=0;return function(){var n=Z(),s=16-(n-t);if(t=n,s>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}(Ae);function ve(e,r){return e===r||e!=e&&r!=r}var we=ge(function(){return arguments}())?ge:function(e){return Ce(e)&&O.call(e,"callee")&&!F.call(e,"callee")},ye=Array.isArray;function _e(e){return null!=e&&Ee(e.length)&&!je(e)}var ke=q||function(){return!1};function je(e){if(!Ie(e))return!1;var r=ie(e);return r==a||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r}function Ee(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}function Ie(e){var r=typeof e;return null!=e&&("object"==r||"function"==r)}function Ce(e){return null!=e&&"object"==typeof e}var Oe=x?function(e){return function(r){return e(r)}}(x):function(e){return Ce(e)&&Ee(e.length)&&!!l[ie(e)]};function Pe(e){return _e(e)?ee(e,!0):le(e)}var Te,Se=(Te=function(e,r,t){me(e,r,t)},ue((function(e,r){var t=-1,n=r.length,s=n>1?r[n-1]:void 0,o=n>2?r[2]:void 0;for(s=Te.length>3&&"function"==typeof s?(n--,s):void 0,o&&function(e,r,t){if(!Ie(t))return!1;var n=typeof r;return!!("number"==n?_e(t)&&pe(r,t.length):"string"==n&&r in t)&&ve(t[r],e)}(r[0],r[1],o)&&(s=n<3?void 0:s,n=1),e=Object(e);++t<n;){var a=r[t];a&&Te(e,a,t,s)}return e})));function Be(e){return e}e.exports=Se},93150:function(e,r){var t,n,s;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=[e],t=function(e){"use strict";if("object"!=typeof globalThis||"object"!=typeof chrome||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const r="The message port closed before a response was received.",t="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",n=e=>{const n={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(n).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class s extends WeakMap{constructor(e,r){super(r),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const o=e=>e&&"object"==typeof e&&"function"==typeof e.then,a=(r,t)=>(...n)=>{e.runtime.lastError?r.reject(new Error(e.runtime.lastError.message)):t.singleCallbackArg||n.length<=1&&!1!==t.singleCallbackArg?r.resolve(n[0]):r.resolve(n)},i=e=>1==e?"argument":"arguments",g=(e,r)=>function(t,...n){if(n.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${i(r.minArgs)} for ${e}(), got ${n.length}`);if(n.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${i(r.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((s,o)=>{if(r.fallbackToNoCallback)try{t[e](...n,a({resolve:s,reject:o},r))}catch(o){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,o),t[e](...n),r.fallbackToNoCallback=!1,r.noCallback=!0,s()}else r.noCallback?(t[e](...n),s()):t[e](...n,a({resolve:s,reject:o},r))}))},c=(e,r,t)=>new Proxy(r,{apply:(r,n,s)=>t.call(n,e,...s)});let l=Function.call.bind(Object.prototype.hasOwnProperty);const m=(e,r={},t={})=>{let n=Object.create(null),s={has:(r,t)=>t in e||t in n,get(s,o,a){if(o in n)return n[o];if(!(o in e))return;let i=e[o];if("function"==typeof i)if("function"==typeof r[o])i=c(e,e[o],r[o]);else if(l(t,o)){let r=g(o,t[o]);i=c(e,e[o],r)}else i=i.bind(e);else if("object"==typeof i&&null!==i&&(l(r,o)||l(t,o)))i=m(i,r[o],t[o]);else{if(!l(t,"*"))return Object.defineProperty(n,o,{configurable:!0,enumerable:!0,get:()=>e[o],set(r){e[o]=r}}),i;i=m(i,r[o],t["*"])}return n[o]=i,i},set:(r,t,s,o)=>(t in n?n[t]=s:e[t]=s,!0),defineProperty:(e,r,t)=>Reflect.defineProperty(n,r,t),deleteProperty:(e,r)=>Reflect.deleteProperty(n,r)},o=Object.create(e);return new Proxy(o,s)},u=e=>({addListener(r,t,...n){r.addListener(e.get(t),...n)},hasListener:(r,t)=>r.hasListener(e.get(t)),removeListener(r,t){r.removeListener(e.get(t))}}),A=new s((e=>"function"!=typeof e?e:function(r){const t=m(r,{},{getContent:{minArgs:0,maxArgs:0}});e(t)}));let f=!1;const d=new s((e=>"function"!=typeof e?e:function(r,n,s){let a,i,g=!1,c=new Promise((e=>{a=function(r){f||(console.warn(t,(new Error).stack),f=!0),g=!0,e(r)}}));try{i=e(r,n,a)}catch(e){i=Promise.reject(e)}const l=!0!==i&&o(i);if(!0!==i&&!l&&!g)return!1;const m=e=>{e.then((e=>{s(e)}),(e=>{let r;r=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",s({__mozWebExtensionPolyfillReject__:!0,message:r})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)}))};return m(l?i:c),!0})),p=({reject:t,resolve:n},s)=>{e.runtime.lastError?e.runtime.lastError.message===r?n():t(new Error(e.runtime.lastError.message)):s&&s.__mozWebExtensionPolyfillReject__?t(new Error(s.message)):n(s)},h=(e,r,t,...n)=>{if(n.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${i(r.minArgs)} for ${e}(), got ${n.length}`);if(n.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${i(r.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((e,r)=>{const s=p.bind(null,{resolve:e,reject:r});n.push(s),t.sendMessage(...n)}))},b={devtools:{network:{onRequestFinished:u(A)}},runtime:{onMessage:u(d),onMessageExternal:u(d),sendMessage:h.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:h.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},x={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return n.privacy={network:{"*":x},services:{"*":x},websites:{"*":x}},m(e,b,n)};e.exports=n(chrome)}else e.exports=globalThis.browser},void 0===(s="function"==typeof t?t.apply(r,n):t)||(e.exports=s)}},r={};function t(n){var s=r[n];if(void 0!==s)return s.exports;var o=r[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),t.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";let e,r;const n=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakMap,i=new WeakMap;let g={get(e,r,t){if(e instanceof IDBTransaction){if("done"===r)return s.get(e);if("objectStoreNames"===r)return e.objectStoreNames||o.get(e);if("store"===r)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return m(e[r])},set:(e,r,t)=>(e[r]=t,!0),has:(e,r)=>e instanceof IDBTransaction&&("done"===r||"store"===r)||r in e};function c(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(r||(r=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...r){return e.apply(u(this),r),m(n.get(this))}:function(...r){return m(e.apply(u(this),r))}:function(r,...t){const n=e.call(u(this),r,...t);return o.set(n,r.sort?r.sort():[r]),m(n)}}function l(r){return"function"==typeof r?c(r):(r instanceof IDBTransaction&&function(e){if(s.has(e))return;const r=new Promise(((r,t)=>{const n=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{r(),n()},o=()=>{t(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)}));s.set(e,r)}(r),t=r,(e||(e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(r,g):r);var t}function m(e){if(e instanceof IDBRequest)return function(e){const r=new Promise(((r,t)=>{const n=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{r(m(e.result)),n()},o=()=>{t(e.error),n()};e.addEventListener("success",s),e.addEventListener("error",o)}));return r.then((r=>{r instanceof IDBCursor&&n.set(r,e)})).catch((()=>{})),i.set(r,e),r}(e);if(a.has(e))return a.get(e);const r=l(e);return r!==e&&(a.set(e,r),i.set(r,e)),r}const u=e=>i.get(e);const A=["get","getKey","getAll","getAllKeys","count"],f=["put","add","delete","clear"],d=new Map;function p(e,r){if(!(e instanceof IDBDatabase)||r in e||"string"!=typeof r)return;if(d.get(r))return d.get(r);const t=r.replace(/FromIndex$/,""),n=r!==t,s=f.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!s&&!A.includes(t))return;const o=async function(e,...r){const o=this.transaction(e,s?"readwrite":"readonly");let a=o.store;return n&&(a=a.index(r.shift())),(await Promise.all([a[t](...r),s&&o.done]))[0]};return d.set(r,o),o}g=(e=>({...e,get:(r,t,n)=>p(r,t)||e.get(r,t,n),has:(r,t)=>!!p(r,t)||e.has(r,t)}))(g);var h=t(93150),b=t.n(h),x=t(72378),v=t.n(x);function w(e,r){try{return JSON.parse(e)}catch(e){return r}}const y=(e,r)=>e?`${e}--${r}`:r;function _(e="",r={},t=""){let n={name:y(t,e),data:r};return b().runtime.sendMessage(n)}function k(){const e={};return window.addEventListener("__automa-ext__",(({detail:r})=>{var t,n;r&&(t=e,n=r.type,Object.prototype.hasOwnProperty.call(t,n))&&e[r.type].forEach((e=>{e(r.data)}))})),{on:function(r,t){(e[r]=e[r]||[]).push(t)}}}window.addEventListener("DOMContentLoaded",(async()=>{try{document.body.setAttribute("data-atm-ext-installed",b().runtime.getManifest().version);const{workflows:e}=await b().storage.local.get("workflows"),r=await function(e,r,{blocked:t,upgrade:n,blocking:s,terminated:o}={}){const a=indexedDB.open(e,r),i=m(a);return n&&a.addEventListener("upgradeneeded",(e=>{n(m(a.result),e.oldVersion,e.newVersion,m(a.transaction))})),t&&a.addEventListener("blocked",(()=>t())),i.then((e=>{o&&e.addEventListener("close",(()=>o())),s&&e.addEventListener("versionchange",(()=>s()))})).catch((()=>{})),i}("automa",1,{upgrade(e){e.createObjectStore("store")}});await r.put("store",e,"workflows");const t=w(localStorage.getItem("supabase.auth.token"),null)?.currentSession??null;await b().storage.local.set({session:t});const n=k();n.on("open-dashboard",(({path:e})=>{e&&_("open:dashboard",e,"background")})),n.on("open-workflow",(({workflowId:e})=>{e&&_("open:dashboard",`/workflows/${e}`,"background")})),n.on("add-workflow",(async({workflow:e})=>{try{const{workflows:r}=await b().storage.local.get("workflows"),t=((e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,r)=>e+((r&=63)<36?r.toString(36):r<62?(r-26).toString(36).toUpperCase():r>62?"-":"_")),""))(),n={...e,id:t,dataColumns:[],createdAt:Date.now(),table:e.table||e.dataColumns};n.drawflow="string"==typeof n.drawflow?w(n.drawflow,n.drawflow):n.drawflow,Array.isArray(r)?r.push(n):r[t]=n,await b().storage.local.set({workflows:r}),_("workflow:added",{workflowId:t},"background")}catch(e){console.error(e)}})),n.on("add-team-workflow",(async({workflow:e})=>{let{teamWorkflows:r}=await b().storage.local.get("teamWorkflows"),t={...e,createdAt:Date.now(),table:e.table??[]};t.drawflow="string"==typeof t.drawflow?w(t.drawflow,t.drawflow):t.drawflow,r||(r={}),r[t.teamId]||(r[t.teamId]={});const n=r[t.teamId][e.id]||null;n&&(t=v()(n,t)),r[t.teamId][e.id]=t,await b().storage.local.set({teamWorkflows:r});const s=t.drawflow.nodes?.find((e=>"trigger"===e.label));s&&await _("workflow:register",{triggerBlock:s,workflowId:t.id},"background"),_("workflow:added",{workflowId:t.id,teamId:t.teamId,source:"team"},"background")})),n.on("check-team-workflow",(async({teamId:e,workflowId:r})=>{const{teamWorkflows:t}=await b().storage.local.get("teamWorkflows"),n=Boolean(t?.[e]?.[r]);window.dispatchEvent(new CustomEvent("__automa-team-workflow__",{detail:{exists:n}}))}))}catch(e){console.error(e)}}))})()})();