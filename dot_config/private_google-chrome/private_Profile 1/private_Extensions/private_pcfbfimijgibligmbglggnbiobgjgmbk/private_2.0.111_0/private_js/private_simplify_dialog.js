/* Copyright (c) 2022 Synology Inc. All rights reserved. */

Ext.ns("SYNO.SDS.NoteStationClipper");SYNO.SDS.Session={baseUrl:location.origin+"/"};var query_string=Ext.urlDecode(location.search.substr(1));var messageHandler=function(a){switch(a.data.action){case"set_tinymce_content":tinymce.activeEditor.setContent(a.data.content);tinymce.activeEditor.dom.doc.body.className+="syno-nsc-simplify-reader ";break;case"get_tinymce_content":window.top.window.postMessage({action:"save_tinymce_content",data:a.data.data,baseUrl:SYNO.SDS.Session.baseUrl,content:tinymce.activeEditor.getContent()},query_string.origin);break;default:break}return};window.addEventListener("message",messageHandler);Ext.define("SYNO.SDS.NoteStationClipper.SimplifyDialog",{extend:"SYNO.SDS.BaseWindow",constructor:function(a){this.callParent([this.fillConfig(a)])},fillConfig:function(a){var b=Ext.apply({cls:"syno-nsc-simplify-dialog",maximized:true,maximizable:false,minimizable:false,closable:false,resizable:false,draggable:false,layout:"fit",items:[{xtype:"syno_panel",layout:"anchor",items:[this.syno_editor=new SYNO.ux.TinyMCE({owner:this,autoEditorResize:true,anchor:"100% 100%",mceConfig:{content_css:SYNO.SDS.Session.baseUrl+"css/simplify_reader.css",plugins:["syno_reader_style"],syno_base_url:SYNO.SDS.Session.baseUrl+"modules/TinyMCE/js/tinymce",editorPanel:this,module:this,owner:this,height:500,convert_url:false,readonly:true,forced_root_block:"div",mode:"textareas",toolbar:[],statusbar:false,menubar:false,extended_valid_elements:"img[class|src|border=0|alt|title|hspace|vspace|width|height|align|onmouseover|onmouseout|name|ref|adjust],a[href|target=_blank]"}})]}]},a);return b}});SimplifyDialog=new SYNO.SDS.NoteStationClipper.SimplifyDialog({}).show();